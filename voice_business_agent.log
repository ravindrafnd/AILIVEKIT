2024-12-28 22:43:44,127 - livekit.agents - INFO - shutting down worker
2024-12-28 22:44:10,349 - watchfiles.main - WARNING - process already dead, exit code: 1
2024-12-28 22:45:01,028 - watchfiles.main - WARNING - process already dead, exit code: 1
2024-12-28 22:47:31,878 - watchfiles.main - WARNING - process already dead, exit code: 1
2024-12-28 22:47:33,012 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 22:47:33,022 - livekit.agents - INFO - starting worker
2024-12-28 22:47:33,560 - livekit.agents - INFO - registered worker
2024-12-28 22:48:13,535 - livekit.agents - INFO - received job request
2024-12-28 22:48:13,537 - livekit.agents - INFO - received job request
2024-12-28 22:48:14,726 - livekit.agents - INFO - initializing job process
2024-12-28 22:48:14,726 - livekit.agents - INFO - job process initialized
2024-12-28 22:48:14,726 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 22:48:14,726 - livekit.agents - INFO - initializing job process
2024-12-28 22:48:14,726 - livekit.agents - INFO - job process initialized
2024-12-28 22:48:14,726 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 22:48:14,845 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2467
2024-12-28 22:48:14,845 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2467
2024-12-28 22:48:14,845 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 22:48:14,846 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 22:48:14,845 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 22:48:14,846 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 22:48:14,846 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 22:48:14,846 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 22:48:15,168 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 22:48:15,168 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 22:48:15,168 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 22:48:15,168 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 22:48:15,168 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 22:48:15,168 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 22:48:15,168 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 22:48:15,168 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 22:48:15,207 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 22:48:15,207 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 22:48:15,207 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 22:48:15,207 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 22:48:15,207 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 22:48:15,207 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 22:48:15,207 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 22:48:15,207 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 22:48:15,323 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 22:48:15,323 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 22:48:15,488 - voice-business-agent - INFO - Participant connected: voice_assistant_user_2261
2024-12-28 22:48:15,488 - voice-business-agent - INFO - Participant connected: voice_assistant_user_2261
2024-12-28 22:48:15,538 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 22:48:15,538 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 22:48:15,597 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 22:48:15,599 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-28 22:48:15,622 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10de144d0>
2024-12-28 22:48:15,622 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10acf2720> server_hostname='api.openai.com' timeout=10.0
2024-12-28 22:48:15,641 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10ab3d5d0>
2024-12-28 22:48:15,641 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 22:48:15,642 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 22:48:15,642 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 22:48:15,642 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 22:48:15,642 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 22:48:16,793 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:18:16 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'808'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-6rv56'), (b'x-envoy-upstream-service-time', b'792'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_5766898128032a4938ae5857d3007311'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=kxCmoRefeONTLEClDiitgfO7FWuerZmlw4cW8_IfG.Y-1735406296-1.0.1.1-6rOaAZGRC9ki6mSWlOPOCArFAPqRJmvEAnxJoonprANwlm3YgOjAFy0MQnzQEXoQa4FcZbJKrmpPdTJa5xBgbw; path=/; expires=Sat, 28-Dec-24 17:48:16 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=xuseGQmmEc6uEm6TJSMsW3wl0XeLgaDaScd.Q9x4uQc-1735406296805-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f933563e9ea54a2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 22:48:16,796 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 22:48:16,796 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 22:48:16,796 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 22:48:17,076 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 22:48:17,076 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 22:48:17,636 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 22:48:17,637 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 22:48:17,637 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 22:48:19,081 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:48:19,081 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:48:19,082 - livekit.agents.pipeline - ERROR - Error in _main_task
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 665, in _main_task
    await self._play_speech(speech)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 842, in _play_speech
    self.emit("agent_speech_committed", msg)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
TypeError: entrypoint.<locals>.handle_agent_speech() missing 1 required positional argument: 'agent'
2024-12-28 22:48:19,082 - livekit.agents.pipeline - ERROR - Error in _main_task
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 665, in _main_task
    await self._play_speech(speech)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 842, in _play_speech
    self.emit("agent_speech_committed", msg)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
TypeError: entrypoint.<locals>.handle_agent_speech() missing 1 required positional argument: 'agent'
2024-12-28 22:48:21,038 - livekit.agents - WARNING - assignment for job AJ_5EkXnFrCkaQN timed out
2024-12-28 22:48:21,039 - livekit.agents - ERROR - job_request_fnc failed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 490, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 681, in _on_accept
    await asyncio.wait_for(wait_assignment, ASSIGNMENT_TIMEOUT)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 492, in wait_for
    raise exceptions.TimeoutError() from exc
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 715, in _job_request_task
    await self._opts.request_fnc(job_req)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 68, in _default_request_fnc
    await ctx.accept()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/job.py", line 355, in accept
    await self._on_accept(accept_arguments)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 687, in _on_accept
    raise AssignmentTimeoutError()
livekit.agents._exceptions.AssignmentTimeoutError
2024-12-28 22:48:24,286 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 22:48:24,286 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 22:48:25,641 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 22:48:25,641 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 22:48:25,942 - livekit.agents.pipeline - DEBUG - interrupt threshold is not met
2024-12-28 22:48:25,942 - livekit.agents.pipeline - DEBUG - interrupt threshold is not met
2024-12-28 22:50:28,998 - livekit.agents - INFO - shutting down worker
2024-12-28 22:50:28,999 - livekit.agents - DEBUG - shutting down job task
2024-12-28 22:50:28,999 - livekit.agents - DEBUG - shutting down job task
2024-12-28 22:50:28,999 - livekit.agents - INFO - process exiting
2024-12-28 22:50:29,037 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-28 22:50:29,037 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-28 22:50:29,038 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-28 22:50:29,038 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-28 22:50:30,470 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 22:50:30,488 - livekit.agents - INFO - starting worker
2024-12-28 22:50:30,513 - livekit.agents - DEV - reloading job
2024-12-28 22:50:30,673 - livekit.agents - INFO - registered worker
2024-12-28 22:50:31,457 - livekit.agents - INFO - initializing job process
2024-12-28 22:50:31,458 - livekit.agents - INFO - job process initialized
2024-12-28 22:50:31,458 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 22:50:31,457 - livekit.agents - INFO - initializing job process
2024-12-28 22:50:31,458 - livekit.agents - INFO - job process initialized
2024-12-28 22:50:31,458 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 22:50:31,509 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-28 22:50:31,590 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2467
2024-12-28 22:50:31,590 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2467
2024-12-28 22:50:31,591 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 22:50:31,591 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 22:50:31,591 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 22:50:31,591 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 22:50:31,592 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 22:50:31,592 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 22:50:31,647 - livekit.agents - INFO - registered worker
2024-12-28 22:50:31,839 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 22:50:31,840 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 22:50:31,840 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 22:50:31,840 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 22:50:31,839 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 22:50:31,840 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 22:50:31,840 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 22:50:31,840 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 22:50:31,877 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 22:50:31,877 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 22:50:31,877 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 22:50:31,877 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 22:50:31,877 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 22:50:31,877 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 22:50:31,877 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 22:50:31,877 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 22:50:31,981 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 22:50:31,981 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 22:50:32,192 - voice-business-agent - INFO - Participant connected: voice_assistant_user_2261
2024-12-28 22:50:32,192 - voice-business-agent - INFO - Participant connected: voice_assistant_user_2261
2024-12-28 22:50:32,242 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 22:50:32,242 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 22:50:32,294 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 22:50:32,295 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-28 22:50:32,335 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11f11c1d0>
2024-12-28 22:50:32,335 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11f2e2720> server_hostname='api.openai.com' timeout=10.0
2024-12-28 22:50:32,359 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11f11cb50>
2024-12-28 22:50:32,360 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 22:50:32,360 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 22:50:32,360 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 22:50:32,360 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 22:50:32,362 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 22:50:33,260 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:20:33 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'532'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-r7wm5'), (b'x-envoy-upstream-service-time', b'520'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_bd8c088d3cd1f5526ba6a26e20bcac64'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=6GN6FNy01CJog9Bw5ScvzCs_3dhr_q2HM37knNC_rmE-1735406433-1.0.1.1-.lYROnECbwINvxO7vqzJ533FROrO8xzG6_nplZoC6yCocDWvUC.7C4UKp.B.Ykvkcd9ssoJfIbUmo9DHbEL3ZQ; path=/; expires=Sat, 28-Dec-24 17:50:33 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=bS_z5zfYBgSHb1.9kCR5zmB9OYOI5FwcjBBSbcjVEeE-1735406433271-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9338ba6f9e5470-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 22:50:33,261 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 22:50:33,261 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 22:50:33,261 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 22:50:33,509 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 22:50:33,509 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 22:50:33,997 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 22:50:33,997 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 22:50:33,998 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 22:50:35,536 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:50:35,536 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:50:35,536 - livekit.agents.pipeline - ERROR - Error in _main_task
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 665, in _main_task
    await self._play_speech(speech)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 842, in _play_speech
    self.emit("agent_speech_committed", msg)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
TypeError: entrypoint.<locals>.handle_agent_speech() missing 1 required positional argument: 'agent'
2024-12-28 22:50:35,536 - livekit.agents.pipeline - ERROR - Error in _main_task
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 665, in _main_task
    await self._play_speech(speech)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 842, in _play_speech
    self.emit("agent_speech_committed", msg)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
TypeError: entrypoint.<locals>.handle_agent_speech() missing 1 required positional argument: 'agent'
2024-12-28 22:50:37,323 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 22:50:37,323 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 22:50:38,743 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 22:50:38,743 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 22:50:38,819 - livekit.agents.pipeline - DEBUG - interrupt threshold is not met
2024-12-28 22:50:38,819 - livekit.agents.pipeline - DEBUG - interrupt threshold is not met
2024-12-28 22:52:09,593 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-28 22:52:09,595 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-28 22:52:09,593 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-28 22:52:09,595 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-28 22:52:09,596 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-28 22:52:09,598 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-28 22:52:09,596 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-28 22:52:09,598 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-28 22:52:09,599 - livekit.agents - DEBUG - shutting down job task
2024-12-28 22:52:09,600 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-28 22:52:09,600 - livekit.agents - INFO - process exiting
2024-12-28 22:52:09,599 - livekit.agents - DEBUG - shutting down job task
2024-12-28 22:52:09,600 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-28 22:52:09,761 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-28 22:52:09,911 - livekit.agents - INFO - registered worker
2024-12-28 22:54:06,570 - livekit.agents - INFO - shutting down worker
2024-12-28 22:54:07,687 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 22:54:07,703 - livekit.agents - INFO - starting worker
2024-12-28 22:54:07,872 - livekit.agents - INFO - registered worker
2024-12-28 22:54:53,425 - livekit.agents - INFO - shutting down worker
2024-12-28 22:54:54,532 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 22:54:54,543 - livekit.agents - INFO - starting worker
2024-12-28 22:54:54,843 - livekit.agents - INFO - registered worker
2024-12-28 22:54:59,258 - livekit.agents - INFO - received job request
2024-12-28 22:54:59,260 - livekit.agents - INFO - received job request
2024-12-28 22:55:00,184 - livekit.agents - INFO - initializing job process
2024-12-28 22:55:00,185 - livekit.agents - INFO - job process initialized
2024-12-28 22:55:00,185 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 22:55:00,184 - livekit.agents - INFO - initializing job process
2024-12-28 22:55:00,185 - livekit.agents - INFO - job process initialized
2024-12-28 22:55:00,185 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 22:55:00,311 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6217
2024-12-28 22:55:00,311 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6217
2024-12-28 22:55:00,311 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 22:55:00,311 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 22:55:00,311 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 22:55:00,311 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 22:55:00,313 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 22:55:00,313 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 22:55:00,537 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 22:55:00,537 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 22:55:00,537 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 22:55:00,537 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 22:55:00,537 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 22:55:00,537 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 22:55:00,537 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 22:55:00,537 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 22:55:00,569 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 22:55:00,569 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 22:55:00,569 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 22:55:00,569 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 22:55:00,569 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 22:55:00,569 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 22:55:00,569 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 22:55:00,569 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 22:55:00,672 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 22:55:00,672 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 22:55:00,882 - voice-business-agent - INFO - Participant connected: voice_assistant_user_844
2024-12-28 22:55:00,882 - voice-business-agent - INFO - Participant connected: voice_assistant_user_844
2024-12-28 22:55:00,931 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 22:55:00,931 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 22:55:01,004 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 22:55:01,005 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-28 22:55:01,032 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x134b35d50>
2024-12-28 22:55:01,032 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1202b6720> server_hostname='api.openai.com' timeout=10.0
2024-12-28 22:55:01,049 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1200e4b50>
2024-12-28 22:55:01,049 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 22:55:01,049 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 22:55:01,049 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 22:55:01,050 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 22:55:01,050 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 22:55:04,371 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:25:04 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'2939'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-cj6fk'), (b'x-envoy-upstream-service-time', b'697'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a21fdafebefac8c74f03e185153fdce9'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=_zSeCpRCsEt8IcY18p7DMy068uXEB08ozc4btzKE9cc-1735406704-1.0.1.1-GYXlDT97sqSO.Np.wmYda83gru5SSNtU2JDSiRpZiTmxiQI5Q3HoXSDSl6Ceumnm0fEERtnb3jBZdHyR5OrcdQ; path=/; expires=Sat, 28-Dec-24 17:55:04 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=D.K3B3DgW42R3fUD4SVFDu8JiiwIHWntrqlfufav2AY-1735406704381-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f933f49be2791b0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 22:55:04,373 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 22:55:04,373 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 22:55:04,374 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 22:55:04,914 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 22:55:04,914 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 22:55:05,806 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 22:55:05,807 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 22:55:05,807 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 22:55:06,761 - livekit.agents - WARNING - assignment for job AJ_xVHxLJj5zqg4 timed out
2024-12-28 22:55:06,762 - livekit.agents - ERROR - job_request_fnc failed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 490, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 681, in _on_accept
    await asyncio.wait_for(wait_assignment, ASSIGNMENT_TIMEOUT)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 492, in wait_for
    raise exceptions.TimeoutError() from exc
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 715, in _job_request_task
    await self._opts.request_fnc(job_req)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 68, in _default_request_fnc
    await ctx.accept()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/job.py", line 355, in accept
    await self._on_accept(accept_arguments)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 687, in _on_accept
    raise AssignmentTimeoutError()
livekit.agents._exceptions.AssignmentTimeoutError
2024-12-28 22:55:07,188 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:55:07,188 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:55:07,189 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-28 22:55:07,190 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 22:55:07,189 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-28 22:55:07,190 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 22:55:07,190 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-39' coro=<entrypoint.<locals>.handle_agent_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:132> exception=TypeError("Queue.get() missing 1 required positional argument: 'self'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 136, in handle_agent_speech
    customer_number = await agent.queue.get()
                            ^^^^^^^^^^^^^^^^^
TypeError: Queue.get() missing 1 required positional argument: 'self'
2024-12-28 22:55:07,190 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-39' coro=<entrypoint.<locals>.handle_agent_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:132> exception=TypeError("Queue.get() missing 1 required positional argument: 'self'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 136, in handle_agent_speech
    customer_number = await agent.queue.get()
                            ^^^^^^^^^^^^^^^^^
TypeError: Queue.get() missing 1 required positional argument: 'self'
2024-12-28 22:55:10,611 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 22:55:10,611 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 22:55:10,951 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 22:55:10,951 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 22:55:10,960 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 22:55:10,961 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-28 22:55:10,980 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x134b7f650>
2024-12-28 22:55:10,980 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1202b6690> server_hostname='api.openai.com' timeout=15.0
2024-12-28 22:55:10,997 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x134b7f710>
2024-12-28 22:55:10,998 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 22:55:10,999 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 22:55:10,999 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 22:55:11,000 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 22:55:11,000 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 22:55:11,654 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:25:11 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'335'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29917'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'166ms'), (b'x-request-id', b'req_cf3016aa7bdeff51e4030970557d866a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=tQSXWOrOZW0uvebUODydQFFo5F._elUMd7tdxQHu4uU-1735406711-1.0.1.1-aSwaJ0SaahHjCL.kHuOnzLvs_YiU9MJkTUuq1XLM7MX6sVEGn3RKRHBdAtm6Aj5mUxOnhTz3fJImNcsFYiwWGg; path=/; expires=Sat, 28-Dec-24 17:55:11 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=eJdR5awSqWsfVcs84c0qTSBH2Oa.46aQfb.QVI0vkFE-1735406711666-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f933f87ead254e3-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 22:55:11,655 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-28 22:55:11,656 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-28 22:55:11,656 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 22:55:11,788 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, I can help you with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 22:55:11,789 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 22:55:11,790 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 22:55:11,790 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 22:55:11,790 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 22:55:11,790 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 22:55:12,135 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 22:55:12,135 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 22:55:12,136 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 22:55:13,188 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:25:13 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1085'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-lsdsg'), (b'x-envoy-upstream-service-time', b'1062'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_4362046596f0a4718c5c0b5ca3fb63d2'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f933f8cd88691b0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 22:55:13,188 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 22:55:13,188 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 22:55:13,188 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 22:55:13,461 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 22:55:13,461 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 22:55:14,001 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 22:55:14,001 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 22:55:14,002 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 22:55:14,004 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide me with your mobile number so I can proceed with connecting you to an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 22:55:14,005 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 22:55:14,006 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 22:55:14,006 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 22:55:14,006 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 22:55:14,007 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 22:55:14,966 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-28 22:55:14,968 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-28 22:55:14,968 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to agent.
2024-12-28 22:55:14,968 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 22:55:14,966 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-28 22:55:14,968 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-28 22:55:14,968 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to agent.
2024-12-28 22:55:14,968 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 22:55:14,970 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I couldn't detect a valid phone number. Please repeat.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 22:55:14,971 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-28 22:55:14,988 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x134b58550>
2024-12-28 22:55:14,988 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1202b6720> server_hostname='api.openai.com' timeout=10.0
2024-12-28 22:55:15,003 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x134b99610>
2024-12-28 22:55:15,004 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 22:55:15,004 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 22:55:15,004 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 22:55:15,005 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 22:55:15,005 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 22:55:15,192 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:25:15 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'873'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-29mk8'), (b'x-envoy-upstream-service-time', b'847'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_7ad54ea7cf2468928edfb7f08800c7e0'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f933f9ab8c791b0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 22:55:15,192 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 22:55:15,192 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 22:55:15,193 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 22:55:16,224 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:25:16 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'917'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-glcrg'), (b'x-envoy-upstream-service-time', b'900'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_5ffa67c34852a785d8d7f3e18342823a'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f933fa0ed1591ca-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 22:55:16,224 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 22:55:16,225 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 22:55:16,226 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 22:55:16,892 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 22:55:16,893 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 22:55:16,894 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 22:55:17,440 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 22:55:17,440 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 22:55:17,440 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 22:55:21,774 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:55:21,775 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. Could you please provide me with your mobile number so I can proceed with connecting you to an agent?
2024-12-28 22:55:21,774 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:55:21,775 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 22:55:21,775 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. Could you please provide me with your mobile number so I can proceed with connecting you to an agent?
2024-12-28 22:55:21,775 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 22:55:21,775 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-74' coro=<entrypoint.<locals>.handle_agent_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:132> exception=TypeError("Queue.get() missing 1 required positional argument: 'self'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 136, in handle_agent_speech
    customer_number = await agent.queue.get()
                            ^^^^^^^^^^^^^^^^^
TypeError: Queue.get() missing 1 required positional argument: 'self'
2024-12-28 22:55:21,775 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-74' coro=<entrypoint.<locals>.handle_agent_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:132> exception=TypeError("Queue.get() missing 1 required positional argument: 'self'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 136, in handle_agent_speech
    customer_number = await agent.queue.get()
                            ^^^^^^^^^^^^^^^^^
TypeError: Queue.get() missing 1 required positional argument: 'self'
2024-12-28 22:55:21,776 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 22:55:21,776 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 22:55:22,275 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 22:55:22,275 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 22:55:22,278 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:55:22,278 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 22:55:22,278 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:55:22,278 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 22:55:22,874 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 22:55:22,874 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 22:55:23,375 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 22:55:23,375 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 22:55:23,381 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can proceed with connecting you to an agent?'}, {'role': 'assistant', 'content': " I couldn't..."}, {'role': 'user', 'content': '9 3'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 22:55:23,383 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 22:55:23,384 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 22:55:23,384 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 22:55:23,385 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 22:55:23,385 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 22:55:23,967 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 22:55:23,967 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 22:55:23,969 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-28 22:55:23,969 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 22:55:23,970 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:55:23,970 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:55:23,970 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 22:55:26,125 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 22:55:26,125 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 22:55:26,659 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 22:55:26,659 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 22:55:26,664 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can proceed with connecting you to an agent?'}, {'role': 'assistant', 'content': " I couldn't..."}, {'role': 'user', 'content': '9 3 13571, double 5.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 22:55:26,665 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-28 22:55:26,722 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x134b9b610>
2024-12-28 22:55:26,722 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1202b6690> server_hostname='api.openai.com' timeout=15.0
2024-12-28 22:55:26,738 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x134b9bf50>
2024-12-28 22:55:26,738 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 22:55:26,738 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 22:55:26,739 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 22:55:26,739 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 22:55:26,739 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 22:55:26,786 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 22:55:26,786 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 22:55:26,787 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 22:55:26,787 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 22:55:26,787 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 22:55:26,787 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 22:55:26,791 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can proceed with connecting you to an agent?'}, {'role': 'assistant', 'content': " I couldn't..."}, {'role': 'user', 'content': '9 3 13571, double 5. 4'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 22:55:26,792 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-28 22:55:26,792 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 22:55:26,792 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-28 22:55:26,793 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:55:26,793 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:55:26,793 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 22:55:26,864 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x134b7cc10>
2024-12-28 22:55:26,865 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1202b6690> server_hostname='api.openai.com' timeout=15.0
2024-12-28 22:55:26,956 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x134bb4bd0>
2024-12-28 22:55:26,957 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 22:55:26,957 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 22:55:26,957 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 22:55:26,957 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 22:55:26,958 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 22:55:28,130 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:25:28 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'319'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29871'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'258ms'), (b'x-request-id', b'req_e7fbb9c3acdd12f0bce05ee3f016aa34'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f933febabf15520-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 22:55:28,132 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-28 22:55:28,132 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-28 22:55:28,133 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 22:55:28,430 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for providing your number.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 22:55:28,432 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 22:55:28,432 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 22:55:28,433 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 22:55:28,433 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 22:55:28,433 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 22:55:28,731 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 22:55:28,733 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 22:55:28,733 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 22:55:29,425 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:25:29 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'602'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-d5cmp'), (b'x-envoy-upstream-service-time', b'538'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_e2b6a7c07e93fd80bd902f47066180dd'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f933ff4de0591b0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 22:55:29,428 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 22:55:29,428 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 22:55:29,428 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 22:55:29,757 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 22:55:29,757 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 22:55:30,692 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 22:55:30,693 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 22:55:30,694 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 22:55:30,696 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Just to confirm, is your mobile number 93135715554?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 22:55:30,697 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 22:55:30,698 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 22:55:30,698 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 22:55:30,698 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 22:55:30,698 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 22:55:31,546 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:25:31 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'512'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-j6r7n'), (b'x-envoy-upstream-service-time', b'495'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_0eab918ac0a71b3801d2516d22535f74'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f93400308cc91b0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 22:55:31,548 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 22:55:31,550 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 22:55:31,551 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 22:55:31,620 - voice-business-agent - INFO - User speech received: 9 3 13571, double 5. 4
2024-12-28 22:55:31,620 - voice-business-agent - INFO - User speech received: 9 3 13571, double 5. 4
2024-12-28 22:55:31,620 - voice-business-agent - DEBUG - Validating phone number from text: 9 3 13571, double 5. 4
2024-12-28 22:55:31,620 - voice-business-agent - INFO - User speech received: 9 3 13571, double 5. 4
2024-12-28 22:55:31,620 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 22:55:31,620 - voice-business-agent - INFO - User speech received: 9 3 13571, double 5. 4
2024-12-28 22:55:31,620 - voice-business-agent - DEBUG - Validating phone number from text: 9 3 13571, double 5. 4
2024-12-28 22:55:31,620 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 22:55:31,621 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I couldn't detect a valid phone number. Please repeat.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 22:55:31,623 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 22:55:31,624 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 22:55:31,624 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 22:55:31,625 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 22:55:31,625 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 22:55:32,911 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:25:32 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'969'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-rdchg'), (b'x-envoy-upstream-service-time', b'958'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b699b9e73fb0962bfd68b04132a9783d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f934008c87491ca-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 22:55:32,912 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 22:55:32,912 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 22:55:32,912 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 22:55:32,953 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 22:55:32,953 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 22:55:32,954 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 22:55:33,776 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 22:55:33,776 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 22:55:33,777 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 22:55:36,995 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:55:36,995 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:55:36,995 - voice-business-agent - INFO - User speech received:  Thank you for providing your number. Just to confirm, is your mobile number 93135715554?
2024-12-28 22:55:36,995 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 22:55:36,995 - voice-business-agent - INFO - User speech received:  Thank you for providing your number. Just to confirm, is your mobile number 93135715554?
2024-12-28 22:55:36,995 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 22:55:36,996 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-138' coro=<entrypoint.<locals>.handle_agent_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:132> exception=TypeError("Queue.get() missing 1 required positional argument: 'self'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 136, in handle_agent_speech
    customer_number = await agent.queue.get()
                            ^^^^^^^^^^^^^^^^^
TypeError: Queue.get() missing 1 required positional argument: 'self'
2024-12-28 22:55:36,996 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-138' coro=<entrypoint.<locals>.handle_agent_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:132> exception=TypeError("Queue.get() missing 1 required positional argument: 'self'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 136, in handle_agent_speech
    customer_number = await agent.queue.get()
                            ^^^^^^^^^^^^^^^^^
TypeError: Queue.get() missing 1 required positional argument: 'self'
2024-12-28 22:55:36,997 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 22:55:36,997 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 22:55:40,224 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:55:40,225 - voice-business-agent - INFO - User speech received:  I couldn't detect a valid phone number. Please repeat.
2024-12-28 22:55:40,224 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:55:40,225 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 22:55:40,225 - voice-business-agent - INFO - User speech received:  I couldn't detect a valid phone number. Please repeat.
2024-12-28 22:55:40,225 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 22:55:40,225 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-147' coro=<entrypoint.<locals>.handle_agent_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:132> exception=TypeError("Queue.get() missing 1 required positional argument: 'self'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 136, in handle_agent_speech
    customer_number = await agent.queue.get()
                            ^^^^^^^^^^^^^^^^^
TypeError: Queue.get() missing 1 required positional argument: 'self'
2024-12-28 22:55:40,225 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-147' coro=<entrypoint.<locals>.handle_agent_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:132> exception=TypeError("Queue.get() missing 1 required positional argument: 'self'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 136, in handle_agent_speech
    customer_number = await agent.queue.get()
                            ^^^^^^^^^^^^^^^^^
TypeError: Queue.get() missing 1 required positional argument: 'self'
2024-12-28 22:55:45,393 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 22:55:45,393 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 22:55:45,429 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 22:55:45,429 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 22:55:45,806 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 22:55:45,806 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 22:55:45,816 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can proceed with connecting you to an agent?'}, {'role': 'assistant', 'content': " I couldn't..."}, {'role': 'user', 'content': '9 3 13571, double 5. 4'}, {'role': 'assistant', 'content': ' Thank you for providing your number. Just to confirm, is your mobile number 93135715554?'}, {'role': 'assistant', 'content': " I couldn't detect a valid phone number. Please repeat."}, {'role': 'user', 'content': "It's 93135 7155 4."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 22:55:45,818 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 22:55:45,819 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 22:55:45,819 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 22:55:45,820 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 22:55:45,820 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 22:55:46,511 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:25:46 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'375'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29828'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'344ms'), (b'x-request-id', b'req_20b2d127c8e1c50675bf876ff7300bb6'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9340618f2c5520-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 22:55:46,512 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-28 22:55:46,512 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-28 22:55:46,512 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 22:55:46,878 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you! I have your number as 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 22:55:46,879 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 22:55:46,880 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 22:55:46,880 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 22:55:46,880 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 22:55:46,880 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 22:55:47,140 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 22:55:47,140 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 22:55:47,141 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 22:55:47,839 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:25:47 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'577'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-vm4m7'), (b'x-envoy-upstream-service-time', b'539'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_7abde2deca992956efcf380bea26097f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9340682b6091b0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 22:55:47,840 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 22:55:47,840 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 22:55:47,841 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 22:55:48,118 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 22:55:48,118 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 22:55:48,945 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 22:55:48,946 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 22:55:48,947 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 22:55:48,951 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I will now connect you to an agent.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 22:55:48,953 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 22:55:48,954 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 22:55:48,954 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 22:55:48,954 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 22:55:48,955 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 22:55:49,642 - voice-business-agent - INFO - User speech received: It's 93135 7155 4.
2024-12-28 22:55:49,643 - voice-business-agent - INFO - User speech received: It's 93135 7155 4.
2024-12-28 22:55:49,643 - voice-business-agent - DEBUG - Validating phone number from text: It's 93135 7155 4.
2024-12-28 22:55:49,643 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-28 22:55:49,642 - voice-business-agent - INFO - User speech received: It's 93135 7155 4.
2024-12-28 22:55:49,643 - voice-business-agent - INFO - User speech received: It's 93135 7155 4.
2024-12-28 22:55:49,643 - voice-business-agent - DEBUG - Validating phone number from text: It's 93135 7155 4.
2024-12-28 22:55:49,643 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-28 22:55:49,643 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-172' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:114> exception=TypeError("Queue.put() missing 1 required positional argument: 'item'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 120, in process_user_speech
    await agent.queue.put(phone_number)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Queue.put() missing 1 required positional argument: 'item'
2024-12-28 22:55:49,643 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-172' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:114> exception=TypeError("Queue.put() missing 1 required positional argument: 'item'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 120, in process_user_speech
    await agent.queue.put(phone_number)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Queue.put() missing 1 required positional argument: 'item'
2024-12-28 22:55:50,402 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:25:50 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'573'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-82fjm'), (b'x-envoy-upstream-service-time', b'531'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d27e0c3d6d27459515c5ba5a9ff299ed'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9340751d1a91b0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 22:55:50,403 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 22:55:50,404 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 22:55:50,404 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 22:55:55,653 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 22:55:55,654 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 22:55:55,654 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 22:55:55,656 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 22:55:55,657 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 22:55:55,657 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 22:55:55,657 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 22:55:55,658 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 22:55:55,658 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 22:55:56,541 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:25:56 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'482'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-q5m6g'), (b'x-envoy-upstream-service-time', b'471'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f12595954a9a170eff688b1668ba5fb4'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f93409f0bee91b0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 22:55:56,542 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 22:55:56,543 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 22:55:56,543 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 22:55:57,089 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 22:55:57,089 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 22:55:57,090 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 22:55:57,577 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:55:57,577 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 22:55:57,580 - voice-business-agent - INFO - User speech received:  Thank you! I have your number as 9313571554. I will now connect you to an agent. Please hold on.
2024-12-28 22:55:57,580 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 22:55:57,580 - voice-business-agent - INFO - User speech received:  Thank you! I have your number as 9313571554. I will now connect you to an agent. Please hold on.
2024-12-28 22:55:57,580 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 22:55:57,580 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-176' coro=<entrypoint.<locals>.handle_agent_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:132> exception=TypeError("Queue.get() missing 1 required positional argument: 'self'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 136, in handle_agent_speech
    customer_number = await agent.queue.get()
                            ^^^^^^^^^^^^^^^^^
TypeError: Queue.get() missing 1 required positional argument: 'self'
2024-12-28 22:55:57,580 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-176' coro=<entrypoint.<locals>.handle_agent_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:132> exception=TypeError("Queue.get() missing 1 required positional argument: 'self'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 136, in handle_agent_speech
    customer_number = await agent.queue.get()
                            ^^^^^^^^^^^^^^^^^
TypeError: Queue.get() missing 1 required positional argument: 'self'
2024-12-28 23:10:21,205 - livekit.agents - INFO - shutting down worker
2024-12-28 23:10:21,206 - livekit.agents - DEBUG - shutting down job task
2024-12-28 23:10:21,206 - livekit.agents - DEBUG - shutting down job task
2024-12-28 23:10:21,207 - livekit.agents - INFO - process exiting
2024-12-28 23:10:21,251 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-28 23:10:21,251 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-28 23:10:21,252 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-28 23:10:21,252 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-28 23:10:22,520 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:10:22,528 - livekit.agents - INFO - starting worker
2024-12-28 23:10:22,545 - livekit.agents - DEV - reloading job
2024-12-28 23:10:22,746 - livekit.agents - INFO - registered worker
2024-12-28 23:10:23,372 - livekit.agents - INFO - initializing job process
2024-12-28 23:10:23,372 - livekit.agents - INFO - job process initialized
2024-12-28 23:10:23,372 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:10:23,372 - livekit.agents - INFO - initializing job process
2024-12-28 23:10:23,372 - livekit.agents - INFO - job process initialized
2024-12-28 23:10:23,372 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:10:23,447 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-28 23:10:23,502 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6217
2024-12-28 23:10:23,502 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6217
2024-12-28 23:10:23,503 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 23:10:23,503 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 23:10:23,503 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 23:10:23,503 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 23:10:23,504 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 23:10:23,504 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 23:10:23,599 - livekit.agents - INFO - registered worker
2024-12-28 23:10:23,720 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 23:10:23,721 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 23:10:23,721 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 23:10:23,721 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 23:10:23,720 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 23:10:23,721 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 23:10:23,721 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 23:10:23,721 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 23:10:23,754 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 23:10:23,754 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 23:10:23,754 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 23:10:23,754 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 23:10:23,755 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 23:10:23,754 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 23:10:23,754 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 23:10:23,755 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 23:10:23,856 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 23:10:23,856 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 23:10:24,066 - voice-business-agent - INFO - Participant connected: voice_assistant_user_844
2024-12-28 23:10:24,066 - voice-business-agent - INFO - Participant connected: voice_assistant_user_844
2024-12-28 23:10:24,118 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 23:10:24,118 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 23:10:24,177 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:10:24,178 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-28 23:10:25,253 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11a9f0110>
2024-12-28 23:10:25,253 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11b852720> server_hostname='api.openai.com' timeout=10.0
2024-12-28 23:10:25,268 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11c079490>
2024-12-28 23:10:25,269 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:10:25,270 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:10:25,270 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:10:25,270 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:10:25,271 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:10:26,766 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:40:26 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1189'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-v95zh'), (b'x-envoy-upstream-service-time', b'1173'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_68e1fdcde764a2a84eed002c81cf8878'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=lkpK6qnPY.czJ9rDqgADe9nb0f8LlvZEKGZBzhMMk6U-1735407626-1.0.1.1-dXktnnH54dxltm1Eo1uFmdGe7udGlk1BQpmi1G0imgyzAlygDsKYuPIHyNmZA3B0fkGLbZkbon1RCReIVDjkiw; path=/; expires=Sat, 28-Dec-24 18:10:26 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=8Sblj5y9WjOjwwerJaq00vMIBqLL0IdMz0.AKOS79ec-1735407626779-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9355da1d475525-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:10:26,769 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:10:26,769 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:10:26,770 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:10:27,026 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:10:27,026 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:10:27,545 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:10:27,545 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:10:27,545 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:10:29,009 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:10:29,009 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:10:29,010 - livekit.agents.pipeline - ERROR - Error in _main_task
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 665, in _main_task
    await self._play_speech(speech)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 842, in _play_speech
    self.emit("agent_speech_committed", msg)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
TypeError: entrypoint.<locals>.handle_agent_speech() missing 1 required positional argument: 'msg'
2024-12-28 23:10:29,010 - livekit.agents.pipeline - ERROR - Error in _main_task
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 665, in _main_task
    await self._play_speech(speech)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 842, in _play_speech
    self.emit("agent_speech_committed", msg)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
TypeError: entrypoint.<locals>.handle_agent_speech() missing 1 required positional argument: 'msg'
2024-12-28 23:10:31,735 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 23:10:31,735 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 23:10:37,212 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:10:37,213 - livekit.agents.pipeline - DEBUG - interrupt threshold is not met
2024-12-28 23:10:37,212 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:10:37,213 - livekit.agents.pipeline - DEBUG - interrupt threshold is not met
2024-12-28 23:15:14,835 - livekit.agents - INFO - shutting down worker
2024-12-28 23:15:14,838 - livekit.agents - DEBUG - shutting down job task
2024-12-28 23:15:14,838 - livekit.agents - INFO - process exiting
2024-12-28 23:15:14,838 - livekit.agents - DEBUG - shutting down job task
2024-12-28 23:15:14,882 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-28 23:15:14,882 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-28 23:15:14,883 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-28 23:15:14,883 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-28 23:15:16,232 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:15:16,263 - livekit.agents - INFO - starting worker
2024-12-28 23:15:16,295 - livekit.agents - DEV - reloading job
2024-12-28 23:15:16,448 - livekit.agents - INFO - registered worker
2024-12-28 23:15:17,174 - livekit.agents - INFO - initializing job process
2024-12-28 23:15:17,174 - livekit.agents - INFO - initializing job process
2024-12-28 23:15:17,175 - livekit.agents - INFO - job process initialized
2024-12-28 23:15:17,175 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:15:17,175 - livekit.agents - INFO - job process initialized
2024-12-28 23:15:17,175 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:15:17,215 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-28 23:15:17,284 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6217
2024-12-28 23:15:17,284 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6217
2024-12-28 23:15:17,285 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 23:15:17,285 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 23:15:17,285 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 23:15:17,285 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 23:15:17,286 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 23:15:17,286 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 23:15:17,369 - livekit.agents - INFO - registered worker
2024-12-28 23:15:17,516 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 23:15:17,517 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 23:15:17,516 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 23:15:17,517 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 23:15:17,517 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 23:15:17,517 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 23:15:17,517 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 23:15:17,517 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 23:15:17,556 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 23:15:17,556 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 23:15:17,556 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 23:15:17,556 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 23:15:17,556 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 23:15:17,556 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 23:15:17,556 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 23:15:17,556 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 23:15:17,670 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 23:15:17,670 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 23:15:17,881 - voice-business-agent - INFO - Participant connected: voice_assistant_user_844
2024-12-28 23:15:17,881 - voice-business-agent - INFO - Participant connected: voice_assistant_user_844
2024-12-28 23:15:17,938 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 23:15:17,938 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 23:15:17,993 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:15:17,996 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-28 23:15:18,045 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10b1ecd10>
2024-12-28 23:15:18,045 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b3aa720> server_hostname='api.openai.com' timeout=10.0
2024-12-28 23:15:18,060 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10b200dd0>
2024-12-28 23:15:18,061 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:15:18,061 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:15:18,061 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:15:18,061 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:15:18,061 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:15:18,976 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:45:18 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'576'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-f2gqd'), (b'x-envoy-upstream-service-time', b'564'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_54762196815f16e6216329adb528baa3'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=FfyujLj3F7350AVeXtoJNzGRl5rjaqJHZPQH_Jgwj9E-1735407918-1.0.1.1-cB8Lh1MHkl83WBzc.SljEhTBGacGQfSwLUYEOXauS_RkSyuImE28RtoJfxHDdbuGqrhyw7O.ogcSC7DwfXHL.Q; path=/; expires=Sat, 28-Dec-24 18:15:18 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=CKQHyhHXFmbUxXnBZneHlb65KWfu0NUEKotwHgRQQZo-1735407918987-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f935d000b9b5507-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:15:18,979 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:15:18,980 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:15:18,980 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:15:19,256 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:15:19,256 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:15:20,270 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:15:20,270 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:15:20,270 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:15:21,284 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:15:21,284 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:15:21,285 - livekit.agents.pipeline - ERROR - Error in _main_task
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 665, in _main_task
    await self._play_speech(speech)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 842, in _play_speech
    self.emit("agent_speech_committed", msg)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
TypeError: entrypoint.<locals>.handle_agent_speech() missing 1 required positional argument: 'msg'
2024-12-28 23:15:21,285 - livekit.agents.pipeline - ERROR - Error in _main_task
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 665, in _main_task
    await self._play_speech(speech)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 842, in _play_speech
    self.emit("agent_speech_committed", msg)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
TypeError: entrypoint.<locals>.handle_agent_speech() missing 1 required positional argument: 'msg'
2024-12-28 23:15:25,780 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 23:15:25,780 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 23:15:27,129 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:15:27,129 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:15:27,403 - livekit.agents.pipeline - DEBUG - interrupt threshold is not met
2024-12-28 23:15:27,403 - livekit.agents.pipeline - DEBUG - interrupt threshold is not met
2024-12-28 23:17:26,254 - livekit.agents - INFO - shutting down worker
2024-12-28 23:17:26,255 - livekit.agents - DEBUG - shutting down job task
2024-12-28 23:17:26,255 - livekit.agents - DEBUG - shutting down job task
2024-12-28 23:17:26,256 - livekit.agents - INFO - process exiting
2024-12-28 23:17:26,293 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-28 23:17:26,293 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-28 23:17:26,294 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-28 23:17:26,294 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-28 23:18:14,470 - watchfiles.main - WARNING - process already dead, exit code: 1
2024-12-28 23:18:15,490 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:18:15,506 - livekit.agents - INFO - starting worker
2024-12-28 23:18:15,539 - livekit.agents - DEV - reloading job
2024-12-28 23:18:15,703 - livekit.agents - INFO - registered worker
2024-12-28 23:18:16,427 - livekit.agents - INFO - initializing job process
2024-12-28 23:18:16,428 - livekit.agents - INFO - job process initialized
2024-12-28 23:18:16,427 - livekit.agents - INFO - initializing job process
2024-12-28 23:18:16,428 - livekit.agents - INFO - job process initialized
2024-12-28 23:18:16,428 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:18:16,428 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:18:16,462 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-28 23:18:16,556 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6217
2024-12-28 23:18:16,556 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6217
2024-12-28 23:18:16,557 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 23:18:16,557 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 23:18:16,557 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 23:18:16,557 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 23:18:16,558 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 23:18:16,558 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 23:18:16,622 - livekit.agents - INFO - registered worker
2024-12-28 23:18:16,789 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 23:18:16,790 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 23:18:16,789 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 23:18:16,790 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 23:18:16,790 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 23:18:16,790 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 23:18:16,790 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 23:18:16,790 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 23:18:16,834 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 23:18:16,834 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 23:18:16,834 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 23:18:16,834 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 23:18:16,834 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 23:18:16,834 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 23:18:16,834 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 23:18:16,834 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 23:18:16,955 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 23:18:16,955 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 23:18:17,220 - voice-business-agent - INFO - Participant connected: voice_assistant_user_844
2024-12-28 23:18:17,220 - voice-business-agent - INFO - Participant connected: voice_assistant_user_844
2024-12-28 23:18:17,275 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 23:18:17,275 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 23:18:17,328 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:18:17,329 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-28 23:18:17,350 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x127f14290>
2024-12-28 23:18:17,351 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x12767a720> server_hostname='api.openai.com' timeout=10.0
2024-12-28 23:18:17,367 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x121c115d0>
2024-12-28 23:18:17,367 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:18:17,367 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:18:17,367 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:18:17,367 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:18:17,367 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:18:18,226 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 17:48:18 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'505'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-n4lff'), (b'x-envoy-upstream-service-time', b'492'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_ae6438c476df8466ba663651fb23a6d7'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=jaijXpyHRgUCXUvA2IGqhBJEs0A.hGJqCTPEDIOzimg-1735408098-1.0.1.1-CboGBKGH87hpZ_8MoYrCvaQ2XvREVAJtSEA06jM5VmeuBJf.4R.nWUL7SM8aiq6sIJaUXnrENHTWjGP6BB23Ow; path=/; expires=Sat, 28-Dec-24 18:18:18 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=yWzaBUaRIKpsCGsvSnolxCjFEOIhlf8R6Y1d9_ZrslY-1735408098186-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f936160bdbf8e80-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:18:18,229 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:18:18,230 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:18:18,230 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:18:18,418 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:18:18,418 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:18:18,943 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:18:18,943 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:18:18,944 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:18:20,446 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:18:20,446 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:18:20,447 - livekit.agents.pipeline - ERROR - Error in _main_task
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 665, in _main_task
    await self._play_speech(speech)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 842, in _play_speech
    self.emit("agent_speech_committed", msg)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
TypeError: entrypoint.<locals>.handle_agent_speech() missing 1 required positional argument: 'msg'
2024-12-28 23:18:20,447 - livekit.agents.pipeline - ERROR - Error in _main_task
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 665, in _main_task
    await self._play_speech(speech)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/pipeline_agent.py", line 842, in _play_speech
    self.emit("agent_speech_committed", msg)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
TypeError: entrypoint.<locals>.handle_agent_speech() missing 1 required positional argument: 'msg'
2024-12-28 23:18:25,725 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 23:18:25,725 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 23:18:27,007 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:18:27,007 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:18:27,349 - livekit.agents.pipeline - DEBUG - interrupt threshold is not met
2024-12-28 23:18:27,349 - livekit.agents.pipeline - DEBUG - interrupt threshold is not met
2024-12-28 23:37:10,406 - livekit.agents - INFO - shutting down worker
2024-12-28 23:37:10,408 - livekit.agents - DEBUG - shutting down job task
2024-12-28 23:37:10,409 - livekit.agents - INFO - process exiting
2024-12-28 23:37:10,408 - livekit.agents - DEBUG - shutting down job task
2024-12-28 23:37:10,450 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-28 23:37:10,450 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-28 23:37:10,452 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-28 23:37:10,452 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-28 23:37:11,785 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:37:11,794 - livekit.agents - INFO - starting worker
2024-12-28 23:37:11,804 - livekit.agents - DEV - reloading job
2024-12-28 23:37:11,955 - livekit.agents - INFO - registered worker
2024-12-28 23:37:12,697 - livekit.agents - INFO - initializing job process
2024-12-28 23:37:12,698 - livekit.agents - INFO - job process initialized
2024-12-28 23:37:12,697 - livekit.agents - INFO - initializing job process
2024-12-28 23:37:12,698 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:37:12,698 - livekit.agents - INFO - job process initialized
2024-12-28 23:37:12,698 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:37:12,741 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-28 23:37:12,797 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6217
2024-12-28 23:37:12,797 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6217
2024-12-28 23:37:12,798 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 23:37:12,798 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 23:37:12,798 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 23:37:12,798 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 23:37:12,799 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 23:37:12,799 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 23:37:12,881 - livekit.agents - INFO - registered worker
2024-12-28 23:37:13,029 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 23:37:13,029 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 23:37:13,029 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 23:37:13,029 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 23:37:13,029 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 23:37:13,029 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 23:37:13,029 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 23:37:13,029 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 23:37:13,064 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 23:37:13,064 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 23:37:13,064 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 23:37:13,064 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 23:37:13,064 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 23:37:13,064 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 23:37:13,064 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 23:37:13,064 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 23:37:13,176 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 23:37:13,176 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 23:37:13,386 - voice-business-agent - INFO - Participant connected: voice_assistant_user_844
2024-12-28 23:37:13,386 - voice-business-agent - INFO - Participant connected: voice_assistant_user_844
2024-12-28 23:37:13,442 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 23:37:13,442 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 23:37:13,509 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:37:13,510 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-28 23:37:13,653 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1217dc350>
2024-12-28 23:37:13,653 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x127d52720> server_hostname='api.openai.com' timeout=10.0
2024-12-28 23:37:13,734 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x121632d90>
2024-12-28 23:37:13,734 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:37:13,734 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:37:13,734 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:37:13,735 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:37:13,735 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:37:14,457 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:07:14 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'429'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-lts8v'), (b'x-envoy-upstream-service-time', b'410'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_1b4cdf60c70987fc34dca3ca63531385'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=WIY0wfM2CY6sRJoTn4gwaBz1ypk8bvmbx7fdwrdDE7k-1735409234-1.0.1.1-l.9flGTPFyLBqCjvE1QUzTPQxg8lZ_9k5K1NdKlJyt6tYbZrmPKy0RtLBGiiOpAz9Ip1dwyauxxAbDghjIqvrQ; path=/; expires=Sat, 28-Dec-24 18:37:14 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=ehb9YPsFfA7xMEnKe9CBs5z3sPUh6hmnr6UZ3OPPRkA-1735409234471-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f937d1f0b101b98-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:37:14,460 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:37:14,460 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:37:14,460 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:37:14,695 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:37:14,695 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:37:15,180 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:37:15,180 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:37:15,181 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:37:16,722 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:37:16,722 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:37:16,722 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-28 23:37:16,722 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-28 23:37:16,723 - livekit - ERROR - failed to emit event agent_speech_committed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 130, in handle_agent_speech
    customer_number =  self.queue.get()
                       ^^^^
NameError: name 'self' is not defined
2024-12-28 23:37:16,728 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:37:16,723 - livekit - ERROR - failed to emit event agent_speech_committed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 130, in handle_agent_speech
    customer_number =  self.queue.get()
                       ^^^^
NameError: name 'self' is not defined
2024-12-28 23:37:16,728 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:37:22,709 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:37:22,709 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:37:22,978 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:37:22,978 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:37:22,990 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 23:37:22,992 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-28 23:37:23,010 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x117b1cbd0>
2024-12-28 23:37:23,011 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x127d52690> server_hostname='api.openai.com' timeout=15.0
2024-12-28 23:37:23,027 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12974a010>
2024-12-28 23:37:23,028 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:37:23,028 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:37:23,028 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:37:23,029 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:37:23,029 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:37:23,642 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:07:23 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'305'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29917'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'166ms'), (b'x-request-id', b'req_0e82f3db9223dc3906281bc4d774113b'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=um8SDUfapN9wd.y0P.uamz1geZs.5kpB1djGYeNmNuM-1735409243-1.0.1.1-43huB3__8cefNreng.Ln4RvS9o408pKEAq_I8acrez6nHBSqXjyCQSuS0w3QCid9PnxiHvbhC4DniLSjAXl.BA; path=/; expires=Sat, 28-Dec-24 18:37:23 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=gHp7kqtTNyFBMUlin8rvDis75fWWYfURZaLT7yer4Hs-1735409243661-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f937d591fae91a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:37:23,643 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-28 23:37:23,643 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-28 23:37:23,643 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:37:23,865 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, I can help you with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:37:23,866 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:37:23,867 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:37:23,867 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:37:23,867 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:37:23,867 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:37:24,081 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:37:24,081 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:37:24,081 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:37:24,953 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:07:24 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'767'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-4kskd'), (b'x-envoy-upstream-service-time', b'751'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d2d52b0dd7a0a3fc6e7a32b1f85bf3e0'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f937d5e5cb81b98-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:37:24,956 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:37:24,956 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:37:24,956 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:37:25,232 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:37:25,232 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:37:25,787 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:37:25,787 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:37:25,788 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:37:25,789 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide me with your mobile number?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:37:25,790 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:37:25,790 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:37:25,790 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:37:25,791 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:37:25,791 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:37:26,733 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:07:26 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'646'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-82fjm'), (b'x-envoy-upstream-service-time', b'556'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f6ed379cb7cbd7b6b3b68827f411dbc7'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f937d6a5ea31b98-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:37:26,734 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:37:26,734 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:37:26,735 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:37:26,801 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-28 23:37:26,802 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-28 23:37:26,802 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to agent.
2024-12-28 23:37:26,802 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:37:26,801 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-28 23:37:26,802 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-28 23:37:26,802 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to agent.
2024-12-28 23:37:26,802 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:37:29,546 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:37:29,546 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:37:29,546 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:37:30,592 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:37:30,592 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. Could you please provide me with your mobile number?
2024-12-28 23:37:30,592 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:37:30,592 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. Could you please provide me with your mobile number?
2024-12-28 23:37:30,593 - livekit - ERROR - failed to emit event agent_speech_committed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 130, in handle_agent_speech
    customer_number =  self.queue.get()
                       ^^^^
NameError: name 'self' is not defined
2024-12-28 23:37:30,593 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:37:30,593 - livekit - ERROR - failed to emit event agent_speech_committed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 130, in handle_agent_speech
    customer_number =  self.queue.get()
                       ^^^^
NameError: name 'self' is not defined
2024-12-28 23:37:30,593 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:37:34,401 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:37:34,401 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:37:35,754 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:37:35,754 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:37:35,758 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': '9313-571.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 23:37:35,760 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:37:35,761 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:37:35,761 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:37:35,761 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:37:35,761 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:37:35,861 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:37:35,861 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:37:35,863 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 23:37:35,864 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:37:35,863 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 23:37:35,864 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:37:35,869 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': '9313-571. 554.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 23:37:35,871 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-28 23:37:35,871 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:37:35,871 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-28 23:37:35,872 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:37:35,872 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:37:35,872 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:37:35,900 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1297d6310>
2024-12-28 23:37:35,900 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x127d52690> server_hostname='api.openai.com' timeout=15.0
2024-12-28 23:37:35,922 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x127d02d10>
2024-12-28 23:37:35,922 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:37:35,922 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:37:35,922 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:37:35,923 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:37:35,923 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:37:36,510 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:07:36 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'280'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29867'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'265ms'), (b'x-request-id', b'req_1f2a089fbd39dae51e6931a0d8b39d3a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f937da9bade1baa-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:37:36,511 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-28 23:37:36,511 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-28 23:37:36,511 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:37:36,905 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. I have your number as 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:37:36,907 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:37:36,907 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:37:36,907 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:37:36,907 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:37:36,908 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:37:37,251 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:37:37,252 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:37:37,253 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:37:38,647 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:07:38 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'795'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-vm4m7'), (b'x-envoy-upstream-service-time', b'777'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_fd175629f627b769d139b6003129fab0'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f937dafdc861b98-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:37:38,648 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:37:38,648 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:37:38,649 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:37:38,934 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:37:38,934 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:37:39,732 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:37:39,732 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:37:39,733 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:37:39,734 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'll connect you to an agent now.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:37:39,735 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:37:39,736 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:37:39,736 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:37:39,736 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:37:39,736 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:37:40,495 - voice-business-agent - INFO - User speech received: 9313-571. 554.
2024-12-28 23:37:40,496 - voice-business-agent - INFO - User speech received: 9313-571. 554.
2024-12-28 23:37:40,497 - voice-business-agent - DEBUG - Validating phone number from text: 9313-571. 554.
2024-12-28 23:37:40,497 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-28 23:37:40,495 - voice-business-agent - INFO - User speech received: 9313-571. 554.
2024-12-28 23:37:40,496 - voice-business-agent - INFO - User speech received: 9313-571. 554.
2024-12-28 23:37:40,497 - voice-business-agent - DEBUG - Validating phone number from text: 9313-571. 554.
2024-12-28 23:37:40,499 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-102' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:118> exception=NameError("name 'room' is not defined")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 121, in process_user_speech
    await room.local_participant.set_attributes({"phone_number": phone_number})
          ^^^^
NameError: name 'room' is not defined
2024-12-28 23:37:40,497 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-28 23:37:40,499 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-102' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:118> exception=NameError("name 'room' is not defined")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 121, in process_user_speech
    await room.local_participant.set_attributes({"phone_number": phone_number})
          ^^^^
NameError: name 'room' is not defined
2024-12-28 23:37:40,773 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:07:40 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'758'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-w55kr'), (b'x-envoy-upstream-service-time', b'744'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_bcc762df6e8c348ea5dbd978d5d468d0'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f937dc18af61b98-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:37:40,774 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:37:40,774 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:37:40,774 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:37:41,496 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:37:41,497 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:37:41,497 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:37:41,498 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:37:41,498 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:37:41,499 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:37:41,499 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:37:41,499 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:37:41,499 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:37:43,007 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:07:43 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1211'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-27zdr'), (b'x-envoy-upstream-service-time', b'1189'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b70df0c9e4be29f4cc7ba3f5ba68aebc'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f937dcc8be91b98-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:37:43,010 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:37:43,010 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:37:43,011 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:37:43,775 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:37:43,777 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:37:43,778 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:37:46,251 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:37:46,251 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:37:46,252 - voice-business-agent - INFO - User speech received:  Thank you. I have your number as 9313571554. I'll connect you to an agent now. Please hold on.
2024-12-28 23:37:46,252 - voice-business-agent - INFO - User speech received:  Thank you. I have your number as 9313571554. I'll connect you to an agent now. Please hold on.
2024-12-28 23:37:46,252 - livekit - ERROR - failed to emit event agent_speech_committed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 130, in handle_agent_speech
    customer_number =  self.queue.get()
                       ^^^^
NameError: name 'self' is not defined
2024-12-28 23:37:46,253 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:37:46,252 - livekit - ERROR - failed to emit event agent_speech_committed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 130, in handle_agent_speech
    customer_number =  self.queue.get()
                       ^^^^
NameError: name 'self' is not defined
2024-12-28 23:37:46,253 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:41:39,133 - livekit.agents - INFO - shutting down worker
2024-12-28 23:41:39,134 - livekit.agents - DEBUG - shutting down job task
2024-12-28 23:41:39,135 - livekit.agents - INFO - process exiting
2024-12-28 23:41:39,134 - livekit.agents - DEBUG - shutting down job task
2024-12-28 23:41:39,171 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-28 23:41:39,171 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-28 23:41:39,172 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-28 23:41:39,172 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-28 23:41:40,291 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:41:40,305 - livekit.agents - INFO - starting worker
2024-12-28 23:41:40,318 - livekit.agents - DEV - reloading job
2024-12-28 23:41:41,251 - livekit.agents - INFO - initializing job process
2024-12-28 23:41:41,253 - livekit.agents - INFO - job process initialized
2024-12-28 23:41:41,253 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:41:41,251 - livekit.agents - INFO - initializing job process
2024-12-28 23:41:41,253 - livekit.agents - INFO - job process initialized
2024-12-28 23:41:41,253 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:41:41,361 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6217
2024-12-28 23:41:41,361 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6217
2024-12-28 23:41:41,361 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 23:41:41,362 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 23:41:41,361 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 23:41:41,362 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 23:41:41,362 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 23:41:41,362 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 23:41:41,596 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 23:41:41,596 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 23:41:41,596 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 23:41:41,596 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 23:41:41,596 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 23:41:41,596 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 23:41:41,596 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 23:41:41,596 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 23:41:41,638 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 23:41:41,638 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 23:41:41,638 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 23:41:41,638 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 23:41:41,638 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 23:41:41,638 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 23:41:41,638 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 23:41:41,638 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 23:41:41,752 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 23:41:41,752 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 23:41:41,962 - voice-business-agent - INFO - Participant connected: voice_assistant_user_844
2024-12-28 23:41:41,962 - voice-business-agent - INFO - Participant connected: voice_assistant_user_844
2024-12-28 23:41:41,992 - livekit.agents - INFO - registered worker
2024-12-28 23:41:42,014 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 23:41:42,014 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 23:41:42,024 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-28 23:41:42,064 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:41:42,065 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-28 23:41:42,123 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12aa1ef10>
2024-12-28 23:41:42,123 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x12b09a7b0> server_hostname='api.openai.com' timeout=10.0
2024-12-28 23:41:42,136 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12df51a10>
2024-12-28 23:41:42,136 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:41:42,137 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:41:42,137 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:41:42,137 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:41:42,137 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:41:42,199 - livekit.agents - INFO - registered worker
2024-12-28 23:41:43,273 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:11:43 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'800'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-zz96w'), (b'x-envoy-upstream-service-time', b'781'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c5580b0178e13e740c960ded750515d3'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=eUhR7WJDCUr.IiSBL8oCaY3gNAc89XBXqYr0PbtsPGU-1735409503-1.0.1.1-5k_ReNYxiLC_Upi_DucDJuxsPaBevJaPbkEU0E6XvdANR1C4dLo8qSc2geKfff9kJ4k7vDneAFTqT8kHd5nLBQ; path=/; expires=Sat, 28-Dec-24 18:41:43 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=eSMdXBbi4_v9TjvvMmRUl1g3vj3NmULVU6imvDAjqTU-1735409503285-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9383ac896e54d8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:41:43,276 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:41:43,277 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:41:43,277 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:41:43,568 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:41:43,568 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:41:44,129 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:41:44,130 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:41:44,132 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:41:45,624 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:41:45,624 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:41:45,625 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-28 23:41:45,625 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-28 23:41:45,625 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-28 23:41:45,625 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:41:45,625 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-28 23:41:45,625 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:41:45,625 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:41:45,625 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:41:49,145 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:41:49,145 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:41:49,403 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:41:49,403 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:41:49,411 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect to me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 23:41:49,412 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-28 23:41:49,426 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12dfb6810>
2024-12-28 23:41:49,427 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x12b09a720> server_hostname='api.openai.com' timeout=15.0
2024-12-28 23:41:49,442 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12aadccd0>
2024-12-28 23:41:49,443 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:41:49,443 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:41:49,443 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:41:49,444 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:41:49,444 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:41:50,096 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:11:50 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'327'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29916'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'168ms'), (b'x-request-id', b'req_af78915c4740eae1a95dac071c0a319b'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=ZYE8U3V29zWntVzao3JPTOilmyQaqSZ9zcLZxX8Bbpo-1735409510-1.0.1.1-ymZFKhINfKkQBIoyX.D3Fg9ILVUlULyGZdsPlwr4QHfupqTmk.Im2hN0oPCgukW6GwCLtc91sIpPwloUkrfqHw; path=/; expires=Sat, 28-Dec-24 18:41:50 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=VKAPhFMp4W.DnUcCjtKW_V03VocTdlL12qwgUZb2U7w-1735409510110-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9383da3aeb5518-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:41:50,098 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-28 23:41:50,098 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-28 23:41:50,098 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:41:50,661 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:41:50,662 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:41:50,662 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:41:50,665 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide me with your mobile number so I can connect you to an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:41:50,666 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:41:50,666 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:41:50,666 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:41:50,667 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:41:50,667 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:41:51,550 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:11:51 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'565'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-vffb6'), (b'x-envoy-upstream-service-time', b'541'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f44800d70eb1aca0863b5d9c63224893'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9383e1ea3954d8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:41:51,552 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:41:51,552 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:41:51,553 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:41:51,821 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:41:51,821 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:41:53,430 - voice-business-agent - INFO - User speech received: Connect to me to agent.
2024-12-28 23:41:53,431 - voice-business-agent - INFO - User speech received: Connect to me to agent.
2024-12-28 23:41:53,431 - voice-business-agent - DEBUG - Validating phone number from text: Connect to me to agent.
2024-12-28 23:41:53,430 - voice-business-agent - INFO - User speech received: Connect to me to agent.
2024-12-28 23:41:53,431 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:41:53,431 - voice-business-agent - INFO - User speech received: Connect to me to agent.
2024-12-28 23:41:53,431 - voice-business-agent - DEBUG - Validating phone number from text: Connect to me to agent.
2024-12-28 23:41:53,431 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:41:53,883 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:41:53,883 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:41:53,884 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:41:56,942 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:41:56,942 - voice-business-agent - INFO - User speech received:  Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-28 23:41:56,942 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:41:56,942 - voice-business-agent - DEBUG - Validating phone number from text:  Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-28 23:41:56,942 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:41:56,942 - voice-business-agent - INFO - User speech received:  Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-28 23:41:56,943 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:41:56,942 - voice-business-agent - DEBUG - Validating phone number from text:  Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-28 23:41:56,942 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:41:56,943 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:42:00,578 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:42:00,578 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:42:01,181 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:42:01,181 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:42:01,557 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:42:01,557 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:42:01,562 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect to me to agent.'}, {'role': 'assistant', 'content': ' Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': '93135715 4.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 23:42:01,563 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:42:01,563 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:42:01,564 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:42:01,564 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:42:01,564 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:42:02,195 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:12:02 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'321'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29890'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'220ms'), (b'x-request-id', b'req_a2d194ea5c386204147482d0b8c706d8'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938425fca85518-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:42:02,197 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-28 23:42:02,197 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-28 23:42:02,198 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:42:02,321 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for providing your number.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:42:02,323 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:42:02,324 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:42:02,324 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:42:02,324 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:42:02,324 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:42:02,506 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:42:02,506 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:42:02,507 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:42:03,341 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:12:03 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'639'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-gb49x'), (b'x-envoy-upstream-service-time', b'627'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_7410d1039606a15f9bd8952a9cc48387'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f93842ab99c54d8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:42:03,342 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:42:03,343 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:42:03,343 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:42:03,623 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:42:03,623 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:42:04,168 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:42:04,170 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:42:04,170 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:42:04,173 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Just to confirm, is your mobile number 931357154?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:42:04,174 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:42:04,175 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:42:04,175 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:42:04,176 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:42:04,176 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:42:05,180 - voice-business-agent - INFO - User speech received: 93135715 4.
2024-12-28 23:42:05,180 - voice-business-agent - INFO - User speech received: 93135715 4.
2024-12-28 23:42:05,181 - voice-business-agent - DEBUG - Validating phone number from text: 93135715 4.
2024-12-28 23:42:05,181 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:42:05,180 - voice-business-agent - INFO - User speech received: 93135715 4.
2024-12-28 23:42:05,180 - voice-business-agent - INFO - User speech received: 93135715 4.
2024-12-28 23:42:05,181 - voice-business-agent - DEBUG - Validating phone number from text: 93135715 4.
2024-12-28 23:42:05,181 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:42:05,743 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:12:05 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1269'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-cqscz'), (b'x-envoy-upstream-service-time', b'1253'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_30afead2fa6d9d667ee83f93cbcd8c48'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938436488254d8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:42:05,744 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:42:05,744 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:42:05,744 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:42:07,048 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:42:07,049 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:42:07,049 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:42:10,622 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:42:10,624 - voice-business-agent - INFO - User speech received:  Thank you for providing your number. Just to confirm, is your mobile number 931357154?
2024-12-28 23:42:10,625 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your number. Just to confirm, is your mobile number 931357154?
2024-12-28 23:42:10,622 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:42:10,625 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:42:10,625 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:42:10,624 - voice-business-agent - INFO - User speech received:  Thank you for providing your number. Just to confirm, is your mobile number 931357154?
2024-12-28 23:42:10,625 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your number. Just to confirm, is your mobile number 931357154?
2024-12-28 23:42:10,625 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:42:10,625 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:42:17,510 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:42:17,510 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:42:17,886 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:42:17,886 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:42:17,893 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect to me to agent.'}, {'role': 'assistant', 'content': ' Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': '93135715 4.'}, {'role': 'assistant', 'content': ' Thank you for providing your number. Just to confirm, is your mobile number 931357154?'}, {'role': 'user', 'content': "No. It's 9313571554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 23:42:17,895 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:42:17,895 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:42:17,895 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:42:17,896 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:42:17,896 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:42:18,510 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:12:18 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'309'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29861'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'278ms'), (b'x-request-id', b'req_3bfa880cf803d3d36543d4c4d21aa1ca'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f93848c0c5d5518-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:42:18,511 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-28 23:42:18,511 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-28 23:42:18,511 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:42:19,041 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Got it! Your mobile number is 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:42:19,043 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:42:19,044 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:42:19,044 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:42:19,044 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:42:19,044 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:42:19,291 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:42:19,292 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:42:19,293 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:42:19,922 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:12:19 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'559'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-5zbkc'), (b'x-envoy-upstream-service-time', b'548'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b70df8dbf4dadb10db261967fd1123d6'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938493282854d8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:42:19,924 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:42:19,924 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:42:19,925 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:42:20,210 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:42:20,210 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:42:20,782 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:42:20,783 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:42:20,784 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:42:20,787 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I will connect you to an agent now.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:42:20,788 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:42:20,789 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:42:20,789 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:42:20,790 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:42:20,790 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:42:21,711 - voice-business-agent - INFO - User speech received: No. It's 9313571554.
2024-12-28 23:42:21,712 - voice-business-agent - INFO - User speech received: No. It's 9313571554.
2024-12-28 23:42:21,712 - voice-business-agent - DEBUG - Validating phone number from text: No. It's 9313571554.
2024-12-28 23:42:21,712 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-28 23:42:21,711 - voice-business-agent - INFO - User speech received: No. It's 9313571554.
2024-12-28 23:42:21,712 - voice-business-agent - INFO - User speech received: No. It's 9313571554.
2024-12-28 23:42:21,712 - voice-business-agent - DEBUG - Validating phone number from text: No. It's 9313571554.
2024-12-28 23:42:21,712 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-28 23:42:21,713 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-113' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:118> exception=NameError("name 'room' is not defined")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 121, in process_user_speech
    await room.local_participant.set_attributes({"phone_number": phone_number})
          ^^^^
NameError: name 'room' is not defined
2024-12-28 23:42:21,713 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-113' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:118> exception=NameError("name 'room' is not defined")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 121, in process_user_speech
    await room.local_participant.set_attributes({"phone_number": phone_number})
          ^^^^
NameError: name 'room' is not defined
2024-12-28 23:42:21,856 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:12:21 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'715'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-jrvhs'), (b'x-envoy-upstream-service-time', b'684'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f0ddb006c2105161f31b0d73eb7c7496'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f93849e1bbd54d8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:42:21,858 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:42:21,858 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:42:21,858 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:42:22,754 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:42:22,759 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:42:22,760 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:42:22,762 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:42:22,763 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:42:22,764 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:42:22,764 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:42:22,764 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:42:22,764 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:42:23,897 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:12:23 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'828'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-2tfwk'), (b'x-envoy-upstream-service-time', b'764'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_45fb5e19d2122c97573a665b962ca7df'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9384aa69e454d8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:42:23,897 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:42:23,897 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:42:23,898 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:42:24,694 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:42:24,695 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:42:24,695 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:42:27,252 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:42:27,252 - voice-business-agent - INFO - User speech received:  Got it! Your mobile number is 9313571554. I will connect you to an agent now. Please hold on.
2024-12-28 23:42:27,252 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:42:27,253 - voice-business-agent - DEBUG - Validating phone number from text:  Got it! Your mobile number is 9313571554. I will connect you to an agent now. Please hold on.
2024-12-28 23:42:27,253 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-28 23:42:27,253 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:42:27,252 - voice-business-agent - INFO - User speech received:  Got it! Your mobile number is 9313571554. I will connect you to an agent now. Please hold on.
2024-12-28 23:42:27,253 - voice-business-agent - DEBUG - Validating phone number from text:  Got it! Your mobile number is 9313571554. I will connect you to an agent now. Please hold on.
2024-12-28 23:42:27,253 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-28 23:42:27,253 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-28 23:42:27,253 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:42:27,253 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-28 23:42:27,408 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-28 23:42:27,408 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-28 23:42:27,698 - voice-business-agent - ERROR - Error during call transfer
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/connectionpool.py", line 464, in _make_request
    self._validate_conn(conn)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/connectionpool.py", line 1093, in _validate_conn
    conn.connect()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/connection.py", line 741, in connect
    sock_and_verified = _ssl_wrap_socket_and_match_hostname(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/connection.py", line 920, in _ssl_wrap_socket_and_match_hostname
    ssl_sock = ssl_wrap_socket(
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/util/ssl_.py", line 460, in ssl_wrap_socket
    ssl_sock = _ssl_wrap_socket_impl(sock, context, tls_in_tls, server_hostname)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/util/ssl_.py", line 504, in _ssl_wrap_socket_impl
    return ssl_context.wrap_socket(sock, server_hostname=server_hostname)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 517, in wrap_socket
    return self.sslsocket_class._create(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1075, in _create
    self.do_handshake()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1346, in do_handshake
    self._sslobj.do_handshake()
ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self signed certificate in certificate chain (_ssl.c:1002)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/connectionpool.py", line 488, in _make_request
    raise new_e
urllib3.exceptions.SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self signed certificate in certificate chain (_ssl.c:1002)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/requests/adapters.py", line 486, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='c2c.ivrobd.com', port=443): Max retries exceeded with url: /api/c2c/process (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self signed certificate in certificate chain (_ssl.c:1002)')))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 70, in handle_call_transfer
    response = requests.post(api_endpoint, json=payload, headers=headers, timeout=30)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/requests/adapters.py", line 517, in send
    raise SSLError(e, request=request)
requests.exceptions.SSLError: HTTPSConnectionPool(host='c2c.ivrobd.com', port=443): Max retries exceeded with url: /api/c2c/process (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self signed certificate in certificate chain (_ssl.c:1002)')))
2024-12-28 23:42:27,698 - voice-business-agent - ERROR - Error during call transfer
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/connectionpool.py", line 464, in _make_request
    self._validate_conn(conn)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/connectionpool.py", line 1093, in _validate_conn
    conn.connect()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/connection.py", line 741, in connect
    sock_and_verified = _ssl_wrap_socket_and_match_hostname(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/connection.py", line 920, in _ssl_wrap_socket_and_match_hostname
    ssl_sock = ssl_wrap_socket(
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/util/ssl_.py", line 460, in ssl_wrap_socket
    ssl_sock = _ssl_wrap_socket_impl(sock, context, tls_in_tls, server_hostname)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/util/ssl_.py", line 504, in _ssl_wrap_socket_impl
    return ssl_context.wrap_socket(sock, server_hostname=server_hostname)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 517, in wrap_socket
    return self.sslsocket_class._create(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1075, in _create
    self.do_handshake()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1346, in do_handshake
    self._sslobj.do_handshake()
ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self signed certificate in certificate chain (_ssl.c:1002)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/connectionpool.py", line 488, in _make_request
    raise new_e
urllib3.exceptions.SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self signed certificate in certificate chain (_ssl.c:1002)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/requests/adapters.py", line 486, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='c2c.ivrobd.com', port=443): Max retries exceeded with url: /api/c2c/process (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self signed certificate in certificate chain (_ssl.c:1002)')))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 70, in handle_call_transfer
    response = requests.post(api_endpoint, json=payload, headers=headers, timeout=30)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/requests/adapters.py", line 517, in send
    raise SSLError(e, request=request)
requests.exceptions.SSLError: HTTPSConnectionPool(host='c2c.ivrobd.com', port=443): Max retries exceeded with url: /api/c2c/process (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self signed certificate in certificate chain (_ssl.c:1002)')))
2024-12-28 23:42:27,712 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'An error occurred while connecting the call. Please try again later.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:42:27,715 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:42:27,715 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:42:27,716 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:42:27,716 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:42:27,716 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:42:29,618 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:12:29 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'966'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-g69z7'), (b'x-envoy-upstream-service-time', b'957'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_faf4c37cf3790ebbe9616af6f0c24cd4'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9384c97b0a54d8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:42:29,619 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:42:29,619 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:42:29,620 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:42:29,895 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:42:29,895 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:42:30,997 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:42:30,998 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:42:31,000 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:42:34,051 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:42:34,051 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:42:34,052 - voice-business-agent - INFO - User speech received:  An error occurred while connecting the call. Please try again later.
2024-12-28 23:42:34,053 - voice-business-agent - DEBUG - Validating phone number from text:  An error occurred while connecting the call. Please try again later.
2024-12-28 23:42:34,053 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:42:34,053 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:42:34,052 - voice-business-agent - INFO - User speech received:  An error occurred while connecting the call. Please try again later.
2024-12-28 23:42:34,053 - voice-business-agent - DEBUG - Validating phone number from text:  An error occurred while connecting the call. Please try again later.
2024-12-28 23:42:34,053 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:42:34,053 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:47:23,194 - livekit.agents - INFO - shutting down worker
2024-12-28 23:47:23,196 - livekit.agents - DEBUG - shutting down job task
2024-12-28 23:47:23,197 - livekit.agents - INFO - process exiting
2024-12-28 23:47:23,196 - livekit.agents - DEBUG - shutting down job task
2024-12-28 23:47:23,233 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-28 23:47:23,233 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-28 23:47:23,235 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: ClientInitiated
2024-12-28 23:47:23,235 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: ClientInitiated
2024-12-28 23:47:23,235 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-28 23:47:23,235 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-28 23:47:24,563 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:47:24,577 - livekit.agents - INFO - starting worker
2024-12-28 23:47:24,589 - livekit.agents - DEV - reloading job
2024-12-28 23:47:24,773 - livekit.agents - INFO - registered worker
2024-12-28 23:47:25,518 - livekit.agents - INFO - initializing job process
2024-12-28 23:47:25,519 - livekit.agents - INFO - job process initialized
2024-12-28 23:47:25,519 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:47:25,518 - livekit.agents - INFO - initializing job process
2024-12-28 23:47:25,519 - livekit.agents - INFO - job process initialized
2024-12-28 23:47:25,519 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-28 23:47:25,564 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-28 23:47:25,640 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6217
2024-12-28 23:47:25,640 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6217
2024-12-28 23:47:25,640 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 23:47:25,641 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 23:47:25,640 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-28 23:47:25,641 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-28 23:47:25,641 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 23:47:25,641 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-28 23:47:25,685 - livekit.agents - INFO - registered worker
2024-12-28 23:47:26,298 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 23:47:26,298 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 23:47:26,298 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 23:47:26,298 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 23:47:26,298 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-28 23:47:26,298 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-28 23:47:26,298 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-28 23:47:26,298 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-28 23:47:26,334 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 23:47:26,335 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 23:47:26,335 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 23:47:26,334 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-28 23:47:26,335 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 23:47:26,335 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-28 23:47:26,335 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-28 23:47:26,335 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-28 23:47:26,443 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 23:47:26,443 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-28 23:47:26,603 - voice-business-agent - INFO - Participant connected: voice_assistant_user_844
2024-12-28 23:47:26,603 - voice-business-agent - INFO - Participant connected: voice_assistant_user_844
2024-12-28 23:47:26,658 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 23:47:26,658 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-28 23:47:26,718 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:47:26,719 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-28 23:47:26,746 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x116cd1110>
2024-12-28 23:47:26,746 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x120a527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-28 23:47:26,767 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x116a48190>
2024-12-28 23:47:26,767 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:47:26,767 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:47:26,768 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:47:26,768 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:47:26,768 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:47:28,515 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:17:28 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'901'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-gtwbv'), (b'x-envoy-upstream-service-time', b'883'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_ffc0acd13d8686f078885c8db0a15334'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=dPW7swRqRKD6GP0stN6XxNktajcVVH_Kye5D_QyT0t4-1735409848-1.0.1.1-EJXjuKcP.94sLzYegjOnvTs6nuNL98KyCZIKGDqrp9R27IqqfTgExiBZS2qnF0zvm4hYVkiXDenGDF_CclphRg; path=/; expires=Sat, 28-Dec-24 18:47:28 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=izj1Kq1iexdPgiRrSVHXlRLV2eCQrq8ImaipfEE4xFc-1735409848529-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938c1679a35511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:47:28,519 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:47:28,519 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:47:28,519 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:47:28,767 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:47:28,767 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:47:29,549 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:47:29,549 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:47:29,549 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:47:30,824 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:47:30,824 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:47:30,825 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-28 23:47:30,825 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-28 23:47:30,825 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:47:30,825 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:47:30,825 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-28 23:47:30,825 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-28 23:47:30,825 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:47:30,825 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:47:34,401 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:47:34,401 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:47:34,749 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:47:34,749 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:47:34,760 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 23:47:34,761 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-28 23:47:34,777 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x116cca310>
2024-12-28 23:47:34,778 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x120a52720> server_hostname='api.openai.com' timeout=15.0
2024-12-28 23:47:34,795 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x116cdcf10>
2024-12-28 23:47:34,796 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:47:34,796 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:47:34,797 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:47:34,797 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:47:34,797 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:47:35,433 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:17:35 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'291'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29915'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'170ms'), (b'x-request-id', b'req_b4c3fe04968d1c6b9672363ecf83143a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=oAw9ONyHyewSzze4WTD8CpbEH5.r046oGzHv6RA9kMQ-1735409855-1.0.1.1-hqjJKbvVnE22i93FEPYolbYOHe8JjJjIhkeZWuksGUNMs1hJEC.wap.QlbN_dagsA8m.1ivXpalst1i34Ue.Mg; path=/; expires=Sat, 28-Dec-24 18:47:35 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=mte1t0ZL.5FnYjEQ57nH1khhkoonZrWqX_qrRT2KD3Y-1735409855423-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938c48af235511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:47:35,435 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-28 23:47:35,435 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-28 23:47:35,435 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:47:35,590 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, I can help with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:47:35,591 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:47:35,591 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:47:35,591 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:47:35,592 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:47:35,592 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:47:35,710 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:47:35,710 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:47:35,710 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:47:36,329 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:17:36 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'425'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-6tn7d'), (b'x-envoy-upstream-service-time', b'408'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d4b1aae48c96462b2596c5c6859b6aee'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938c4d9cda5511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:47:36,330 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:47:36,330 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:47:36,331 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:47:36,603 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:47:36,603 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:47:37,150 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:47:37,150 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:47:37,151 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:47:37,152 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide me with your mobile number?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:47:37,154 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:47:37,154 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:47:37,154 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:47:37,155 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:47:37,155 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:47:38,164 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-28 23:47:38,166 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-28 23:47:38,169 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-28 23:47:38,169 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:47:38,164 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-28 23:47:38,166 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-28 23:47:38,169 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-28 23:47:38,169 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:47:38,296 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:17:38 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'849'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-m294h'), (b'x-envoy-upstream-service-time', b'818'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_7fdf2d8c2698c3f40ca8cbad439dfc5e'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938c57689c5511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:47:38,299 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:47:38,300 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:47:38,300 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:47:39,861 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:47:39,861 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:47:39,861 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:47:41,800 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:47:41,800 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:47:41,801 - voice-business-agent - INFO - User speech received:  Sure, I can help with that. Could you please provide me with your mobile number?
2024-12-28 23:47:41,801 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help with that. Could you please provide me with your mobile number?
2024-12-28 23:47:41,801 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:47:41,801 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:47:41,801 - voice-business-agent - INFO - User speech received:  Sure, I can help with that. Could you please provide me with your mobile number?
2024-12-28 23:47:41,801 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help with that. Could you please provide me with your mobile number?
2024-12-28 23:47:41,801 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:47:41,801 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:47:45,697 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:47:45,697 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:47:46,201 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:47:46,201 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:47:46,211 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': '931357155'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 23:47:46,213 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:47:46,214 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:47:46,214 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:47:46,215 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:47:46,215 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:47:46,769 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:17:46 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'252'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29891'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'218ms'), (b'x-request-id', b'req_17d36d98b74b55e634ccc4b0420687a1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938c900a4d5511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:47:46,769 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-28 23:47:46,769 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-28 23:47:46,770 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:47:47,329 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It seems that the mobile number you provided is missing a digit.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:47:47,331 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:47:47,332 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:47:47,332 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:47:47,332 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:47:47,332 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:47:47,651 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:47:47,651 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:47:47,651 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:47:49,339 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:17:49 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1680'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-vvvtn'), (b'x-envoy-upstream-service-time', b'1654'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_be99d942263ac76be4c2ff91b6e33242'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938c96fa0c5511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:47:49,339 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:47:49,339 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:47:49,339 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:47:49,623 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:47:49,623 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:47:51,038 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:47:51,039 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:47:51,039 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:47:51,042 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please check it and provide the full 10-digit mobile number?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:47:51,043 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:47:51,044 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:47:51,044 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:47:51,045 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:47:51,045 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:47:51,242 - voice-business-agent - INFO - User speech received: 931357155
2024-12-28 23:47:51,243 - voice-business-agent - INFO - User speech received: 931357155
2024-12-28 23:47:51,243 - voice-business-agent - DEBUG - Validating phone number from text: 931357155
2024-12-28 23:47:51,243 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:47:51,242 - voice-business-agent - INFO - User speech received: 931357155
2024-12-28 23:47:51,243 - voice-business-agent - INFO - User speech received: 931357155
2024-12-28 23:47:51,243 - voice-business-agent - DEBUG - Validating phone number from text: 931357155
2024-12-28 23:47:51,243 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:47:52,010 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:17:52 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'671'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-d9clj'), (b'x-envoy-upstream-service-time', b'654'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d8f1fee285cf17af7c5ad07f912bace4'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938cae39295511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:47:52,011 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:47:52,012 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:47:52,012 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:47:53,939 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:47:53,940 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:47:53,940 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:47:57,799 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:47:57,799 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:47:57,799 - voice-business-agent - INFO - User speech received:  It seems that the mobile number you provided is missing a digit. Could you please check it and provide the full 10-digit mobile number?
2024-12-28 23:47:57,800 - voice-business-agent - DEBUG - Validating phone number from text:  It seems that the mobile number you provided is missing a digit. Could you please check it and provide the full 10-digit mobile number?
2024-12-28 23:47:57,800 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:47:57,800 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:47:57,799 - voice-business-agent - INFO - User speech received:  It seems that the mobile number you provided is missing a digit. Could you please check it and provide the full 10-digit mobile number?
2024-12-28 23:47:57,800 - voice-business-agent - DEBUG - Validating phone number from text:  It seems that the mobile number you provided is missing a digit. Could you please check it and provide the full 10-digit mobile number?
2024-12-28 23:47:57,800 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:47:57,800 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:48:02,347 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:48:02,347 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:48:02,710 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:48:02,710 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:48:02,715 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': '931357155'}, {'role': 'assistant', 'content': ' It seems that the mobile number you provided is missing a digit. Could you please check it and provide the full 10-digit mobile number?'}, {'role': 'user', 'content': '9313571554.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 23:48:02,717 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:48:02,717 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:48:02,718 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:48:02,718 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:48:02,718 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:48:03,322 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:18:03 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'283'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29852'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'296ms'), (b'x-request-id', b'req_8fcb8b0888acef77b1783357bf176214'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938cf72e425511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:48:03,323 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-28 23:48:03,323 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-28 23:48:03,324 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:48:03,691 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for providing your mobile number.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:48:03,693 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:48:03,693 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:48:03,694 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:48:03,694 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:48:03,694 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:48:03,906 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:48:03,906 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:48:03,907 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:48:04,607 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:18:04 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'587'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-sb74z'), (b'x-envoy-upstream-service-time', b'570'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_1948553c7c24c209f37b2290187c52ed'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938cfd4da25511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:48:04,607 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:48:04,607 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:48:04,608 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:48:04,870 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:48:04,870 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:48:05,615 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:48:05,615 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:48:05,615 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:48:05,617 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'll connect you with an agent now.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:48:05,619 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:48:05,619 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:48:05,619 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:48:05,620 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:48:05,620 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:48:06,534 - voice-business-agent - INFO - User speech received: 9313571554.
2024-12-28 23:48:06,535 - voice-business-agent - INFO - User speech received: 9313571554.
2024-12-28 23:48:06,535 - voice-business-agent - DEBUG - Validating phone number from text: 9313571554.
2024-12-28 23:48:06,535 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-28 23:48:06,534 - voice-business-agent - INFO - User speech received: 9313571554.
2024-12-28 23:48:06,535 - voice-business-agent - INFO - User speech received: 9313571554.
2024-12-28 23:48:06,535 - voice-business-agent - DEBUG - Validating phone number from text: 9313571554.
2024-12-28 23:48:06,535 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-28 23:48:06,536 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-116' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:118> exception=NameError("name 'room' is not defined")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 121, in process_user_speech
    await room.local_participant.set_attributes({"phone_number": phone_number})
          ^^^^
NameError: name 'room' is not defined
2024-12-28 23:48:06,536 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-116' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:118> exception=NameError("name 'room' is not defined")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 121, in process_user_speech
    await room.local_participant.set_attributes({"phone_number": phone_number})
          ^^^^
NameError: name 'room' is not defined
2024-12-28 23:48:06,570 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:18:06 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'574'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-nf84q'), (b'x-envoy-upstream-service-time', b'545'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b1dded5fe9ca738e06ac887bc692dc1f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938d094aca5511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:48:06,570 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:48:06,570 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:48:06,570 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:48:07,494 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:48:07,495 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:48:07,495 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:48:07,497 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:48:07,498 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:48:07,498 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:48:07,498 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:48:07,499 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:48:07,499 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:48:08,946 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:18:08 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1116'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-gzllz'), (b'x-envoy-upstream-service-time', b'1106'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a278da642b0d987c01238145763dd96a'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938d15084b5511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:48:08,947 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:48:08,947 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:48:08,948 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:48:09,544 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:48:09,545 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:48:09,545 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:48:10,450 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:48:10,450 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:48:10,451 - voice-business-agent - INFO - User speech received:  Thank you for providing your mobile number. I'll connect you with an agent now. Please hold on.
2024-12-28 23:48:10,451 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your mobile number. I'll connect you with an agent now. Please hold on.
2024-12-28 23:48:10,451 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:48:10,451 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:48:10,451 - voice-business-agent - INFO - User speech received:  Thank you for providing your mobile number. I'll connect you with an agent now. Please hold on.
2024-12-28 23:48:10,451 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your mobile number. I'll connect you with an agent now. Please hold on.
2024-12-28 23:48:10,451 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:48:10,451 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:48:36,098 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:48:36,098 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:48:36,440 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:48:36,440 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:48:36,454 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': '931357155'}, {'role': 'assistant', 'content': ' It seems that the mobile number you provided is missing a digit. Could you please check it and provide the full 10-digit mobile number?'}, {'role': 'user', 'content': '9313571554.'}, {'role': 'assistant', 'content': " Thank you for providing your mobile number. I'll connect you with an agent now. Please hold on."}, {'role': 'user', 'content': '14 9 Raka.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 23:48:36,456 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:48:36,457 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:48:36,457 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:48:36,458 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:48:36,458 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:48:37,080 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:18:37 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'272'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29823'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'354ms'), (b'x-request-id', b'req_77d069c500e2a29fcdfe95462b3857a9'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938dca0b855511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:48:37,082 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-28 23:48:37,082 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-28 23:48:37,083 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:48:37,372 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It appears there was a misunderstanding.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:48:37,374 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:48:37,375 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:48:37,375 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:48:37,375 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:48:37,375 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:48:38,582 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:18:38 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'833'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-2j88n'), (b'x-envoy-upstream-service-time', b'811'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_7834c3fdc04fd8747047c5c3a386cc8e'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938dcfcafc5511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:48:38,589 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:48:38,589 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:48:38,590 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:48:38,854 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:48:38,854 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:48:39,365 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:48:39,366 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:48:39,366 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:48:39,379 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:48:39,380 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:48:39,380 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:48:39,382 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'If you need to provide a contact number for connection, please ensure it only contains digits.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:48:39,383 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:48:39,384 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:48:39,384 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:48:39,384 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:48:39,384 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:48:40,469 - voice-business-agent - INFO - User speech received: 14 9 Raka.
2024-12-28 23:48:40,471 - voice-business-agent - INFO - User speech received: 14 9 Raka.
2024-12-28 23:48:40,471 - voice-business-agent - DEBUG - Validating phone number from text: 14 9 Raka.
2024-12-28 23:48:40,471 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:48:40,469 - voice-business-agent - INFO - User speech received: 14 9 Raka.
2024-12-28 23:48:40,471 - voice-business-agent - INFO - User speech received: 14 9 Raka.
2024-12-28 23:48:40,471 - voice-business-agent - DEBUG - Validating phone number from text: 14 9 Raka.
2024-12-28 23:48:40,471 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:48:41,133 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:18:41 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'850'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-kv9pt'), (b'x-envoy-upstream-service-time', b'836'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d9cab6ff19a00a788c0a254ff154ea42'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938ddc58fe5511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:48:41,134 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:48:41,134 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:48:41,135 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:48:42,300 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:48:42,301 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:48:42,301 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:48:42,302 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'If you have another request or need further assistance, feel free to let me know!', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:48:42,303 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:48:42,303 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:48:42,303 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:48:42,304 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:48:42,304 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:48:43,432 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:18:43 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'826'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-xchrs'), (b'x-envoy-upstream-service-time', b'794'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f27d1b9ca60fbc92d95ec197737a6021'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938dee9c035511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:48:43,434 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:48:43,435 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:48:43,435 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:48:45,150 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:48:45,150 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:48:45,150 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:48:51,366 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:48:51,366 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:48:51,367 - voice-business-agent - INFO - User speech received:  It appears there was a misunderstanding. If you need to provide a contact number for connection, please ensure it only contains digits. If you have another request or need further assistance, feel free to let me know!
2024-12-28 23:48:51,367 - voice-business-agent - DEBUG - Validating phone number from text:  It appears there was a misunderstanding. If you need to provide a contact number for connection, please ensure it only contains digits. If you have another request or need further assistance, feel free to let me know!
2024-12-28 23:48:51,367 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:48:51,367 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:48:51,367 - voice-business-agent - INFO - User speech received:  It appears there was a misunderstanding. If you need to provide a contact number for connection, please ensure it only contains digits. If you have another request or need further assistance, feel free to let me know!
2024-12-28 23:48:51,367 - voice-business-agent - DEBUG - Validating phone number from text:  It appears there was a misunderstanding. If you need to provide a contact number for connection, please ensure it only contains digits. If you have another request or need further assistance, feel free to let me know!
2024-12-28 23:48:51,367 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:48:51,367 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:49:02,897 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:49:02,897 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:49:03,875 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:49:03,875 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:49:03,885 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': '931357155'}, {'role': 'assistant', 'content': ' It seems that the mobile number you provided is missing a digit. Could you please check it and provide the full 10-digit mobile number?'}, {'role': 'user', 'content': '9313571554.'}, {'role': 'assistant', 'content': " Thank you for providing your mobile number. I'll connect you with an agent now. Please hold on."}, {'role': 'user', 'content': '14 9 Raka.'}, {'role': 'assistant', 'content': ' It appears there was a misunderstanding. If you need to provide a contact number for connection, please ensure it only contains digits. If you have another request or need further assistance, feel free to let me know!'}, {'role': 'user', 'content': 'Yes. Please connect to the'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 23:49:03,888 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:49:03,888 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:49:03,889 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:49:03,889 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:49:03,889 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:49:03,943 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:49:03,943 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:49:03,944 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 23:49:03,944 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:49:03,944 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-28 23:49:03,944 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:49:03,949 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': '931357155'}, {'role': 'assistant', 'content': ' It seems that the mobile number you provided is missing a digit. Could you please check it and provide the full 10-digit mobile number?'}, {'role': 'user', 'content': '9313571554.'}, {'role': 'assistant', 'content': " Thank you for providing your mobile number. I'll connect you with an agent now. Please hold on."}, {'role': 'user', 'content': '14 9 Raka.'}, {'role': 'assistant', 'content': ' It appears there was a misunderstanding. If you need to provide a contact number for connection, please ensure it only contains digits. If you have another request or need further assistance, feel free to let me know!'}, {'role': 'user', 'content': 'Yes. Please connect to the agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 23:49:03,950 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-28 23:49:03,950 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:49:03,950 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-28 23:49:03,950 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:49:03,950 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:49:03,950 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:49:03,973 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x116cd3590>
2024-12-28 23:49:03,973 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x120a52720> server_hostname='api.openai.com' timeout=15.0
2024-12-28 23:49:03,988 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x121393250>
2024-12-28 23:49:03,988 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:49:03,989 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:49:03,989 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:49:03,989 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:49:03,989 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:49:04,854 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:19:04 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'532'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'498'), (b'x-ratelimit-remaining-tokens', b'29571'), (b'x-ratelimit-reset-requests', b'135ms'), (b'x-ratelimit-reset-tokens', b'857ms'), (b'x-request-id', b'req_d3e153c050f47c3158d8e6122e329d6d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938e761e5d54b9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:49:04,855 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-28 23:49:04,855 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-28 23:49:04,855 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:49:05,779 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:49:05,780 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:49:05,781 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:49:05,782 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide me with your mobile number again, ensuring it only contains digits, so I can connect you to an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:49:05,783 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:49:05,784 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:49:05,784 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:49:05,784 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:49:05,784 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:49:07,212 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:19:07 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1053'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-sjgh4'), (b'x-envoy-upstream-service-time', b'1027'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_6c2e95712f79951e59263bd73c917fa9'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938e815ba85511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:49:07,215 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:49:07,215 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:49:07,215 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:49:07,514 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:49:07,514 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:49:09,173 - voice-business-agent - INFO - User speech received: Yes. Please connect to the agent.
2024-12-28 23:49:09,173 - voice-business-agent - INFO - User speech received: Yes. Please connect to the agent.
2024-12-28 23:49:09,173 - voice-business-agent - DEBUG - Validating phone number from text: Yes. Please connect to the agent.
2024-12-28 23:49:09,174 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:49:09,173 - voice-business-agent - INFO - User speech received: Yes. Please connect to the agent.
2024-12-28 23:49:09,173 - voice-business-agent - INFO - User speech received: Yes. Please connect to the agent.
2024-12-28 23:49:09,173 - voice-business-agent - DEBUG - Validating phone number from text: Yes. Please connect to the agent.
2024-12-28 23:49:09,174 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:49:09,812 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:49:09,812 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:49:09,813 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:49:15,204 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:49:15,204 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:49:15,204 - voice-business-agent - INFO - User speech received:  Could you please provide me with your mobile number again, ensuring it only contains digits, so I can connect you to an agent?
2024-12-28 23:49:15,205 - voice-business-agent - DEBUG - Validating phone number from text:  Could you please provide me with your mobile number again, ensuring it only contains digits, so I can connect you to an agent?
2024-12-28 23:49:15,204 - voice-business-agent - INFO - User speech received:  Could you please provide me with your mobile number again, ensuring it only contains digits, so I can connect you to an agent?
2024-12-28 23:49:15,205 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:49:15,205 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:49:15,205 - voice-business-agent - DEBUG - Validating phone number from text:  Could you please provide me with your mobile number again, ensuring it only contains digits, so I can connect you to an agent?
2024-12-28 23:49:15,205 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:49:15,205 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:49:19,513 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:49:19,513 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-28 23:49:19,890 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:49:19,890 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-28 23:49:19,904 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': '931357155'}, {'role': 'assistant', 'content': ' It seems that the mobile number you provided is missing a digit. Could you please check it and provide the full 10-digit mobile number?'}, {'role': 'user', 'content': '9313571554.'}, {'role': 'assistant', 'content': " Thank you for providing your mobile number. I'll connect you with an agent now. Please hold on."}, {'role': 'user', 'content': '14 9 Raka.'}, {'role': 'assistant', 'content': ' It appears there was a misunderstanding. If you need to provide a contact number for connection, please ensure it only contains digits. If you have another request or need further assistance, feel free to let me know!'}, {'role': 'user', 'content': 'Yes. Please connect to the agent.'}, {'role': 'assistant', 'content': ' Could you please provide me with your mobile number again, ensuring it only contains digits, so I can connect you to an agent?'}, {'role': 'user', 'content': '9313571554.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-28 23:49:19,906 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:49:19,907 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:49:19,907 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:49:19,907 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:49:19,908 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:49:20,477 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:19:20 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'266'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29722'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'556ms'), (b'x-request-id', b'req_d9e422fa54c915465d10aba7a44e839a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938ed9983c54b9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:49:20,478 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-28 23:49:20,478 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-28 23:49:20,479 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:49:20,671 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for providing your mobile number.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:49:20,672 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:49:20,673 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:49:20,673 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:49:20,673 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:49:20,673 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:49:20,891 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:49:20,891 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:49:20,892 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:49:21,930 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:19:21 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'913'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-9tc5m'), (b'x-envoy-upstream-service-time', b'868'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_fa7aeac534033f941c6e0da45b3cf7e1'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938ede6dee5511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:49:21,932 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:49:21,932 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:49:21,933 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:49:22,180 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:49:22,180 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-28 23:49:23,805 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:49:23,805 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:49:23,805 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:49:23,807 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I will now connect you to an agent.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:49:23,808 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:49:23,809 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:49:23,809 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:49:23,809 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:49:23,809 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:49:24,121 - voice-business-agent - INFO - User speech received: 9313571554.
2024-12-28 23:49:24,121 - voice-business-agent - INFO - User speech received: 9313571554.
2024-12-28 23:49:24,121 - voice-business-agent - DEBUG - Validating phone number from text: 9313571554.
2024-12-28 23:49:24,121 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-28 23:49:24,121 - voice-business-agent - INFO - User speech received: 9313571554.
2024-12-28 23:49:24,121 - voice-business-agent - INFO - User speech received: 9313571554.
2024-12-28 23:49:24,121 - voice-business-agent - DEBUG - Validating phone number from text: 9313571554.
2024-12-28 23:49:24,121 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-28 23:49:24,122 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-208' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:118> exception=NameError("name 'room' is not defined")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 121, in process_user_speech
    await room.local_participant.set_attributes({"phone_number": phone_number})
          ^^^^
NameError: name 'room' is not defined
2024-12-28 23:49:24,122 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-208' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:118> exception=NameError("name 'room' is not defined")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 121, in process_user_speech
    await room.local_participant.set_attributes({"phone_number": phone_number})
          ^^^^
NameError: name 'room' is not defined
2024-12-28 23:49:25,100 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:19:25 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'962'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-9lk8f'), (b'x-envoy-upstream-service-time', b'931'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_875bc85a3367af5fdb602cc7c2890b95'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938ef1fc345511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:49:25,101 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:49:25,101 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:49:25,101 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:49:25,971 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:49:25,971 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:49:25,971 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:49:25,974 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-28 23:49:25,975 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-28 23:49:25,975 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-28 23:49:25,975 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-28 23:49:25,976 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-28 23:49:25,976 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-28 23:49:26,814 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 28 Dec 2024 18:19:26 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'542'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-prkr2'), (b'x-envoy-upstream-service-time', b'527'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_2df64913f0a0e27c2401bd2cbcdde6d0'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f938eff8d435511-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-28 23:49:26,815 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-28 23:49:26,815 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-28 23:49:26,816 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-28 23:49:27,305 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-28 23:49:27,305 - httpcore.http11 - DEBUG - response_closed.started
2024-12-28 23:49:27,306 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-28 23:49:28,186 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:49:28,187 - voice-business-agent - INFO - User speech received:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on.
2024-12-28 23:49:28,186 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-28 23:49:28,187 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on.
2024-12-28 23:49:28,187 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:49:28,187 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-28 23:49:28,187 - voice-business-agent - INFO - User speech received:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on.
2024-12-28 23:49:28,187 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on.
2024-12-28 23:49:28,187 - voice-business-agent - INFO - No valid phone number found in text
2024-12-28 23:49:28,187 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 00:10:24,227 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 00:10:25,185 - livekit.agents - INFO - registered worker
2024-12-29 00:25:56,020 - livekit - ERROR - livekit_api::signal_client::signal_stream:192:livekit_api::signal_client::signal_stream - unhandled websocket message Err(Io(Os { code: 60, kind: TimedOut, message: "Operation timed out" }))
2024-12-29 00:25:56,020 - livekit - ERROR - livekit_api::signal_client::signal_stream:192:livekit_api::signal_client::signal_stream - unhandled websocket message Err(Io(Os { code: 60, kind: TimedOut, message: "Operation timed out" }))
2024-12-29 00:25:56,024 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 00:25:56,025 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 0
2024-12-29 00:25:56,025 - livekit - DEBUG - tokio_tungstenite:390:tokio_tungstenite - websocket close error: IO error: Broken pipe (os error 32)
2024-12-29 00:25:56,025 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:25:56,024 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 00:25:56,025 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 0
2024-12-29 00:25:56,025 - livekit - DEBUG - tokio_tungstenite:390:tokio_tungstenite - websocket close error: IO error: Broken pipe (os error 32)
2024-12-29 00:25:56,025 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:25:56,263 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:25:56,263 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:25:56,263 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:25:56,263 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:25:56,263 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:25:56,263 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:25:56,263 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:25:56,263 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:25:56,328 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:25:56,328 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:25:56,328 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:25:56,329 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:25:56,328 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:25:56,329 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:25:56,329 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:25:56,329 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:25:56,363 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:25:56,364 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 1
2024-12-29 00:25:56,365 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:25:56,363 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:25:56,364 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 1
2024-12-29 00:25:56,365 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:25:56,568 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:25:56,568 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:25:56,569 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:25:56,569 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:25:56,568 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:25:56,568 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:25:56,569 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:25:56,569 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:25:56,601 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:25:56,601 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:25:56,601 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:25:56,601 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:25:56,601 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:25:56,601 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:25:56,601 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:25:56,601 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:25:56,707 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:25:56,707 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:25:56,707 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 2
2024-12-29 00:25:56,707 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:25:56,707 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 2
2024-12-29 00:25:56,707 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:25:56,917 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:25:56,917 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:25:56,917 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:25:56,917 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:25:56,917 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:25:56,917 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:25:56,917 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:25:56,917 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:25:56,950 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:25:56,951 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:25:56,951 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:25:56,950 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:25:56,951 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:25:56,951 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:25:56,951 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:25:56,951 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:25:57,051 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:25:57,055 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 3
2024-12-29 00:25:57,055 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:25:57,051 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:25:57,055 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 3
2024-12-29 00:25:57,055 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:25:57,254 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:25:57,254 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:25:57,254 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:25:57,254 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:25:57,254 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:25:57,254 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:25:57,254 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:25:57,254 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:25:57,293 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:25:57,293 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:25:57,293 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:25:57,294 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:25:57,294 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:25:57,293 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:25:57,294 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:25:57,294 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:25:57,406 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:25:57,406 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 4
2024-12-29 00:25:57,406 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:25:57,406 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:25:57,406 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 4
2024-12-29 00:25:57,406 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:25:57,632 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:25:57,632 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:25:57,632 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:25:57,632 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:25:57,632 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:25:57,632 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:25:57,632 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:25:57,632 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:25:57,666 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:25:57,666 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:25:57,666 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:25:57,666 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:25:57,666 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:25:57,666 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:25:57,666 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:25:57,666 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:25:57,773 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:25:57,773 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 5
2024-12-29 00:25:57,773 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:25:57,773 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:25:57,773 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 5
2024-12-29 00:25:57,773 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:25:57,999 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:25:57,999 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:25:57,999 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:25:57,999 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:25:57,999 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:25:57,999 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:25:57,999 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:25:57,999 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:25:58,040 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:25:58,040 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:25:58,040 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:25:58,040 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:25:58,040 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:25:58,040 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:25:58,040 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:25:58,040 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:25:58,157 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:25:58,157 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 6
2024-12-29 00:25:58,157 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:25:58,157 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:25:58,157 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 6
2024-12-29 00:25:58,157 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:25:58,363 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:25:58,363 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:25:58,363 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:25:58,363 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:25:58,363 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:25:58,363 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:25:58,363 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:25:58,363 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:25:58,396 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:25:58,396 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:25:58,396 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:25:58,396 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:25:58,396 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:25:58,396 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:25:58,396 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:25:58,396 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:25:58,499 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:25:58,499 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 7
2024-12-29 00:25:58,499 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:25:58,499 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:25:58,499 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 7
2024-12-29 00:25:58,499 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:25:58,702 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:25:58,702 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:25:58,702 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:25:58,702 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:25:58,702 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:25:58,702 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:25:58,702 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:25:58,702 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:25:58,735 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:25:58,735 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:25:58,735 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:25:58,736 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:25:58,735 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:25:58,736 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:25:58,736 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:25:58,736 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:25:58,836 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:25:58,836 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 8
2024-12-29 00:25:58,836 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:25:58,836 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:25:58,836 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 8
2024-12-29 00:25:58,836 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:41:54,290 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:41:54,290 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:41:54,290 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:41:54,290 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:41:54,290 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:41:54,290 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:41:54,290 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:41:54,290 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:41:54,650 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:41:54,650 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:41:54,651 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:41:54,650 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:41:54,651 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:41:54,650 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:41:54,651 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:41:54,651 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:41:54,758 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:41:54,758 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 9
2024-12-29 00:41:54,758 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:41:54,758 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:41:54,758 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 9
2024-12-29 00:41:54,758 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_fnJnUcV6s2y2&access_token=...
2024-12-29 00:41:55,032 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:41:55,033 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:41:55,033 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:41:55,032 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 00:41:55,033 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:41:55,033 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 00:41:55,033 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 00:41:55,033 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 00:41:55,093 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:41:55,093 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:41:55,093 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 00:41:55,093 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:41:55,093 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 00:41:55,093 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:41:55,093 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 00:41:55,093 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 00:41:55,267 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:41:55,267 - livekit - ERROR - livekit::rtc_engine:614:livekit::rtc_engine - failed to reconnect to the livekit room
2024-12-29 00:41:55,267 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 00:41:55,267 - livekit - ERROR - livekit::rtc_engine:614:livekit::rtc_engine - failed to reconnect to the livekit room
2024-12-29 00:41:55,273 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: UnknownReason
2024-12-29 00:41:55,273 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: UnknownReason
2024-12-29 00:41:55,274 - livekit.agents - DEBUG - shutting down job task
2024-12-29 00:41:55,275 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 00:41:55,275 - livekit.agents - INFO - process exiting
2024-12-29 00:41:55,274 - livekit.agents - DEBUG - shutting down job task
2024-12-29 00:41:55,275 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 01:31:35,731 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 01:31:35,894 - livekit.agents - INFO - registered worker
2024-12-29 01:49:40,357 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 01:49:40,497 - livekit.agents - INFO - registered worker
2024-12-29 02:38:41,119 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 02:38:41,283 - livekit.agents - INFO - registered worker
2024-12-29 02:56:36,777 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 02:56:36,947 - livekit.agents - INFO - registered worker
2024-12-29 03:14:27,489 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 03:14:27,670 - livekit.agents - INFO - registered worker
2024-12-29 03:32:13,859 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 03:32:14,338 - livekit.agents - INFO - registered worker
2024-12-29 03:49:12,638 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 03:49:12,838 - livekit.agents - INFO - registered worker
2024-12-29 04:05:59,309 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 04:06:00,413 - livekit.agents - INFO - registered worker
2024-12-29 04:55:22,456 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 04:55:25,104 - livekit.agents - INFO - registered worker
2024-12-29 05:12:07,125 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 05:12:07,305 - livekit.agents - INFO - registered worker
2024-12-29 05:29:56,664 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 05:29:56,865 - livekit.agents - INFO - registered worker
2024-12-29 05:46:47,373 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 05:46:47,537 - livekit.agents - INFO - registered worker
2024-12-29 06:35:09,773 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 06:35:09,983 - livekit.agents - INFO - registered worker
2024-12-29 07:21:32,689 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 07:21:32,894 - livekit.agents - INFO - registered worker
2024-12-29 08:14:29,709 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 08:14:30,006 - livekit.agents - INFO - registered worker
2024-12-29 08:31:32,128 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 08:31:32,425 - livekit.agents - INFO - registered worker
2024-12-29 08:48:34,621 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 08:48:35,201 - livekit.agents - INFO - registered worker
2024-12-29 09:53:47,553 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 09:53:47,773 - livekit.agents - INFO - registered worker
2024-12-29 10:19:29,843 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 10:19:30,524 - livekit.agents - INFO - registered worker
2024-12-29 10:27:43,113 - livekit.agents - INFO - shutting down worker
2024-12-29 10:27:44,470 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:27:44,475 - livekit.agents - INFO - starting worker
2024-12-29 10:27:44,635 - livekit.agents - INFO - registered worker
2024-12-29 10:34:52,314 - livekit.agents - INFO - shutting down worker
2024-12-29 10:34:53,335 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:34:53,352 - livekit.agents - INFO - starting worker
2024-12-29 10:34:53,532 - livekit.agents - INFO - registered worker
2024-12-29 10:35:08,255 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:35:08,257 - livekit.agents - DEV - Watching /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python
2024-12-29 10:35:09,103 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:35:09,113 - livekit.agents - INFO - starting worker
2024-12-29 10:35:09,292 - livekit.agents - INFO - registered worker
2024-12-29 10:35:23,885 - livekit.agents - INFO - received job request
2024-12-29 10:35:24,955 - livekit.agents - INFO - initializing job process
2024-12-29 10:35:24,956 - livekit.agents - INFO - job process initialized
2024-12-29 10:35:24,955 - livekit.agents - INFO - initializing job process
2024-12-29 10:35:24,956 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:35:24,956 - livekit.agents - INFO - job process initialized
2024-12-29 10:35:24,956 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:35:25,086 - voice-business-agent - INFO - Connecting to room voice_assistant_room_9362
2024-12-29 10:35:25,086 - voice-business-agent - INFO - Connecting to room voice_assistant_room_9362
2024-12-29 10:35:25,087 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:35:25,087 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:35:25,087 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:35:25,087 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:35:25,088 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:35:25,088 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:35:25,336 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:35:25,336 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:35:25,337 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:35:25,337 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:35:25,336 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:35:25,336 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:35:25,337 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:35:25,337 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:35:25,374 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:35:25,374 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:35:25,374 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:35:25,374 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:35:25,374 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:35:25,374 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:35:25,374 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:35:25,374 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:35:25,485 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:35:25,485 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:35:25,694 - voice-business-agent - INFO - Participant connected: voice_assistant_user_7260
2024-12-29 10:35:25,694 - voice-business-agent - INFO - Participant connected: voice_assistant_user_7260
2024-12-29 10:35:25,747 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:35:25,747 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:35:25,806 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:35:25,807 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 10:35:25,822 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x117fe3f50>
2024-12-29 10:35:25,822 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x121152720> server_hostname='api.openai.com' timeout=10.0
2024-12-29 10:35:25,842 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x117320f50>
2024-12-29 10:35:25,843 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:35:25,843 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:35:25,843 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:35:25,843 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:35:25,844 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:35:28,754 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:05:28 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'2565'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-canary-6f6dbb785f-l9njh'), (b'x-envoy-upstream-service-time', b'2553'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_af2ea4f067edeb12d2d07167fea86ced'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=w36yAvsjBpMuxkMYbOw9ygdvKxTr4bhnzhGbjG1WO7g-1735448728-1.0.1.1-_JxHqqWl0a4ynrk71OX1v.Ptpx7ASGhH.9UAOY1GwAjSW6bEqg_ybevCdUIKUFgJSi57ve6ppRlhp9oVJWmK8Q; path=/; expires=Sun, 29-Dec-24 05:35:28 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=k2DUQXDjZPNNEBkolWQTMLCRxkkK7PiOarIPD7xwNLQ-1735448728761-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f974148affa54e6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:35:28,756 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:35:28,756 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:35:28,756 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:35:29,021 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:35:29,021 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:35:29,573 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:35:29,573 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:35:29,573 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:35:31,064 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:35:31,064 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:35:31,065 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 10:35:31,065 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 10:35:31,065 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 10:35:31,065 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:35:31,065 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:35:31,065 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 10:35:31,065 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:35:31,065 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:35:35,587 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:35:35,587 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:35:35,723 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:35:35,723 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:35:35,729 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:35:35,730 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 10:35:35,741 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x124f96710>
2024-12-29 10:35:35,742 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x121152690> server_hostname='api.openai.com' timeout=15.0
2024-12-29 10:35:35,756 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x124fba710>
2024-12-29 10:35:35,756 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:35:35,757 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:35:35,757 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:35:35,757 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:35:35,757 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:35:36,411 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:05:36 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'360'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29917'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'166ms'), (b'x-request-id', b'req_cca1195e8eb24144e31e7b81026f768c'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=VaT3WJPEhKk2eklxVx_vplIhkIPdl88.M7cGZ8m0tU0-1735448736-1.0.1.1-Jzv45HsXzBPtIDhIE.kTtxs9FFRnvjrlgWDiA..d_hLTBBapl_h2hKnA.WFu0V.Q9dJNmq8in29bzBqhy_MljQ; path=/; expires=Sun, 29-Dec-24 05:35:36 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=UMRUGD0zLDIqf.dRsEJ5rwKlIwIi9ymlVzF4bnksZ.4-1735448736424-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9741869d485505-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:35:36,413 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:35:36,413 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:35:36,414 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:35:36,672 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, I can help you with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:35:36,673 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:35:36,674 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:35:36,674 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:35:36,674 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:35:36,674 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:35:36,968 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:35:36,969 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:35:36,969 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:35:38,182 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:05:38 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1208'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-n4lff'), (b'x-envoy-upstream-service-time', b'1194'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_ba9c5dfa491ab0b86a29b506b4b8c68f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97418c59fe54e6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:35:38,183 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:35:38,183 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:35:38,183 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:35:38,438 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:35:38,438 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:35:38,934 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:35:38,934 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:35:38,935 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:35:38,937 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide me with your mobile number so I can connect you to an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:35:38,939 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:35:38,939 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:35:38,939 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:35:38,940 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:35:38,940 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:35:40,139 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 10:35:40,140 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 10:35:40,140 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to agent.
2024-12-29 10:35:40,140 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:35:40,139 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 10:35:40,140 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 10:35:40,140 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to agent.
2024-12-29 10:35:40,140 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:35:40,387 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:05:40 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'613'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-69v7p'), (b'x-envoy-upstream-service-time', b'570'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_7b2939b4d09c788795f5cfa2f15c15d0'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97419a8a7254e6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:35:40,387 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:35:40,387 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:35:40,388 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:35:42,514 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:35:42,514 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:35:42,514 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:35:45,686 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:35:45,687 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 10:35:45,686 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:35:45,687 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 10:35:45,687 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:35:45,687 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 10:35:45,687 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:35:45,687 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 10:35:45,687 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:35:45,687 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:35:51,338 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:35:51,338 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:35:51,715 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:35:51,715 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:35:51,722 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 931-357-1554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:35:51,725 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:35:51,725 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:35:51,726 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:35:51,726 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:35:51,726 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:35:52,510 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:05:52 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'495'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29880'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'240ms'), (b'x-request-id', b'req_bc7d7d8bb86f657ae29b96b250cf5fd9'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9741ea6f105505-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:35:52,511 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:35:52,511 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:35:52,511 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:35:53,608 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Thank you. I'll process the number 9313571554 to connect you with an agent.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:35:53,609 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:35:53,609 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:35:53,609 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:35:53,610 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:35:53,610 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:35:53,680 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:35:53,680 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:35:53,680 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:35:55,910 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:05:55 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'2005'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-x5x8s'), (b'x-envoy-upstream-service-time', b'1967'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_4841d95d02967de167b528715bc82502'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9741f63acc54e6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:35:55,911 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:35:55,913 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:35:55,914 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:35:56,166 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:35:56,166 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:35:57,954 - voice-business-agent - INFO - User speech received: Yes. It's 931-357-1554.
2024-12-29 10:35:57,955 - voice-business-agent - INFO - User speech received: Yes. It's 931-357-1554.
2024-12-29 10:35:57,955 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 931-357-1554.
2024-12-29 10:35:57,955 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 10:35:57,954 - voice-business-agent - INFO - User speech received: Yes. It's 931-357-1554.
2024-12-29 10:35:57,955 - voice-business-agent - INFO - User speech received: Yes. It's 931-357-1554.
2024-12-29 10:35:57,955 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 931-357-1554.
2024-12-29 10:35:57,955 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 10:35:57,956 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-88' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:118> exception=AttributeError("'coroutine' object has no attribute 'local_participant'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 121, in process_user_speech
    await  ctx.connect().local_participant.set_attributes({"phone_number": phone_number})
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'local_participant'
2024-12-29 10:35:57,956 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-88' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:118> exception=AttributeError("'coroutine' object has no attribute 'local_participant'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 121, in process_user_speech
    await  ctx.connect().local_participant.set_attributes({"phone_number": phone_number})
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'local_participant'
2024-12-29 10:35:58,103 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:35:58,104 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:35:58,104 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:35:58,105 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:35:58,107 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:35:58,107 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:35:58,107 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:35:58,108 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:35:58,108 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:35:58,875 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:05:58 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'436'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-nntcr'), (b'x-envoy-upstream-service-time', b'424'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_50a3b6c8b3e66c5f1c7e9698fd84535e'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9742124a5654e6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:35:58,876 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:35:58,876 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:35:58,876 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:35:59,458 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:35:59,459 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:35:59,460 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:36:03,484 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:36:03,484 - voice-business-agent - INFO - User speech received:  Thank you. I'll process the number 9313571554 to connect you with an agent. Please hold on.
2024-12-29 10:36:03,484 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. I'll process the number 9313571554 to connect you with an agent. Please hold on.
2024-12-29 10:36:03,484 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:36:03,484 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 10:36:03,484 - voice-business-agent - INFO - User speech received:  Thank you. I'll process the number 9313571554 to connect you with an agent. Please hold on.
2024-12-29 10:36:03,485 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:36:03,484 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. I'll process the number 9313571554 to connect you with an agent. Please hold on.
2024-12-29 10:36:03,485 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-92' coro=<entrypoint.<locals>.handle_agent_speechas() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:137> exception=AttributeError("'coroutine' object has no attribute 'local_participant'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 139, in handle_agent_speechas
    phon_num= await  ctx.connect().local_participant.get_attributes("phone_number")
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'local_participant'
2024-12-29 10:36:03,484 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 10:36:03,485 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:36:03,485 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-92' coro=<entrypoint.<locals>.handle_agent_speechas() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:137> exception=AttributeError("'coroutine' object has no attribute 'local_participant'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 139, in handle_agent_speechas
    phon_num= await  ctx.connect().local_participant.get_attributes("phone_number")
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'local_participant'
2024-12-29 10:36:15,331 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:36:15,331 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:36:15,332 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:36:15,332 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:36:15,335 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 931-357-1554."}, {'role': 'assistant', 'content': " Thank you. I'll process the number 9313571554 to connect you with an agent. Please hold on."}, {'role': 'user', 'content': 'Well,'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:36:15,336 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:36:15,337 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:36:15,337 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:36:15,337 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:36:15,337 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:36:16,052 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:06:16 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'416'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29853'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'294ms'), (b'x-request-id', b'req_08495f5c530f6e919db6a4bc59b4fed5'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97427dfc8c5505-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:36:16,054 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:36:16,054 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:36:16,054 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:36:16,185 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm connecting you now.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:36:16,187 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:36:16,188 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:36:16,188 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:36:16,189 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:36:16,189 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:36:16,227 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:36:16,227 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:36:16,227 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:36:17,046 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:06:17 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'480'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-jgm4n'), (b'x-envoy-upstream-service-time', b'461'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_dd82269783e06afff8ee4788a644f944'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9742835b0454e6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:36:17,046 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:36:17,046 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:36:17,046 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:36:17,338 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:36:17,338 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:36:17,626 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:36:17,627 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:36:17,627 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:36:17,629 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'One moment, please.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:36:17,631 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:36:17,631 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:36:17,631 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:36:17,631 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:36:17,632 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:36:18,771 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:06:18 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'808'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-gnlp6'), (b'x-envoy-upstream-service-time', b'793'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_2b5056cccd8455f3990633012c0f0e7f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97428c5e8454e6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:36:18,772 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:36:18,772 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:36:18,773 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:36:19,348 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:36:19,349 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:36:19,350 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:36:19,351 - voice-business-agent - INFO - User speech received: Well,
2024-12-29 10:36:19,351 - voice-business-agent - INFO - User speech received: Well,
2024-12-29 10:36:19,351 - voice-business-agent - DEBUG - Validating phone number from text: Well,
2024-12-29 10:36:19,351 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:36:19,351 - voice-business-agent - INFO - User speech received: Well,
2024-12-29 10:36:19,351 - voice-business-agent - INFO - User speech received: Well,
2024-12-29 10:36:19,351 - voice-business-agent - DEBUG - Validating phone number from text: Well,
2024-12-29 10:36:19,351 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:36:20,116 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:36:20,116 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:36:20,117 - voice-business-agent - INFO - User speech received:  I'm connecting you now. One moment, please.
2024-12-29 10:36:20,117 - voice-business-agent - DEBUG - Validating phone number from text:  I'm connecting you now. One moment, please.
2024-12-29 10:36:20,117 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:36:20,117 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:36:20,117 - voice-business-agent - INFO - User speech received:  I'm connecting you now. One moment, please.
2024-12-29 10:36:20,117 - voice-business-agent - DEBUG - Validating phone number from text:  I'm connecting you now. One moment, please.
2024-12-29 10:36:20,117 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:36:20,117 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:36:23,032 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:36:23,032 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:36:23,111 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:36:23,111 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:36:23,119 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 931-357-1554."}, {'role': 'assistant', 'content': " Thank you. I'll process the number 9313571554 to connect you with an agent. Please hold on."}, {'role': 'user', 'content': 'Well,'}, {'role': 'assistant', 'content': " I'm connecting you now. One moment, please."}, {'role': 'user', 'content': 'I need to medically'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:36:23,121 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:36:23,122 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:36:23,122 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:36:23,123 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:36:23,123 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:36:23,692 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:06:23 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'275'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29836'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'328ms'), (b'x-request-id', b'req_b581111adb3f8c63fc100c76630eba6f'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9742aea98d5505-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:36:23,692 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:36:23,692 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:36:23,692 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:36:24,102 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I see. Let me connect you with an agent who can assist you with medical inquiries.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:36:24,104 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:36:24,105 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:36:24,105 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:36:24,106 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:36:24,106 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:36:24,167 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:36:24,167 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:36:24,167 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:36:25,480 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:06:25 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1033'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-5f7kg'), (b'x-envoy-upstream-service-time', b'1008'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d0314da21c8daf7d4c551e20afb0f4a8'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9742b4cbd454e6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:36:25,481 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:36:25,481 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:36:25,481 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:36:25,819 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:36:25,819 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:36:26,976 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:36:26,977 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:36:26,977 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:36:26,980 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please stay on the line.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:36:26,981 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:36:26,982 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:36:26,982 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:36:26,983 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:36:26,983 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:36:27,341 - voice-business-agent - INFO - User speech received: I need to medically
2024-12-29 10:36:27,342 - voice-business-agent - INFO - User speech received: I need to medically
2024-12-29 10:36:27,342 - voice-business-agent - DEBUG - Validating phone number from text: I need to medically
2024-12-29 10:36:27,342 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:36:27,341 - voice-business-agent - INFO - User speech received: I need to medically
2024-12-29 10:36:27,342 - voice-business-agent - INFO - User speech received: I need to medically
2024-12-29 10:36:27,342 - voice-business-agent - DEBUG - Validating phone number from text: I need to medically
2024-12-29 10:36:27,342 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:36:27,470 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 10:36:27,470 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 10:36:27,473 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:36:27,473 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:36:27,474 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:36:27,474 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:36:28,011 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:06:28 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'693'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-w8xgw'), (b'x-envoy-upstream-service-time', b'683'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_9f41eec9b9e40afeca9cd4df7ab6e289'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9742c6c8c254e6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:36:28,012 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:36:28,013 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:36:28,013 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:36:28,887 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:36:28,889 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:36:28,889 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:37:27,681 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:37:27,681 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:37:28,185 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:37:28,185 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:37:28,191 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 931-357-1554."}, {'role': 'assistant', 'content': " Thank you. I'll process the number 9313571554 to connect you with an agent. Please hold on."}, {'role': 'user', 'content': 'Well,'}, {'role': 'assistant', 'content': " I'm connecting you now. One moment, please."}, {'role': 'user', 'content': 'I need to medically'}, {'role': 'assistant', 'content': ' I see. Let me connect you...'}, {'role': 'user', 'content': "It's"}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:37:28,192 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:37:28,193 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:37:28,193 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:37:28,193 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:37:28,193 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:37:28,821 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:07:28 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'326'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29825'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'350ms'), (b'x-request-id', b'req_691b7af8c4c1f36e075ebbc8175fe308'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f974445584d5505-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:37:28,822 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:37:28,822 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:37:28,822 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:37:29,243 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm connecting you to the appropriate agent who can assist you with medical inquiries.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:37:29,245 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:37:29,246 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:37:29,246 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:37:29,246 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:37:29,247 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:37:29,328 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:37:29,328 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:37:29,329 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:37:31,240 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:07:31 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1665'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-qsccn'), (b'x-envoy-upstream-service-time', b'1651'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_7cbc6857b78f0b2bfb4b3b284c05dcb9'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97444becd754e6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:37:31,245 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:37:31,246 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:37:31,246 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:37:31,530 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:37:31,530 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:37:32,403 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:37:32,404 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:37:32,404 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:37:32,406 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold for just a moment.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:37:32,407 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:37:32,407 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:37:32,407 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:37:32,407 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:37:32,408 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:37:33,223 - voice-business-agent - INFO - User speech received: It's
2024-12-29 10:37:33,223 - voice-business-agent - INFO - User speech received: It's
2024-12-29 10:37:33,223 - voice-business-agent - INFO - User speech received: It's
2024-12-29 10:37:33,224 - voice-business-agent - DEBUG - Validating phone number from text: It's
2024-12-29 10:37:33,223 - voice-business-agent - INFO - User speech received: It's
2024-12-29 10:37:33,224 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:37:33,224 - voice-business-agent - DEBUG - Validating phone number from text: It's
2024-12-29 10:37:33,224 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:37:33,564 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:07:33 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'776'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-8khx7'), (b'x-envoy-upstream-service-time', b'753'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_6b799c9f862f3ba7f962806361ea4b6d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97445faad654e6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:37:33,564 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:37:33,565 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:37:33,565 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:37:34,424 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:37:34,424 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:37:34,424 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:37:37,548 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:37:37,548 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:37:37,551 - voice-business-agent - INFO - User speech received:  I'm connecting you to the appropriate agent who can assist you with medical inquiries. Please hold for just a moment.
2024-12-29 10:37:37,551 - voice-business-agent - DEBUG - Validating phone number from text:  I'm connecting you to the appropriate agent who can assist you with medical inquiries. Please hold for just a moment.
2024-12-29 10:37:37,551 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:37:37,551 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:37:37,551 - voice-business-agent - INFO - User speech received:  I'm connecting you to the appropriate agent who can assist you with medical inquiries. Please hold for just a moment.
2024-12-29 10:37:37,551 - voice-business-agent - DEBUG - Validating phone number from text:  I'm connecting you to the appropriate agent who can assist you with medical inquiries. Please hold for just a moment.
2024-12-29 10:37:37,551 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:37:37,551 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:38:34,688 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:38:34,688 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:38:35,066 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:38:35,066 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:38:35,073 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 931-357-1554."}, {'role': 'assistant', 'content': " Thank you. I'll process the number 9313571554 to connect you with an agent. Please hold on."}, {'role': 'user', 'content': 'Well,'}, {'role': 'assistant', 'content': " I'm connecting you now. One moment, please."}, {'role': 'user', 'content': 'I need to medically'}, {'role': 'assistant', 'content': ' I see. Let me connect you...'}, {'role': 'user', 'content': "It's"}, {'role': 'assistant', 'content': " I'm connecting you to the appropriate agent who can assist you with medical inquiries. Please hold for just a moment."}, {'role': 'user', 'content': 'Me?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:38:35,075 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:38:35,075 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:38:35,075 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:38:35,076 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:38:35,076 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:38:35,696 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:08:35 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'296'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29793'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'414ms'), (b'x-request-id', b'req_cb80290ac4eb4c65daab8204c05bbbda'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9745e75b165505-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:38:35,698 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:38:35,698 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:38:35,699 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:38:35,875 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Yes, I'm here to help you.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:38:35,876 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:38:35,876 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:38:35,876 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:38:35,876 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:38:35,876 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:38:36,211 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:38:36,212 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:38:36,212 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:38:37,895 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:08:37 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1192'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-zh595'), (b'x-envoy-upstream-service-time', b'1177'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_7ded75e63043222589471b22e4ca696f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9745ec6f1d54e6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:38:37,896 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:38:37,896 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:38:37,896 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:38:38,154 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:38:38,154 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:38:38,656 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:38:38,656 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:38:38,656 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:38:38,657 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm connecting you to an agent who can assist with your needs.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:38:38,658 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:38:38,658 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:38:38,658 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:38:38,658 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:38:38,659 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:38:39,695 - voice-business-agent - INFO - User speech received: Me?
2024-12-29 10:38:39,697 - voice-business-agent - INFO - User speech received: Me?
2024-12-29 10:38:39,695 - voice-business-agent - INFO - User speech received: Me?
2024-12-29 10:38:39,698 - voice-business-agent - DEBUG - Validating phone number from text: Me?
2024-12-29 10:38:39,697 - voice-business-agent - INFO - User speech received: Me?
2024-12-29 10:38:39,698 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:38:39,698 - voice-business-agent - DEBUG - Validating phone number from text: Me?
2024-12-29 10:38:39,698 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:38:40,354 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:08:40 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1398'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-lt5h2'), (b'x-envoy-upstream-service-time', b'1384'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a9a21b6141400981eeb75a165f790cdc'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9745fdca0754e6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:38:40,355 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:38:40,356 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:38:40,356 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:38:41,576 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:38:41,577 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:38:41,577 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:38:41,578 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:38:41,579 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:38:41,580 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:38:41,580 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:38:41,581 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:38:41,581 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:38:43,089 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:08:43 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1202'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-c5np5'), (b'x-envoy-upstream-service-time', b'1185'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_79b07ff6eaf7dea514d31e01eb10ccbf'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f974610080b54e6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:38:43,090 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:38:43,090 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:38:43,090 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:38:43,641 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:38:43,642 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:38:43,642 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:38:44,927 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:38:44,927 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:38:44,928 - voice-business-agent - INFO - User speech received:  Yes, I'm here to help you. I'm connecting you to an agent who can assist with your needs. Please hold on.
2024-12-29 10:38:44,928 - voice-business-agent - DEBUG - Validating phone number from text:  Yes, I'm here to help you. I'm connecting you to an agent who can assist with your needs. Please hold on.
2024-12-29 10:38:44,928 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:38:44,928 - voice-business-agent - INFO - User speech received:  Yes, I'm here to help you. I'm connecting you to an agent who can assist with your needs. Please hold on.
2024-12-29 10:38:44,928 - voice-business-agent - DEBUG - Validating phone number from text:  Yes, I'm here to help you. I'm connecting you to an agent who can assist with your needs. Please hold on.
2024-12-29 10:38:44,928 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:38:44,928 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:38:44,928 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:40:18,134 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:40:18,134 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:40:18,513 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:40:18,513 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:40:18,523 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 931-357-1554."}, {'role': 'assistant', 'content': " Thank you. I'll process the number 9313571554 to connect you with an agent. Please hold on."}, {'role': 'user', 'content': 'Well,'}, {'role': 'assistant', 'content': " I'm connecting you now. One moment, please."}, {'role': 'user', 'content': 'I need to medically'}, {'role': 'assistant', 'content': ' I see. Let me connect you...'}, {'role': 'user', 'content': "It's"}, {'role': 'assistant', 'content': " I'm connecting you to the appropriate agent who can assist you with medical inquiries. Please hold for just a moment."}, {'role': 'user', 'content': 'Me?'}, {'role': 'assistant', 'content': " Yes, I'm here to help you. I'm connecting you to an agent who can assist with your needs. Please hold on."}, {'role': 'user', 'content': 'Great.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:40:18,526 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:40:18,526 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:40:18,526 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:40:18,527 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:40:18,527 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:40:19,127 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:10:19 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'298'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29763'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'474ms'), (b'x-request-id', b'req_9efff18630a3df1e284fb06657524f14'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97486de9ca5505-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:40:19,128 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:40:19,128 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:40:19,128 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:40:19,320 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for your patience.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:40:19,321 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:40:19,321 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:40:19,321 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:40:19,321 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:40:19,322 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:40:19,380 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:40:19,380 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:40:19,381 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:40:20,899 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:10:20 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1231'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-27zdr'), (b'x-envoy-upstream-service-time', b'1204'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f6f3d206897839482f45b1b4751cf806'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f974872ebd954e6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:40:20,900 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:40:20,900 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:40:20,900 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:40:21,167 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:40:21,167 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:40:21,431 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:40:21,431 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:40:21,431 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:40:21,433 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm connecting you now.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:40:21,434 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:40:21,434 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:40:21,434 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:40:21,435 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:40:21,435 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:40:23,225 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:10:23 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1436'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-nps9h'), (b'x-envoy-upstream-service-time', b'1392'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_13a5f643a547069666871574b0d3b846'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9748801ac254e6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:40:23,232 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:40:23,234 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:40:23,235 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:40:23,741 - voice-business-agent - INFO - User speech received: Great.
2024-12-29 10:40:23,743 - voice-business-agent - INFO - User speech received: Great.
2024-12-29 10:40:23,743 - voice-business-agent - DEBUG - Validating phone number from text: Great.
2024-12-29 10:40:23,741 - voice-business-agent - INFO - User speech received: Great.
2024-12-29 10:40:23,744 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:40:23,743 - voice-business-agent - INFO - User speech received: Great.
2024-12-29 10:40:23,743 - voice-business-agent - DEBUG - Validating phone number from text: Great.
2024-12-29 10:40:23,744 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:40:24,010 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:40:24,010 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:40:24,010 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:40:24,668 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:40:24,668 - voice-business-agent - INFO - User speech received:  Thank you for your patience. I'm connecting you now.
2024-12-29 10:40:24,668 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:40:24,668 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for your patience. I'm connecting you now.
2024-12-29 10:40:24,668 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:40:24,668 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:40:24,668 - voice-business-agent - INFO - User speech received:  Thank you for your patience. I'm connecting you now.
2024-12-29 10:40:24,668 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for your patience. I'm connecting you now.
2024-12-29 10:40:24,668 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:40:24,668 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:44:07,231 - livekit.agents - INFO - shutting down worker
2024-12-29 10:44:07,239 - livekit.agents - INFO - shutting down worker
2024-12-29 10:44:07,240 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:44:07,240 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:44:07,241 - livekit.agents - INFO - process exiting
2024-12-29 10:44:07,320 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:44:07,320 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:44:07,321 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: ClientInitiated
2024-12-29 10:44:07,321 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: ClientInitiated
2024-12-29 10:44:07,322 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:44:07,322 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:44:08,720 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:44:08,720 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:44:08,726 - livekit.agents - INFO - starting worker
2024-12-29 10:44:08,726 - livekit.agents - INFO - starting worker
2024-12-29 10:44:08,735 - livekit.agents - DEV - reloading job
2024-12-29 10:44:08,943 - livekit.agents - INFO - registered worker
2024-12-29 10:44:08,957 - livekit.agents - INFO - registered worker
2024-12-29 10:44:09,737 - livekit.agents - INFO - initializing job process
2024-12-29 10:44:09,738 - livekit.agents - INFO - job process initialized
2024-12-29 10:44:09,738 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:44:09,737 - livekit.agents - INFO - initializing job process
2024-12-29 10:44:09,738 - livekit.agents - INFO - job process initialized
2024-12-29 10:44:09,738 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:44:09,780 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 10:44:09,844 - voice-business-agent - INFO - Connecting to room voice_assistant_room_9362
2024-12-29 10:44:09,844 - voice-business-agent - INFO - Connecting to room voice_assistant_room_9362
2024-12-29 10:44:09,845 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:44:09,845 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:44:09,845 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:44:09,845 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:44:09,846 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:44:09,846 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:44:09,954 - livekit.agents - INFO - registered worker
2024-12-29 10:44:10,112 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:44:10,112 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:44:10,112 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:44:10,112 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:44:10,112 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:44:10,112 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:44:10,112 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:44:10,112 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:44:10,148 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:44:10,148 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:44:10,148 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:44:10,148 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:44:10,148 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:44:10,149 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:44:10,148 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:44:10,149 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:44:10,258 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:44:10,258 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:44:10,469 - voice-business-agent - INFO - Participant connected: voice_assistant_user_7260
2024-12-29 10:44:10,469 - voice-business-agent - INFO - Participant connected: voice_assistant_user_7260
2024-12-29 10:44:10,518 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:44:10,518 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:44:10,568 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:44:10,569 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 10:44:10,595 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x114903450>
2024-12-29 10:44:10,595 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x116f527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 10:44:10,616 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11430a1d0>
2024-12-29 10:44:10,617 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:44:10,618 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:44:10,618 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:44:10,618 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:44:10,618 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:44:11,764 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:14:11 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'825'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-kbdds'), (b'x-envoy-upstream-service-time', b'811'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_0a6d4823aea2a591e52da1765653f96d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=kHUUHvBdKYBJU4HRE6JveUpcL1KMYghwJJBd_10OliY-1735449251-1.0.1.1-rt44nNpiV0RG_4YVB6VpAVdHOb9gWRQv116W8DKQ8BnLVlAoMgTEG5vtuKpuWRdljGUbyA4aonSdGAbJ36S8gA; path=/; expires=Sun, 29-Dec-24 05:44:11 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=9hTx0oChCFFiS2DTlOODEszXNysuwZJMv.T78L4_9KE-1735449251775-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f974e188f6e5484-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:44:11,765 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:44:11,765 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:44:11,766 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:44:12,027 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:44:12,027 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:44:12,555 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:44:12,556 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:44:12,556 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:44:14,017 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:44:14,018 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 10:44:14,017 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:44:14,018 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 10:44:14,018 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 10:44:14,018 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:44:14,018 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 10:44:14,018 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:44:14,018 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:44:14,018 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:44:17,016 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:44:17,016 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:44:17,817 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:44:17,817 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:44:17,825 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:44:17,826 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 10:44:17,865 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12457eb90>
2024-12-29 10:44:17,865 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x116f52720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 10:44:17,894 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x114916450>
2024-12-29 10:44:17,895 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:44:17,895 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:44:17,895 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:44:17,896 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:44:17,896 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:44:18,062 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:44:18,062 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:44:18,062 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 10:44:18,062 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:44:18,062 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 10:44:18,062 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:44:18,065 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:44:18,065 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 10:44:18,065 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:44:18,065 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 10:44:18,066 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:44:18,066 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:44:18,066 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:44:18,077 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11434b590>
2024-12-29 10:44:18,077 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x116f52720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 10:44:18,094 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x124558b50>
2024-12-29 10:44:18,094 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:44:18,094 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:44:18,094 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:44:18,095 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:44:18,095 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:44:18,692 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:14:18 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'269'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29917'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'166ms'), (b'x-request-id', b'req_e4c460c4705bd96c4eaacc33b73924b2'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=3LvTC.wPYryMSRPnlF9AKlg1cKQuL_xPNQghR4q9IMY-1735449258-1.0.1.1-s1AG412OcSTw5wK0UhoKu.2cupwYChAsgkYY4HgraAIXEIHsaDhU26KNRe4Auku.644SolRlqWdUIy9gbxImGQ; path=/; expires=Sun, 29-Dec-24 05:44:18 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=Jfi5ySxz02eXXRp.van02PmXSS5z4DaA89VxUuqeWkI-1735449258706-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f974e473e2d54c5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:44:18,693 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:44:18,694 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:44:18,694 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:44:18,907 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, I can help you with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:44:18,909 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:44:18,909 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:44:18,909 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:44:18,910 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:44:18,910 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:44:19,209 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:44:19,209 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:44:19,210 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:44:20,177 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:14:20 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'952'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-xqf9n'), (b'x-envoy-upstream-service-time', b'924'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_91e797c51ccf20c2511a3d61c2b4188f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f974e4c5d5e5484-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:44:20,178 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:44:20,178 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:44:20,179 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:44:20,447 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:44:20,447 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:44:20,986 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:44:20,987 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:44:20,987 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:44:20,989 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide me with your mobile number so I can connect you to an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:44:20,991 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:44:20,992 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:44:20,992 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:44:20,992 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:44:20,992 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:44:21,868 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:14:21 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'555'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-lnx2n'), (b'x-envoy-upstream-service-time', b'543'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a415333c9a56858e5ee420a1d682395d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f974e595c155484-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:44:21,870 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:44:21,870 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:44:21,870 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:44:22,087 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 10:44:22,087 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 10:44:22,087 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 10:44:22,088 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to agent.
2024-12-29 10:44:22,088 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:44:22,087 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 10:44:22,088 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to agent.
2024-12-29 10:44:22,088 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:44:23,560 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:44:23,561 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:44:23,561 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:44:27,386 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:44:27,386 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:44:27,387 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 10:44:27,387 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 10:44:27,387 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:44:27,387 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:44:27,387 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 10:44:27,387 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 10:44:27,387 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:44:27,387 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:44:31,329 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:44:31,329 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:44:31,666 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:44:31,666 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:44:31,670 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 9313571554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:44:31,671 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:44:31,671 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:44:31,671 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:44:31,672 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:44:31,672 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:44:32,323 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:14:32 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'287'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29880'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'240ms'), (b'x-request-id', b'req_11bfa0406f5815ea8993494a392f8843'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f974e9c1eeb54c5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:44:32,325 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:44:32,326 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:44:32,326 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:44:32,477 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for providing your number.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:44:32,479 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:44:32,479 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:44:32,479 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:44:32,480 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:44:32,480 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:44:32,773 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:44:32,773 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:44:32,773 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:44:34,005 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:14:34 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1197'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-t2xbp'), (b'x-envoy-upstream-service-time', b'1185'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_8773c66c6ea0e008bb931746362a5b1f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f974ea128ed5484-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:44:34,007 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:44:34,007 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:44:34,007 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:44:34,311 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:44:34,311 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:44:34,850 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:44:34,851 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:44:34,852 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:44:34,855 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'll connect you with an agent now.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:44:34,857 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:44:34,858 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:44:34,858 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:44:34,859 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:44:34,859 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:44:35,757 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:14:35 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'570'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-5v5t7'), (b'x-envoy-upstream-service-time', b'552'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_dc4ec7b17146a82203a9bacdb8a87809'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f974eb0084f5484-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:44:35,758 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:44:35,758 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:44:35,758 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:44:35,887 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 10:44:35,887 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 10:44:35,887 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 9313571554.
2024-12-29 10:44:35,887 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 10:44:35,887 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 10:44:35,887 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 10:44:35,887 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 9313571554.
2024-12-29 10:44:35,887 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 10:44:35,888 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-102' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:118> exception=AttributeError("'coroutine' object has no attribute 'local_participant'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 121, in process_user_speech
    await  ctx.connect().local_participant.set_attributes({"phone_number": phone_number})
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'local_participant'
2024-12-29 10:44:35,888 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-102' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:118> exception=AttributeError("'coroutine' object has no attribute 'local_participant'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 121, in process_user_speech
    await  ctx.connect().local_participant.set_attributes({"phone_number": phone_number})
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'local_participant'
2024-12-29 10:44:36,446 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:44:36,446 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:44:36,446 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:44:36,448 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on for a moment.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:44:36,449 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:44:36,452 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:44:36,452 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:44:36,453 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:44:36,453 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:44:37,580 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:14:37 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'804'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-dcv7z'), (b'x-envoy-upstream-service-time', b'759'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_73c3260b3b0ae99f1414b434f14b1ba1'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f974eb9fa3c5484-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:44:37,582 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:44:37,582 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:44:37,582 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:44:38,424 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:44:38,426 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:44:38,426 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:44:39,382 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:44:39,382 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:44:39,383 - voice-business-agent - INFO - User speech received:  Thank you for providing your number. I'll connect you with an agent now. Please hold on for a moment.
2024-12-29 10:44:39,383 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your number. I'll connect you with an agent now. Please hold on for a moment.
2024-12-29 10:44:39,383 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:44:39,383 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:44:39,383 - voice-business-agent - INFO - User speech received:  Thank you for providing your number. I'll connect you with an agent now. Please hold on for a moment.
2024-12-29 10:44:39,383 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your number. I'll connect you with an agent now. Please hold on for a moment.
2024-12-29 10:44:39,383 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:44:39,383 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:47:57,456 - livekit.agents - INFO - shutting down worker
2024-12-29 10:47:57,457 - livekit.agents - INFO - shutting down worker
2024-12-29 10:47:57,458 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:47:57,459 - livekit.agents - INFO - process exiting
2024-12-29 10:47:57,458 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:47:57,494 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:47:57,494 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:47:57,495 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:47:57,495 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:47:58,985 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:47:58,985 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:47:58,990 - livekit.agents - INFO - starting worker
2024-12-29 10:47:58,990 - livekit.agents - INFO - starting worker
2024-12-29 10:47:58,998 - livekit.agents - DEV - reloading job
2024-12-29 10:47:59,171 - livekit.agents - INFO - registered worker
2024-12-29 10:47:59,176 - livekit.agents - INFO - registered worker
2024-12-29 10:48:00,061 - livekit.agents - INFO - initializing job process
2024-12-29 10:48:00,061 - livekit.agents - INFO - job process initialized
2024-12-29 10:48:00,061 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:48:00,061 - livekit.agents - INFO - initializing job process
2024-12-29 10:48:00,061 - livekit.agents - INFO - job process initialized
2024-12-29 10:48:00,061 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:48:00,108 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 10:48:00,174 - voice-business-agent - INFO - Connecting to room voice_assistant_room_9362
2024-12-29 10:48:00,174 - voice-business-agent - INFO - Connecting to room voice_assistant_room_9362
2024-12-29 10:48:00,174 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:48:00,175 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:48:00,174 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:48:00,175 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:48:00,175 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:48:00,175 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:48:00,236 - livekit.agents - INFO - registered worker
2024-12-29 10:48:00,417 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:48:00,417 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:48:00,417 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:48:00,417 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:48:00,417 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:48:00,417 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:48:00,417 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:48:00,417 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:48:00,454 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:48:00,454 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:48:00,454 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:48:00,455 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:48:00,455 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:48:00,454 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:48:00,455 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:48:00,455 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:48:00,568 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:48:00,568 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:48:00,779 - voice-business-agent - INFO - Participant connected: voice_assistant_user_7260
2024-12-29 10:48:00,779 - voice-business-agent - INFO - Participant connected: voice_assistant_user_7260
2024-12-29 10:48:00,826 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:48:00,826 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:48:00,894 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:48:00,896 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 10:48:00,916 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1158090d0>
2024-12-29 10:48:00,916 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1204527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 10:48:00,930 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1157573d0>
2024-12-29 10:48:00,930 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:48:00,930 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:48:00,930 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:48:00,931 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:48:00,931 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:48:01,768 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:18:01 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'505'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-p8n8t'), (b'x-envoy-upstream-service-time', b'491'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a74796c32ede531ee1433810c81cb984'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=PGscHpJpThTvGTaVq5NTu70KpX1oKkdYNe8VNeSdTRM-1735449481-1.0.1.1-21w1HP62KXkYV3s4F8HHCJJ91ddxj3V7Ob8SQhP5eFytNJvoXc9iuZWSDjhetvuS1kg.MAtVCTqSt7zTonv01A; path=/; expires=Sun, 29-Dec-24 05:48:01 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=SplFnJXAVTsE44xiDSXCR3c_lIf70FsA.FYitAPjxL0-1735449481783-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9753b7fd005474-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:48:01,769 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:48:01,769 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:48:01,770 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:48:02,050 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:48:02,050 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:48:02,618 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:48:02,618 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:48:02,619 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:48:04,054 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:48:04,054 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:48:04,055 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 10:48:04,055 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 10:48:04,055 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:48:04,055 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:48:04,055 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 10:48:04,055 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 10:48:04,055 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:48:04,055 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:48:07,280 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:48:07,280 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:48:07,604 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:48:07,604 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:48:07,612 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:48:07,613 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 10:48:07,628 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x157a6f5d0>
2024-12-29 10:48:07,628 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x120452720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 10:48:07,642 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1204f9850>
2024-12-29 10:48:07,643 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:48:07,643 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:48:07,643 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:48:07,643 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:48:07,644 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:48:08,212 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:18:08 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'246'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29915'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'170ms'), (b'x-request-id', b'req_878f5d363be6fe4f19ce362a35253729'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=j1umtGn2sw2qGwCpokq1NkLfaLsQiM7WkeUcnebA9.U-1735449488-1.0.1.1-1TVdmkWeDF7yrKkBATcH8z75PG_bmteg7Y2jz_uymiKXCd5sSjGJPEwAJqDXjfOmydTZ5oxecveRFkC.NFfQGQ; path=/; expires=Sun, 29-Dec-24 05:48:08 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=UQMfkJiZ3tQPRjWOK83rtibIxGH62TMMx.KvSEW4l5Y-1735449488216-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9753e1eb208e87-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:48:08,213 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:48:08,214 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:48:08,214 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:48:08,641 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:48:08,641 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:48:08,641 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:48:08,642 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure! Could you please provide me with your mobile number so I can connect you to an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:48:08,643 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:48:08,643 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:48:08,643 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:48:08,644 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:48:08,644 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:48:10,247 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:18:10 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'751'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-xsqcp'), (b'x-envoy-upstream-service-time', b'741'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_04ec2a153d325b8497598ad8c8c9445f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9753e8297c5474-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:48:10,248 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:48:10,249 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:48:10,249 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:48:10,553 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:48:10,553 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:48:11,617 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:48:11,617 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:48:11,618 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:48:12,237 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 10:48:12,237 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 10:48:12,238 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 10:48:12,238 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:48:12,237 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 10:48:12,237 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 10:48:12,238 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 10:48:12,238 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:48:16,113 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:48:16,114 - voice-business-agent - INFO - User speech received:  Sure! Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 10:48:16,113 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:48:16,114 - voice-business-agent - DEBUG - Validating phone number from text:  Sure! Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 10:48:16,114 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:48:16,114 - voice-business-agent - INFO - User speech received:  Sure! Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 10:48:16,114 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:48:16,114 - voice-business-agent - DEBUG - Validating phone number from text:  Sure! Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 10:48:16,114 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:48:16,114 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:48:21,138 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:48:21,138 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:48:21,516 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:48:21,516 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:48:21,526 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 9313571554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:48:21,528 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:48:21,528 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:48:21,528 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:48:21,529 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:48:21,529 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:48:22,119 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:18:22 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'279'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29885'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'230ms'), (b'x-request-id', b'req_1fa9fe67c04bc8c51a975cecd84ec722'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975438bb688e87-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:48:22,121 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:48:22,121 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:48:22,122 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:48:22,765 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you! I will now connect you to an agent using the number 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:48:22,767 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:48:22,767 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:48:22,767 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:48:22,767 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:48:22,768 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:48:22,881 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:48:22,881 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:48:22,881 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:48:23,925 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:18:23 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'874'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-v95zh'), (b'x-envoy-upstream-service-time', b'858'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_e310738649de0d03af382e8afb940e69'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9754407df25474-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:48:23,926 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:48:23,926 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:48:23,926 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:48:24,204 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:48:24,204 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:48:25,708 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:48:25,708 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:48:25,708 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:48:25,709 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on for a moment.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:48:25,710 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:48:25,710 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:48:25,710 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:48:25,710 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:48:25,711 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:48:25,744 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 10:48:25,744 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 10:48:25,744 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 9313571554.
2024-12-29 10:48:25,745 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 10:48:25,744 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 10:48:25,744 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 10:48:25,744 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 9313571554.
2024-12-29 10:48:25,745 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 10:48:25,746 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=1&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:48:25,746 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=1&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:48:26,043 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:48:26,043 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:48:26,043 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:48:26,043 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:48:26,043 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:48:26,043 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:48:26,043 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:48:26,043 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:48:26,076 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:48:26,076 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:48:26,076 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:48:26,076 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:48:26,076 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:48:26,076 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:48:26,076 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:48:26,076 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:48:26,185 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:48:26,185 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:48:26,186 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:48:26,187 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 10:48:26,186 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:48:26,187 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 10:48:26,188 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 10:48:26,188 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 10:48:26,190 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: DuplicateIdentity
2024-12-29 10:48:26,190 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: DuplicateIdentity
2024-12-29 10:48:26,190 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:48:26,190 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:48:26,191 - livekit.agents - INFO - process exiting
2024-12-29 10:48:26,190 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:48:26,190 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:48:26,326 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 10:48:26,516 - livekit.agents - INFO - registered worker
2024-12-29 10:49:41,848 - livekit.agents - INFO - shutting down worker
2024-12-29 10:49:41,937 - livekit.agents - INFO - shutting down worker
2024-12-29 10:49:43,194 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:49:43,202 - livekit.agents - INFO - starting worker
2024-12-29 10:49:43,218 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:49:43,226 - livekit.agents - INFO - starting worker
2024-12-29 10:49:43,430 - livekit.agents - INFO - registered worker
2024-12-29 10:49:47,096 - livekit.agents - INFO - registered worker
2024-12-29 10:50:16,721 - livekit.agents - INFO - shutting down worker
2024-12-29 10:50:16,790 - livekit.agents - INFO - shutting down worker
2024-12-29 10:50:17,945 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:50:17,950 - livekit.agents - INFO - starting worker
2024-12-29 10:50:17,969 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:50:17,974 - livekit.agents - INFO - starting worker
2024-12-29 10:50:19,351 - livekit.agents - INFO - registered worker
2024-12-29 10:50:23,178 - livekit.agents - INFO - registered worker
2024-12-29 10:50:50,546 - livekit.agents - INFO - received job request
2024-12-29 10:50:51,867 - livekit.agents - INFO - initializing job process
2024-12-29 10:50:51,868 - livekit.agents - INFO - job process initialized
2024-12-29 10:50:51,867 - livekit.agents - INFO - initializing job process
2024-12-29 10:50:51,868 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:50:51,868 - livekit.agents - INFO - job process initialized
2024-12-29 10:50:51,868 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:50:51,987 - voice-business-agent - INFO - Connecting to room voice_assistant_room_1111
2024-12-29 10:50:51,987 - voice-business-agent - INFO - Connecting to room voice_assistant_room_1111
2024-12-29 10:50:51,988 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:50:51,989 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:50:51,988 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:50:51,989 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:50:51,990 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:50:51,990 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:50:52,235 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:50:52,236 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:50:52,236 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:50:52,236 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:50:52,235 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:50:52,236 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:50:52,236 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:50:52,236 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:50:52,280 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:50:52,280 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:50:52,280 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:50:52,280 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:50:52,280 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:50:52,280 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:50:52,280 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:50:52,280 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:50:52,404 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:50:52,404 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:50:52,614 - voice-business-agent - INFO - Participant connected: voice_assistant_user_4835
2024-12-29 10:50:52,614 - voice-business-agent - INFO - Participant connected: voice_assistant_user_4835
2024-12-29 10:50:52,676 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:50:52,676 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:50:52,738 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:50:52,739 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 10:50:52,763 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10cff0210>
2024-12-29 10:50:52,763 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fe527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 10:50:52,777 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10cfc8850>
2024-12-29 10:50:52,778 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:50:52,778 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:50:52,778 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:50:52,778 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:50:52,779 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:50:54,030 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:20:53 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'812'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-m4gsq'), (b'x-envoy-upstream-service-time', b'794'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f57c16f4eb8a4717e57bc4398aadb8bf'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=DG8gaLVgs5jKxSkGPATvbgjzYb_JWwXCiLiJQ5WkDzA-1735449653-1.0.1.1-ziYKoLypyvVVnBm8i7FI8WJ1ZcVv2llagRsx7ap6aaPKzPpZKrHatZNLOIoijaAdSPa.OmDHNJTbCyEqVWxWyQ; path=/; expires=Sun, 29-Dec-24 05:50:53 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=dj.GBc2QAbf0Ru0eHIvNN82awLPwpzTlFNrM_Ifji0M-1735449653961-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9757ea0f2654a2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:50:54,033 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:50:54,033 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:50:54,034 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:50:54,275 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:50:54,275 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:50:54,821 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:50:54,821 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:50:54,821 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:50:56,303 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:50:56,303 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:50:56,304 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 10:50:56,304 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 10:50:56,304 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:50:56,304 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:50:56,304 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 10:50:56,304 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 10:50:56,304 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:50:56,304 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:51:00,090 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:51:00,090 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:51:00,291 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:51:00,291 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:51:00,301 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:51:00,302 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 10:51:00,398 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10cfd3fd0>
2024-12-29 10:51:00,399 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fe52720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 10:51:00,469 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10cb3f950>
2024-12-29 10:51:00,470 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:51:00,471 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:51:00,471 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:51:00,471 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:51:00,472 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:51:01,052 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:21:01 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'256'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29915'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'170ms'), (b'x-request-id', b'req_4d7f406dbc88cc398f1172947b7044be'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=Hx8oUx5YmEhZDS56aa1kS2Jq4RL92C0UZgXdQV26cIc-1735449661-1.0.1.1-7Z9mUJ3PUAIN1r0P6Sdr5igzKF8dI9TcDEW1xPJBkLT90FqFGg8tjNzj2e0mQvCx4nJl7x97.F4vlMM4pP0MNg; path=/; expires=Sun, 29-Dec-24 05:51:01 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=8v68RYdH3RRBQKwCFyMgumozl2eyNzfZW3DNgu3Bg7I-1735449661060-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97581a1910546b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:51:01,053 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:51:01,054 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:51:01,054 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:51:01,466 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:51:01,466 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:51:01,467 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:51:01,468 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Certainly! Could you please provide me with your mobile number so I can connect you to an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:51:01,470 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:51:01,471 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:51:01,471 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:51:01,471 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:51:01,472 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:51:03,162 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:21:03 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1328'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-xcwh6'), (b'x-envoy-upstream-service-time', b'1309'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_53fd59860cef93df6133815467196dc8'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9758205ca154a2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:51:03,165 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:51:03,165 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:51:03,166 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:51:03,418 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:51:03,418 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:51:05,101 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:51:05,102 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:51:05,103 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:51:05,120 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 10:51:05,120 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 10:51:05,120 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 10:51:05,120 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:51:05,120 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 10:51:05,120 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 10:51:05,120 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 10:51:05,120 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:51:09,345 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:51:09,345 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:51:09,345 - voice-business-agent - INFO - User speech received:  Certainly! Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 10:51:09,345 - voice-business-agent - DEBUG - Validating phone number from text:  Certainly! Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 10:51:09,345 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:51:09,346 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:51:09,345 - voice-business-agent - INFO - User speech received:  Certainly! Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 10:51:09,345 - voice-business-agent - DEBUG - Validating phone number from text:  Certainly! Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 10:51:09,345 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:51:09,346 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:51:14,886 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:51:14,886 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:51:15,171 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:51:15,171 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:51:15,179 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 931-357-1554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:51:15,183 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:51:15,184 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:51:15,184 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:51:15,184 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:51:15,184 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:51:15,790 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:21:15 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'229'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29883'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'234ms'), (b'x-request-id', b'req_93e6eb14c9d496f5dc003f4416cfa25f'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9758761e18546b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:51:15,792 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:51:15,792 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:51:15,793 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:51:16,037 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you! Let me confirm the number: 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:51:16,039 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:51:16,039 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:51:16,039 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:51:16,040 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:51:16,040 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:51:16,262 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:51:16,262 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:51:16,262 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:51:17,759 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:21:17 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1412'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-ccr2t'), (b'x-envoy-upstream-service-time', b'1375'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_5a872028cfe39335a3ca55d10da99d29'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97587b6ff154a2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:51:17,761 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:51:17,761 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:51:17,761 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:51:18,046 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:51:18,046 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:51:19,049 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:51:19,049 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:51:19,050 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:51:19,052 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'll connect you to an agent now.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:51:19,053 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:51:19,054 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:51:19,054 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:51:19,055 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:51:19,055 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:51:19,798 - voice-business-agent - INFO - User speech received: Yes. It's 931-357-1554.
2024-12-29 10:51:19,798 - voice-business-agent - INFO - User speech received: Yes. It's 931-357-1554.
2024-12-29 10:51:19,798 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 931-357-1554.
2024-12-29 10:51:19,798 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 10:51:19,798 - voice-business-agent - INFO - User speech received: Yes. It's 931-357-1554.
2024-12-29 10:51:19,798 - voice-business-agent - INFO - User speech received: Yes. It's 931-357-1554.
2024-12-29 10:51:19,798 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 931-357-1554.
2024-12-29 10:51:19,798 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 10:51:19,801 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=1&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:51:19,801 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=1&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:51:19,969 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:21:19 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'601'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-r7wm5'), (b'x-envoy-upstream-service-time', b'589'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a31f60d02879dec23920955bcba6ecbb'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97588e4a8d54a2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:51:19,969 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:51:19,969 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:51:19,970 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:51:20,097 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:51:20,097 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:51:20,097 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:51:20,097 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:51:20,097 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:51:20,097 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:51:20,097 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:51:20,097 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:51:20,136 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:51:20,136 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:51:20,136 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:51:20,136 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:51:20,136 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:51:20,136 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:51:20,136 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:51:20,136 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:51:20,270 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:51:20,270 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:51:20,271 - livekit.agents - INFO - process exiting
2024-12-29 10:51:20,271 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:51:20,272 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:51:20,271 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:51:20,272 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 10:51:20,272 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:51:20,272 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 10:51:20,277 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:51:20,277 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:51:20,422 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 10:51:20,603 - livekit.agents - INFO - registered worker
2024-12-29 10:51:38,608 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:51:38,610 - livekit.agents - DEV - Watching /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python
2024-12-29 10:51:39,544 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:51:39,556 - livekit.agents - INFO - starting worker
2024-12-29 10:51:40,076 - livekit.agents - INFO - registered worker
2024-12-29 10:52:14,772 - livekit.agents - INFO - received job request
2024-12-29 10:52:15,256 - livekit.agents - INFO - received job request
2024-12-29 10:52:15,961 - livekit.agents - INFO - initializing job process
2024-12-29 10:52:15,962 - livekit.agents - INFO - job process initialized
2024-12-29 10:52:15,962 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:52:15,961 - livekit.agents - INFO - initializing job process
2024-12-29 10:52:15,962 - livekit.agents - INFO - job process initialized
2024-12-29 10:52:15,962 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:52:16,063 - voice-business-agent - INFO - Connecting to room voice_assistant_room_9209
2024-12-29 10:52:16,063 - voice-business-agent - INFO - Connecting to room voice_assistant_room_9209
2024-12-29 10:52:16,064 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:52:16,064 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:52:16,064 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:52:16,064 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:52:16,065 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:52:16,065 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:52:16,431 - livekit.agents - INFO - initializing job process
2024-12-29 10:52:16,432 - livekit.agents - INFO - job process initialized
2024-12-29 10:52:16,431 - livekit.agents - INFO - initializing job process
2024-12-29 10:52:16,432 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:52:16,432 - livekit.agents - INFO - job process initialized
2024-12-29 10:52:16,432 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:52:16,475 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:52:16,476 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:52:16,476 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:52:16,476 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:52:16,475 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:52:16,476 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:52:16,476 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:52:16,476 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:52:16,517 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:52:16,517 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:52:16,517 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:52:16,517 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:52:16,517 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:52:16,517 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:52:16,517 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:52:16,517 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:52:16,561 - voice-business-agent - INFO - Connecting to room voice_assistant_room_351
2024-12-29 10:52:16,561 - voice-business-agent - INFO - Connecting to room voice_assistant_room_351
2024-12-29 10:52:16,562 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:52:16,562 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:52:16,562 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:52:16,562 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:52:16,563 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:52:16,563 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:52:16,637 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:52:16,637 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:52:16,791 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:52:16,791 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:52:16,791 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:52:16,791 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:52:16,791 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:52:16,791 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:52:16,791 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:52:16,791 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:52:16,826 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:52:16,826 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:52:16,826 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:52:16,827 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:52:16,826 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:52:16,827 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:52:16,827 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:52:16,827 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:52:16,845 - voice-business-agent - INFO - Participant connected: voice_assistant_user_851
2024-12-29 10:52:16,845 - voice-business-agent - INFO - Participant connected: voice_assistant_user_851
2024-12-29 10:52:16,897 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:52:16,897 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:52:16,935 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:52:16,935 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:52:16,956 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:52:16,957 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 10:52:16,980 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12084b710>
2024-12-29 10:52:16,980 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x120aee7b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 10:52:17,021 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x120909790>
2024-12-29 10:52:17,022 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:52:17,022 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:52:17,022 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:52:17,022 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:52:17,022 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:52:18,619 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:22:18 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1252'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-xgkvv'), (b'x-envoy-upstream-service-time', b'1236'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d17e153da3d75c6919c54f97ecace550'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=4gXVN90y81Uut76zWBwIqNUHBv1vv05NUEmG09BAU.I-1735449738-1.0.1.1-XATMQUcNZht1Zo1I9su0TI3nPOjwlOZ6uqxmH2QMVcYtU5o.wcxl3qquHBVHeJXAN3GWwx2yacI0EOlFjB7Fkw; path=/; expires=Sun, 29-Dec-24 05:52:18 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=69crdAOcmQy5gHvwPgZhryddh88VwXf8zwRx5kjpFy0-1735449738635-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9759f88acb8e8c-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:52:18,621 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:52:18,621 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:52:18,621 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:52:18,886 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:52:18,886 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:52:19,401 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:52:19,401 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:52:19,401 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:52:20,887 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:52:20,887 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:52:20,888 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 10:52:20,888 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 10:52:20,888 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 10:52:20,888 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:52:20,888 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 10:52:20,888 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:52:20,888 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:52:20,888 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:52:25,255 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:52:25,255 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:52:25,478 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:52:25,478 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:52:25,488 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to an agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:52:25,490 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 10:52:25,508 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x120b96a50>
2024-12-29 10:52:25,509 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x120aee720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 10:52:25,531 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1209298d0>
2024-12-29 10:52:25,531 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:52:25,532 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:52:25,532 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:52:25,532 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:52:25,532 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:52:26,150 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:22:26 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'289'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29916'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'168ms'), (b'x-request-id', b'req_784a53bf7b0586a7eedcbab1f8d92198'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=g2_2uMG86CxDD4k2p9OkYdfsaJiFQ_9dX8QQoE0Esy4-1735449746-1.0.1.1-C.NHwLV4lch1_G_vOcfvHZHXVkSDjg3D1lKvFqCKuq5rPmbj5jN7Ra9Uz_lk1zVG0PsHMq1vQwZlmnnawOK8hw; path=/; expires=Sun, 29-Dec-24 05:52:26 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=KYGxdWIudA4fyNY.rGsPwHu5PT51vGPC7kxBdE7rAok-1735449746166-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975a2dbeed8997-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:52:26,152 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:52:26,152 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:52:26,152 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:52:26,344 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure! May I have your mobile number, please?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:52:26,345 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:52:26,346 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:52:26,346 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:52:26,346 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:52:26,346 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:52:26,493 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:52:26,494 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:52:26,494 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:52:27,216 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:22:27 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'580'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-5cdpx'), (b'x-envoy-upstream-service-time', b'559'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_86abd4695c1ce4ce87dd6b187155428a'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975a32cb4b8e8c-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:52:27,217 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:52:27,217 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:52:27,217 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:52:27,451 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:52:27,451 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:52:27,962 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:52:27,963 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:52:27,963 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:52:27,965 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Just provide the digits without any spaces or special characters.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:52:27,967 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:52:27,969 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:52:27,969 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:52:27,970 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:52:27,970 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:52:29,106 - voice-business-agent - INFO - User speech received: Connect me to an agent.
2024-12-29 10:52:29,106 - voice-business-agent - INFO - User speech received: Connect me to an agent.
2024-12-29 10:52:29,106 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to an agent.
2024-12-29 10:52:29,106 - voice-business-agent - INFO - User speech received: Connect me to an agent.
2024-12-29 10:52:29,107 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:52:29,106 - voice-business-agent - INFO - User speech received: Connect me to an agent.
2024-12-29 10:52:29,106 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to an agent.
2024-12-29 10:52:29,107 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:52:29,407 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:22:29 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1132'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-p5t56'), (b'x-envoy-upstream-service-time', b'1119'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_46dfd35d9b38f0349ad7ce10b1b8d3e5'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975a3cfdd18e8c-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:52:29,408 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:52:29,408 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:52:29,408 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:52:30,515 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:52:30,516 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:52:30,516 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:52:34,031 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:52:34,031 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:52:34,032 - voice-business-agent - INFO - User speech received:  Sure! May I have your mobile number, please? Just provide the digits without any spaces or special characters.
2024-12-29 10:52:34,032 - voice-business-agent - DEBUG - Validating phone number from text:  Sure! May I have your mobile number, please? Just provide the digits without any spaces or special characters.
2024-12-29 10:52:34,032 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:52:34,032 - voice-business-agent - INFO - User speech received:  Sure! May I have your mobile number, please? Just provide the digits without any spaces or special characters.
2024-12-29 10:52:34,032 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:52:34,032 - voice-business-agent - DEBUG - Validating phone number from text:  Sure! May I have your mobile number, please? Just provide the digits without any spaces or special characters.
2024-12-29 10:52:34,032 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:52:34,032 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:52:36,475 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:52:36,476 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 10:52:36,477 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 10:52:36,478 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 10:52:36,475 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:52:36,476 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 10:52:36,477 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 10:52:36,478 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 10:52:36,480 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:52:36,480 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:52:36,480 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:52:36,480 - livekit.agents - INFO - process exiting
2024-12-29 10:52:36,480 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:52:36,480 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:52:36,480 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:52:36,631 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 10:52:36,792 - livekit.agents - INFO - registered worker
2024-12-29 10:52:38,133 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:52:38,133 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:52:38,635 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:52:38,635 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:52:38,643 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number, please? Just provide the digits without any spaces or special characters.'}, {'role': 'user', 'content': '931357155'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:52:38,646 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:52:38,647 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:52:38,648 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:52:38,648 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:52:38,648 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:52:39,230 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:22:39 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'285'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29884'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'232ms'), (b'x-request-id', b'req_c26a47a7355f93f91aa5b6f529145856'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975a7fbe9d8997-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:52:39,230 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:52:39,230 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:52:39,231 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:52:39,487 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It seems that the mobile number you provided is missing a digit.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:52:39,489 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:52:39,489 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:52:39,489 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:52:39,489 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:52:39,490 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:52:39,753 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:52:39,754 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:52:39,754 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:52:40,711 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:22:40 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'847'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-4x6pt'), (b'x-envoy-upstream-service-time', b'825'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a5dd2d6fc725845008ae265e9035b911'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975a84fa288e8c-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:52:40,711 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:52:40,712 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:52:40,712 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:52:40,979 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:52:40,979 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:52:41,800 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:52:41,800 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:52:41,801 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:52:41,802 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please double-check and provide the full 10-digit mobile number?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:52:41,803 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:52:41,804 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:52:41,804 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:52:41,804 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:52:41,804 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:52:42,661 - voice-business-agent - INFO - User speech received: 931357155
2024-12-29 10:52:42,661 - voice-business-agent - INFO - User speech received: 931357155
2024-12-29 10:52:42,662 - voice-business-agent - DEBUG - Validating phone number from text: 931357155
2024-12-29 10:52:42,661 - voice-business-agent - INFO - User speech received: 931357155
2024-12-29 10:52:42,661 - voice-business-agent - INFO - User speech received: 931357155
2024-12-29 10:52:42,662 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:52:42,662 - voice-business-agent - DEBUG - Validating phone number from text: 931357155
2024-12-29 10:52:42,662 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:52:42,687 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:22:42 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'603'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-9tc5m'), (b'x-envoy-upstream-service-time', b'575'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_e873bd84d6e7f8f69f80a213ec0a3977'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975a936e518e8c-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:52:42,688 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:52:42,688 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:52:42,688 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:52:45,269 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:52:45,270 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:52:45,270 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:52:49,693 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:52:49,693 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:52:49,694 - voice-business-agent - INFO - User speech received:  It seems that the mobile number you provided is missing a digit. Could you please double-check and provide the full 10-digit mobile number?
2024-12-29 10:52:49,694 - voice-business-agent - DEBUG - Validating phone number from text:  It seems that the mobile number you provided is missing a digit. Could you please double-check and provide the full 10-digit mobile number?
2024-12-29 10:52:49,694 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:52:49,694 - voice-business-agent - INFO - User speech received:  It seems that the mobile number you provided is missing a digit. Could you please double-check and provide the full 10-digit mobile number?
2024-12-29 10:52:49,694 - voice-business-agent - DEBUG - Validating phone number from text:  It seems that the mobile number you provided is missing a digit. Could you please double-check and provide the full 10-digit mobile number?
2024-12-29 10:52:49,694 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:52:49,694 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:52:49,694 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:52:54,188 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:52:54,188 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:52:55,108 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:52:55,108 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:52:55,485 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:52:55,485 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:52:55,501 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number, please? Just provide the digits without any spaces or special characters.'}, {'role': 'user', 'content': '931357155'}, {'role': 'assistant', 'content': ' It seems that the mobile number you provided is missing a digit. Could you please double-check and provide the full 10-digit mobile number?'}, {'role': 'user', 'content': "Yes. It's 9313 5 71554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:52:55,503 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:52:55,504 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:52:55,504 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:52:55,505 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:52:55,505 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:52:56,231 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:22:56 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'337'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29841'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'318ms'), (b'x-request-id', b'req_599ba98f8b8207ac39eb66c1ababcd8a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975ae91d898997-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:52:56,233 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:52:56,233 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:52:56,234 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:52:56,823 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you! I have your number as 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:52:56,824 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:52:56,825 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:52:56,825 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:52:56,825 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:52:56,826 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:52:56,868 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:52:56,868 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:52:56,869 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:52:58,243 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:22:58 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'637'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-prkr2'), (b'x-envoy-upstream-service-time', b'624'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_09eacad9b15592eaf5c317bc0d5b8d75'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975af14ff58e8c-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:52:58,244 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:52:58,244 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:52:58,245 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:52:58,503 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:52:58,503 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:52:59,218 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:52:59,219 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:52:59,219 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:52:59,220 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'll connect you to an agent now.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:52:59,222 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:52:59,222 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:52:59,222 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:52:59,222 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:52:59,223 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:53:00,128 - voice-business-agent - INFO - User speech received: Yes. It's 9313 5 71554.
2024-12-29 10:53:00,128 - voice-business-agent - INFO - User speech received: Yes. It's 9313 5 71554.
2024-12-29 10:53:00,129 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 9313 5 71554.
2024-12-29 10:53:00,128 - voice-business-agent - INFO - User speech received: Yes. It's 9313 5 71554.
2024-12-29 10:53:00,129 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 10:53:00,128 - voice-business-agent - INFO - User speech received: Yes. It's 9313 5 71554.
2024-12-29 10:53:00,129 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 9313 5 71554.
2024-12-29 10:53:00,129 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 10:53:00,129 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=1&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:53:00,129 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=1&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:53:00,150 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:23:00 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'627'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-zn7kk'), (b'x-envoy-upstream-service-time', b'581'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_6838f527afdfdadeec10ddf215cc23b5'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975b004db58e8c-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:53:00,151 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:53:00,151 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:53:00,151 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:53:00,911 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:53:00,912 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:53:00,912 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:53:00,912 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:53:00,913 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:53:00,913 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:53:00,913 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:53:00,914 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:53:00,914 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:53:01,461 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:53:01,462 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:53:01,462 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:53:01,462 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:53:01,461 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:53:01,462 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:53:01,462 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:53:01,462 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:53:01,477 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 10:53:01,477 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 10:53:01,478 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:53:01,478 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:53:01,478 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:53:01,478 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:53:01,495 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:53:01,495 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:53:01,495 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:53:01,495 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:53:01,495 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:53:01,495 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:53:01,495 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:53:01,495 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:53:01,607 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:53:01,607 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:53:01,609 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:53:01,609 - livekit.agents - INFO - process exiting
2024-12-29 10:53:01,609 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:53:01,609 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:53:01,609 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:53:01,609 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 10:53:01,610 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:53:01,609 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 10:53:01,610 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:53:01,611 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 10:53:01,611 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 10:53:01,764 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 10:53:01,932 - livekit.agents - INFO - registered worker
2024-12-29 10:53:26,887 - livekit.agents - INFO - received job request
2024-12-29 10:53:31,896 - livekit.agents - INFO - received job request
2024-12-29 10:53:34,390 - livekit.agents - WARNING - assignment for job AJ_k6FByxEV3vyb timed out
2024-12-29 10:53:34,391 - livekit.agents - ERROR - job_request_fnc failed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 490, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 681, in _on_accept
    await asyncio.wait_for(wait_assignment, ASSIGNMENT_TIMEOUT)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 492, in wait_for
    raise exceptions.TimeoutError() from exc
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 715, in _job_request_task
    await self._opts.request_fnc(job_req)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 68, in _default_request_fnc
    await ctx.accept()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/job.py", line 355, in accept
    await self._on_accept(accept_arguments)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 687, in _on_accept
    raise AssignmentTimeoutError()
livekit.agents._exceptions.AssignmentTimeoutError
2024-12-29 10:53:38,888 - livekit.agents - INFO - received job request
2024-12-29 10:53:39,399 - livekit.agents - WARNING - assignment for job AJ_k6FByxEV3vyb timed out
2024-12-29 10:53:39,399 - livekit.agents - ERROR - job_request_fnc failed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 490, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 681, in _on_accept
    await asyncio.wait_for(wait_assignment, ASSIGNMENT_TIMEOUT)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 492, in wait_for
    raise exceptions.TimeoutError() from exc
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 715, in _job_request_task
    await self._opts.request_fnc(job_req)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 68, in _default_request_fnc
    await ctx.accept()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/job.py", line 355, in accept
    await self._on_accept(accept_arguments)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 687, in _on_accept
    raise AssignmentTimeoutError()
livekit.agents._exceptions.AssignmentTimeoutError
2024-12-29 10:53:46,388 - livekit.agents - WARNING - assignment for job AJ_k6FByxEV3vyb timed out
2024-12-29 10:53:46,389 - livekit.agents - ERROR - job_request_fnc failed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 490, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 681, in _on_accept
    await asyncio.wait_for(wait_assignment, ASSIGNMENT_TIMEOUT)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 492, in wait_for
    raise exceptions.TimeoutError() from exc
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 715, in _job_request_task
    await self._opts.request_fnc(job_req)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 68, in _default_request_fnc
    await ctx.accept()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/job.py", line 355, in accept
    await self._on_accept(accept_arguments)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 687, in _on_accept
    raise AssignmentTimeoutError()
livekit.agents._exceptions.AssignmentTimeoutError
2024-12-29 10:53:49,114 - livekit.agents - INFO - received job request
2024-12-29 10:53:49,115 - livekit.agents - INFO - received job request
2024-12-29 10:53:50,332 - livekit.agents - INFO - initializing job process
2024-12-29 10:53:50,333 - livekit.agents - INFO - job process initialized
2024-12-29 10:53:50,333 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:53:50,332 - livekit.agents - INFO - initializing job process
2024-12-29 10:53:50,333 - livekit.agents - INFO - job process initialized
2024-12-29 10:53:50,333 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:53:50,437 - voice-business-agent - INFO - Connecting to room voice_assistant_room_5139
2024-12-29 10:53:50,437 - voice-business-agent - INFO - Connecting to room voice_assistant_room_5139
2024-12-29 10:53:50,438 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:53:50,438 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:53:50,438 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:53:50,438 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:53:50,439 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:53:50,439 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:53:50,689 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:53:50,689 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:53:50,689 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:53:50,689 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:53:50,689 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:53:50,689 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:53:50,689 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:53:50,689 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:53:50,728 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:53:50,728 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:53:50,728 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:53:50,728 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:53:50,728 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:53:50,728 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:53:50,728 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:53:50,728 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:53:50,841 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:53:50,841 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:53:51,054 - voice-business-agent - INFO - Participant connected: voice_assistant_user_8099
2024-12-29 10:53:51,054 - voice-business-agent - INFO - Participant connected: voice_assistant_user_8099
2024-12-29 10:53:51,103 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:53:51,103 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:53:51,156 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:53:51,158 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 10:53:51,174 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10b114f10>
2024-12-29 10:53:51,174 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b2de7b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 10:53:51,204 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10b10b1d0>
2024-12-29 10:53:51,204 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:53:51,205 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:53:51,205 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:53:51,205 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:53:51,205 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:53:51,892 - livekit.agents - INFO - received job request
2024-12-29 10:53:52,125 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:23:52 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'596'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-7zcpk'), (b'x-envoy-upstream-service-time', b'558'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_406410c590deb021d079dec17d642b52'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=8isIyV0efgsoA3LAyC4T.wYAlBXaf2jfcpg9uMoZ63I-1735449832-1.0.1.1-7LBgbYYkEnZb.THY9asyR5355XKaf_mkoh5IpbJkl8G8RnxOERFet43Wn1fi3eYEHQRLF_pKiw.SGvtMttCrtA; path=/; expires=Sun, 29-Dec-24 05:53:52 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=5OZ_LEc.RwBLqbikMYThCUdVzRE8.yyE8p7KWEueJgU-1735449832140-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975c453d441b82-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:53:52,126 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:53:52,127 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:53:52,127 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:53:52,222 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:53:52,227 - livekit.agents - DEV - Watching /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python
2024-12-29 10:53:52,408 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:53:52,408 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:53:52,979 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:53:52,980 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:53:52,980 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:53:53,272 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:53:53,291 - livekit.agents - INFO - starting worker
2024-12-29 10:53:53,601 - livekit.agents - INFO - registered worker
2024-12-29 10:53:54,426 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:53:54,426 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:53:54,426 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 10:53:54,426 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 10:53:54,426 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 10:53:54,427 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:53:54,427 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:53:54,426 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 10:53:54,427 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:53:54,427 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:53:56,617 - livekit.agents - WARNING - assignment for job AJ_AkiJBei5hQj7 timed out
2024-12-29 10:53:56,618 - livekit.agents - ERROR - job_request_fnc failed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 490, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 681, in _on_accept
    await asyncio.wait_for(wait_assignment, ASSIGNMENT_TIMEOUT)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 492, in wait_for
    raise exceptions.TimeoutError() from exc
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 715, in _job_request_task
    await self._opts.request_fnc(job_req)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 68, in _default_request_fnc
    await ctx.accept()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/job.py", line 355, in accept
    await self._on_accept(accept_arguments)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 687, in _on_accept
    raise AssignmentTimeoutError()
livekit.agents._exceptions.AssignmentTimeoutError
2024-12-29 10:53:56,924 - livekit.agents - INFO - received job request
2024-12-29 10:53:56,925 - livekit.agents - INFO - received job request
2024-12-29 10:53:58,167 - livekit.agents - INFO - initializing job process
2024-12-29 10:53:58,167 - livekit.agents - INFO - job process initialized
2024-12-29 10:53:58,167 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:53:58,167 - livekit.agents - INFO - initializing job process
2024-12-29 10:53:58,167 - livekit.agents - INFO - job process initialized
2024-12-29 10:53:58,167 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:53:58,268 - voice-business-agent - INFO - Connecting to room voice_assistant_room_1490
2024-12-29 10:53:58,268 - voice-business-agent - INFO - Connecting to room voice_assistant_room_1490
2024-12-29 10:53:58,269 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:53:58,269 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:53:58,269 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:53:58,269 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:53:58,270 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:53:58,270 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:53:58,519 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:53:58,519 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:53:58,519 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:53:58,519 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:53:58,519 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:53:58,519 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:53:58,519 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:53:58,519 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:53:58,560 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:53:58,560 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:53:58,560 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:53:58,560 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:53:58,560 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:53:58,560 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:53:58,560 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:53:58,560 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:53:58,689 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:53:58,689 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:53:58,697 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:53:58,697 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:53:58,905 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:53:58,905 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:53:58,914 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:53:58,916 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 10:53:58,932 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c1b6f10>
2024-12-29 10:53:58,933 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b2de720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 10:53:58,949 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10a70bc50>
2024-12-29 10:53:58,950 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:53:58,951 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:53:58,951 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:53:58,951 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:53:58,951 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:53:59,394 - livekit.agents - WARNING - assignment for job AJ_k6FByxEV3vyb timed out
2024-12-29 10:53:59,395 - livekit.agents - ERROR - job_request_fnc failed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 490, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 681, in _on_accept
    await asyncio.wait_for(wait_assignment, ASSIGNMENT_TIMEOUT)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 492, in wait_for
    raise exceptions.TimeoutError() from exc
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 715, in _job_request_task
    await self._opts.request_fnc(job_req)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 68, in _default_request_fnc
    await ctx.accept()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/job.py", line 355, in accept
    await self._on_accept(accept_arguments)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 687, in _on_accept
    raise AssignmentTimeoutError()
livekit.agents._exceptions.AssignmentTimeoutError
2024-12-29 10:53:59,542 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:23:59 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'268'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29915'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'170ms'), (b'x-request-id', b'req_54da0ae5480bfa3e8051759d88e15ab9'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=A522_.RD50.zJxCxFfENKL7hrIVWUAZSCg2CPYmFmnI-1735449839-1.0.1.1-Kl2HChOKQOZiEXJJevM5X.DNx.STYhrdvWs0ykZqZ2Y3HZAIWzenIfhuQ74lG.hiZKpo8vZUiXyqM0jmvyd_wg; path=/; expires=Sun, 29-Dec-24 05:53:59 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=r9ZS7qrokrNlQ4Bs6TnMjG1qWD1tkZSua5WlmiH4x2c-1735449839556-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975c759cd79190-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:53:59,544 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:53:59,544 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:53:59,545 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:53:59,711 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, I can help with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:53:59,713 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:53:59,714 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:53:59,714 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:53:59,715 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:53:59,715 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:53:59,835 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:53:59,835 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:53:59,836 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:54:00,564 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:24:00 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'536'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-hrht2'), (b'x-envoy-upstream-service-time', b'519'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b77f6e0c7469da700e09a842d53440c8'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975c7a68ad1b82-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:54:00,565 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:54:00,565 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:54:00,566 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:54:00,844 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:54:00,844 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:54:01,123 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:54:01,124 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:54:01,124 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:54:01,127 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide me with your mobile number?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:54:01,129 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:54:01,129 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:54:01,129 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:54:01,130 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:54:01,130 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:54:02,248 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:24:02 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'798'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-lngfb'), (b'x-envoy-upstream-service-time', b'777'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_eafb40932eb30439c3eee67f53268e95'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975c8338591b82-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:54:02,249 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:54:02,249 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:54:02,254 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:54:03,536 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 10:54:03,536 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 10:54:03,536 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 10:54:03,536 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:54:03,536 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 10:54:03,536 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 10:54:03,536 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 10:54:03,536 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:54:04,427 - livekit.agents - WARNING - assignment for job AJ_k6FByxEV3vyb timed out
2024-12-29 10:54:04,428 - livekit.agents - ERROR - job_request_fnc failed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 490, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 681, in _on_accept
    await asyncio.wait_for(wait_assignment, ASSIGNMENT_TIMEOUT)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 492, in wait_for
    raise exceptions.TimeoutError() from exc
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 715, in _job_request_task
    await self._opts.request_fnc(job_req)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 68, in _default_request_fnc
    await ctx.accept()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/job.py", line 355, in accept
    await self._on_accept(accept_arguments)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 687, in _on_accept
    raise AssignmentTimeoutError()
livekit.agents._exceptions.AssignmentTimeoutError
2024-12-29 10:54:05,693 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:54:05,693 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:54:05,694 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:54:05,694 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 10:54:05,694 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:54:05,695 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 10:54:05,696 - livekit.agents - INFO - process exiting
2024-12-29 10:54:05,696 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 10:54:05,694 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 10:54:05,695 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 10:54:05,696 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 10:54:05,697 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:54:05,697 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:54:05,697 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:54:05,697 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:54:05,911 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 10:54:06,184 - livekit.agents - INFO - registered worker
2024-12-29 10:54:06,185 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:54:06,185 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:54:06,186 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:54:07,102 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:54:07,102 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:54:07,102 - voice-business-agent - INFO - User speech received:  Sure, I can help with that. Could you please provide me with your mobile number?
2024-12-29 10:54:07,102 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help with that. Could you please provide me with your mobile number?
2024-12-29 10:54:07,102 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:54:07,102 - voice-business-agent - INFO - User speech received:  Sure, I can help with that. Could you please provide me with your mobile number?
2024-12-29 10:54:07,102 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:54:07,102 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help with that. Could you please provide me with your mobile number?
2024-12-29 10:54:07,102 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:54:07,102 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:54:11,466 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:54:11,466 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:54:11,842 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:54:11,842 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:54:11,848 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': "Yes. It's 9313571554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:54:11,850 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:54:11,851 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:54:11,851 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:54:11,851 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:54:11,851 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:54:12,394 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:24:12 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'250'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29888'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'224ms'), (b'x-request-id', b'req_df7c4d0a4cfc2103eff1203290767c1a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975cc63b339190-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:54:12,395 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:54:12,395 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:54:12,395 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:54:12,634 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you! Let me connect you to an agent now.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:54:12,635 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:54:12,635 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:54:12,635 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:54:12,636 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:54:12,636 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:54:12,657 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:54:12,657 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:54:12,657 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:54:13,547 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:24:13 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'547'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-sqvcr'), (b'x-envoy-upstream-service-time', b'534'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b25cdd4c20c9667d0a2af96f7d70a219'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975ccb2a611b82-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:54:13,548 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:54:13,548 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:54:13,549 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:54:13,836 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:54:13,836 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:54:14,425 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:54:14,425 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:54:14,426 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:54:14,427 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold a moment.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:54:14,428 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:54:14,428 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:54:14,428 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:54:14,428 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:54:14,429 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:54:15,465 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 10:54:15,468 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 10:54:15,468 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 9313571554.
2024-12-29 10:54:15,469 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 10:54:15,465 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 10:54:15,468 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 10:54:15,468 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 9313571554.
2024-12-29 10:54:15,469 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 10:54:15,471 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=1&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:54:15,471 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=1&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:54:15,735 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:54:15,735 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:54:15,735 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:54:15,735 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:54:15,735 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:54:15,736 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:54:15,735 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:54:15,736 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:54:15,779 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:54:15,779 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:54:15,779 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:54:15,779 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:54:15,779 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:54:15,780 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:54:15,779 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:54:15,780 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:54:15,788 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:24:15 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1046'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-zjvph'), (b'x-envoy-upstream-service-time', b'1025'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_4fa4dfc6ea67e670588199979a100fee'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975cd65b0a1b82-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:54:15,788 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:54:15,788 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:54:15,788 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:54:15,909 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:54:15,910 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:54:15,909 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:54:15,910 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:54:15,913 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: DuplicateIdentity
2024-12-29 10:54:15,913 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: DuplicateIdentity
2024-12-29 10:54:15,914 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:54:15,914 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:54:15,914 - livekit.agents - INFO - process exiting
2024-12-29 10:54:15,914 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:54:15,914 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:54:16,063 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 10:54:16,216 - livekit.agents - INFO - registered worker
2024-12-29 10:55:21,875 - livekit.agents - INFO - received job request
2024-12-29 10:55:23,046 - livekit.agents - INFO - initializing job process
2024-12-29 10:55:23,046 - livekit.agents - INFO - job process initialized
2024-12-29 10:55:23,046 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:55:23,046 - livekit.agents - INFO - initializing job process
2024-12-29 10:55:23,046 - livekit.agents - INFO - job process initialized
2024-12-29 10:55:23,046 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 10:55:23,176 - voice-business-agent - INFO - Connecting to room voice_assistant_room_9687
2024-12-29 10:55:23,176 - voice-business-agent - INFO - Connecting to room voice_assistant_room_9687
2024-12-29 10:55:23,177 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:55:23,177 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:55:23,177 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 10:55:23,177 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 10:55:23,178 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:55:23,178 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:55:23,400 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:55:23,400 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:55:23,400 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:55:23,400 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:55:23,400 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:55:23,400 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:55:23,400 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:55:23,400 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:55:23,437 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:55:23,437 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:55:23,437 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:55:23,437 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:55:23,437 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:55:23,437 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:55:23,437 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:55:23,437 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:55:23,552 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:55:23,552 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:55:23,762 - voice-business-agent - INFO - Participant connected: voice_assistant_user_2319
2024-12-29 10:55:23,762 - voice-business-agent - INFO - Participant connected: voice_assistant_user_2319
2024-12-29 10:55:23,852 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:55:23,853 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 10:55:23,877 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11945e490>
2024-12-29 10:55:23,877 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x118d527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 10:55:23,893 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d0fdcd0>
2024-12-29 10:55:23,893 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:55:23,894 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:55:23,894 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:55:23,895 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:55:23,895 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:55:25,056 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:55:25,056 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 10:55:25,732 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:25:25 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1512'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-d4pgj'), (b'x-envoy-upstream-service-time', b'1497'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_ebff0d76cff9dd8f43ba3ade3a080a13'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=NLvNsBP.HyW2nowlR_yRD7PYwPezND7qQ05dJYJlxO8-1735449925-1.0.1.1-Z9BOrGlCYRxMHgXgS7ndeKncUlJH6QBCxETK1rQWeWnAgbmlVrgrCWFhiZEngeHANnXw4Q7WAI7f15nNS6eddw; path=/; expires=Sun, 29-Dec-24 05:55:25 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=Rop6ctf8C3vkdmtsbjfM5Z0_adixIHTHF6R1GwYPgqo-1735449925749-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975e8889535520-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:55:25,734 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:55:25,734 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:55:25,734 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:55:26,021 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:55:26,021 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:55:26,596 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:55:26,596 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:55:26,596 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:55:28,277 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:55:28,277 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 10:55:28,277 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:55:28,277 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 10:55:28,277 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 10:55:28,278 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:55:28,278 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:55:28,277 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 10:55:28,278 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:55:28,278 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:55:32,671 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:55:32,671 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:55:32,990 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:55:32,990 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:55:32,993 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:55:32,994 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 10:55:33,005 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1194aecd0>
2024-12-29 10:55:33,006 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x118d52720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 10:55:33,023 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d73bed0>
2024-12-29 10:55:33,023 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:55:33,023 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:55:33,023 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:55:33,023 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:55:33,023 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:55:33,602 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:25:33 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'285'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29915'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'170ms'), (b'x-request-id', b'req_5db249d6f3b68a2274d38893997aea24'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=X2t2jBiOSePuTduJX9UVhaURRInEJrudZMTvHM42gE4-1735449933-1.0.1.1-_EAt6_YRpRi53h4YUTxbJSTf5NiJQ9f9daHoWtGcVzE1M6gmUdkYZLnItAoZhqDNO9_72Rq743YslyWYEWxufg; path=/; expires=Sun, 29-Dec-24 05:55:33 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=frWBkmLYPT8X52kBzSfShe2qcGunDFrF.LNZuorwjHU-1735449933622-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975ec18ff454f5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:55:33,602 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:55:33,602 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:55:33,603 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:55:34,375 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:55:34,375 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:55:34,375 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:55:34,376 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Of course! Could you please provide me with your mobile number so I can connect you with an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:55:34,378 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:55:34,378 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:55:34,378 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:55:34,378 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:55:34,378 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:55:35,692 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:25:35 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1003'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-lzb2v'), (b'x-envoy-upstream-service-time', b'991'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_9b4d2c3e70c2ae9ed0cea7cb2639dc3e'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975eca08f95520-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:55:35,692 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:55:35,692 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:55:35,692 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:55:35,961 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:55:35,961 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:55:37,376 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:55:37,376 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:55:37,376 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:55:37,610 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 10:55:37,610 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 10:55:37,611 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 10:55:37,611 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:55:37,610 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 10:55:37,610 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 10:55:37,611 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 10:55:37,611 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:55:42,101 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:55:42,101 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 10:55:42,103 - voice-business-agent - INFO - User speech received:  Of course! Could you please provide me with your mobile number so I can connect you with an agent?
2024-12-29 10:55:42,103 - voice-business-agent - DEBUG - Validating phone number from text:  Of course! Could you please provide me with your mobile number so I can connect you with an agent?
2024-12-29 10:55:42,103 - voice-business-agent - INFO - User speech received:  Of course! Could you please provide me with your mobile number so I can connect you with an agent?
2024-12-29 10:55:42,103 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:55:42,103 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:55:42,103 - voice-business-agent - DEBUG - Validating phone number from text:  Of course! Could you please provide me with your mobile number so I can connect you with an agent?
2024-12-29 10:55:42,103 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 10:55:42,103 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 10:55:46,024 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:55:46,024 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 10:55:46,386 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:55:46,386 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 10:55:46,396 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Of course! Could you please provide me with your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': "Yes. It's 9313571554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 10:55:46,397 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:55:46,398 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:55:46,398 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:55:46,399 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:55:46,399 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:55:46,951 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:25:46 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'253'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29883'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'234ms'), (b'x-request-id', b'req_e866f655456745b8fb474a9bda9d52d4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975f15293c54f5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:55:46,952 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 10:55:46,952 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 10:55:46,952 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:55:47,099 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for providing your number.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:55:47,102 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:55:47,102 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:55:47,102 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:55:47,103 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:55:47,103 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:55:47,318 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:55:47,318 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:55:47,319 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:55:48,376 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:25:48 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'963'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-5zbkc'), (b'x-envoy-upstream-service-time', b'949'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_addc2781efa07b3c04506f829d2a468c'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975f198dd75520-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:55:48,379 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:55:48,379 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:55:48,379 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:55:48,646 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:55:48,646 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 10:55:49,180 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 10:55:49,180 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 10:55:49,181 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 10:55:49,183 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'll connect you with an agent now.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 10:55:49,185 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 10:55:49,186 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 10:55:49,186 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 10:55:49,186 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 10:55:49,187 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 10:55:50,008 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:25:50 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'523'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-5gknr'), (b'x-envoy-upstream-service-time', b'499'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_28b0558f59e676db24ae5ca5d7091330'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f975f269c495520-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 10:55:50,010 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 10:55:50,011 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 10:55:50,011 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 10:55:50,213 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 10:55:50,213 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 10:55:50,213 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 9313571554.
2024-12-29 10:55:50,213 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 10:55:50,213 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 10:55:50,213 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 10:55:50,213 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 9313571554.
2024-12-29 10:55:50,213 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 10:55:50,213 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=1&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:55:50,213 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=1&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 10:55:50,469 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:55:50,470 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:55:50,469 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 10:55:50,470 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:55:50,470 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 10:55:50,470 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:55:50,470 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 10:55:50,470 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 10:55:50,510 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:55:50,510 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:55:50,511 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:55:50,510 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 10:55:50,511 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:55:50,510 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 10:55:50,511 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 10:55:50,511 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 10:55:50,627 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:55:50,627 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 10:55:50,629 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:55:50,629 - livekit.agents - DEBUG - shutting down job task
2024-12-29 10:55:50,630 - livekit.agents - INFO - process exiting
2024-12-29 10:55:50,632 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:55:50,632 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 10:55:50,634 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:55:50,634 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 10:55:50,774 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 10:55:50,951 - livekit.agents - INFO - registered worker
2024-12-29 11:02:40,525 - livekit.agents - INFO - shutting down worker
2024-12-29 11:02:40,527 - livekit.agents - INFO - shutting down worker
2024-12-29 11:02:41,987 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:02:41,999 - livekit.agents - INFO - starting worker
2024-12-29 11:02:42,001 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:02:42,009 - livekit.agents - INFO - starting worker
2024-12-29 11:02:42,238 - livekit.agents - INFO - registered worker
2024-12-29 11:02:42,250 - livekit.agents - INFO - registered worker
2024-12-29 11:03:28,411 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:03:28,413 - livekit.agents - DEV - Watching /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python
2024-12-29 11:03:29,287 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:03:29,316 - livekit.agents - INFO - starting worker
2024-12-29 11:03:29,524 - livekit.agents - INFO - registered worker
2024-12-29 11:03:39,615 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:03:39,617 - livekit.agents - DEV - Watching /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python
2024-12-29 11:03:40,466 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:03:40,478 - livekit.agents - INFO - starting worker
2024-12-29 11:03:40,882 - livekit.agents - INFO - registered worker
2024-12-29 11:03:56,179 - livekit.agents - INFO - received job request
2024-12-29 11:03:57,303 - livekit.agents - INFO - initializing job process
2024-12-29 11:03:57,303 - livekit.agents - INFO - job process initialized
2024-12-29 11:03:57,304 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:03:57,303 - livekit.agents - INFO - initializing job process
2024-12-29 11:03:57,303 - livekit.agents - INFO - job process initialized
2024-12-29 11:03:57,304 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:03:57,307 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 11:03:57,307 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 11:03:57,307 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 11:03:57,307 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 11:03:57,309 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 11:03:57,309 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 11:03:57,533 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 11:03:57,534 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 11:03:57,534 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 11:03:57,533 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 11:03:57,534 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 11:03:57,534 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 11:03:57,534 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 11:03:57,534 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 11:03:57,568 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 11:03:57,568 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 11:03:57,568 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 11:03:57,568 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 11:03:57,568 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 11:03:57,568 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 11:03:57,568 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 11:03:57,568 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 11:03:57,675 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 11:03:57,675 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 11:03:57,884 - livekit.agents - ERROR - unhandled exception while running the job task
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 87, in entrypoint
    local_participant = room.local_participant
                        ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'local_participant'
2024-12-29 11:03:57,884 - livekit.agents - ERROR - unhandled exception while running the job task
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 87, in entrypoint
    local_participant = room.local_participant
                        ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'local_participant'
2024-12-29 11:07:29,842 - livekit.agents - INFO - shutting down worker
2024-12-29 11:07:29,846 - livekit.agents - DEBUG - shutting down job task
2024-12-29 11:07:29,846 - livekit.agents - INFO - process exiting
2024-12-29 11:07:29,846 - livekit.agents - DEBUG - shutting down job task
2024-12-29 11:07:29,913 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 11:07:29,913 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 11:07:29,914 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: ClientInitiated
2024-12-29 11:07:29,914 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: ClientInitiated
2024-12-29 11:07:29,914 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 11:07:29,914 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 11:07:29,914 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 11:07:29,914 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 11:07:31,239 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:07:31,252 - livekit.agents - INFO - starting worker
2024-12-29 11:07:31,260 - livekit.agents - DEV - reloading job
2024-12-29 11:07:31,548 - livekit.agents - INFO - registered worker
2024-12-29 11:07:32,248 - livekit.agents - INFO - initializing job process
2024-12-29 11:07:32,249 - livekit.agents - INFO - job process initialized
2024-12-29 11:07:32,249 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:07:32,248 - livekit.agents - INFO - initializing job process
2024-12-29 11:07:32,249 - livekit.agents - INFO - job process initialized
2024-12-29 11:07:32,249 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:07:32,304 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 11:07:32,369 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2745
2024-12-29 11:07:32,369 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2745
2024-12-29 11:07:32,370 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 11:07:32,370 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 11:07:32,370 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 11:07:32,371 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 11:07:32,370 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 11:07:32,371 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 11:07:32,482 - livekit.agents - INFO - registered worker
2024-12-29 11:07:32,644 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 11:07:32,644 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 11:07:32,644 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 11:07:32,644 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 11:07:32,644 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 11:07:32,644 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 11:07:32,644 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 11:07:32,644 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 11:07:32,686 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 11:07:32,686 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 11:07:32,686 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 11:07:32,686 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 11:07:32,686 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 11:07:32,686 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 11:07:32,686 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 11:07:32,686 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 11:07:32,806 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 11:07:32,806 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 11:07:33,018 - voice-business-agent - INFO - Participant connected: voice_assistant_user_468
2024-12-29 11:07:33,018 - voice-business-agent - INFO - Participant connected: voice_assistant_user_468
2024-12-29 11:07:33,110 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 11:07:33,110 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 11:07:33,222 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:07:33,224 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 11:07:33,326 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11edcb290>
2024-12-29 11:07:33,326 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11f3ce7b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 11:07:33,378 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11edd16d0>
2024-12-29 11:07:33,379 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:07:33,379 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:07:33,379 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:07:33,379 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:07:33,379 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:07:34,652 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:37:34 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'910'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-57qsb'), (b'x-envoy-upstream-service-time', b'887'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_1d8fac28140ad1414201007b62ff779c'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=Mo9D6dMtBsyAf7W4NGeLvam2gKeRrj6lwtfBr5E03iw-1735450654-1.0.1.1-RaX3QCvbS7SrY8gQ9.TJKH_yPylI6VheeWcGC5TE2MSVyzmJFbB5uUlCIuuenIFgZn8KE0Os..yom3kppx4TMQ; path=/; expires=Sun, 29-Dec-24 06:07:34 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=wgb1czfwtei9Ct6BpPCDXkIssSxoRmB30jUK05J9.Vc-1735450654662-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f977057cb175510-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:07:34,654 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:07:34,654 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:07:34,654 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:07:34,943 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:07:34,943 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:07:35,497 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:07:35,497 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:07:35,497 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:07:36,983 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:07:36,983 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:07:36,983 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 11:07:36,983 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 11:07:36,984 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:07:36,984 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:07:36,983 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 11:07:36,983 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 11:07:36,984 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:07:36,984 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:07:41,938 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:07:41,938 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:07:41,941 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:07:41,941 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:07:41,948 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:07:41,949 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 11:07:42,010 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11f477b50>
2024-12-29 11:07:42,010 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11f3ce720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 11:07:42,089 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11eddd550>
2024-12-29 11:07:42,090 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:07:42,090 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:07:42,090 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:07:42,090 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:07:42,091 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:07:46,595 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:37:46 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'4127'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29915'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'170ms'), (b'x-request-id', b'req_03d2a33de83423bb4dbbdd0e5185fc24'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=2qanAdy3su_XaeWZaCmRfHD9D1DszhTYg8q0zcNqBM4-1735450666-1.0.1.1-D8kOiRFvvfz6fEB2EsyxRVNk.cid5WWWTT8ILutuZaXE6IXS.BW_MQMp0wH6m4ESXqLGpFXiUh4Fjw4WR4YXmw; path=/; expires=Sun, 29-Dec-24 06:07:46 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=IhYEKSs0qWt7DqvYEX9tJz2Gh28ehshrivx_TUxzctQ-1735450666543-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97708e3f868ad6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:07:46,596 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:07:46,596 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:07:46,597 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:07:46,959 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:07:46,960 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:07:46,960 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:07:46,962 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Of course! Could you please provide me with your mobile number to proceed?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:07:46,964 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:07:46,964 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:07:46,964 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:07:46,964 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:07:46,964 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:07:49,007 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:37:49 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1738'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-7s2qd'), (b'x-envoy-upstream-service-time', b'1724'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b817e21103479e512f42e29a6cd0d945'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9770acbbfb5510-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:07:49,007 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:07:49,008 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:07:49,008 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:07:49,336 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:07:49,336 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:07:50,767 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:07:50,768 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:07:50,768 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:07:50,999 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 11:07:50,999 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 11:07:50,999 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 11:07:50,999 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:07:50,999 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 11:07:50,999 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 11:07:50,999 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 11:07:50,999 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:07:53,938 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:07:53,938 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:07:53,939 - voice-business-agent - INFO - User speech received:  Of course! Could you please provide me with your mobile number to proceed?
2024-12-29 11:07:53,939 - voice-business-agent - DEBUG - Validating phone number from text:  Of course! Could you please provide me with your mobile number to proceed?
2024-12-29 11:07:53,939 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:07:53,939 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:07:53,939 - voice-business-agent - INFO - User speech received:  Of course! Could you please provide me with your mobile number to proceed?
2024-12-29 11:07:53,939 - voice-business-agent - DEBUG - Validating phone number from text:  Of course! Could you please provide me with your mobile number to proceed?
2024-12-29 11:07:53,939 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:07:53,939 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:07:59,553 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:07:59,553 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:07:59,921 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:07:59,921 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:07:59,927 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Of course! Could you please provide me with your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's 931-357-1554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:07:59,929 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:07:59,930 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:07:59,931 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:07:59,932 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:07:59,933 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:08:00,879 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:38:00 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'581'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29889'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'222ms'), (b'x-request-id', b'req_c9fa1ac31c008c0db34e39cbd87e7516'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9770fdbe868ad6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:08:00,879 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:08:00,880 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:08:00,880 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:08:01,256 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you! Let me connect you to an agent using the number: 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:08:01,258 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:08:01,258 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:08:01,258 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:08:01,259 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:08:01,259 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:08:01,341 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:08:01,341 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:08:01,342 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:08:02,065 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:38:02 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'467'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-nklxb'), (b'x-envoy-upstream-service-time', b'452'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_386c312a7b2144bc84e181c647a4fa52'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9771060afb5510-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:08:02,066 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:08:02,067 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:08:02,067 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:08:02,325 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:08:02,325 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:08:03,457 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:08:03,457 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:08:03,457 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:08:03,458 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on for a moment.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:08:03,459 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:08:03,460 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:08:03,460 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:08:03,461 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:08:03,461 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:08:03,949 - voice-business-agent - INFO - User speech received: Yes. It's 931-357-1554.
2024-12-29 11:08:03,949 - voice-business-agent - INFO - User speech received: Yes. It's 931-357-1554.
2024-12-29 11:08:03,949 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 931-357-1554.
2024-12-29 11:08:03,950 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:08:03,949 - voice-business-agent - INFO - User speech received: Yes. It's 931-357-1554.
2024-12-29 11:08:03,949 - voice-business-agent - INFO - User speech received: Yes. It's 931-357-1554.
2024-12-29 11:08:03,949 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 931-357-1554.
2024-12-29 11:08:03,950 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:08:03,950 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-89' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:119> exception=AttributeError("'RemoteParticipant' object has no attribute 'set_attributes'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 123, in process_user_speech
    await participant.set_attributes({"phone_number": phone_number})
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'RemoteParticipant' object has no attribute 'set_attributes'
2024-12-29 11:08:03,950 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-89' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:119> exception=AttributeError("'RemoteParticipant' object has no attribute 'set_attributes'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 123, in process_user_speech
    await participant.set_attributes({"phone_number": phone_number})
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'RemoteParticipant' object has no attribute 'set_attributes'
2024-12-29 11:08:04,695 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:38:04 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'930'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-xsqcp'), (b'x-envoy-upstream-service-time', b'917'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b18019e316636f0be8880b4332ab8308'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f977113c93b5510-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:08:04,696 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:08:04,696 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:08:04,696 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:08:05,042 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:08:05,043 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:08:05,043 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:08:10,007 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:08:10,007 - voice-business-agent - INFO - User speech received:  Thank you! Let me connect you to an agent using the number: 9313571554. Please hold on for a moment.
2024-12-29 11:08:10,007 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:08:10,008 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you! Let me connect you to an agent using the number: 9313571554. Please hold on for a moment.
2024-12-29 11:08:10,008 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:08:10,008 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:08:10,007 - voice-business-agent - INFO - User speech received:  Thank you! Let me connect you to an agent using the number: 9313571554. Please hold on for a moment.
2024-12-29 11:08:10,008 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you! Let me connect you to an agent using the number: 9313571554. Please hold on for a moment.
2024-12-29 11:08:10,008 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:08:10,008 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:08:10,008 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-91' coro=<entrypoint.<locals>.handle_agent_speechas() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:139> exception=AttributeError("'RemoteParticipant' object has no attribute 'get_attributes'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 142, in handle_agent_speechas
    attributes = participant.get_attributes()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'RemoteParticipant' object has no attribute 'get_attributes'
2024-12-29 11:08:10,008 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-91' coro=<entrypoint.<locals>.handle_agent_speechas() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:139> exception=AttributeError("'RemoteParticipant' object has no attribute 'get_attributes'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 142, in handle_agent_speechas
    attributes = participant.get_attributes()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'RemoteParticipant' object has no attribute 'get_attributes'
2024-12-29 11:08:12,108 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:08:12,108 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:08:14,351 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:08:14,351 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:08:14,357 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Of course! Could you please provide me with your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's 931-357-1554."}, {'role': 'assistant', 'content': ' Thank you! Let me connect you to an agent using the number: 9313571554. Please hold on for a moment.'}, {'role': 'user', 'content': 'Wait.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:08:14,358 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:08:14,358 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:08:14,358 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:08:14,359 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:08:14,359 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:08:15,066 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:08:15,066 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:08:15,067 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 11:08:15,067 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:08:15,067 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:08:15,067 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:08:15,068 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:08:16,146 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:08:16,146 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:08:16,723 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:08:16,723 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:08:16,727 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Of course! Could you please provide me with your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's 931-357-1554."}, {'role': 'assistant', 'content': ' Thank you! Let me connect you to an agent using the number: 9313571554. Please hold on for a moment.'}, {'role': 'user', 'content': "Wait. It's 931 571"}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:08:16,728 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 11:08:16,770 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x128ceb6d0>
2024-12-29 11:08:16,770 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11f3ce720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 11:08:16,786 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x128c939d0>
2024-12-29 11:08:16,787 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:08:16,787 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:08:16,787 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:08:16,787 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:08:16,787 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:08:17,339 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:38:17 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'259'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29857'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'286ms'), (b'x-request-id', b'req_c50147b119d847fe027daa56bf757655'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9771671b4554e9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:08:17,341 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:08:17,341 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:08:17,342 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:08:17,652 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:08:17,653 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 11:08:17,652 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:08:17,653 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:08:17,654 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:08:17,654 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:08:17,654 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:08:18,246 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:08:18,246 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:08:18,697 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:08:18,697 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:08:18,706 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Of course! Could you please provide me with your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's 931-357-1554."}, {'role': 'assistant', 'content': ' Thank you! Let me connect you to an agent using the number: 9313571554. Please hold on for a moment.'}, {'role': 'user', 'content': "Wait. It's 931 571 54"}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:08:18,707 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 11:08:18,743 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x128ce8350>
2024-12-29 11:08:18,743 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11f3ce720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 11:08:18,784 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x128cd9f10>
2024-12-29 11:08:18,785 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:08:18,785 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:08:18,785 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:08:18,785 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:08:18,786 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:08:19,395 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:38:19 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'257'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29856'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'288ms'), (b'x-request-id', b'req_a8a72f2020b8b1cf200f2c43ad9331b8'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9771739c121b8c-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:08:19,397 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:08:19,398 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:08:19,398 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:08:19,668 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It looks like the number you provided might be incomplete.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:08:19,669 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:08:19,670 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:08:19,670 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:08:19,670 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:08:19,670 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:08:19,945 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:08:19,945 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:08:19,946 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:08:21,053 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:38:21 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'499'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-kv9pt'), (b'x-envoy-upstream-service-time', b'484'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_742b53e9790b28b7dc6f8028edeabc46'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9771791d285510-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:08:21,054 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:08:21,054 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:08:21,054 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:08:21,289 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:08:21,289 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:08:22,014 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:08:22,015 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:08:22,016 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:08:22,018 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please confirm your full mobile number?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:08:22,020 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:08:22,020 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:08:22,021 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:08:22,022 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:08:22,022 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:08:23,131 - voice-business-agent - INFO - User speech received: Wait. It's 931 571 54
2024-12-29 11:08:23,131 - voice-business-agent - INFO - User speech received: Wait. It's 931 571 54
2024-12-29 11:08:23,131 - voice-business-agent - INFO - User speech received: Wait. It's 931 571 54
2024-12-29 11:08:23,132 - voice-business-agent - DEBUG - Validating phone number from text: Wait. It's 931 571 54
2024-12-29 11:08:23,131 - voice-business-agent - INFO - User speech received: Wait. It's 931 571 54
2024-12-29 11:08:23,132 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:08:23,132 - voice-business-agent - DEBUG - Validating phone number from text: Wait. It's 931 571 54
2024-12-29 11:08:23,132 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:08:23,444 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:38:23 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1064'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-z2twz'), (b'x-envoy-upstream-service-time', b'1053'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_1592d76ebbfc08027e6752c9dff2af38'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f977187cc515510-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:08:23,445 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:08:23,446 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:08:23,446 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:08:24,867 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:08:24,868 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:08:24,869 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:08:24,873 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It should usually have 10 digits.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:08:24,874 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:08:24,875 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:08:24,875 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:08:24,876 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:08:24,876 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:08:25,886 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:38:25 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'632'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-5f7kg'), (b'x-envoy-upstream-service-time', b'554'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_8dbe56e92bfbc02076437cd518337ea4'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f977199a8475510-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:08:25,887 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:08:25,887 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:08:25,887 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:08:26,947 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:08:26,948 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:08:26,948 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:08:29,520 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:08:29,520 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:08:29,521 - voice-business-agent - INFO - User speech received:  It looks like the number you provided might be incomplete. Could you please confirm your full mobile number? It should usually have 10 digits.
2024-12-29 11:08:29,521 - voice-business-agent - DEBUG - Validating phone number from text:  It looks like the number you provided might be incomplete. Could you please confirm your full mobile number? It should usually have 10 digits.
2024-12-29 11:08:29,521 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:08:29,521 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:08:29,521 - voice-business-agent - INFO - User speech received:  It looks like the number you provided might be incomplete. Could you please confirm your full mobile number? It should usually have 10 digits.
2024-12-29 11:08:29,521 - voice-business-agent - DEBUG - Validating phone number from text:  It looks like the number you provided might be incomplete. Could you please confirm your full mobile number? It should usually have 10 digits.
2024-12-29 11:08:29,521 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:08:29,521 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:08:35,235 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:08:35,235 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:08:35,560 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:08:35,560 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:08:35,564 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Of course! Could you please provide me with your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's 931-357-1554."}, {'role': 'assistant', 'content': ' Thank you! Let me connect you to an agent using the number: 9313571554. Please hold on for a moment.'}, {'role': 'user', 'content': "Wait. It's 931 571 54"}, {'role': 'assistant', 'content': ' It looks like the number you provided might be incomplete. Could you please confirm your full mobile number? It should usually have 10 digits.'}, {'role': 'user', 'content': "It's a 9313571554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:08:35,565 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:08:35,566 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:08:35,566 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:08:35,566 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:08:35,566 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:08:36,174 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:38:36 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'275'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29814'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'372ms'), (b'x-request-id', b'req_5fb37a667b49e91faa5717dea250a8b0'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9771dc7b391b8c-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:08:36,176 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:08:36,176 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:08:36,176 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:08:36,295 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for confirming.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:08:36,296 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:08:36,296 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:08:36,296 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:08:36,297 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:08:36,297 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:08:36,519 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:08:36,519 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:08:36,519 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:08:37,199 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:38:37 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'548'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-m4b79'), (b'x-envoy-upstream-service-time', b'535'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_4c76f12b860c29ea763298b64e23eb45'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9771e10d505510-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:08:37,200 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:08:37,201 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:08:37,201 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:08:37,432 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:08:37,432 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:08:37,703 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:08:37,703 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:08:37,703 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:08:37,705 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Connecting you to an agent using the number 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:08:37,706 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:08:37,707 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:08:37,707 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:08:37,707 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:08:37,707 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:08:38,913 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:38:38 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'850'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-vllsw'), (b'x-envoy-upstream-service-time', b'835'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_ec045d03e548c69d3aff71a01488b1a7'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9771e9dd355510-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:08:38,914 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:08:38,914 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:08:38,914 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:08:39,586 - voice-business-agent - INFO - User speech received: It's a 9313571554.
2024-12-29 11:08:39,586 - voice-business-agent - INFO - User speech received: It's a 9313571554.
2024-12-29 11:08:39,586 - voice-business-agent - DEBUG - Validating phone number from text: It's a 9313571554.
2024-12-29 11:08:39,586 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:08:39,586 - voice-business-agent - INFO - User speech received: It's a 9313571554.
2024-12-29 11:08:39,586 - voice-business-agent - INFO - User speech received: It's a 9313571554.
2024-12-29 11:08:39,586 - voice-business-agent - DEBUG - Validating phone number from text: It's a 9313571554.
2024-12-29 11:08:39,586 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-176' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:119> exception=AttributeError("'RemoteParticipant' object has no attribute 'set_attributes'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 123, in process_user_speech
    await participant.set_attributes({"phone_number": phone_number})
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'RemoteParticipant' object has no attribute 'set_attributes'
2024-12-29 11:08:39,586 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:08:39,586 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-176' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:119> exception=AttributeError("'RemoteParticipant' object has no attribute 'set_attributes'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 123, in process_user_speech
    await participant.set_attributes({"phone_number": phone_number})
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'RemoteParticipant' object has no attribute 'set_attributes'
2024-12-29 11:08:39,932 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:08:39,932 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:08:39,932 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:08:39,934 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:08:39,934 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:08:39,935 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:08:39,935 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:08:39,935 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:08:39,935 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:08:41,579 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:38:41 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1313'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-j9pvl'), (b'x-envoy-upstream-service-time', b'1300'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f5b7dfb6e4e677346e779ef176d71300'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9771f7c9e05510-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:08:41,581 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:08:41,581 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:08:41,582 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:08:42,075 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:08:42,075 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:08:42,075 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:08:45,240 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:08:45,240 - voice-business-agent - INFO - User speech received:  Thank you for confirming. Connecting you to an agent using the number 9313571554. Please hold on.
2024-12-29 11:08:45,240 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:08:45,240 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for confirming. Connecting you to an agent using the number 9313571554. Please hold on.
2024-12-29 11:08:45,240 - voice-business-agent - INFO - User speech received:  Thank you for confirming. Connecting you to an agent using the number 9313571554. Please hold on.
2024-12-29 11:08:45,240 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:08:45,240 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for confirming. Connecting you to an agent using the number 9313571554. Please hold on.
2024-12-29 11:08:45,241 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:08:45,240 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:08:45,241 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:08:45,241 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-180' coro=<entrypoint.<locals>.handle_agent_speechas() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:139> exception=AttributeError("'RemoteParticipant' object has no attribute 'get_attributes'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 142, in handle_agent_speechas
    attributes = participant.get_attributes()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'RemoteParticipant' object has no attribute 'get_attributes'
2024-12-29 11:08:45,241 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-180' coro=<entrypoint.<locals>.handle_agent_speechas() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:139> exception=AttributeError("'RemoteParticipant' object has no attribute 'get_attributes'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 142, in handle_agent_speechas
    attributes = participant.get_attributes()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'RemoteParticipant' object has no attribute 'get_attributes'
2024-12-29 11:17:59,487 - livekit.agents - INFO - shutting down worker
2024-12-29 11:17:59,488 - livekit.agents - DEBUG - shutting down job task
2024-12-29 11:17:59,488 - livekit.agents - DEBUG - shutting down job task
2024-12-29 11:17:59,488 - livekit.agents - INFO - process exiting
2024-12-29 11:17:59,531 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 11:17:59,531 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 11:17:59,532 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: ClientInitiated
2024-12-29 11:17:59,533 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 11:17:59,532 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: ClientInitiated
2024-12-29 11:17:59,533 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 11:18:00,918 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:18:00,928 - livekit.agents - INFO - starting worker
2024-12-29 11:18:00,939 - livekit.agents - DEV - reloading job
2024-12-29 11:18:01,123 - livekit.agents - INFO - registered worker
2024-12-29 11:18:01,915 - livekit.agents - INFO - initializing job process
2024-12-29 11:18:01,915 - livekit.agents - INFO - job process initialized
2024-12-29 11:18:01,915 - livekit.agents - INFO - initializing job process
2024-12-29 11:18:01,916 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:18:01,915 - livekit.agents - INFO - job process initialized
2024-12-29 11:18:01,916 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:18:01,963 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 11:18:02,035 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2745
2024-12-29 11:18:02,035 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2745
2024-12-29 11:18:02,036 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 11:18:02,036 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 11:18:02,036 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 11:18:02,036 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 11:18:02,037 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 11:18:02,037 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 11:18:02,096 - livekit.agents - INFO - registered worker
2024-12-29 11:18:02,287 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 11:18:02,288 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 11:18:02,288 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 11:18:02,288 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 11:18:02,287 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 11:18:02,288 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 11:18:02,288 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 11:18:02,288 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 11:18:02,325 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 11:18:02,326 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 11:18:02,326 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 11:18:02,326 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 11:18:02,325 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 11:18:02,326 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 11:18:02,326 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 11:18:02,326 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 11:18:02,440 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 11:18:02,440 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 11:18:02,657 - voice-business-agent - INFO - Participant connected: voice_assistant_user_468
2024-12-29 11:18:02,657 - voice-business-agent - INFO - Participant connected: voice_assistant_user_468
2024-12-29 11:18:02,721 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 11:18:02,721 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 11:18:02,756 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:18:02,757 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 11:18:02,779 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10f59e6d0>
2024-12-29 11:18:02,779 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x12b6527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 11:18:02,791 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10f7d22d0>
2024-12-29 11:18:02,792 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:18:02,792 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:18:02,792 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:18:02,792 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:18:02,792 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:18:04,866 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:48:04 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1749'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-5f7kg'), (b'x-envoy-upstream-service-time', b'1735'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_48f58828e859d941194341fbda449aec'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=Z3ktg4Dm58zgJcQ46evzyildzOHbAuRy3xJl4cb9nvs-1735451284-1.0.1.1-kdHku.jeMDXwVLQ830xdENMhuRuGPlXLxFVFGYhyAJdbSFyKFUVagbFQuixhYBYxkX7t0fznVZYEazZGLeOfUw; path=/; expires=Sun, 29-Dec-24 06:18:04 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=7S6zEz5QF8ZxRGTkDjcwjspuAibalYWcvU5V8.tyJWA-1735451284883-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f977fb5abf9549c-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:18:04,869 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:18:04,869 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:18:04,870 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:18:05,149 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:18:05,149 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:18:05,727 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:18:05,727 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:18:05,728 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:18:07,064 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:18:07,064 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:18:07,065 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 11:18:07,065 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 11:18:07,066 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:18:07,066 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:18:07,065 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 11:18:07,065 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 11:18:07,066 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:18:07,066 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:18:09,595 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:18:09,595 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:18:09,972 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:18:09,972 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:18:09,978 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:18:09,979 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 11:18:09,992 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12f643e10>
2024-12-29 11:18:09,992 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x12b652720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 11:18:10,008 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12b6fa210>
2024-12-29 11:18:10,009 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:18:10,009 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:18:10,009 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:18:10,010 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:18:10,010 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:18:10,546 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:48:10 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'230'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29917'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'166ms'), (b'x-request-id', b'req_7d9b89b03e59a468411dbe04da8c797a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=NuuSv0D0arPouNqoNN9A_l66zivhqXsFzL70aj1JxYE-1735451290-1.0.1.1-O8pHzhHffLKUAa22FDIDD72k0xgoltLN_93BuRFPpGdVWdEaxBs4APR3K4VHX3JyYADwoRH2Yk66gC6O7w.MUw; path=/; expires=Sun, 29-Dec-24 06:18:10 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=Jg.JBKQXL.Evk2Qe9acNEHj.OvAYyx1LRRxHmIJGWjQ-1735451290564-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f977fe2b8ed8e8d-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:18:10,547 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:18:10,547 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:18:10,548 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:18:10,696 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I can help with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:18:10,697 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:18:10,698 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:18:10,698 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:18:10,698 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:18:10,698 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:18:10,909 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:18:10,909 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:18:10,909 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:18:12,872 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:48:12 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1878'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-m6w9z'), (b'x-envoy-upstream-service-time', b'1861'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_16cf6908286c543a2fc7f3b6f202369a'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f977fe70890549c-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:18:12,872 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:18:12,873 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:18:12,873 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:18:13,126 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:18:13,126 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:18:13,611 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:18:13,612 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:18:13,613 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:18:13,615 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide me with your mobile number?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:18:13,616 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:18:13,617 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:18:13,617 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:18:13,618 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:18:13,618 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:18:14,680 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:48:14 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'728'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-gptrf'), (b'x-envoy-upstream-service-time', b'715'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_7fa27c0fbabc77e12a509c1f51ce0590'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f977ff94d32549c-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:18:14,682 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:18:14,682 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:18:14,683 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:18:15,399 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 11:18:15,400 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 11:18:15,400 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to agent.
2024-12-29 11:18:15,401 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:18:15,399 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 11:18:15,400 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 11:18:15,400 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to agent.
2024-12-29 11:18:15,401 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:18:15,739 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:18:15,740 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:18:15,740 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:18:18,149 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:18:18,149 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:18:18,150 - voice-business-agent - INFO - User speech received:  I can help with that. Could you please provide me with your mobile number?
2024-12-29 11:18:18,150 - voice-business-agent - DEBUG - Validating phone number from text:  I can help with that. Could you please provide me with your mobile number?
2024-12-29 11:18:18,150 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:18:18,150 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:18:18,150 - voice-business-agent - INFO - User speech received:  I can help with that. Could you please provide me with your mobile number?
2024-12-29 11:18:18,150 - voice-business-agent - DEBUG - Validating phone number from text:  I can help with that. Could you please provide me with your mobile number?
2024-12-29 11:18:18,150 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:18:18,150 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:18:22,593 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:18:22,593 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:18:22,971 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:18:22,971 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:18:22,981 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': "Yeah. So it's 931-350-1154."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:18:22,983 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:18:22,984 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:18:22,984 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:18:22,985 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:18:22,985 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:18:23,570 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:48:23 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'278'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29889'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'222ms'), (b'x-request-id', b'req_e90dc2aeb0cb504f468d69b7df362e90'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978033dd0d8e8d-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:18:23,571 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:18:23,571 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:18:23,572 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:18:23,860 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. I will proceed with the number 9313501154.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:18:23,862 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:18:23,862 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:18:23,863 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:18:23,863 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:18:23,863 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:18:24,021 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:18:24,023 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:18:24,023 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:18:25,659 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:48:25 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1399'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-canary-6d79d66586-c5kpw'), (b'x-envoy-upstream-service-time', b'1382'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_26bf6d9407514cb68696e59fb5de7796'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9780395b37549c-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:18:25,660 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:18:25,660 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:18:25,660 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:18:25,928 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:18:25,928 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:18:27,041 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:18:27,042 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:18:27,042 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:18:27,044 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on while I connect you to an agent.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:18:27,045 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:18:27,046 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:18:27,046 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:18:27,046 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:18:27,046 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:18:27,608 - voice-business-agent - INFO - User speech received: Yeah. So it's 931-350-1154.
2024-12-29 11:18:27,609 - voice-business-agent - INFO - User speech received: Yeah. So it's 931-350-1154.
2024-12-29 11:18:27,609 - voice-business-agent - DEBUG - Validating phone number from text: Yeah. So it's 931-350-1154.
2024-12-29 11:18:27,609 - voice-business-agent - INFO - Valid phone number found: 9313501154
2024-12-29 11:18:27,608 - voice-business-agent - INFO - User speech received: Yeah. So it's 931-350-1154.
2024-12-29 11:18:27,609 - voice-business-agent - INFO - User speech received: Yeah. So it's 931-350-1154.
2024-12-29 11:18:27,609 - voice-business-agent - DEBUG - Validating phone number from text: Yeah. So it's 931-350-1154.
2024-12-29 11:18:27,609 - voice-business-agent - INFO - Valid phone number found: 9313501154
2024-12-29 11:18:27,653 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:18:27,655 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 11:18:27,685 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12f689d50>
2024-12-29 11:18:27,685 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x12b6527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 11:18:27,700 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10f729010>
2024-12-29 11:18:27,700 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:18:27,700 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:18:27,701 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:18:27,701 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:18:27,701 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:18:27,855 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:48:27 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'491'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-9lk8f'), (b'x-envoy-upstream-service-time', b'481'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_1b9d98653d5f550b47cdb180e79d5535'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97804d3fe7549c-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:18:27,855 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:18:27,857 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:18:27,857 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:18:28,701 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:18:28,702 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:18:28,702 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:18:30,023 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:48:30 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1435'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-c5np5'), (b'x-envoy-upstream-service-time', b'1422'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_dbcb6d5fe83b51997a7886ca9e672837'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97805158f35498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:18:30,024 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:18:30,024 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:18:30,025 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:18:30,819 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:18:30,820 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:18:30,821 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:18:33,030 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:18:33,030 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:18:33,032 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:18:33,032 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:18:33,033 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:18:33,033 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:18:33,033 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:18:33,033 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:18:33,059 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:18:33,059 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:18:33,061 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:18:33,061 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:18:33,061 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:18:33,061 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:18:33,939 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:18:33,939 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:18:34,317 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:18:34,317 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:18:34,327 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': "Yeah. So it's 931-350-1154."}, {'role': 'assistant', 'content': ' Thank you. I will proceed with the number 9313501154. Please hold on while I connect you to...'}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': "No. It's there."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:18:34,328 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:18:34,329 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:18:34,329 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:18:34,329 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:18:34,329 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:18:34,922 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:48:34 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'269'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29857'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'286ms'), (b'x-request-id', b'req_46a2fcf695c0cce76289fe0e6db6111e'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97807abde78e8d-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:18:34,923 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:18:34,923 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:18:34,923 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:18:35,011 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:18:35,011 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:18:35,012 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 11:18:35,012 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:18:35,013 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:18:35,013 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:18:35,013 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:18:38,515 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:18:38,515 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:18:38,877 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:18:38,877 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:18:38,882 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': "Yeah. So it's 931-350-1154."}, {'role': 'assistant', 'content': ' Thank you. I will proceed with the number 9313501154. Please hold on while I connect you to...'}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': "No. It's there. 931-357-1554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:18:38,882 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 11:18:38,893 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12f6bc850>
2024-12-29 11:18:38,893 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x12b652720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 11:18:38,904 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12f6bcfd0>
2024-12-29 11:18:38,905 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:18:38,905 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:18:38,905 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:18:38,905 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:18:38,905 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:18:39,520 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:48:39 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'304'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29853'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'294ms'), (b'x-request-id', b'req_47078145efc0bf5683088e391d3a044b'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9780975cbe91c1-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:18:39,522 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:18:39,522 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:18:39,523 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:18:39,647 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for correcting that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:18:39,648 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:18:39,649 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:18:39,649 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:18:39,650 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:18:39,650 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:18:39,985 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:18:39,986 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:18:39,986 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:18:40,774 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:48:40 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'822'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-ws2bg'), (b'x-envoy-upstream-service-time', b'772'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_06dfa27deee381d4280f3821bd4d11fa'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97809bfad8549c-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:18:40,775 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:18:40,775 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:18:40,776 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:18:41,022 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:18:41,022 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:18:41,280 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:18:41,280 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:18:41,280 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:18:41,282 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I will proceed with the number 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:18:41,283 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:18:41,283 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:18:41,283 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:18:41,283 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:18:41,283 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:18:42,210 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:48:42 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'611'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-98jts'), (b'x-envoy-upstream-service-time', b'598'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_2e46c75e84b9e1c2eaa7acd3b20cbaa2'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9780a63eb0549c-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:18:42,212 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:18:42,212 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:18:42,212 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:18:42,698 - voice-business-agent - INFO - User speech received: No. It's there. 931-357-1554.
2024-12-29 11:18:42,698 - voice-business-agent - INFO - User speech received: No. It's there. 931-357-1554.
2024-12-29 11:18:42,698 - voice-business-agent - DEBUG - Validating phone number from text: No. It's there. 931-357-1554.
2024-12-29 11:18:42,698 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:18:42,698 - voice-business-agent - INFO - User speech received: No. It's there. 931-357-1554.
2024-12-29 11:18:42,698 - voice-business-agent - INFO - User speech received: No. It's there. 931-357-1554.
2024-12-29 11:18:42,698 - voice-business-agent - DEBUG - Validating phone number from text: No. It's there. 931-357-1554.
2024-12-29 11:18:42,698 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:18:42,739 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:18:42,741 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:18:42,742 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:18:42,742 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:18:42,742 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:18:42,742 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:18:43,277 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:18:43,278 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:18:43,279 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:18:43,282 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on while I connect you to an agent.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:18:43,283 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:18:43,284 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:18:43,284 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:18:43,284 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:18:43,284 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:18:43,647 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:48:43 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'579'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-6tn7d'), (b'x-envoy-upstream-service-time', b'563'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_521035c83336e64de5f89e17af74bfc6'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9780af4c3d5498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:18:43,649 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:18:43,649 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:18:43,650 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:18:44,153 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:48:44 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'580'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-4xrdc'), (b'x-envoy-upstream-service-time', b'564'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_2ad98a32378f9ce1218a191d8a95324e'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9780b2bdbf549c-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:18:44,155 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:18:44,155 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:18:44,155 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:18:44,500 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:18:44,500 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:18:44,500 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:18:45,132 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:18:45,132 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:18:45,132 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:18:49,643 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:18:49,643 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:18:49,645 - voice-business-agent - INFO - User speech received:  Thank you for correcting that. I will proceed with the number 9313571554. Please hold on while I connect you to an agent.
2024-12-29 11:18:49,645 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for correcting that. I will proceed with the number 9313571554. Please hold on while I connect you to an agent.
2024-12-29 11:18:49,645 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:18:49,645 - voice-business-agent - INFO - User speech received:  Thank you for correcting that. I will proceed with the number 9313571554. Please hold on while I connect you to an agent.
2024-12-29 11:18:49,645 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:18:49,645 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for correcting that. I will proceed with the number 9313571554. Please hold on while I connect you to an agent.
2024-12-29 11:18:49,645 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:18:49,645 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:18:49,646 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-157' coro=<entrypoint.<locals>.handle_agent_speechas() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:140> exception=AttributeError("'LocalParticipant' object has no attribute 'get_attributes'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 143, in handle_agent_speechas
    attributes = local_participant.get_attributes()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LocalParticipant' object has no attribute 'get_attributes'
2024-12-29 11:18:49,646 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-157' coro=<entrypoint.<locals>.handle_agent_speechas() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:140> exception=AttributeError("'LocalParticipant' object has no attribute 'get_attributes'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 143, in handle_agent_speechas
    attributes = local_participant.get_attributes()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LocalParticipant' object has no attribute 'get_attributes'
2024-12-29 11:18:49,647 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:18:49,647 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:18:52,364 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:18:52,364 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 11:18:52,364 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:18:52,365 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 11:18:52,365 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:18:52,364 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 11:18:52,365 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:18:52,365 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 11:18:52,365 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:18:52,365 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:21:37,881 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:21:37,881 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:21:38,171 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:21:38,171 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:21:38,182 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': "Yeah. So it's 931-350-1154."}, {'role': 'assistant', 'content': ' Thank you. I will proceed with the number 9313501154. Please hold on while I connect you to...'}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': "No. It's there. 931-357-1554."}, {'role': 'assistant', 'content': ' Thank you for correcting that. I will proceed with the number 9313571554. Please hold on while I connect you to an agent.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'This'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:21:38,184 - httpcore.connection - DEBUG - close.started
2024-12-29 11:21:38,185 - httpcore.connection - DEBUG - close.complete
2024-12-29 11:21:38,185 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 11:21:38,219 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12f6c6210>
2024-12-29 11:21:38,219 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x12b652720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 11:21:38,250 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12f69b8d0>
2024-12-29 11:21:38,250 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:21:38,251 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:21:38,251 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:21:38,251 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:21:38,251 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:21:38,890 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:51:38 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'321'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29806'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'388ms'), (b'x-request-id', b'req_09d76afa33a0c2332d11a0459f805b55'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9784f84b845464-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:21:38,892 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:21:38,892 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:21:38,893 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:21:39,180 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:21:39,180 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:21:39,181 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:21:39,182 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'May I assist you with anything else today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:21:39,182 - httpcore.connection - DEBUG - close.started
2024-12-29 11:21:39,182 - httpcore.connection - DEBUG - close.complete
2024-12-29 11:21:39,182 - httpcore.connection - DEBUG - close.started
2024-12-29 11:21:39,183 - httpcore.connection - DEBUG - close.complete
2024-12-29 11:21:39,183 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 11:21:39,201 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12f6dbe10>
2024-12-29 11:21:39,201 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x12b6527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 11:21:39,212 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10f729c10>
2024-12-29 11:21:39,212 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:21:39,212 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:21:39,212 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:21:39,213 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:21:39,213 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:21:40,038 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:21:40,038 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:21:40,039 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:21:40,039 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:21:40,587 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:51:40 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1042'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-d7wvm'), (b'x-envoy-upstream-service-time', b'1031'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a699571a0bdd23d5566e574f18e08763'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9784fe48485498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:21:40,588 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:21:40,588 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:21:40,589 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:21:41,391 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:21:41,391 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:21:41,391 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:21:45,255 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:21:45,255 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:21:45,263 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': "Yeah. So it's 931-350-1154."}, {'role': 'assistant', 'content': ' Thank you. I will proceed with the number 9313501154. Please hold on while I connect you to...'}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': "No. It's there. 931-357-1554."}, {'role': 'assistant', 'content': ' Thank you for correcting that. I will proceed with the number 9313571554. Please hold on while I connect you to an agent.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'This'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:21:45,264 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:21:45,265 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:21:45,265 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:21:45,266 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:21:45,266 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:21:45,844 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:51:45 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'283'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29806'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'388ms'), (b'x-request-id', b'req_5ea87bf80db39a8d4862ad7bf1393b37'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9785241a125464-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:21:45,845 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:21:45,845 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:21:45,845 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:21:46,110 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for providing your mobile number.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:21:46,112 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:21:46,112 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:21:46,112 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:21:46,113 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:21:46,113 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:21:46,200 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:21:46,201 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:21:46,201 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:21:46,717 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:21:46,717 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:21:46,718 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:21:46,718 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:21:47,677 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:51:47 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1231'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-b7wvp'), (b'x-envoy-upstream-service-time', b'1219'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c12cd62f31fe4240217be84c655eea60'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97852968485498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:21:47,678 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:21:47,678 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:21:47,678 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:21:48,410 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:21:48,411 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:21:48,412 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:21:57,764 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:21:57,764 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:21:57,768 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': "Yeah. So it's 931-350-1154."}, {'role': 'assistant', 'content': ' Thank you. I will proceed with the number 9313501154. Please hold on while I connect you to...'}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': "No. It's there. 931-357-1554."}, {'role': 'assistant', 'content': ' Thank you for correcting that. I will proceed with the number 9313571554. Please hold on while I connect you to an agent.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'This'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:21:57,769 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:21:57,769 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:21:57,769 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:21:57,769 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:21:57,770 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:21:58,504 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:51:58 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'443'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29806'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'388ms'), (b'x-request-id', b'req_90a199e049285b450c798e932f86d622'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97857249735464-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:21:58,505 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:21:58,505 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:21:58,506 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:21:58,723 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please clarify your last message?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:21:58,724 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:21:58,724 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:21:58,724 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:21:58,725 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:21:58,725 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:21:58,808 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:21:58,808 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:21:58,809 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:22:00,059 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:52:00 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1006'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-qf4dm'), (b'x-envoy-upstream-service-time', b'991'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_641d73c2f5fdf00563a13eb929eae6d0'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9785783c025498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:22:00,059 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:22:00,060 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:22:00,060 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:22:00,338 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:22:00,338 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:22:00,907 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:22:00,908 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:22:00,908 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:22:00,910 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'How can I assist you further?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:22:00,911 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:22:00,911 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:22:00,911 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:22:00,912 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:22:00,912 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:22:01,983 - voice-business-agent - INFO - User speech received: This
2024-12-29 11:22:01,983 - voice-business-agent - INFO - User speech received: This
2024-12-29 11:22:01,983 - voice-business-agent - DEBUG - Validating phone number from text: This
2024-12-29 11:22:01,983 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:22:01,983 - voice-business-agent - INFO - User speech received: This
2024-12-29 11:22:01,983 - voice-business-agent - INFO - User speech received: This
2024-12-29 11:22:01,983 - voice-business-agent - DEBUG - Validating phone number from text: This
2024-12-29 11:22:01,983 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:22:02,287 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:52:02 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1052'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-f2ttd'), (b'x-envoy-upstream-service-time', b'1037'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c1503650f2b7c275356633ef6f204251'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978585eb785498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:22:02,288 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:22:02,288 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:22:02,288 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:22:03,147 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:22:03,147 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:22:03,147 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:22:04,566 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:22:04,566 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:22:04,567 - voice-business-agent - INFO - User speech received:  Could you please clarify your last message? How can I assist you further?
2024-12-29 11:22:04,567 - voice-business-agent - DEBUG - Validating phone number from text:  Could you please clarify your last message? How can I assist you further?
2024-12-29 11:22:04,567 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:22:04,567 - voice-business-agent - INFO - User speech received:  Could you please clarify your last message? How can I assist you further?
2024-12-29 11:22:04,567 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:22:04,567 - voice-business-agent - DEBUG - Validating phone number from text:  Could you please clarify your last message? How can I assist you further?
2024-12-29 11:22:04,567 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:22:04,567 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:22:07,633 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:22:07,633 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:22:07,929 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:22:07,929 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:22:07,946 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': "Yeah. So it's 931-350-1154."}, {'role': 'assistant', 'content': ' Thank you. I will proceed with the number 9313501154. Please hold on while I connect you to...'}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': "No. It's there. 931-357-1554."}, {'role': 'assistant', 'content': ' Thank you for correcting that. I will proceed with the number 9313571554. Please hold on while I connect you to an agent.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'This'}, {'role': 'assistant', 'content': ' Could you please clarify your last message? How can I assist you further?'}, {'role': 'user', 'content': 'Ridgeway.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:22:07,947 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:22:07,947 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:22:07,947 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:22:07,948 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:22:07,948 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:22:08,628 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:52:08 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'372'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29783'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'434ms'), (b'x-request-id', b'req_33c962b4c0f12cae04bcf1a225392db8'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9785b1e92a5464-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:22:08,629 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:22:08,630 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:22:08,630 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:22:08,846 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for the information.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:22:08,848 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:22:08,848 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:22:08,848 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:22:08,848 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:22:08,849 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:22:09,077 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:22:09,077 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:22:09,077 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:22:09,906 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:52:09 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'766'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-qxzcq'), (b'x-envoy-upstream-service-time', b'752'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_7704021d9ac0d12f572573419e925eba'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9785b78d705498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:22:09,906 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:22:09,907 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:22:09,907 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:22:10,149 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:22:10,149 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:22:10,395 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:22:10,396 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:22:10,396 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:22:10,397 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please clarify how I can assist you further regarding Ridgeway?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:22:10,398 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:22:10,398 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:22:10,398 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:22:10,398 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:22:10,398 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:22:12,502 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:52:12 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1773'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-flthr'), (b'x-envoy-upstream-service-time', b'1752'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d5e7d5d33d05b7a1e024aabb9c6ca5dc'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9785c138845498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:22:12,502 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:22:12,502 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:22:12,502 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:22:12,961 - voice-business-agent - INFO - User speech received: Ridgeway.
2024-12-29 11:22:12,961 - voice-business-agent - INFO - User speech received: Ridgeway.
2024-12-29 11:22:12,961 - voice-business-agent - DEBUG - Validating phone number from text: Ridgeway.
2024-12-29 11:22:12,961 - voice-business-agent - INFO - User speech received: Ridgeway.
2024-12-29 11:22:12,961 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:22:12,961 - voice-business-agent - INFO - User speech received: Ridgeway.
2024-12-29 11:22:12,961 - voice-business-agent - DEBUG - Validating phone number from text: Ridgeway.
2024-12-29 11:22:12,961 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:22:13,642 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:22:13,643 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:22:13,643 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:22:16,521 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:22:16,521 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:22:16,522 - voice-business-agent - INFO - User speech received:  Thank you for the information. Could you please clarify how I can assist you further regarding Ridgeway?
2024-12-29 11:22:16,522 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for the information. Could you please clarify how I can assist you further regarding Ridgeway?
2024-12-29 11:22:16,522 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:22:16,522 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:22:16,522 - voice-business-agent - INFO - User speech received:  Thank you for the information. Could you please clarify how I can assist you further regarding Ridgeway?
2024-12-29 11:22:16,522 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for the information. Could you please clarify how I can assist you further regarding Ridgeway?
2024-12-29 11:22:16,522 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:22:16,522 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:24:37,318 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:24:37,318 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:24:37,320 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:24:37,320 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:24:37,332 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': "Yeah. So it's 931-350-1154."}, {'role': 'assistant', 'content': ' Thank you. I will proceed with the number 9313501154. Please hold on while I connect you to...'}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': "No. It's there. 931-357-1554."}, {'role': 'assistant', 'content': ' Thank you for correcting that. I will proceed with the number 9313571554. Please hold on while I connect you to an agent.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'This'}, {'role': 'assistant', 'content': ' Could you please clarify your last message? How can I assist you further?'}, {'role': 'user', 'content': 'Ridgeway.'}, {'role': 'assistant', 'content': ' Thank you for the information. Could you please clarify how I can assist you further regarding Ridgeway?'}, {'role': 'user', 'content': 'Right.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:24:37,333 - httpcore.connection - DEBUG - close.started
2024-12-29 11:24:37,334 - httpcore.connection - DEBUG - close.complete
2024-12-29 11:24:37,334 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 11:24:37,360 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d28e710>
2024-12-29 11:24:37,360 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x12b652720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 11:24:37,375 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12f704290>
2024-12-29 11:24:37,376 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:24:37,376 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:24:37,376 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:24:37,377 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:24:37,377 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:24:38,002 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:54:38 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'322'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29754'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'492ms'), (b'x-request-id', b'req_9474df6bae318f8373a206be0c4a822d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978957deaa8e7e-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:24:38,003 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:24:38,003 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:24:38,003 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:24:38,304 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:24:38,305 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:24:38,305 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:24:38,308 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please specify what assistance you need or provide more details so I can better help you?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:24:38,309 - httpcore.connection - DEBUG - close.started
2024-12-29 11:24:38,309 - httpcore.connection - DEBUG - close.complete
2024-12-29 11:24:38,310 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 11:24:38,322 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12f6da890>
2024-12-29 11:24:38,323 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x12b6527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 11:24:38,339 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12f6bd650>
2024-12-29 11:24:38,340 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:24:38,340 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:24:38,340 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:24:38,341 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:24:38,341 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:24:40,052 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:54:40 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'753'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-v6sbs'), (b'x-envoy-upstream-service-time', b'738'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_fa783ac6de402e7ff31a480a77fff9de'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97895ddb001b87-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:24:40,058 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:24:40,059 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:24:40,060 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:24:40,379 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:24:40,379 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:24:41,949 - voice-business-agent - INFO - User speech received: Right.
2024-12-29 11:24:41,950 - voice-business-agent - INFO - User speech received: Right.
2024-12-29 11:24:41,950 - voice-business-agent - DEBUG - Validating phone number from text: Right.
2024-12-29 11:24:41,950 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:24:41,949 - voice-business-agent - INFO - User speech received: Right.
2024-12-29 11:24:41,950 - voice-business-agent - INFO - User speech received: Right.
2024-12-29 11:24:41,950 - voice-business-agent - DEBUG - Validating phone number from text: Right.
2024-12-29 11:24:41,950 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:24:43,116 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:24:43,116 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:24:43,116 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:24:46,423 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:24:46,423 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:24:46,423 - voice-business-agent - INFO - User speech received:  Could you please specify what assistance you need or provide more details so I can better help you?
2024-12-29 11:24:46,424 - voice-business-agent - DEBUG - Validating phone number from text:  Could you please specify what assistance you need or provide more details so I can better help you?
2024-12-29 11:24:46,424 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:24:46,423 - voice-business-agent - INFO - User speech received:  Could you please specify what assistance you need or provide more details so I can better help you?
2024-12-29 11:24:46,425 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:24:46,424 - voice-business-agent - DEBUG - Validating phone number from text:  Could you please specify what assistance you need or provide more details so I can better help you?
2024-12-29 11:24:46,424 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:24:46,425 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:25:22,370 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 11:25:22,372 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 11:25:22,370 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 11:25:22,372 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 11:25:22,374 - livekit.agents - DEBUG - shutting down job task
2024-12-29 11:25:22,375 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 11:25:22,374 - livekit.agents - DEBUG - shutting down job task
2024-12-29 11:25:22,375 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 11:25:22,375 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 11:25:22,376 - livekit.agents - INFO - process exiting
2024-12-29 11:25:22,377 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 11:25:22,375 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 11:25:22,377 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 11:25:22,567 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 11:25:23,084 - livekit.agents - INFO - registered worker
2024-12-29 11:27:29,018 - livekit.agents - INFO - shutting down worker
2024-12-29 11:27:30,100 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:27:30,110 - livekit.agents - INFO - starting worker
2024-12-29 11:27:30,302 - livekit.agents - INFO - registered worker
2024-12-29 11:27:48,337 - livekit.agents - INFO - received job request
2024-12-29 11:27:49,343 - livekit.agents - INFO - initializing job process
2024-12-29 11:27:49,344 - livekit.agents - INFO - job process initialized
2024-12-29 11:27:49,344 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:27:49,343 - livekit.agents - INFO - initializing job process
2024-12-29 11:27:49,344 - livekit.agents - INFO - job process initialized
2024-12-29 11:27:49,344 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:27:49,471 - voice-business-agent - INFO - Connecting to room voice_assistant_room_8312
2024-12-29 11:27:49,471 - voice-business-agent - INFO - Connecting to room voice_assistant_room_8312
2024-12-29 11:27:49,472 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 11:27:49,472 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 11:27:49,472 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 11:27:49,472 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 11:27:49,473 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 11:27:49,473 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 11:27:49,709 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 11:27:49,709 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 11:27:49,709 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 11:27:49,709 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 11:27:49,710 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 11:27:49,709 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 11:27:49,709 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 11:27:49,710 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 11:27:49,744 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 11:27:49,744 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 11:27:49,745 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 11:27:49,744 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 11:27:49,745 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 11:27:49,744 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 11:27:49,745 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 11:27:49,745 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 11:27:49,854 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 11:27:49,854 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 11:27:50,067 - voice-business-agent - INFO - Participant connected: voice_assistant_user_9658
2024-12-29 11:27:50,067 - voice-business-agent - INFO - Participant connected: voice_assistant_user_9658
2024-12-29 11:27:50,119 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 11:27:50,119 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 11:27:50,175 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:27:50,176 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 11:27:50,200 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x131918a90>
2024-12-29 11:27:50,200 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x132b527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 11:27:50,225 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x13191fc90>
2024-12-29 11:27:50,226 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:27:50,226 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:27:50,226 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:27:50,226 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:27:50,226 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:27:51,594 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:57:51 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'516'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-xcwh6'), (b'x-envoy-upstream-service-time', b'502'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a5af99e879b11dfd9724c88f2958c03a'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=RTtX_N_HWuRG_qrbwVvuJLxCh.2M_6RgeQXpusw8ww4-1735451871-1.0.1.1-bCao9DpCXl_n.Vjd14s.AqoOn5siidhC8uI.AT.XYwazYMmPvM9fplmvXuHjfX9qhua81Q9tAV0CUvlFv5BiJw; path=/; expires=Sun, 29-Dec-24 06:27:51 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=olTlX0gHzuZeq.prlRX0onR4cLe_ekKtXqp6bsNXPE0-1735451871619-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978e0d2b8554e6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:27:51,597 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:27:51,597 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:27:51,598 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:27:51,869 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:27:51,869 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:27:51,875 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:27:51,875 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:27:51,876 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 11:27:51,876 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:27:51,877 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:27:51,879 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:27:51,879 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:27:51,879 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:27:51,879 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:28:04,466 - livekit.agents - INFO - shutting down worker
2024-12-29 11:28:04,468 - livekit.agents - DEBUG - shutting down job task
2024-12-29 11:28:04,468 - livekit.agents - INFO - process exiting
2024-12-29 11:28:04,468 - livekit.agents - DEBUG - shutting down job task
2024-12-29 11:28:04,508 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 11:28:04,508 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 11:28:04,511 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 11:28:04,511 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 11:28:05,792 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:28:05,802 - livekit.agents - INFO - starting worker
2024-12-29 11:28:05,812 - livekit.agents - DEV - reloading job
2024-12-29 11:28:06,266 - livekit.agents - INFO - registered worker
2024-12-29 11:28:06,708 - livekit.agents - INFO - initializing job process
2024-12-29 11:28:06,709 - livekit.agents - INFO - job process initialized
2024-12-29 11:28:06,709 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:28:06,708 - livekit.agents - INFO - initializing job process
2024-12-29 11:28:06,709 - livekit.agents - INFO - job process initialized
2024-12-29 11:28:06,709 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:28:06,752 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 11:28:06,828 - voice-business-agent - INFO - Connecting to room voice_assistant_room_8312
2024-12-29 11:28:06,828 - voice-business-agent - INFO - Connecting to room voice_assistant_room_8312
2024-12-29 11:28:06,829 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 11:28:06,829 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 11:28:06,829 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 11:28:06,829 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 11:28:06,830 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 11:28:06,830 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 11:28:06,898 - livekit.agents - INFO - registered worker
2024-12-29 11:28:07,069 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 11:28:07,069 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 11:28:07,069 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 11:28:07,069 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 11:28:07,070 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 11:28:07,069 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 11:28:07,069 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 11:28:07,070 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 11:28:07,109 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 11:28:07,109 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 11:28:07,109 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 11:28:07,109 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 11:28:07,110 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 11:28:07,110 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 11:28:07,110 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 11:28:07,110 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 11:28:07,223 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 11:28:07,223 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 11:28:07,433 - voice-business-agent - INFO - Participant connected: voice_assistant_user_9658
2024-12-29 11:28:07,433 - voice-business-agent - INFO - Participant connected: voice_assistant_user_9658
2024-12-29 11:28:07,484 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 11:28:07,484 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 11:28:07,534 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:28:07,535 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 11:28:07,555 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11bdfa350>
2024-12-29 11:28:07,555 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11bd527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 11:28:07,570 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11b248ed0>
2024-12-29 11:28:07,571 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:28:07,571 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:28:07,571 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:28:07,571 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:28:07,572 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:28:09,081 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:58:09 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1202'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-89gbm'), (b'x-envoy-upstream-service-time', b'1181'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_19554463277e80366259c1c8af3cbbea'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=cIjyoOufqXXlZHBznejiWd74tcBGxAvrkqKenPziemc-1735451889-1.0.1.1-yPW0EQHjcNNYlUd3xkl6wJCvUyRJut7p1uZ5exDdj62APFepgQtiKZiLDf1z.InOGtm8mSi1rISWDDOMGORynQ; path=/; expires=Sun, 29-Dec-24 06:28:09 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=1B3OcIoUnI_Ta8GI1UKv_UQELja_SueCLEXqelPksVg-1735451889098-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978e798c431c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:28:09,082 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:28:09,082 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:28:09,082 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:28:09,337 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:28:09,337 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:28:09,858 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:28:09,859 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:28:09,859 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:28:11,040 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:28:11,040 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:28:11,041 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 11:28:11,041 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 11:28:11,041 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 11:28:11,041 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:28:11,041 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:28:11,041 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 11:28:11,041 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:28:11,041 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:28:15,133 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:28:15,133 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:28:15,134 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:28:15,134 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:28:15,140 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:28:15,141 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 11:28:15,154 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11cd9ff50>
2024-12-29 11:28:15,154 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11bd52720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 11:28:15,166 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11b31c790>
2024-12-29 11:28:15,166 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:28:15,167 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:28:15,167 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:28:15,167 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:28:15,167 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:28:15,662 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:58:15 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'200'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29915'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'170ms'), (b'x-request-id', b'req_e15417b0294d05f0e8a276fcb7f09689'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=tqnzw40wxGzZGOqLYvldL_jgfz61BTmOHHnzwMDAExQ-1735451895-1.0.1.1-6A2BXReaPgaC.40CzkYFNEXlZowWy0dIriUVgjPthYywZGbfvn_4iux0916wXR8AVypSCcj.8l5tOxZB6VGmMA; path=/; expires=Sun, 29-Dec-24 06:28:15 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=rekLK5e.uVRc7ZscY1E7NPNDEEGIjfq9eQzoQ.nmEks-1735451895690-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978ea90b4754b4-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:28:15,662 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:28:15,662 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:28:15,663 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:28:15,986 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:28:15,986 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:28:15,986 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:28:15,988 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, may I have your mobile number so I can connect you to an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:28:15,989 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:28:15,989 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:28:15,989 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:28:15,990 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:28:15,990 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:28:18,017 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:58:18 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1250'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-canary-75f5c9bbcf-8nzj6'), (b'x-envoy-upstream-service-time', b'1230'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_70f1d90711ceffd3b3bf13c7d34f2546'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978eae2cb71c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:28:18,017 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:28:18,018 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:28:18,018 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:28:18,278 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:28:18,278 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:28:18,279 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:28:18,279 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:28:19,229 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:28:19,230 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:28:19,230 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:28:23,755 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:28:23,755 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:28:23,759 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:28:23,761 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:28:23,762 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:28:23,762 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:28:23,763 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:28:23,763 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:28:24,448 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:58:24 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'390'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29915'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'170ms'), (b'x-request-id', b'req_f240263270e4a35a81f6f71703a13c9c'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978edecd2254b4-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:28:24,449 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:28:24,450 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:28:24,450 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:28:24,643 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, I can help you with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:28:24,644 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:28:24,645 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:28:24,645 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:28:24,645 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:28:24,645 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:28:25,078 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:28:25,079 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:28:25,079 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:28:26,279 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:58:26 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'792'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-v6sbs'), (b'x-envoy-upstream-service-time', b'780'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_ede921320afd7721a259b618657da6f6'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978ee44e4f1c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:28:26,280 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:28:26,280 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:28:26,281 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:28:26,547 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:28:26,547 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:28:27,084 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:28:27,085 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:28:27,085 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:28:27,087 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide me with your mobile number so I can connect you to an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:28:27,089 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:28:27,089 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:28:27,090 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:28:27,091 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:28:27,091 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:28:28,174 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 11:28:28,174 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 11:28:28,174 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 11:28:28,174 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:28:28,174 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 11:28:28,174 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 11:28:28,174 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 11:28:28,174 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:28:28,224 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:58:28 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'797'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-jgm4n'), (b'x-envoy-upstream-service-time', b'785'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_8db13bd44d4c021adce3e3a38b195e36'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978ef38d821c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:28:28,225 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:28:28,225 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:28:28,226 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:28:29,670 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:28:29,670 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:28:29,670 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:28:33,417 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:28:33,417 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:28:33,418 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 11:28:33,418 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 11:28:33,418 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 11:28:33,419 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:28:33,418 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?
2024-12-29 11:28:33,419 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:28:33,419 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:28:33,419 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:28:36,509 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:28:36,509 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:28:37,286 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:28:37,286 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:28:37,291 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 93135"}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:28:37,293 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:28:37,294 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:28:37,294 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:28:37,295 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:28:37,295 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:28:37,335 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:28:37,335 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:28:37,336 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:28:37,337 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:28:37,336 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:28:37,337 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:28:37,341 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 93135 71554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:28:37,342 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 11:28:37,342 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:28:37,342 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 11:28:37,342 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:28:37,342 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:28:37,343 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:28:37,369 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11cd90250>
2024-12-29 11:28:37,369 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11bd52720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 11:28:37,386 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11b317b90>
2024-12-29 11:28:37,386 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:28:37,386 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:28:37,386 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:28:37,386 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:28:37,386 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:28:38,037 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:58:38 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'349'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'498'), (b'x-ratelimit-remaining-tokens', b'29798'), (b'x-ratelimit-reset-requests', b'158ms'), (b'x-ratelimit-reset-tokens', b'402ms'), (b'x-request-id', b'req_edc813dd1dd1ae4af1ebd5832c5940d5'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978f33eb1d1be1-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:28:38,037 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:28:38,037 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:28:38,037 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:28:38,788 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. I have your mobile number as 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:28:38,789 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:28:38,790 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:28:38,790 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:28:38,790 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:28:38,791 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:28:39,119 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:28:39,120 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:28:39,120 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:28:39,732 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:58:39 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'535'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-6s6dq'), (b'x-envoy-upstream-service-time', b'524'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_5bc90ccc15533801cfc2a5c85d4c9d8b'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978f3caba01c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:28:39,732 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:28:39,733 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:28:39,733 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:28:39,959 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:28:39,959 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:28:40,792 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:28:40,793 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:28:40,793 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:28:40,795 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I will connect you to an agent now.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:28:40,796 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:28:40,796 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:28:40,796 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:28:40,797 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:28:40,797 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:28:41,565 - voice-business-agent - INFO - User speech received: Yes. It's 93135 71554.
2024-12-29 11:28:41,566 - voice-business-agent - INFO - User speech received: Yes. It's 93135 71554.
2024-12-29 11:28:41,566 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 93135 71554.
2024-12-29 11:28:41,566 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:28:41,565 - voice-business-agent - INFO - User speech received: Yes. It's 93135 71554.
2024-12-29 11:28:41,566 - voice-business-agent - INFO - User speech received: Yes. It's 93135 71554.
2024-12-29 11:28:41,566 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 93135 71554.
2024-12-29 11:28:41,566 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:28:41,605 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:28:41,606 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 11:28:41,617 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11cdbaf50>
2024-12-29 11:28:41,618 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11bd527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 11:28:41,630 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11d907ad0>
2024-12-29 11:28:41,630 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:28:41,631 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:28:41,631 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:28:41,631 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:28:41,631 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:28:42,440 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:58:42 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1341'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-vllsw'), (b'x-envoy-upstream-service-time', b'1326'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_91eabb793b24cb87b9a7635f09f3d81c'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978f493ce21c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:28:42,441 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:28:42,441 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:28:42,442 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:28:42,727 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:28:42,728 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:28:42,727 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:28:42,728 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:28:42,728 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:28:42,728 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:28:42,737 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 93135 71554."}, {'role': 'assistant', 'content': ' Thank you. I have your mobile number as 9313571554'}, {'role': 'user', 'content': 'Yes.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:28:42,739 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:28:42,740 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:28:42,740 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:28:42,741 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:28:42,741 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:28:42,743 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:28:42,743 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:28:42,743 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:28:42,743 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:28:43,154 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:28:43,154 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:28:43,155 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:28:43,313 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:58:43 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'277'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29862'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'276ms'), (b'x-request-id', b'req_de8db7c174a26fd31fffa91822010d36'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978f5558851be1-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:28:43,314 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:28:43,315 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:28:43,315 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:28:43,494 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:58:43 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'960'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-kv9pt'), (b'x-envoy-upstream-service-time', b'945'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_12948e6b0b03ccc7251bf6d71631cd8f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978f4e6cdf54b9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:28:43,495 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:28:43,496 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:28:43,496 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:28:43,739 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Great, I will connect you with an agent now.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:28:43,740 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:28:43,741 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:28:43,741 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:28:43,742 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:28:43,742 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:28:43,764 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:28:43,764 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:28:43,994 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:28:43,994 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:28:43,994 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:28:44,349 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:28:44,349 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:28:44,349 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:28:44,658 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:58:44 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'554'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-8qj28'), (b'x-envoy-upstream-service-time', b'539'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c190ba0ec1cc7208d83d84e8c120a836'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978f5b9a601c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:28:44,659 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:28:44,659 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:28:44,660 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:28:45,443 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:28:45,444 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:28:45,445 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:28:45,447 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on for a moment.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:28:45,448 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:28:45,449 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:28:45,449 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:28:45,450 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:28:45,450 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:28:45,561 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:28:45,561 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:28:45,562 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:28:45,562 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:28:45,563 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:28:45,563 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:28:45,563 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:28:45,563 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:28:45,601 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:28:45,601 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:28:45,603 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:28:45,603 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:28:46,207 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:58:46 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'453'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-hpnk7'), (b'x-envoy-upstream-service-time', b'440'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_042b921008cf40d950553c45d738d06c'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978f6649a71c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:28:46,208 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:28:46,209 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:28:46,210 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:28:46,792 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:28:46,793 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:28:46,793 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:28:50,722 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:28:50,722 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:28:50,728 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 93135 71554."}, {'role': 'assistant', 'content': ' Thank you. I have your mobile number as 9313571554....'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect...'}, {'role': 'user', 'content': 'Yes.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:28:50,730 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:28:50,730 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:28:50,730 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:28:50,731 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:28:50,731 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:28:51,276 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:58:51 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'257'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29850'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'300ms'), (b'x-request-id', b'req_4445efbe73aac25a6c36394303212a34'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978f874c091be1-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:28:51,279 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:28:51,279 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:28:51,279 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:28:51,505 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:28:51,506 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:28:51,506 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:28:51,509 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold while I connect you to an agent.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:28:51,511 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:28:51,511 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:28:51,511 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:28:51,512 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:28:51,512 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:28:53,035 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:58:53 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1230'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-8wfvr'), (b'x-envoy-upstream-service-time', b'1205'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_1cdaa13ee96c7b8cd3ac63f99d9051eb'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f978f8c28bb1c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:28:53,036 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:28:53,036 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:28:53,036 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:28:53,292 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:28:53,292 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:28:54,111 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:28:54,112 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:28:54,112 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:28:54,946 - voice-business-agent - INFO - User speech received: Yes.
2024-12-29 11:28:54,947 - voice-business-agent - INFO - User speech received: Yes.
2024-12-29 11:28:54,947 - voice-business-agent - DEBUG - Validating phone number from text: Yes.
2024-12-29 11:28:54,947 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:28:54,946 - voice-business-agent - INFO - User speech received: Yes.
2024-12-29 11:28:54,947 - voice-business-agent - INFO - User speech received: Yes.
2024-12-29 11:28:54,947 - voice-business-agent - DEBUG - Validating phone number from text: Yes.
2024-12-29 11:28:54,947 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:28:55,874 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:28:55,874 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:28:55,875 - voice-business-agent - INFO - User speech received:  Please hold while I connect you to an agent.
2024-12-29 11:28:55,875 - voice-business-agent - DEBUG - Validating phone number from text:  Please hold while I connect you to an agent.
2024-12-29 11:28:55,875 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:28:55,875 - voice-business-agent - INFO - User speech received:  Please hold while I connect you to an agent.
2024-12-29 11:28:55,875 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:28:55,875 - voice-business-agent - DEBUG - Validating phone number from text:  Please hold while I connect you to an agent.
2024-12-29 11:28:55,875 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:28:55,875 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:29:23,974 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:29:23,974 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:29:24,339 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:29:24,339 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:29:24,347 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 93135 71554."}, {'role': 'assistant', 'content': ' Thank you. I have your mobile number as 9313571554....'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect...'}, {'role': 'user', 'content': 'Yes.'}, {'role': 'assistant', 'content': ' Please hold while I connect you to an agent.'}, {'role': 'user', 'content': 'Hello. Connect me to an agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:29:24,348 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:29:24,348 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:29:24,349 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:29:24,349 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:29:24,349 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:29:24,974 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:59:24 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'250'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29829'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'342ms'), (b'x-request-id', b'req_cfe78e85b985b4be97075f552a8113b5'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9790596f8a1be1-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:29:24,975 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:29:24,975 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:29:24,975 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:29:25,175 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, I can connect you to an agent.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:29:25,176 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:29:25,176 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:29:25,176 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:29:25,177 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:29:25,177 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:29:25,291 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:29:25,291 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:29:25,291 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:29:26,034 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:59:26 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'529'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-8w44s'), (b'x-envoy-upstream-service-time', b'505'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_3f2aa12b9ebe4e4703aa1c9630035678'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97905e9a8c1c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:29:26,035 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:29:26,035 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:29:26,035 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:29:26,315 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:29:26,315 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:29:27,129 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:29:27,130 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:29:27,131 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:29:27,133 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'May I have your mobile number, please?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:29:27,135 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:29:27,135 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:29:27,135 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:29:27,136 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:29:27,136 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:29:27,960 - voice-business-agent - INFO - User speech received: Hello. Connect me to an agent.
2024-12-29 11:29:27,961 - voice-business-agent - INFO - User speech received: Hello. Connect me to an agent.
2024-12-29 11:29:27,960 - voice-business-agent - INFO - User speech received: Hello. Connect me to an agent.
2024-12-29 11:29:27,961 - voice-business-agent - DEBUG - Validating phone number from text: Hello. Connect me to an agent.
2024-12-29 11:29:27,961 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:29:27,961 - voice-business-agent - INFO - User speech received: Hello. Connect me to an agent.
2024-12-29 11:29:27,961 - voice-business-agent - DEBUG - Validating phone number from text: Hello. Connect me to an agent.
2024-12-29 11:29:27,961 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:29:28,177 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:59:28 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'715'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-2zssc'), (b'x-envoy-upstream-service-time', b'703'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_9dfc9e6b47426e319a338e3da5b4099a'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97906addc91c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:29:28,178 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:29:28,178 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:29:28,179 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:29:28,967 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:29:28,967 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:29:28,967 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:29:30,734 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:29:30,734 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:29:30,735 - voice-business-agent - INFO - User speech received:  Sure, I can connect you to an agent. May I have your mobile number, please?
2024-12-29 11:29:30,735 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can connect you to an agent. May I have your mobile number, please?
2024-12-29 11:29:30,735 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:29:30,735 - voice-business-agent - INFO - User speech received:  Sure, I can connect you to an agent. May I have your mobile number, please?
2024-12-29 11:29:30,735 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can connect you to an agent. May I have your mobile number, please?
2024-12-29 11:29:30,735 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:29:30,735 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:29:30,735 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:29:34,688 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:29:34,688 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:29:35,264 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:29:35,264 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:29:35,276 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 93135 71554."}, {'role': 'assistant', 'content': ' Thank you. I have your mobile number as 9313571554....'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect...'}, {'role': 'user', 'content': 'Yes.'}, {'role': 'assistant', 'content': ' Please hold while I connect you to an agent.'}, {'role': 'user', 'content': 'Hello. Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can connect you to an agent. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 931"}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:29:35,278 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:29:35,279 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:29:35,279 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:29:35,279 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:29:35,280 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:29:35,900 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:59:35 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'315'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29805'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'390ms'), (b'x-request-id', b'req_5907aa855a6a4a1c9f1f491492ac5f84'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97909db8231be1-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:29:35,902 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:29:35,906 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:29:35,907 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:29:36,140 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It seems your number is incomplete.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:29:36,141 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:29:36,141 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:29:36,141 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:29:36,141 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:29:36,142 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:29:36,377 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:29:36,379 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:29:36,380 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:29:37,058 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:59:37 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'618'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-dd4lk'), (b'x-envoy-upstream-service-time', b'602'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_165869f46f5bfafc4e05c24e850ec28a'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9790a31a8e1c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:29:37,059 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:29:37,059 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:29:37,059 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:29:37,313 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:29:37,313 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:29:37,821 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:29:37,822 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:29:37,822 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:29:37,826 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide your full mobile number?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:29:37,827 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:29:37,828 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:29:37,828 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:29:37,829 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:29:37,829 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:29:38,162 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:29:38,162 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:29:38,164 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:29:38,164 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:29:38,164 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:29:38,164 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:29:38,177 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 93135 71554."}, {'role': 'assistant', 'content': ' Thank you. I have your mobile number as 9313571554....'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect...'}, {'role': 'user', 'content': 'Yes.'}, {'role': 'assistant', 'content': ' Please hold while I connect you to an agent.'}, {'role': 'user', 'content': 'Hello. Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can connect you to an agent. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 931 357-1554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:29:38,179 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:29:38,179 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:29:38,179 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:29:38,180 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:29:38,181 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:29:38,182 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:29:38,182 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:29:38,681 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:59:38 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'523'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-chcnm'), (b'x-envoy-upstream-service-time', b'509'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_61819ef351d2448e4be8d123e65c285d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9790adab071c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:29:38,684 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:29:38,684 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:29:38,684 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:29:38,811 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:59:38 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'296'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29802'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'396ms'), (b'x-request-id', b'req_c618c4e565f4ca6cdb4c3ac886e84702'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9790afdf4a1be1-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:29:38,814 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:29:38,814 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:29:38,815 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:29:39,230 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. I have your mobile number as 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:29:39,231 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:29:39,232 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:29:39,232 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:29:39,233 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:29:39,233 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:29:39,348 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:29:39,349 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:29:39,350 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:29:39,460 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:29:39,461 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:29:39,461 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:29:40,107 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:59:40 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'541'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-slb8v'), (b'x-envoy-upstream-service-time', b'524'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_968c9916f0f76b4ac8bd767147bcd647'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9790b6686b54b9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:29:40,107 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:29:40,107 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:29:40,107 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:29:40,396 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:29:40,396 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:29:41,527 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:29:41,528 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:29:41,529 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:29:41,531 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold while I connect you to an agent.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:29:41,532 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:29:41,533 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:29:41,533 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:29:41,534 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:29:41,535 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:29:41,996 - voice-business-agent - INFO - User speech received: Yes. It's 931 357-1554.
2024-12-29 11:29:41,997 - voice-business-agent - INFO - User speech received: Yes. It's 931 357-1554.
2024-12-29 11:29:41,997 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 931 357-1554.
2024-12-29 11:29:41,997 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:29:41,996 - voice-business-agent - INFO - User speech received: Yes. It's 931 357-1554.
2024-12-29 11:29:41,997 - voice-business-agent - INFO - User speech received: Yes. It's 931 357-1554.
2024-12-29 11:29:41,997 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 931 357-1554.
2024-12-29 11:29:41,997 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:29:42,115 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:29:42,117 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:29:42,118 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:29:42,118 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:29:42,118 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:29:42,118 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:29:43,114 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:59:43 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'776'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-fp4xf'), (b'x-envoy-upstream-service-time', b'760'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_870321768f8069d26efee47534c76ced'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9790c4ced71c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:29:43,115 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:29:43,116 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:29:43,116 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:29:43,450 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:59:43 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'513'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-8dwvq'), (b'x-envoy-upstream-service-time', b'499'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_8b217dcb025d7d8799a0799973c46c17'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9790c87dbf54b9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:29:43,451 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:29:43,454 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:29:43,454 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:29:43,877 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:29:43,878 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:29:43,878 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:29:44,210 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:29:44,212 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:29:44,212 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:29:47,425 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:29:47,425 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:29:47,427 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:29:47,428 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:29:47,427 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:29:47,428 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:29:47,428 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:29:47,428 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:29:47,452 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:29:47,452 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:29:47,454 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:29:47,454 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:29:47,454 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:29:47,454 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:29:48,184 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:29:48,184 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:29:52,535 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:29:52,535 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:29:52,569 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:29:52,569 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:29:52,578 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 93135 71554."}, {'role': 'assistant', 'content': ' Thank you. I have your mobile number as 9313571554....'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect...'}, {'role': 'user', 'content': 'Yes.'}, {'role': 'assistant', 'content': ' Please hold while I connect you to an agent.'}, {'role': 'user', 'content': 'Hello. Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can connect you to an agent. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 931 357-1554."}, {'role': 'assistant', 'content': ' Thank you. I have your mobile number as 9313571554. Please hold while I connect you to an agent....'}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'No. It is a 931-357-1554.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:29:52,580 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:29:52,580 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:29:52,580 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:29:52,581 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:29:52,581 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:29:53,175 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:59:53 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'294'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29766'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'468ms'), (b'x-request-id', b'req_0c7cda4b18bc2523c95cadef78b6a83d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f979109dd991be1-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:29:53,177 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:29:53,177 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:29:53,178 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:29:53,345 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for clarifying.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:29:53,347 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:29:53,348 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:29:53,348 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:29:53,348 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:29:53,348 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:29:53,777 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:29:53,777 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:29:53,778 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:29:54,719 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:59:54 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1063'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-bncsq'), (b'x-envoy-upstream-service-time', b'1049'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_44c1b3415040547a1e1b51b9a7437c45'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97910eab5b1c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:29:54,720 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:29:54,721 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:29:54,721 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:29:54,988 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:29:54,988 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:29:55,255 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:29:55,256 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:29:55,256 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:29:55,257 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I have your mobile number as 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:29:55,258 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:29:55,259 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:29:55,259 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:29:55,259 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:29:55,259 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:29:56,564 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:59:56 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'993'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-wrp9x'), (b'x-envoy-upstream-service-time', b'981'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_3c7c34c964fdb49d160baaaa320d8873'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97911a9c141c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:29:56,565 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:29:56,565 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:29:56,566 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:29:57,195 - voice-business-agent - INFO - User speech received: No. It is a 931-357-1554.
2024-12-29 11:29:57,195 - voice-business-agent - INFO - User speech received: No. It is a 931-357-1554.
2024-12-29 11:29:57,195 - voice-business-agent - DEBUG - Validating phone number from text: No. It is a 931-357-1554.
2024-12-29 11:29:57,195 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:29:57,195 - voice-business-agent - INFO - User speech received: No. It is a 931-357-1554.
2024-12-29 11:29:57,195 - voice-business-agent - INFO - User speech received: No. It is a 931-357-1554.
2024-12-29 11:29:57,195 - voice-business-agent - DEBUG - Validating phone number from text: No. It is a 931-357-1554.
2024-12-29 11:29:57,195 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:29:57,249 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:29:57,250 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:29:57,251 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:29:57,251 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:29:57,251 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:29:57,251 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:29:57,729 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:29:57,730 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:29:57,730 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:29:57,731 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold while I connect you to an agent.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:29:57,733 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:29:57,734 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:29:57,734 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:29:57,734 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:29:57,734 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:29:58,059 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:59:58 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'488'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-47n8v'), (b'x-envoy-upstream-service-time', b'474'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_9178e9b56a0cd25345620b162db2d48b'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f979127099754b9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:29:58,061 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:29:58,061 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:29:58,061 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:29:58,796 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 05:59:58 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'732'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-kp5mf'), (b'x-envoy-upstream-service-time', b'705'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_98c36090097202b9fb2e9a340bc9609b'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97912a0fc21c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:29:58,796 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:29:58,797 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:29:58,797 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:29:58,906 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:29:58,906 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:29:58,906 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:29:59,480 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:29:59,481 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:29:59,482 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:30:03,864 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:30:03,866 - voice-business-agent - INFO - User speech received:  Thank you for clarifying. I have your mobile number as 9313571554. Please hold while I connect you to an agent.
2024-12-29 11:30:03,864 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:30:03,866 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for clarifying. I have your mobile number as 9313571554. Please hold while I connect you to an agent.
2024-12-29 11:30:03,866 - voice-business-agent - INFO - User speech received:  Thank you for clarifying. I have your mobile number as 9313571554. Please hold while I connect you to an agent.
2024-12-29 11:30:03,866 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:30:03,866 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:30:03,866 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for clarifying. I have your mobile number as 9313571554. Please hold while I connect you to an agent.
2024-12-29 11:30:03,866 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:30:03,866 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:30:03,866 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-315' coro=<entrypoint.<locals>.handle_agent_speechas() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:140> exception=TypeError("'dict' object is not callable")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 143, in handle_agent_speechas
    attributes = local_participant.attributes()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'dict' object is not callable
2024-12-29 11:30:03,866 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-315' coro=<entrypoint.<locals>.handle_agent_speechas() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:140> exception=TypeError("'dict' object is not callable")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 143, in handle_agent_speechas
    attributes = local_participant.attributes()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'dict' object is not callable
2024-12-29 11:30:03,869 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:30:03,869 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:30:06,367 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:30:06,368 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 11:30:06,367 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:30:06,368 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 11:30:06,368 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:30:06,368 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 11:30:06,368 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:30:06,368 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 11:30:06,368 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:30:06,368 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:30:33,831 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:30:33,831 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:30:34,042 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:30:34,042 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:30:34,077 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': "Yes. It's 93135 71554."}, {'role': 'assistant', 'content': ' Thank you. I have your mobile number as 9313571554....'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect...'}, {'role': 'user', 'content': 'Yes.'}, {'role': 'assistant', 'content': ' Please hold while I connect you to an agent.'}, {'role': 'user', 'content': 'Hello. Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can connect you to an agent. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 931 357-1554."}, {'role': 'assistant', 'content': ' Thank you. I have your mobile number as 9313571554. Please hold while I connect you to an agent....'}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'No. It is a 931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for clarifying. I have your mobile number as 9313571554. Please hold while I connect you to an agent.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': "So we can't table on floor."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:30:34,083 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:30:34,084 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:30:34,084 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:30:34,085 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:30:34,086 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:30:36,539 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:00:36 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'351'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29716'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'568ms'), (b'x-request-id', b'req_75de6caa56dc94648da42ad8dce3eb7d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97920d3a771be1-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:30:36,541 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:30:36,542 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:30:36,542 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:30:36,715 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It seems there may have been a mix-up in the conversation.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:30:36,718 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:30:36,719 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:30:36,719 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:30:36,719 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:30:36,719 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:30:36,861 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:30:36,862 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:30:36,862 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:30:38,049 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:00:38 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1010'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-wrkqb'), (b'x-envoy-upstream-service-time', b'978'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_30b5e9f25343a82797ee1608bbdae913'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97921db9241c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:30:38,051 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:30:38,051 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:30:38,052 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:30:38,324 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:30:38,324 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:30:38,853 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:30:38,853 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:30:38,853 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:30:38,855 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'How can I assist you further?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:30:38,856 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:30:38,857 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:30:38,857 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:30:38,858 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:30:38,858 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:30:39,729 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:00:39 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'573'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-bxj7b'), (b'x-envoy-upstream-service-time', b'557'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_e8458347debb9d20232a0be5609683f8'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97922b1afa1c4f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:30:39,731 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:30:39,731 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:30:39,732 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:30:39,917 - voice-business-agent - INFO - User speech received: So we can't table on floor.
2024-12-29 11:30:39,917 - voice-business-agent - INFO - User speech received: So we can't table on floor.
2024-12-29 11:30:39,918 - voice-business-agent - DEBUG - Validating phone number from text: So we can't table on floor.
2024-12-29 11:30:39,918 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:30:39,917 - voice-business-agent - INFO - User speech received: So we can't table on floor.
2024-12-29 11:30:39,917 - voice-business-agent - INFO - User speech received: So we can't table on floor.
2024-12-29 11:30:39,918 - voice-business-agent - DEBUG - Validating phone number from text: So we can't table on floor.
2024-12-29 11:30:39,918 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:30:40,567 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:30:40,567 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:30:40,567 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:30:42,778 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:30:42,779 - voice-business-agent - INFO - User speech received:  It seems there may have been a mix-up in the conversation. How can I assist you further?
2024-12-29 11:30:42,780 - voice-business-agent - DEBUG - Validating phone number from text:  It seems there may have been a mix-up in the conversation. How can I assist you further?
2024-12-29 11:30:42,778 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:30:42,780 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:30:42,779 - voice-business-agent - INFO - User speech received:  It seems there may have been a mix-up in the conversation. How can I assist you further?
2024-12-29 11:30:42,780 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:30:42,780 - voice-business-agent - DEBUG - Validating phone number from text:  It seems there may have been a mix-up in the conversation. How can I assist you further?
2024-12-29 11:30:42,780 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:30:42,780 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:30:57,366 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 11:30:57,367 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 11:30:57,368 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 11:30:57,366 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 11:30:57,367 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 11:30:57,368 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 11:30:57,371 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 11:30:57,371 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 11:30:57,372 - livekit.agents - DEBUG - shutting down job task
2024-12-29 11:30:57,373 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 11:30:57,373 - livekit.agents - INFO - process exiting
2024-12-29 11:30:57,372 - livekit.agents - DEBUG - shutting down job task
2024-12-29 11:30:57,373 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 11:30:57,546 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 11:30:57,729 - livekit.agents - INFO - registered worker
2024-12-29 11:48:06,911 - livekit.agents - INFO - shutting down worker
2024-12-29 11:48:08,015 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:48:08,041 - livekit.agents - INFO - starting worker
2024-12-29 11:48:08,261 - livekit.agents - INFO - registered worker
2024-12-29 11:48:17,504 - livekit.agents - INFO - received job request
2024-12-29 11:48:18,469 - livekit.agents - INFO - initializing job process
2024-12-29 11:48:18,469 - livekit.agents - INFO - job process initialized
2024-12-29 11:48:18,470 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:48:18,469 - livekit.agents - INFO - initializing job process
2024-12-29 11:48:18,469 - livekit.agents - INFO - job process initialized
2024-12-29 11:48:18,470 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:48:18,574 - voice-business-agent - INFO - Connecting to room voice_assistant_room_4085
2024-12-29 11:48:18,574 - voice-business-agent - INFO - Connecting to room voice_assistant_room_4085
2024-12-29 11:48:18,574 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 11:48:18,574 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 11:48:18,575 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 11:48:18,575 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 11:48:18,575 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 11:48:18,575 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 11:48:18,819 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 11:48:18,819 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 11:48:18,819 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 11:48:18,819 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 11:48:18,819 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 11:48:18,819 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 11:48:18,819 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 11:48:18,819 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 11:48:18,865 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 11:48:18,865 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 11:48:18,865 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 11:48:18,865 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 11:48:18,865 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 11:48:18,865 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 11:48:18,865 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 11:48:18,865 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 11:48:18,989 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 11:48:18,989 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 11:48:19,198 - voice-business-agent - INFO - Participant connected: voice_assistant_user_2809
2024-12-29 11:48:19,198 - voice-business-agent - INFO - Participant connected: voice_assistant_user_2809
2024-12-29 11:48:19,300 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:48:19,302 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 11:48:19,323 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x131b02910>
2024-12-29 11:48:19,323 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1327527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 11:48:19,337 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1327f9c10>
2024-12-29 11:48:19,338 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:48:19,338 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:48:19,338 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:48:19,338 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:48:19,338 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:48:20,997 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:18:21 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1305'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-kp5mf'), (b'x-envoy-upstream-service-time', b'1285'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_0222ea05986d3c0152b0126b30795e06'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=kTrWOfl7XoZ0BLvbIhyAe6f89S0QCkf4coAG0rhoYWg-1735453101-1.0.1.1-or0LzUneFJsSHFTESe4whzH6j9eXUsVRz6lO8hqShIgKerd2UnRS0k8ZjKEP7Ftp7846s3vEqLnikz8unosI1w; path=/; expires=Sun, 29-Dec-24 06:48:21 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=h9Ztw8f23vN13u3Tf9TFjfHhQt9NsT_iuUgR7IliY_Y-1735453101018-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97ac0f192291d9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:48:20,999 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:48:20,999 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:48:20,999 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:48:21,287 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:48:21,287 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:48:21,841 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:48:21,841 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:48:21,842 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:48:22,269 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 11:48:22,269 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 11:48:23,194 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:48:23,194 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:48:23,195 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 11:48:23,195 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 11:48:23,195 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 11:48:23,195 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:48:23,195 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:48:23,195 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 11:48:23,195 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:48:23,195 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:48:26,436 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:48:26,436 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:48:26,778 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:48:26,778 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:48:26,786 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Rich, connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:48:26,788 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 11:48:26,809 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1461b1e50>
2024-12-29 11:48:26,810 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x132752720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 11:48:26,829 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x126555fd0>
2024-12-29 11:48:26,830 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:48:26,831 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:48:26,831 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:48:26,831 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:48:26,831 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:48:27,367 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:18:27 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'236'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29915'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'170ms'), (b'x-request-id', b'req_30eb6fe6b6bd5a8e1dc5872fa109b834'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=DbsFgHGmFWX8Ko9BRkqwNqdrbjUSJCbHP.FSWHMRThs-1735453107-1.0.1.1-4e83hO_.FNNYKCq0ompr691SXjA_m0s7UTo7h7EohO9Dy4P7YxQPsJ1N0BTLvL12ywm0lB7sVVXIt_aJMPYgLg; path=/; expires=Sun, 29-Dec-24 06:48:27 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=6hDvIiZDDmbkamy_oofHASyyt8dki6r4MhVUZsNnLrg-1735453107392-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97ac3deb6754b4-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:48:27,368 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:48:27,368 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:48:27,369 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:48:27,716 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:48:27,717 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:48:27,717 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:48:27,719 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Absolutely! Could you please provide me with your mobile number so I can proceed with connecting you to an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:48:27,720 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:48:27,721 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:48:27,721 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:48:27,721 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:48:27,721 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:48:30,426 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:18:30 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1811'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-rdchg'), (b'x-envoy-upstream-service-time', b'1789'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_e78700f1f525416b29141d5a5c7b1a0b'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97ac43799d91d9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:48:30,426 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:48:30,426 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:48:30,427 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:48:30,703 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:48:30,703 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:48:32,397 - voice-business-agent - INFO - User speech received: Rich, connect me to agent.
2024-12-29 11:48:32,397 - voice-business-agent - INFO - User speech received: Rich, connect me to agent.
2024-12-29 11:48:32,397 - voice-business-agent - DEBUG - Validating phone number from text: Rich, connect me to agent.
2024-12-29 11:48:32,398 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:48:32,397 - voice-business-agent - INFO - User speech received: Rich, connect me to agent.
2024-12-29 11:48:32,397 - voice-business-agent - INFO - User speech received: Rich, connect me to agent.
2024-12-29 11:48:32,397 - voice-business-agent - DEBUG - Validating phone number from text: Rich, connect me to agent.
2024-12-29 11:48:32,398 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:48:33,350 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:48:33,350 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:48:33,350 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:48:37,747 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:48:37,747 - voice-business-agent - INFO - User speech received:  Absolutely! Could you please provide me with your mobile number so I can proceed with connecting you to an agent?
2024-12-29 11:48:37,747 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:48:37,748 - voice-business-agent - DEBUG - Validating phone number from text:  Absolutely! Could you please provide me with your mobile number so I can proceed with connecting you to an agent?
2024-12-29 11:48:37,747 - voice-business-agent - INFO - User speech received:  Absolutely! Could you please provide me with your mobile number so I can proceed with connecting you to an agent?
2024-12-29 11:48:37,748 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:48:37,748 - voice-business-agent - DEBUG - Validating phone number from text:  Absolutely! Could you please provide me with your mobile number so I can proceed with connecting you to an agent?
2024-12-29 11:48:37,748 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:48:37,748 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:48:37,748 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:48:42,514 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:48:42,514 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:48:42,892 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:48:42,892 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:48:42,900 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Rich, connect me to agent.'}, {'role': 'assistant', 'content': ' Absolutely! Could you please provide me with your mobile number so I can proceed with connecting you to an agent?'}, {'role': 'user', 'content': "Yes. It's 9313571554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:48:42,902 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:48:42,902 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:48:42,902 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:48:42,903 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:48:42,903 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:48:43,485 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:18:43 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'265'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29880'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'240ms'), (b'x-request-id', b'req_654751b6ae60f15ddd78050157f9ec57'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97aca25afc54b4-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:48:43,486 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:48:43,486 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:48:43,486 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:48:43,916 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you! I will now connect you to an agent using the mobile number 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:48:43,918 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:48:43,919 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:48:43,919 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:48:43,919 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:48:43,919 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:48:43,956 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:48:43,956 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:48:43,956 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:48:45,102 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:18:45 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'781'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-canary-6dc598ddf-x956j'), (b'x-envoy-upstream-service-time', b'768'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_ec3e27d1070d0ac3ba7d50717469530b'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97aca8bc2b91d9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:48:45,104 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:48:45,104 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:48:45,105 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:48:45,392 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:48:45,392 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:48:46,918 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 11:48:46,922 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 11:48:46,922 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 9313571554.
2024-12-29 11:48:46,922 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:48:46,918 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 11:48:46,922 - voice-business-agent - INFO - User speech received: Yes. It's 9313571554.
2024-12-29 11:48:46,922 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 9313571554.
2024-12-29 11:48:46,922 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:48:46,923 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-86' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:120> exception=TypeError('bad argument type for built-in operation')>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 124, in process_user_speech
    await local_participant.set_metadata({"phone_number": phone_number})
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/participant.py", line 449, in set_metadata
    req.set_local_metadata.metadata = metadata
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: bad argument type for built-in operation
2024-12-29 11:48:46,923 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-86' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:120> exception=TypeError('bad argument type for built-in operation')>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 124, in process_user_speech
    await local_participant.set_metadata({"phone_number": phone_number})
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/participant.py", line 449, in set_metadata
    req.set_local_metadata.metadata = metadata
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: bad argument type for built-in operation
2024-12-29 11:48:47,218 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:48:47,219 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:48:47,219 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:48:47,220 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:48:47,222 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:48:47,222 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:48:47,222 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:48:47,222 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:48:47,223 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:48:49,216 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:18:49 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1673'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-dcv7z'), (b'x-envoy-upstream-service-time', b'1658'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_2229e50ee6b6da598178f6b74511383e'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97acbd5a4591d9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:48:49,218 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:48:49,218 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:48:49,218 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:48:49,749 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:48:49,749 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:48:49,750 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:48:52,970 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:48:52,971 - voice-business-agent - INFO - User speech received:  Thank you! I will now connect you to an agent using the mobile number 9313571554. Please hold on.
2024-12-29 11:48:52,970 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:48:52,971 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you! I will now connect you to an agent using the mobile number 9313571554. Please hold on.
2024-12-29 11:48:52,971 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:48:52,971 - voice-business-agent - INFO - User speech received:  Thank you! I will now connect you to an agent using the mobile number 9313571554. Please hold on.
2024-12-29 11:48:52,972 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:48:52,971 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you! I will now connect you to an agent using the mobile number 9313571554. Please hold on.
2024-12-29 11:48:52,971 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:48:52,972 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:48:52,972 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-90' coro=<entrypoint.<locals>.handle_agent_speechas() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:140> exception=AttributeError("'LocalParticipant' object has no attribute 'get_metadata'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 143, in handle_agent_speechas
    attributes = local_participant.get_metadata()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LocalParticipant' object has no attribute 'get_metadata'
2024-12-29 11:48:52,972 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-90' coro=<entrypoint.<locals>.handle_agent_speechas() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:140> exception=AttributeError("'LocalParticipant' object has no attribute 'get_metadata'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 143, in handle_agent_speechas
    attributes = local_participant.get_metadata()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LocalParticipant' object has no attribute 'get_metadata'
2024-12-29 11:54:12,064 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:54:12,064 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:54:15,428 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:54:15,428 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:54:15,435 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Rich, connect me to agent.'}, {'role': 'assistant', 'content': ' Absolutely! Could you please provide me with your mobile number so I can proceed with connecting you to an agent?'}, {'role': 'user', 'content': "Yes. It's 9313571554."}, {'role': 'assistant', 'content': ' Thank you! I will now connect you to an agent using the mobile number 9313571554. Please hold on.'}, {'role': 'user', 'content': "You're making"}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:54:15,437 - httpcore.connection - DEBUG - close.started
2024-12-29 11:54:15,437 - httpcore.connection - DEBUG - close.complete
2024-12-29 11:54:15,438 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 11:54:15,465 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x130dffed0>
2024-12-29 11:54:15,466 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x132752720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 11:54:15,474 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:54:15,475 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:54:15,474 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:54:15,475 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:54:15,475 - livekit.agents.pipeline - DEBUG - interrupt threshold is not met
2024-12-29 11:54:15,475 - livekit.agents.pipeline - DEBUG - interrupt threshold is not met
2024-12-29 11:54:15,475 - httpcore.connection - DEBUG - start_tls.failed exception=CancelledError()
2024-12-29 11:54:15,476 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:54:15,476 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:58:25,562 - livekit.agents - INFO - shutting down worker
2024-12-29 11:58:25,564 - livekit.agents - DEBUG - shutting down job task
2024-12-29 11:58:25,564 - livekit.agents - INFO - process exiting
2024-12-29 11:58:25,564 - livekit.agents - DEBUG - shutting down job task
2024-12-29 11:58:25,608 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 11:58:25,608 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 11:58:26,612 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 11:58:26,612 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 11:58:27,889 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:58:27,902 - livekit.agents - INFO - starting worker
2024-12-29 11:58:27,917 - livekit.agents - DEV - reloading job
2024-12-29 11:58:28,059 - livekit.agents - INFO - registered worker
2024-12-29 11:58:28,787 - livekit.agents - INFO - initializing job process
2024-12-29 11:58:28,788 - livekit.agents - INFO - job process initialized
2024-12-29 11:58:28,788 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:58:28,787 - livekit.agents - INFO - initializing job process
2024-12-29 11:58:28,788 - livekit.agents - INFO - job process initialized
2024-12-29 11:58:28,788 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:58:28,837 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 11:58:28,905 - voice-business-agent - INFO - Connecting to room voice_assistant_room_4085
2024-12-29 11:58:28,905 - voice-business-agent - INFO - Connecting to room voice_assistant_room_4085
2024-12-29 11:58:28,906 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 11:58:28,906 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 11:58:28,906 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 11:58:28,906 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 11:58:28,907 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 11:58:28,907 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 11:58:28,988 - livekit.agents - INFO - registered worker
2024-12-29 11:58:29,152 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 11:58:29,153 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 11:58:29,153 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 11:58:29,152 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 11:58:29,153 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 11:58:29,153 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 11:58:29,153 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 11:58:29,153 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 11:58:29,194 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 11:58:29,194 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 11:58:29,194 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 11:58:29,194 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 11:58:29,194 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 11:58:29,194 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 11:58:29,194 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 11:58:29,194 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 11:58:29,311 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 11:58:29,311 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 11:58:29,521 - voice-business-agent - INFO - Participant connected: voice_assistant_user_2809
2024-12-29 11:58:29,521 - voice-business-agent - INFO - Participant connected: voice_assistant_user_2809
2024-12-29 11:58:29,573 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 11:58:29,573 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 11:58:29,628 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:58:29,629 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 11:58:29,654 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x115400d50>
2024-12-29 11:58:29,654 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x115e527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 11:58:29,670 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1137ef510>
2024-12-29 11:58:29,671 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:58:29,671 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:58:29,671 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:58:29,671 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:58:29,671 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:58:30,491 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:28:30 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'524'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-wlpnm'), (b'x-envoy-upstream-service-time', b'509'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_30fe873a5ddd50112ca622b854e51e0a'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=lsw5Wheyb2Wn8LU2pXOdfsKEpAamhm6rDf5EZEmImfI-1735453710-1.0.1.1-dwXJVaVyLhOkH5YRleGSIMDoSfDu_Haeu74Z4am_U2r82LJtrGFceL9e9sHKSe1wfK_iLBXRVlX9qUwF9JyQDQ; path=/; expires=Sun, 29-Dec-24 06:58:30 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=70KsFjVDkWgV1D7omHtoz5Mjq8oganDey.hfDUcGqxI-1735453710513-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97baf5a9a091cd-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:58:30,494 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:58:30,494 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:58:30,495 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:58:30,752 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:58:30,752 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:58:30,758 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:58:30,758 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:58:30,759 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 11:58:30,759 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:58:30,760 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:58:30,762 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:58:30,763 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:58:30,762 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:58:30,763 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:58:33,405 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:58:33,405 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:58:35,089 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:58:35,089 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:58:37,409 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:58:37,409 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:58:37,414 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello...'}, {'role': 'user', 'content': 'Thank You understand the user?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:58:37,415 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 11:58:37,431 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x117e2ee10>
2024-12-29 11:58:37,432 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x115e52720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 11:58:37,448 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x117e2f410>
2024-12-29 11:58:37,448 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:58:37,448 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:58:37,448 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:58:37,449 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:58:37,449 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:58:38,021 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:28:38 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'256'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29921'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'158ms'), (b'x-request-id', b'req_0df13d5c8d1da260bd351f55390f7f72'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=_gNk1LDF2EksyT.WDYZ6LGOdPNqs4XCZB8a2QRKBBow-1735453718-1.0.1.1-sdVe5RTe_7Fq3.ig0IyL4ni0JWeg6YHf3i3mfoYNyNgn4fUVLhjrzlvueNx4aToyOv_O0WDKCxO1j9YsEs_TDQ; path=/; expires=Sun, 29-Dec-24 06:58:38 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=37T5xU5j.jJZ9Yshuktimwkisq2C60CpQPneBCzo4C8-1735453718045-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97bb26494491a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:58:38,023 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:58:38,023 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:58:38,023 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:58:38,805 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:58:38,806 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:58:38,807 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:58:38,809 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide me with your mobile number so I can assist you further?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:58:38,810 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 11:58:38,825 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11540b4d0>
2024-12-29 11:58:38,826 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x115e527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 11:58:38,843 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x117e12e50>
2024-12-29 11:58:38,843 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:58:38,844 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:58:38,844 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:58:38,845 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:58:38,845 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:58:39,945 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:58:39,945 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 11:58:39,947 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:58:39,947 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:58:40,395 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:28:40 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1211'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-cvv9s'), (b'x-envoy-upstream-service-time', b'1191'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_261a02220c1f3e8f9e996954ff6ade4d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97bb2f0d6854a4-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:58:40,397 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:58:40,397 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:58:40,397 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:58:42,090 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:58:42,091 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:58:42,092 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:58:48,148 - livekit.agents - INFO - received job request
2024-12-29 11:58:48,150 - livekit.agents - INFO - received job request
2024-12-29 11:58:49,300 - livekit.agents - INFO - initializing job process
2024-12-29 11:58:49,301 - livekit.agents - INFO - job process initialized
2024-12-29 11:58:49,301 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:58:49,300 - livekit.agents - INFO - initializing job process
2024-12-29 11:58:49,301 - livekit.agents - INFO - job process initialized
2024-12-29 11:58:49,301 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 11:58:49,438 - voice-business-agent - INFO - Connecting to room voice_assistant_room_8479
2024-12-29 11:58:49,438 - voice-business-agent - INFO - Connecting to room voice_assistant_room_8479
2024-12-29 11:58:49,439 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 11:58:49,439 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 11:58:49,439 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 11:58:49,439 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 11:58:49,440 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 11:58:49,440 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 11:58:49,714 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 11:58:49,714 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 11:58:49,714 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 11:58:49,714 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 11:58:49,715 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 11:58:49,714 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 11:58:49,714 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 11:58:49,715 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 11:58:49,757 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 11:58:49,757 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 11:58:49,757 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 11:58:49,757 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 11:58:49,757 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 11:58:49,757 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 11:58:49,757 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 11:58:49,757 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 11:58:49,880 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 11:58:49,880 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 11:58:50,090 - voice-business-agent - INFO - Participant connected: voice_assistant_user_7613
2024-12-29 11:58:50,090 - voice-business-agent - INFO - Participant connected: voice_assistant_user_7613
2024-12-29 11:58:50,150 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 11:58:50,150 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 11:58:50,212 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:58:50,213 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 11:58:50,235 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d287b50>
2024-12-29 11:58:50,235 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1138ae7b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 11:58:50,252 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10dbf1190>
2024-12-29 11:58:50,253 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:58:50,253 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:58:50,253 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:58:50,253 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:58:50,253 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:58:51,879 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:28:51 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1325'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-m96b5'), (b'x-envoy-upstream-service-time', b'1277'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_4c9201f09b2003e167079394f5a963ca'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=ke9VEmDxZztmZX7sB.YyHNbDSzfV.V_2QQyicjcrLxE-1735453731-1.0.1.1-26RVGCigP9hefv2wxYqwqB_emOI82UTAZPt9_Wz4NEFhDxTThHopwymf4d_JAb2WAeW8eC7Nd3mTLbls7VK78g; path=/; expires=Sun, 29-Dec-24 06:58:51 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=rkv_GwrSNCL.4D7j4E0IyE43SfYRMxetUBOVlE5Gbk0-1735453731904-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97bb765afa8997-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:58:51,880 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:58:51,880 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:58:51,880 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:58:52,126 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:58:52,126 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:58:52,613 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:58:52,613 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:58:52,614 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:58:54,130 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:58:54,130 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:58:54,130 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 11:58:54,131 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 11:58:54,130 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 11:58:54,131 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:58:54,131 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:58:54,131 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 11:58:54,131 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:58:54,131 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:58:55,656 - livekit.agents - WARNING - assignment for job AJ_PEULjbCaMZr4 timed out
2024-12-29 11:58:55,656 - livekit.agents - ERROR - job_request_fnc failed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 490, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 681, in _on_accept
    await asyncio.wait_for(wait_assignment, ASSIGNMENT_TIMEOUT)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 492, in wait_for
    raise exceptions.TimeoutError() from exc
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 715, in _job_request_task
    await self._opts.request_fnc(job_req)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 68, in _default_request_fnc
    await ctx.accept()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/job.py", line 355, in accept
    await self._on_accept(accept_arguments)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 687, in _on_accept
    raise AssignmentTimeoutError()
livekit.agents._exceptions.AssignmentTimeoutError
2024-12-29 11:58:57,770 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:58:57,770 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:58:58,111 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:58:58,111 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:58:58,116 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Page connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:58:58,117 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 11:58:58,129 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10dbdc3d0>
2024-12-29 11:58:58,129 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1138ae720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 11:58:58,145 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10dbe47d0>
2024-12-29 11:58:58,146 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:58:58,146 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:58:58,146 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:58:58,146 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:58:58,146 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:58:58,865 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:28:58 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'417'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29916'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'168ms'), (b'x-request-id', b'req_e115564fb45c1fea11f5c0459a77362a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=9atEKwI8Y900J3bWiQIVyPU3fOFPR.oS62QM3cviDCE-1735453738-1.0.1.1-1UR7cFFa6ddYC2Q4Q1pXCM0DRlugmnixwI.Pf89JaIlHBKnSZe10vQwoeDpX3D2.W9FrEdismXV7T3mZC9zPBw; path=/; expires=Sun, 29-Dec-24 06:58:58 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=tzi0nfpWsGWH4w1ADdnarj6kVYhqpuILNausMwtPHHU-1735453738891-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97bba7aa7654ec-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:58:58,866 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:58:58,867 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:58:58,868 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:58:59,081 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, I can help with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:58:59,085 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:58:59,085 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:58:59,085 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:58:59,086 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:58:59,086 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:58:59,341 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:58:59,342 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:58:59,342 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:59:00,224 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:29:00 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'828'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-ctpkh'), (b'x-envoy-upstream-service-time', b'797'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_9aeec71da2680e784684b089ac0243d6'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97bbad8eb38997-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:59:00,224 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:59:00,224 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:59:00,224 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:59:00,549 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:59:00,549 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:59:01,029 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:59:01,029 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:59:01,029 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:59:01,031 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide me with your mobile number?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:59:01,032 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:59:01,033 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:59:01,033 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:59:01,034 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:59:01,034 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:59:01,927 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:29:01 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'586'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-jrvhs'), (b'x-envoy-upstream-service-time', b'568'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_25f4c8b8540f60b944d038ef738d852a'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97bbb9abb08997-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:59:01,927 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:59:01,928 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:59:01,928 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:59:02,332 - voice-business-agent - INFO - User speech received: Page connect me to agent.
2024-12-29 11:59:02,332 - voice-business-agent - INFO - User speech received: Page connect me to agent.
2024-12-29 11:59:02,332 - voice-business-agent - DEBUG - Validating phone number from text: Page connect me to agent.
2024-12-29 11:59:02,332 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:59:02,332 - voice-business-agent - INFO - User speech received: Page connect me to agent.
2024-12-29 11:59:02,332 - voice-business-agent - INFO - User speech received: Page connect me to agent.
2024-12-29 11:59:02,332 - voice-business-agent - DEBUG - Validating phone number from text: Page connect me to agent.
2024-12-29 11:59:02,332 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:59:02,503 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:59:02,503 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:59:02,503 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:59:04,828 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:59:04,828 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:59:04,828 - voice-business-agent - INFO - User speech received:  Sure, I can help with that. Could you please provide me with your mobile number?
2024-12-29 11:59:04,828 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help with that. Could you please provide me with your mobile number?
2024-12-29 11:59:04,828 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:59:04,828 - voice-business-agent - INFO - User speech received:  Sure, I can help with that. Could you please provide me with your mobile number?
2024-12-29 11:59:04,829 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:59:04,828 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help with that. Could you please provide me with your mobile number?
2024-12-29 11:59:04,828 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 11:59:04,829 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:59:07,364 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 11:59:07,365 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 11:59:07,364 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 11:59:07,365 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 11:59:07,366 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 11:59:07,366 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 11:59:07,368 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 11:59:07,368 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 11:59:07,370 - livekit.agents - DEBUG - shutting down job task
2024-12-29 11:59:07,370 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 11:59:07,370 - livekit.agents - DEBUG - shutting down job task
2024-12-29 11:59:07,371 - livekit.agents - INFO - process exiting
2024-12-29 11:59:07,370 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 11:59:07,543 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 11:59:07,720 - livekit.agents - INFO - registered worker
2024-12-29 11:59:08,486 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:59:08,486 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:59:09,711 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:59:09,711 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 11:59:10,088 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:59:10,088 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 11:59:10,094 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Page connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': "Yes. It's 931357 1554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 11:59:10,097 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:59:10,098 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:59:10,098 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:59:10,098 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:59:10,098 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:59:10,715 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:29:10 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'323'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29888'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'224ms'), (b'x-request-id', b'req_74dbc35445107b02efce523ce34350d8'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97bbf259a154ec-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:59:10,716 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 11:59:10,717 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 11:59:10,717 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:59:10,932 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Thank you. I'll proceed with the number 9313571554.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:59:10,934 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:59:10,934 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:59:10,935 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:59:10,935 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:59:10,936 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:59:11,095 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:59:11,096 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:59:11,096 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:59:11,783 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:29:11 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'542'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-p5t56'), (b'x-envoy-upstream-service-time', b'532'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_88a205c77bbc13d584dd7f83e6608b94'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97bbf79ffe8997-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:59:11,784 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:59:11,784 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:59:11,784 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:59:12,049 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:59:12,049 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 11:59:13,117 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:59:13,117 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:59:13,118 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:59:13,119 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on while I connect you with an agent.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 11:59:13,120 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 11:59:13,120 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 11:59:13,120 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 11:59:13,121 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 11:59:13,121 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 11:59:13,710 - voice-business-agent - INFO - User speech received: Yes. It's 931357 1554.
2024-12-29 11:59:13,710 - voice-business-agent - INFO - User speech received: Yes. It's 931357 1554.
2024-12-29 11:59:13,710 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 931357 1554.
2024-12-29 11:59:13,710 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:59:13,710 - voice-business-agent - INFO - User speech received: Yes. It's 931357 1554.
2024-12-29 11:59:13,710 - voice-business-agent - INFO - User speech received: Yes. It's 931357 1554.
2024-12-29 11:59:13,710 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 931357 1554.
2024-12-29 11:59:13,710 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:59:13,714 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-90' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:120> exception=TypeError('bad argument type for built-in operation')>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 124, in process_user_speech
    await local_participant.set_metadata({"phone_number": phone_number})
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/participant.py", line 449, in set_metadata
    req.set_local_metadata.metadata = metadata
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: bad argument type for built-in operation
2024-12-29 11:59:13,714 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-90' coro=<entrypoint.<locals>.process_user_speech() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:120> exception=TypeError('bad argument type for built-in operation')>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 124, in process_user_speech
    await local_participant.set_metadata({"phone_number": phone_number})
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/participant.py", line 449, in set_metadata
    req.set_local_metadata.metadata = metadata
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: bad argument type for built-in operation
2024-12-29 11:59:14,498 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:29:14 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1060'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-vqxrj'), (b'x-envoy-upstream-service-time', b'1048'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_46263a2d3986ab0cfbdcf649abbfb3b6'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97bc053f238997-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 11:59:14,498 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 11:59:14,499 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 11:59:14,499 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 11:59:15,057 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 11:59:15,057 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 11:59:15,058 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 11:59:19,841 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:59:19,841 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 11:59:19,842 - voice-business-agent - INFO - User speech received:  Thank you. I'll proceed with the number 9313571554. Please hold on while I connect you with an agent.
2024-12-29 11:59:19,842 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. I'll proceed with the number 9313571554. Please hold on while I connect you with an agent.
2024-12-29 11:59:19,842 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:59:19,842 - voice-business-agent - INFO - User speech received:  Thank you. I'll proceed with the number 9313571554. Please hold on while I connect you with an agent.
2024-12-29 11:59:19,842 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:59:19,842 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. I'll proceed with the number 9313571554. Please hold on while I connect you with an agent.
2024-12-29 11:59:19,842 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 11:59:19,843 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-92' coro=<entrypoint.<locals>.handle_agent_speechas() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:148> exception=AttributeError("'LocalParticipant' object has no attribute 'get_metadata'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 151, in handle_agent_speechas
    attributes = local_participant.get_metadata()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LocalParticipant' object has no attribute 'get_metadata'
2024-12-29 11:59:19,842 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 11:59:19,843 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-92' coro=<entrypoint.<locals>.handle_agent_speechas() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:148> exception=AttributeError("'LocalParticipant' object has no attribute 'get_metadata'")>
Traceback (most recent call last):
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 151, in handle_agent_speechas
    attributes = local_participant.get_metadata()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LocalParticipant' object has no attribute 'get_metadata'
2024-12-29 12:01:08,318 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:01:08,318 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:01:08,328 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:01:08,328 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:01:08,336 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Page connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': "Yes. It's 931357 1554."}, {'role': 'assistant', 'content': " Thank you. I'll proceed with the number 9313571554. Please hold on while I connect you with an agent."}, {'role': 'user', 'content': 'Ira.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:01:08,337 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:01:08,338 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:01:08,338 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:01:08,338 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:01:08,339 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:01:08,955 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:31:08 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'286'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29859'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'282ms'), (b'x-request-id', b'req_9fe71b5c7cb58dbe4620de063065bd84'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97bed559e154ec-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:01:08,956 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:01:08,956 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:01:08,956 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:01:09,189 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It seems there might have been a misunderstanding.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:01:09,190 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:01:09,190 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:01:09,191 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:01:09,191 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:01:09,191 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:01:09,976 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:01:09,977 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:01:09,977 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:01:09,983 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:01:09,983 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:01:09,984 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:01:09,984 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:01:10,256 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:31:10 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'750'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-4wdpb'), (b'x-envoy-upstream-service-time', b'737'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_88d15a1c5ae284c5ea73aaef32b8dcfb'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97bedaa8ab8997-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:01:10,257 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:01:10,257 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:01:10,258 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:01:11,069 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:01:11,069 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:01:11,070 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:01:17,301 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:01:17,301 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:01:17,308 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Page connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help with that. Could you please provide me with your mobile number?'}, {'role': 'user', 'content': "Yes. It's 931357 1554."}, {'role': 'assistant', 'content': " Thank you. I'll proceed with the number 9313571554. Please hold on while I connect you with an agent."}, {'role': 'user', 'content': 'Ira.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:01:17,310 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:01:17,310 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:01:17,310 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:01:17,311 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:01:17,311 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:01:17,878 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:31:17 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'266'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29859'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'282ms'), (b'x-request-id', b'req_455138c57a7368e29284d567b497d7bc'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97bf0d6e1754ec-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:01:17,879 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:01:17,879 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:01:17,880 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:01:18,257 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Hello Ira! I'm connecting you now.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:01:18,259 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:01:18,260 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:01:18,260 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:01:18,260 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:01:18,260 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:01:18,289 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:01:18,289 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:01:18,290 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:01:19,340 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:31:19 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'792'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-27zdr'), (b'x-envoy-upstream-service-time', b'766'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_4cb2e4d83fc4198e47addb5bb950636a'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97bf13589d8997-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:01:19,341 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:01:19,341 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:01:19,341 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:01:19,832 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:01:19,832 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:01:24,459 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:01:24,461 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:01:24,461 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:01:24,462 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:01:24,463 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:01:24,463 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:01:24,463 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:01:24,463 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:01:24,463 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:01:24,944 - voice-business-agent - INFO - User speech received: Ira.
2024-12-29 12:01:24,945 - voice-business-agent - INFO - User speech received: Ira.
2024-12-29 12:01:24,945 - voice-business-agent - DEBUG - Validating phone number from text: Ira.
2024-12-29 12:01:24,945 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:01:24,944 - voice-business-agent - INFO - User speech received: Ira.
2024-12-29 12:01:24,945 - voice-business-agent - INFO - User speech received: Ira.
2024-12-29 12:01:24,945 - voice-business-agent - DEBUG - Validating phone number from text: Ira.
2024-12-29 12:01:24,945 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:01:26,243 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:31:26 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1466'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-vqg5v'), (b'x-envoy-upstream-service-time', b'1455'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f7f0faa99da8566f10da76fb2b36e11b'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97bf3a1b928997-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:01:26,245 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:01:26,246 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:01:26,246 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:01:26,776 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:01:26,777 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:01:26,777 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:01:27,273 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:01:27,273 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:01:27,274 - voice-business-agent - INFO - User speech received:  Hello Ira! I'm connecting you now. Please hold on.
2024-12-29 12:01:27,274 - voice-business-agent - DEBUG - Validating phone number from text:  Hello Ira! I'm connecting you now. Please hold on.
2024-12-29 12:01:27,274 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:01:27,274 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:01:27,274 - voice-business-agent - INFO - User speech received:  Hello Ira! I'm connecting you now. Please hold on.
2024-12-29 12:01:27,274 - voice-business-agent - DEBUG - Validating phone number from text:  Hello Ira! I'm connecting you now. Please hold on.
2024-12-29 12:01:27,274 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:01:27,274 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:01:46,479 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 12:01:46,479 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 12:01:46,481 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 12:01:46,482 - livekit.agents - DEBUG - shutting down job task
2024-12-29 12:01:46,481 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 12:01:46,482 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 12:01:46,482 - livekit.agents - DEBUG - shutting down job task
2024-12-29 12:01:46,482 - livekit.agents - INFO - process exiting
2024-12-29 12:01:46,482 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 12:01:46,647 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 12:01:46,888 - livekit.agents - INFO - registered worker
2024-12-29 12:20:39,932 - livekit.agents - INFO - shutting down worker
2024-12-29 12:20:41,082 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:20:41,100 - livekit.agents - INFO - starting worker
2024-12-29 12:20:41,416 - livekit.agents - INFO - registered worker
2024-12-29 12:21:19,482 - livekit.agents - INFO - shutting down worker
2024-12-29 12:21:20,639 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:21:20,649 - livekit.agents - INFO - starting worker
2024-12-29 12:21:20,861 - livekit.agents - INFO - registered worker
2024-12-29 12:22:09,243 - livekit.agents - INFO - received job request
2024-12-29 12:22:09,988 - livekit.agents - INFO - received job request
2024-12-29 12:22:10,288 - livekit.agents - INFO - initializing job process
2024-12-29 12:22:10,289 - livekit.agents - INFO - job process initialized
2024-12-29 12:22:10,288 - livekit.agents - INFO - initializing job process
2024-12-29 12:22:10,289 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:22:10,289 - livekit.agents - INFO - job process initialized
2024-12-29 12:22:10,289 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:22:10,426 - voice-business-agent - INFO - Connecting to room voice_assistant_room_1908
2024-12-29 12:22:10,426 - voice-business-agent - INFO - Connecting to room voice_assistant_room_1908
2024-12-29 12:22:10,427 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 12:22:10,427 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 12:22:10,427 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 12:22:10,427 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 12:22:10,429 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 12:22:10,429 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 12:22:10,675 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 12:22:10,675 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 12:22:10,675 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 12:22:10,675 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 12:22:10,675 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 12:22:10,675 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 12:22:10,675 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 12:22:10,675 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 12:22:10,715 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 12:22:10,716 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 12:22:10,716 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 12:22:10,716 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 12:22:10,715 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 12:22:10,716 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 12:22:10,716 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 12:22:10,716 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 12:22:10,843 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 12:22:10,843 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 12:22:11,299 - livekit.agents - INFO - initializing job process
2024-12-29 12:22:11,299 - livekit.agents - INFO - job process initialized
2024-12-29 12:22:11,299 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:22:11,299 - livekit.agents - INFO - initializing job process
2024-12-29 12:22:11,299 - livekit.agents - INFO - job process initialized
2024-12-29 12:22:11,299 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:22:11,421 - voice-business-agent - INFO - Connecting to room voice_assistant_room_194
2024-12-29 12:22:11,421 - voice-business-agent - INFO - Connecting to room voice_assistant_room_194
2024-12-29 12:22:11,422 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 12:22:11,422 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 12:22:11,422 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 12:22:11,423 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 12:22:11,422 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 12:22:11,423 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 12:22:11,657 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 12:22:11,658 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 12:22:11,658 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 12:22:11,657 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 12:22:11,658 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 12:22:11,658 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 12:22:11,658 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 12:22:11,658 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 12:22:11,696 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 12:22:11,697 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 12:22:11,696 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 12:22:11,697 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 12:22:11,697 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 12:22:11,697 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 12:22:11,697 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 12:22:11,697 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 12:22:11,812 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 12:22:11,812 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 12:22:12,025 - voice-business-agent - INFO - Participant connected: voice_assistant_user_466
2024-12-29 12:22:12,025 - voice-business-agent - INFO - Participant connected: voice_assistant_user_466
2024-12-29 12:22:12,083 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 12:22:12,083 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 12:22:12,100 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 12:22:12,100 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 12:22:12,144 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:22:12,145 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 12:22:12,167 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d91fb90>
2024-12-29 12:22:12,167 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x12b9467b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 12:22:12,178 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12c0142d0>
2024-12-29 12:22:12,179 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:22:12,179 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:22:12,179 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:22:12,180 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:22:12,180 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:22:13,863 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:52:13 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1369'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-xpwfw'), (b'x-envoy-upstream-service-time', b'1354'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d7b493edb8d20a8d097a91a84b4a8a47'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=EFNESBcZeQ6il0J05wr3pH6jjpZ8ARAOG346V1Y_MUU-1735455133-1.0.1.1-4cFJqzQqhtGYhApzDURKBSYX7A0d0LTxPIPNxIrQxhBnnH3m6B6kewiJXm2mh0kCn7ZSouWq6cJwGwBv9ZxLzg; path=/; expires=Sun, 29-Dec-24 07:22:13 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=pkPMgEnv9t.wRGBvfutM0RktwLJR_727IgnDdvgzEos-1735455133886-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97ddb05bc254cc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:22:13,866 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:22:13,866 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:22:13,866 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:22:14,124 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:22:14,124 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:22:14,163 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:22:14,163 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:22:14,652 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:22:14,653 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:22:14,654 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:22:16,139 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:22:16,139 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:22:16,139 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 12:22:16,139 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 12:22:16,140 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:22:16,140 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:22:16,139 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 12:22:16,139 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 12:22:16,140 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:22:16,140 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:22:16,176 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:22:16,176 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:22:20,634 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:22:20,634 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:22:20,934 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:22:20,934 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:22:20,941 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please call me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:22:20,942 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 12:22:20,954 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d810fd0>
2024-12-29 12:22:20,955 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x12b946720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 12:22:20,969 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12c0ba6d0>
2024-12-29 12:22:20,970 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:22:20,970 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:22:20,970 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:22:20,970 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:22:20,970 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:22:21,176 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:22:21,176 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:22:21,608 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:52:21 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'343'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29916'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'168ms'), (b'x-request-id', b'req_5f50ea652b5341b5768d451129a9b197'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=2aW7hGiXIXOW2p7XhWgzxVMuyRCMtsT783Y0WfRqIyk-1735455141-1.0.1.1-Pz16JEstrXvk9OtsuvkPut6YVFIF.TnTfe.bJUG771lI4xdovXZlgAAzQYDm0SfC6qJJW3_C6vOuhDw7j1KI3Q; path=/; expires=Sun, 29-Dec-24 07:22:21 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=PRx6NvIlL73V21OGRcb6BHqc9CHWsKghoXeU4xOoFYk-1735455141637-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97dde74f2b5484-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:22:21,609 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:22:21,609 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:22:21,609 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:22:21,838 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I can help you with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:22:21,839 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:22:21,840 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:22:21,840 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:22:21,840 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:22:21,840 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:22:22,263 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:22:22,264 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:22:22,264 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:22:23,146 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:52:23 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'966'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-mwb56'), (b'x-envoy-upstream-service-time', b'915'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_3d8472c132387e5ad2c7b5ddca9831aa'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97ddecbc6b54cc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:22:23,150 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:22:23,150 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:22:23,151 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:22:23,441 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:22:23,441 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:22:23,478 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:22:23,478 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:22:24,356 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:22:24,357 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:22:24,358 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:22:24,360 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide your mobile number so I can connect you to an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:22:24,362 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:22:24,363 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:22:24,363 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:22:24,364 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:22:24,364 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:22:25,799 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:52:25 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1087'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-f6gkm'), (b'x-envoy-upstream-service-time', b'1075'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_039d19f329a1800020e39fa044ff9e2d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97ddfc7eac54cc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:22:25,799 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:22:25,799 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:22:25,799 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:22:26,364 - voice-business-agent - INFO - User speech received: Please call me to agent.
2024-12-29 12:22:26,365 - voice-business-agent - INFO - User speech received: Please call me to agent.
2024-12-29 12:22:26,364 - voice-business-agent - INFO - User speech received: Please call me to agent.
2024-12-29 12:22:26,365 - voice-business-agent - DEBUG - Validating phone number from text: Please call me to agent.
2024-12-29 12:22:26,365 - voice-business-agent - INFO - User speech received: Please call me to agent.
2024-12-29 12:22:26,365 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:22:26,365 - voice-business-agent - DEBUG - Validating phone number from text: Please call me to agent.
2024-12-29 12:22:26,365 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:22:27,222 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:22:27,223 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:22:27,223 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:22:30,610 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 12:22:30,611 - livekit.agents - DEBUG - shutting down job task
2024-12-29 12:22:30,610 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 12:22:30,611 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 12:22:30,611 - livekit.agents - INFO - process exiting
2024-12-29 12:22:30,611 - livekit.agents - DEBUG - shutting down job task
2024-12-29 12:22:30,612 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 12:22:30,613 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 12:22:30,611 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 12:22:30,612 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 12:22:30,613 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 12:22:30,614 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 12:22:30,613 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 12:22:30,613 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 12:22:30,614 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 12:22:30,625 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:22:30,625 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:22:30,626 - voice-business-agent - INFO - User speech received:  I can help you with that. Could you please provide your mobile number so I can connect you to an agent?
2024-12-29 12:22:30,626 - voice-business-agent - DEBUG - Validating phone number from text:  I can help you with that. Could you please provide your mobile number so I can connect you to an agent?
2024-12-29 12:22:30,627 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:22:30,627 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:22:30,626 - voice-business-agent - INFO - User speech received:  I can help you with that. Could you please provide your mobile number so I can connect you to an agent?
2024-12-29 12:22:30,626 - voice-business-agent - DEBUG - Validating phone number from text:  I can help you with that. Could you please provide your mobile number so I can connect you to an agent?
2024-12-29 12:22:30,627 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:22:30,627 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:22:30,659 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:22:30,659 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:22:30,665 - asyncio - ERROR - Task was destroyed but it is pending!
task: <Task pending name='job_user_entrypoint' coro=<entrypoint() running at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py:103> wait_for=<Future pending cb=[Task.task_wakeup()]> cb=[_JobProc._run_job_task.<locals>.<lambda>() at /Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/ipc/job_proc_lazy_main.py:235, _JobProc._run_job_task.<locals>.log_exception() at /Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/ipc/job_proc_lazy_main.py:237]>
2024-12-29 12:22:30,800 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 12:22:30,969 - livekit.agents - INFO - registered worker
2024-12-29 12:22:34,533 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:22:34,533 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:22:34,911 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:22:34,911 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:22:34,918 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please call me to agent.'}, {'role': 'assistant', 'content': ' I can help you with that. Could you please provide your mobile number so I can connect you to an agent?'}, {'role': 'user', 'content': '9313-571-554.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:22:34,920 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:22:34,921 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:22:34,921 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:22:34,921 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:22:34,921 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:22:35,153 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:22:35,153 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:22:35,475 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:52:35 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'257'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29885'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'230ms'), (b'x-request-id', b'req_fc6532b5d5c4c32a44519df1e7fa5fb8'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97de3e7ccc5484-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:22:35,476 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:22:35,476 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:22:35,477 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:22:36,000 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you! I will now connect you to an agent using the number 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:22:36,002 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:22:36,003 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:22:36,003 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:22:36,003 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:22:36,004 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:22:36,126 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:22:36,126 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:22:36,126 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:22:37,239 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:52:37 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'905'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-9xk4z'), (b'x-envoy-upstream-service-time', b'886'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_04bac93d9a9994e7316cd0a4868b6eb3'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97de453e6354cc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:22:37,240 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:22:37,240 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:22:37,240 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:22:37,516 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:22:37,516 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:22:37,554 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:22:37,554 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:22:38,382 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:22:38,382 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:22:38,383 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:22:38,385 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on while I make the connection.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:22:38,386 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:22:38,386 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:22:38,386 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:22:38,387 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:22:38,387 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:22:39,139 - voice-business-agent - INFO - User speech received: 9313-571-554.
2024-12-29 12:22:39,139 - voice-business-agent - INFO - User speech received: 9313-571-554.
2024-12-29 12:22:39,140 - voice-business-agent - DEBUG - Validating phone number from text: 9313-571-554.
2024-12-29 12:22:39,140 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 12:22:39,139 - voice-business-agent - INFO - User speech received: 9313-571-554.
2024-12-29 12:22:39,139 - voice-business-agent - INFO - User speech received: 9313-571-554.
2024-12-29 12:22:39,140 - voice-business-agent - DEBUG - Validating phone number from text: 9313-571-554.
2024-12-29 12:22:39,140 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 12:22:39,177 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'phone_number': '9313571554'}
2024-12-29 12:22:39,177 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'phone_number': '9313571554'}
2024-12-29 12:22:39,179 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:22:39,180 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 12:22:39,195 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12c0c7010>
2024-12-29 12:22:39,195 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x12b9467b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 12:22:39,209 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12c0ba690>
2024-12-29 12:22:39,209 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:22:39,210 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:22:39,210 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:22:39,210 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:22:39,210 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:22:39,458 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:52:39 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'761'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-29mk8'), (b'x-envoy-upstream-service-time', b'749'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_4f7463017b8f39e57a25472a7fb38528'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97de542f6654cc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:22:39,460 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:22:39,460 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:22:39,460 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:22:40,138 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:52:40 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'601'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-cvv9s'), (b'x-envoy-upstream-service-time', b'595'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_8a981aa704f380c3cff1b245de87ae75'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97de594b9f8aee-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:22:40,139 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:22:40,139 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:22:40,140 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:22:40,251 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:22:40,251 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:22:40,251 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:22:41,000 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:22:41,000 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:22:41,000 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:22:46,010 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:22:46,010 - voice-business-agent - INFO - User speech received:  Thank you! I will now connect you to an agent using the number 9313571554. Please hold on while I make the connection.
2024-12-29 12:22:46,010 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:22:46,010 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you! I will now connect you to an agent using the number 9313571554. Please hold on while I make the connection.
2024-12-29 12:22:46,011 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 12:22:46,011 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:22:46,010 - voice-business-agent - INFO - User speech received:  Thank you! I will now connect you to an agent using the number 9313571554. Please hold on while I make the connection.
2024-12-29 12:22:46,011 - voice-business-agent - INFO - Transferring call to 
2024-12-29 12:22:46,010 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you! I will now connect you to an agent using the number 9313571554. Please hold on while I make the connection.
2024-12-29 12:22:46,011 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 12:22:46,011 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:22:46,011 - voice-business-agent - INFO - Transferring call to 
2024-12-29 12:22:46,060 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:22:46,060 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:22:46,246 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 74
2024-12-29 12:22:46,246 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 74
2024-12-29 12:22:46,250 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:22:46,250 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:22:46,252 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:22:46,252 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:22:46,253 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Call transfer initiated. You'll receive a call shortly.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:22:46,255 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:22:46,256 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:22:46,256 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:22:46,256 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:22:46,256 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:22:46,256 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:22:46,256 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:22:46,294 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:22:46,294 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:22:47,813 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 06:52:47 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1267'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-7lq42'), (b'x-envoy-upstream-service-time', b'1247'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_1efee288b725ed84f32659f78a7a4d8d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97de855b2554cc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:22:47,814 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:22:47,815 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:22:47,815 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:22:49,042 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:22:49,042 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:22:49,043 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 12:22:49,043 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 12:22:49,043 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:22:49,043 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:22:49,043 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 12:22:49,043 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 12:22:49,043 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:22:49,043 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:22:49,044 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:22:49,044 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:22:49,069 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:22:49,069 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:22:49,106 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:22:49,106 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:22:49,203 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:22:49,203 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:22:49,204 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:22:52,280 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:22:52,280 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:22:52,280 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:22:52,280 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:22:52,280 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:22:52,280 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:22:52,281 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:22:52,280 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:22:52,280 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:22:52,281 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:22:52,311 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:22:52,311 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:23:31,475 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 12:23:31,476 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 12:23:31,475 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 12:23:31,478 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 12:23:31,476 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 12:23:31,478 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 12:23:31,479 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 12:23:31,479 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 12:23:31,480 - livekit.agents - DEBUG - shutting down job task
2024-12-29 12:23:31,480 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 12:23:31,480 - livekit.agents - INFO - process exiting
2024-12-29 12:23:31,480 - livekit.agents - DEBUG - shutting down job task
2024-12-29 12:23:31,480 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 12:23:31,638 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 12:23:31,816 - livekit.agents - INFO - registered worker
2024-12-29 12:32:34,474 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:32:34,477 - livekit.agents - DEV - Watching /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python
2024-12-29 12:32:35,432 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:32:35,442 - livekit.agents - INFO - starting worker
2024-12-29 12:32:35,622 - livekit.agents - INFO - registered worker
2024-12-29 12:32:45,110 - livekit.agents - INFO - received job request
2024-12-29 12:32:46,154 - livekit.agents - INFO - initializing job process
2024-12-29 12:32:46,155 - livekit.agents - INFO - job process initialized
2024-12-29 12:32:46,155 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:32:46,154 - livekit.agents - INFO - initializing job process
2024-12-29 12:32:46,155 - livekit.agents - INFO - job process initialized
2024-12-29 12:32:46,155 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:32:46,254 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6710
2024-12-29 12:32:46,254 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6710
2024-12-29 12:32:46,255 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 12:32:46,255 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 12:32:46,255 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 12:32:46,255 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 12:32:46,256 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 12:32:46,256 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 12:32:46,529 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 12:32:46,529 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 12:32:46,529 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 12:32:46,530 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 12:32:46,529 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 12:32:46,530 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 12:32:46,530 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 12:32:46,530 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 12:32:46,575 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 12:32:46,576 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 12:32:46,575 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 12:32:46,576 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 12:32:46,576 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 12:32:46,576 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 12:32:46,576 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 12:32:46,576 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 12:32:46,698 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 12:32:46,698 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 12:32:46,908 - voice-business-agent - INFO - Participant connected: voice_assistant_user_350
2024-12-29 12:32:46,908 - voice-business-agent - INFO - Participant connected: voice_assistant_user_350
2024-12-29 12:32:46,960 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 12:32:46,960 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 12:32:46,986 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 12:32:46,986 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 12:32:46,986 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:32:46,986 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:32:47,024 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:32:47,025 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 12:32:47,054 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11a2f9150>
2024-12-29 12:32:47,054 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11a252720> server_hostname='api.openai.com' timeout=10.0
2024-12-29 12:32:47,068 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11a20a0d0>
2024-12-29 12:32:47,068 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:32:47,069 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:32:47,069 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:32:47,069 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:32:47,069 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:32:48,153 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:02:48 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'733'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-9sjbk'), (b'x-envoy-upstream-service-time', b'704'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c223f5807688a40c0fc591abfc104001'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=_NRBK1s0ktx8VotzgH0FHIkf.jciuo32olZRGY0s38A-1735455768-1.0.1.1-miZznaQj5IzRzk9S4_Jj4EUTOrz5nyZBjXveXXbyz9SqxX0OHaC0tfhz_vpLdVrTC8MtDmjutbiDUtsPWLKzbA; path=/; expires=Sun, 29-Dec-24 07:32:48 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=m4ThOSxFD9J36qlJFpD.KgqDEGyBlWNgvDUEbYh6cSs-1735455768177-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97ed306f6254e9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:32:48,154 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:32:48,154 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:32:48,154 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:32:48,433 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:32:48,433 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:32:48,477 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:32:48,477 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:32:48,478 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:32:48,478 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:32:49,388 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:32:49,388 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:32:49,389 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:32:50,388 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:32:50,389 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 12:32:50,388 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:32:50,389 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 12:32:50,389 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:32:50,389 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:32:50,389 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 12:32:50,389 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 12:32:50,389 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:32:50,389 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:32:50,423 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:32:50,423 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:32:50,424 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:32:50,424 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:04,813 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:33:04,813 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:33:05,169 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:33:05,169 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:33:05,177 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Um, please connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:33:05,178 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 12:33:05,191 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11ca83f10>
2024-12-29 12:33:05,191 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11a252690> server_hostname='api.openai.com' timeout=15.0
2024-12-29 12:33:05,206 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x118cdfcd0>
2024-12-29 12:33:05,207 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:33:05,207 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:33:05,207 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:33:05,207 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:33:05,208 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:33:05,414 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:33:05,414 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:33:05,414 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:05,414 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:05,748 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:03:05 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'233'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29914'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'172ms'), (b'x-request-id', b'req_dd1aeb27228384d1c53ea4718c6858d2'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=qR..zJUTLa8KmapISKyPRtkMEpbyDMxI_ifH7eL3m0Q-1735455785-1.0.1.1-5aAHnD_KiU8p291he.H4KyNGDZfzmaZ.migYynxqUcc.MdqxviGcEgdHA0cBRbj6K_rUpjVWxVMH0f2kt7dk.A; path=/; expires=Sun, 29-Dec-24 07:33:05 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=p.gqx5R57vd9_yttqAw1TvzlD3_WYKa5yWNZelHXNyc-1735455785773-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97eda1ccb754c0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:33:05,750 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:33:05,750 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:33:05,751 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:33:05,935 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, I can help you with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:33:05,936 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:33:05,937 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:33:05,937 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:33:05,937 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:33:05,937 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:33:06,491 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:33:06,492 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:33:06,492 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:33:07,020 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:03:07 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'776'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-5qz6z'), (b'x-envoy-upstream-service-time', b'747'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a62348620f722afd7b56110922de487a'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97eda65e8c54e9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:33:07,021 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:33:07,021 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:33:07,022 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:33:07,312 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:33:07,312 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:33:07,372 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:33:07,372 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:33:07,373 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:07,373 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:07,985 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:33:07,986 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:33:07,986 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:33:07,988 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide me with your mobile number so I can proceed with connecting you to an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:33:07,989 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:33:07,990 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:33:07,990 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:33:07,990 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:33:07,990 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:33:08,989 - voice-business-agent - INFO - User speech received: Um, please connect me to agent.
2024-12-29 12:33:08,990 - voice-business-agent - INFO - User speech received: Um, please connect me to agent.
2024-12-29 12:33:08,990 - voice-business-agent - DEBUG - Validating phone number from text: Um, please connect me to agent.
2024-12-29 12:33:08,990 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:33:08,989 - voice-business-agent - INFO - User speech received: Um, please connect me to agent.
2024-12-29 12:33:08,990 - voice-business-agent - INFO - User speech received: Um, please connect me to agent.
2024-12-29 12:33:08,990 - voice-business-agent - DEBUG - Validating phone number from text: Um, please connect me to agent.
2024-12-29 12:33:08,990 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:33:09,212 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:03:09 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'908'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-j6r7n'), (b'x-envoy-upstream-service-time', b'891'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_bbab9fcba94855a9249b6ad2a3325b74'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97edb32dca54e9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:33:09,213 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:33:09,213 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:33:09,214 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:33:10,693 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:33:10,694 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:33:10,694 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:33:15,861 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:33:15,862 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. Could you please provide me with your mobile number so I can proceed with connecting you to an agent?
2024-12-29 12:33:15,861 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:33:15,862 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help you with that. Could you please provide me with your mobile number so I can proceed with connecting you to an agent?
2024-12-29 12:33:15,862 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:33:15,862 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:33:15,862 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. Could you please provide me with your mobile number so I can proceed with connecting you to an agent?
2024-12-29 12:33:15,862 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help you with that. Could you please provide me with your mobile number so I can proceed with connecting you to an agent?
2024-12-29 12:33:15,862 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:33:15,862 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:33:15,899 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:33:15,899 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:33:15,899 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:15,899 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:19,444 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:33:19,444 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:33:19,946 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:33:19,946 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:33:19,953 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Um, please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can proceed with connecting you to an agent?'}, {'role': 'user', 'content': "Yes. It's 9313"}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:33:19,956 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:33:19,956 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:33:19,956 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:33:19,956 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:33:19,957 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:33:19,957 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:33:19,957 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:33:19,958 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:33:19,958 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:33:19,958 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:33:19,958 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:33:19,963 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Um, please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could you please provide me with your mobile number so I can proceed with connecting you to an agent?'}, {'role': 'user', 'content': "Yes. It's 9313 571554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:33:19,965 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 12:33:19,965 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:33:19,966 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 12:33:19,966 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:33:19,966 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:33:19,967 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:33:19,990 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x118c1f290>
2024-12-29 12:33:19,990 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11a252690> server_hostname='api.openai.com' timeout=15.0
2024-12-29 12:33:20,008 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x118a14910>
2024-12-29 12:33:20,009 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:33:20,009 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:33:20,009 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:33:20,009 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:33:20,009 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:33:20,205 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:33:20,205 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:33:20,205 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:20,205 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:20,582 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:03:20 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'272'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29873'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'254ms'), (b'x-request-id', b'req_b0ced8b35cd84e0932edb6e489c0d012'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97edfe49d55498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:33:20,583 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:33:20,584 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:33:20,584 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:33:21,004 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Let me verify the number: 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:33:21,005 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:33:21,005 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:33:21,005 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:33:21,005 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:33:21,005 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:33:21,393 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:33:21,394 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:33:21,394 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:33:22,522 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:03:22 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1189'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-7tp2j'), (b'x-envoy-upstream-service-time', b'1168'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_5c1eaf52f467aeb436182a4780c14a99'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97ee048d1754e9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:33:22,522 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:33:22,522 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:33:22,522 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:33:22,808 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:33:22,808 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:33:22,848 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:33:22,848 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:33:22,849 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:22,849 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:24,230 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:33:24,231 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:33:24,232 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:33:24,233 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'll connect you with an agent now.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:33:24,235 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:33:24,236 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:33:24,236 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:33:24,236 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:33:24,236 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:33:24,402 - voice-business-agent - INFO - User speech received: Yes. It's 9313 571554.
2024-12-29 12:33:24,402 - voice-business-agent - INFO - User speech received: Yes. It's 9313 571554.
2024-12-29 12:33:24,402 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 9313 571554.
2024-12-29 12:33:24,402 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 12:33:24,402 - voice-business-agent - INFO - User speech received: Yes. It's 9313 571554.
2024-12-29 12:33:24,402 - voice-business-agent - INFO - User speech received: Yes. It's 9313 571554.
2024-12-29 12:33:24,402 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 9313 571554.
2024-12-29 12:33:24,402 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 12:33:24,490 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'phone_number': '9313571554'}
2024-12-29 12:33:24,491 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-29 12:33:24,490 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'phone_number': '9313571554'}
2024-12-29 12:33:24,491 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-29 12:33:24,601 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:33:24,601 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:33:24,982 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 12:33:24,982 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 12:33:24,984 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:33:24,984 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:33:24,990 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:33:24,991 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 12:33:25,043 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x118ce78d0>
2024-12-29 12:33:25,043 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11a252720> server_hostname='api.openai.com' timeout=10.0
2024-12-29 12:33:25,100 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10effd950>
2024-12-29 12:33:25,100 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:33:25,101 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:33:25,101 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:33:25,101 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:33:25,101 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:33:25,239 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:03:25 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'654'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-2zssc'), (b'x-envoy-upstream-service-time', b'617'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_712470508c1079dd051b36e968d56a6c'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97ee18bf3554e9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:33:25,240 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:33:25,240 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:33:25,240 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:33:26,279 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:03:26 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'820'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-bjrft'), (b'x-envoy-upstream-service-time', b'785'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_477e992dab8fffe9f7c544e90e3c4b88'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97ee1e1b8c54d8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:33:26,280 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:33:26,281 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:33:26,281 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:33:26,885 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:33:26,885 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:33:26,885 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:33:26,886 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on for a moment.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:33:26,886 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:33:26,886 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:33:26,886 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:33:26,887 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:33:26,887 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:33:27,720 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:03:27 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'509'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-gptrf'), (b'x-envoy-upstream-service-time', b'489'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_62c053bdef8fb2c3e12940c001307c6a'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97ee294b2b54e9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:33:27,721 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:33:27,721 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:33:27,722 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:33:28,268 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:33:28,268 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:33:28,269 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:33:28,554 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:33:28,554 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:33:28,554 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:33:30,754 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:33:30,754 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:33:30,755 - voice-business-agent - INFO - User speech received:  Thank you. Let me verify the number: 9313571554. I'll connect you with an agent now. Please hold on for a moment.
2024-12-29 12:33:30,755 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Let me verify the number: 9313571554. I'll connect you with an agent now. Please hold on for a moment.
2024-12-29 12:33:30,755 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 12:33:30,755 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:33:30,755 - voice-business-agent - INFO - User speech received:  Thank you. Let me verify the number: 9313571554. I'll connect you with an agent now. Please hold on for a moment.
2024-12-29 12:33:30,755 - voice-business-agent - INFO - Transferring call to 
2024-12-29 12:33:30,755 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Let me verify the number: 9313571554. I'll connect you with an agent now. Please hold on for a moment.
2024-12-29 12:33:30,755 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 12:33:30,755 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:33:30,755 - voice-business-agent - INFO - Transferring call to 
2024-12-29 12:33:30,794 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:33:30,794 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:33:30,854 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 74
2024-12-29 12:33:30,856 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:33:30,854 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 74
2024-12-29 12:33:30,856 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:33:30,858 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:33:30,858 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:33:30,858 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:30,859 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Call transfer initiated. You'll receive a call shortly.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:33:30,858 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:30,860 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:33:30,861 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:33:30,861 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:33:30,861 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:33:30,861 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:33:30,862 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:33:30,862 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:33:30,902 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:33:30,902 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:33:30,902 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:30,902 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:31,811 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:03:31 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'625'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-mwb56'), (b'x-envoy-upstream-service-time', b'609'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_98633e1611272cf1dbe3ff9e4f70a5a4'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97ee421a0154e9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:33:31,814 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:33:31,814 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:33:31,815 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:33:32,876 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:33:32,876 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:33:32,877 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:33:33,814 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:33:33,815 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 12:33:33,814 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:33:33,815 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 12:33:33,815 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 12:33:33,815 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:33:33,815 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:33:33,815 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 12:33:33,815 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:33:33,815 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:33:33,815 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:33:33,815 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:33:33,853 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:33:33,853 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:33:33,854 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:33,854 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:33,893 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:33:33,893 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:33:33,894 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:33,894 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:37,206 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:33:37,206 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:33:37,207 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:33:37,207 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:33:37,207 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:33:37,207 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:33:37,207 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:33:37,207 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:33:37,207 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:33:37,207 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:33:37,286 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:33:37,286 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:33:37,287 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:33:37,287 - livekit - ERROR - failed to emit event participant_attributes_changed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "/Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent1.py", line 137, in on_attributes_changed
    phone_number = changed_attributes["phone_number"]
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'phone_number'
2024-12-29 12:40:45,711 - livekit.agents - INFO - shutting down worker
2024-12-29 12:40:45,712 - livekit.agents - DEBUG - shutting down job task
2024-12-29 12:40:45,712 - livekit.agents - DEBUG - shutting down job task
2024-12-29 12:40:45,713 - livekit.agents - INFO - process exiting
2024-12-29 12:40:45,754 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 12:40:45,754 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 12:40:45,755 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: ClientInitiated
2024-12-29 12:40:45,755 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: ClientInitiated
2024-12-29 12:40:45,755 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 12:40:45,755 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 12:41:16,328 - watchfiles.main - WARNING - process already dead, exit code: 1
2024-12-29 12:42:09,314 - watchfiles.main - WARNING - process already dead, exit code: 1
2024-12-29 12:42:10,444 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:42:10,453 - livekit.agents - INFO - starting worker
2024-12-29 12:42:10,462 - livekit.agents - DEV - reloading job
2024-12-29 12:42:10,639 - livekit.agents - INFO - registered worker
2024-12-29 12:42:11,403 - livekit.agents - INFO - initializing job process
2024-12-29 12:42:11,403 - livekit.agents - INFO - job process initialized
2024-12-29 12:42:11,403 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:42:11,403 - livekit.agents - INFO - initializing job process
2024-12-29 12:42:11,403 - livekit.agents - INFO - job process initialized
2024-12-29 12:42:11,403 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:42:11,442 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 12:42:11,504 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6710
2024-12-29 12:42:11,504 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6710
2024-12-29 12:42:11,505 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 12:42:11,505 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 12:42:11,505 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 12:42:11,505 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 12:42:11,506 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 12:42:11,506 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 12:42:11,674 - livekit.agents - INFO - registered worker
2024-12-29 12:42:11,766 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 12:42:11,766 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 12:42:11,766 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 12:42:11,767 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 12:42:11,766 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 12:42:11,766 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 12:42:11,766 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 12:42:11,767 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 12:42:11,804 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 12:42:11,805 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 12:42:11,804 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 12:42:11,805 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 12:42:11,805 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 12:42:11,805 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 12:42:11,805 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 12:42:11,805 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 12:42:12,688 - livekit.agents - INFO - received job request
2024-12-29 12:42:12,982 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 12:42:12,982 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 12:42:13,654 - livekit.agents - INFO - initializing job process
2024-12-29 12:42:13,654 - livekit.agents - INFO - initializing job process
2024-12-29 12:42:13,656 - livekit.agents - INFO - job process initialized
2024-12-29 12:42:13,656 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:42:13,656 - livekit.agents - INFO - job process initialized
2024-12-29 12:42:13,656 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:42:13,760 - voice-business-agent - INFO - Connecting to room voice_assistant_room_3225
2024-12-29 12:42:13,760 - voice-business-agent - INFO - Connecting to room voice_assistant_room_3225
2024-12-29 12:42:13,761 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 12:42:13,761 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 12:42:13,761 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 12:42:13,761 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 12:42:13,762 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 12:42:13,762 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 12:42:13,994 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 12:42:13,995 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 12:42:13,994 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 12:42:13,995 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 12:42:13,995 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 12:42:13,995 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 12:42:13,995 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 12:42:13,995 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 12:42:14,040 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 12:42:14,040 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 12:42:14,041 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 12:42:14,041 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 12:42:14,040 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 12:42:14,040 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 12:42:14,041 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 12:42:14,041 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 12:42:14,166 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 12:42:14,166 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 12:42:14,481 - voice-business-agent - INFO - Participant connected: voice_assistant_user_4560
2024-12-29 12:42:14,481 - voice-business-agent - INFO - Participant connected: voice_assistant_user_4560
2024-12-29 12:42:14,545 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 12:42:14,545 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 12:42:14,563 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 12:42:14,563 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 12:42:14,608 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:42:14,609 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 12:42:14,628 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12ef79d10>
2024-12-29 12:42:14,628 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1182b67b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 12:42:14,642 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11801f7d0>
2024-12-29 12:42:14,643 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:42:14,643 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:42:14,643 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:42:14,643 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:42:14,643 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:42:15,748 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:12:15 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'773'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-nz469'), (b'x-envoy-upstream-service-time', b'761'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d49ba12e7aaefcdc15769e189e47696d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=vkuliHQQlkhUzvMitEEVf8chD65ojAoE5dPUCvVsKYo-1735456335-1.0.1.1-53.CaX4ivXyohK07RzYGTxkBoNYiB49vI6SnDuum70AfHSfxVHRnp_j18RdDxztRSQKUctNVGqNq_bVJodBG2Q; path=/; expires=Sun, 29-Dec-24 07:42:15 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=5Bk.nbcJMGXXjCeu1G7._4zTRySyJ3PR6HT9HW1cPwE-1735456335770-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97fb0bb8c491af-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:42:15,751 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:42:15,751 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:42:15,751 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:42:16,005 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:42:16,005 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:42:16,047 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:42:16,047 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:42:16,509 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:42:16,510 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:42:16,510 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:42:17,937 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:42:17,938 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 12:42:17,937 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:42:17,938 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 12:42:17,938 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:42:17,938 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:42:17,938 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 12:42:17,938 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 12:42:17,938 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:42:17,938 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:42:17,978 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:42:17,978 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:42:20,587 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:42:20,587 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:42:20,916 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:42:20,916 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:42:20,928 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:42:20,929 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 12:42:20,945 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11835e690>
2024-12-29 12:42:20,946 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1182b6720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 12:42:20,963 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12efa2050>
2024-12-29 12:42:20,964 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:42:20,965 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:42:20,965 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:42:20,965 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:42:20,965 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:42:21,199 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:42:21,199 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:42:21,526 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:12:21 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'253'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29915'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'170ms'), (b'x-request-id', b'req_cd42c0546179b3fb449a14aa1f0e9ea0'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=aH0Bbk8Txgh0ME6fWwaYvrRXpQF1AgDhM3Vl1bmj2E4-1735456341-1.0.1.1-v.AWY8abNge2kS8mNwCSPXWfMN2bAUSsdN4gJLqux1nALdjHHc1HDDunyh0jid0mAKwUQdwpgxRCCNVPTRlrWw; path=/; expires=Sun, 29-Dec-24 07:42:21 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=oVepwiBtXPGBvzal3mgWyJ3GJkMEgE.8ohXbTirhftE-1735456341543-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97fb3339f291af-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:42:21,528 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:42:21,529 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:42:21,529 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:42:21,889 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, I can help you with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:42:21,891 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:42:21,891 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:42:21,891 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:42:21,892 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:42:21,892 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:42:22,203 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:42:22,203 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:42:22,203 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:42:22,928 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:12:22 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'719'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-4kskd'), (b'x-envoy-upstream-service-time', b'688'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_30844e2cf26b1e161f7079406750c13d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97fb39095e91af-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:42:22,928 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:42:22,928 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:42:22,929 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:42:23,196 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:42:23,196 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:42:23,331 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:42:23,331 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:42:23,749 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:42:23,750 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:42:23,750 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:42:23,753 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Can you please provide me with your mobile number so I can proceed with the connection?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:42:23,754 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:42:23,755 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:42:23,755 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:42:23,756 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:42:23,756 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:42:24,747 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 12:42:24,748 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 12:42:24,748 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 12:42:24,748 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:42:24,747 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 12:42:24,748 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 12:42:24,748 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 12:42:24,748 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:42:24,842 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:12:24 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'776'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-bvklc'), (b'x-envoy-upstream-service-time', b'755'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_509b52dd018b111f74813aa3ffc95fa2'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97fb44a93991af-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:42:24,842 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:42:24,843 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:42:24,843 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:42:27,411 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:42:27,411 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:42:27,411 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:42:27,548 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:42:27,548 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:42:27,550 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:42:27,550 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:42:27,550 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:42:27,550 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:42:27,591 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:42:27,591 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:42:33,048 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:42:33,048 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:42:34,291 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:42:34,291 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:42:34,674 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:42:34,674 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:42:34,685 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Can you please provide me with your mobile...'}, {'role': 'user', 'content': 'Yes. My mobile number is 9313-571 554.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:42:34,688 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:42:34,688 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:42:34,688 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:42:34,690 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:42:34,690 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:42:34,919 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:42:34,919 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:42:35,267 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:12:35 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'260'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29884'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'232ms'), (b'x-request-id', b'req_bae5ddf728ecdcf88f9aa4e8d6a83270'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97fb890e9f91af-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:42:35,268 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:42:35,268 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:42:35,268 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:42:35,670 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you! I will now connect you to an agent using the mobile number 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:42:35,672 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:42:35,672 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:42:35,672 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:42:35,673 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:42:35,673 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:42:35,742 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:42:35,743 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:42:35,743 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:42:37,060 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:12:37 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1073'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-j9pvl'), (b'x-envoy-upstream-service-time', b'1053'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_547a5c7a538473e2801ccc8339981c9c'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97fb8f2d7791af-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:42:37,061 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:42:37,062 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:42:37,062 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:42:37,301 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:42:37,301 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:42:37,347 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:42:37,347 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:42:38,107 - livekit.agents - INFO - received job request
2024-12-29 12:42:38,908 - voice-business-agent - INFO - User speech received: Yes. My mobile number is 9313-571 554.
2024-12-29 12:42:38,908 - voice-business-agent - INFO - User speech received: Yes. My mobile number is 9313-571 554.
2024-12-29 12:42:38,908 - voice-business-agent - DEBUG - Validating phone number from text: Yes. My mobile number is 9313-571 554.
2024-12-29 12:42:38,908 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 12:42:38,908 - voice-business-agent - INFO - User speech received: Yes. My mobile number is 9313-571 554.
2024-12-29 12:42:38,908 - voice-business-agent - INFO - User speech received: Yes. My mobile number is 9313-571 554.
2024-12-29 12:42:38,908 - voice-business-agent - DEBUG - Validating phone number from text: Yes. My mobile number is 9313-571 554.
2024-12-29 12:42:38,908 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 12:42:38,950 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'phone_number': '9313571554'}
2024-12-29 12:42:38,950 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-29 12:42:38,950 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'phone_number': '9313571554'}
2024-12-29 12:42:38,950 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-29 12:42:39,064 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:42:39,064 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:42:39,186 - livekit.agents - INFO - initializing job process
2024-12-29 12:42:39,187 - livekit.agents - INFO - job process initialized
2024-12-29 12:42:39,186 - livekit.agents - INFO - initializing job process
2024-12-29 12:42:39,187 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:42:39,187 - livekit.agents - INFO - job process initialized
2024-12-29 12:42:39,187 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:42:39,305 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6710
2024-12-29 12:42:39,305 - voice-business-agent - INFO - Connecting to room voice_assistant_room_6710
2024-12-29 12:42:39,306 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 12:42:39,306 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 12:42:39,306 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 12:42:39,306 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 12:42:39,307 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 12:42:39,307 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 12:42:40,000 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 12:42:40,000 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 12:42:40,000 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 12:42:40,000 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 12:42:40,000 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 12:42:40,000 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 12:42:40,000 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 12:42:40,000 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 12:42:40,053 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 12:42:40,053 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 12:42:40,053 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 12:42:40,053 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 12:42:40,053 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 12:42:40,053 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 12:42:40,053 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 12:42:40,053 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 12:42:40,220 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 12:42:40,220 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 12:42:40,230 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 12:42:40,232 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:42:40,230 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 12:42:40,232 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:42:40,234 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:42:40,235 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 12:42:40,265 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fef2a50>
2024-12-29 12:42:40,265 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1182b67b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 12:42:40,276 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x118012310>
2024-12-29 12:42:40,276 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:42:40,276 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:42:40,276 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:42:40,277 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:42:40,277 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:42:40,610 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:42:40,610 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:42:40,611 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:42:40,612 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold for a moment.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:42:40,613 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:42:40,614 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:42:40,614 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:42:40,614 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:42:40,614 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:42:41,396 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:12:41 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'790'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-2fcx4'), (b'x-envoy-upstream-service-time', b'774'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_6fe0ee01e2de0b8cc69b37c2f41c56bb'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97fbabfe6554aa-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:42:41,397 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:42:41,397 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:42:41,398 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:42:42,351 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:12:42 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1337'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-npdpq'), (b'x-envoy-upstream-service-time', b'1320'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b4eafa0e52d76faf671ed949060a476c'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97fbae0b2d91af-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:42:42,353 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:42:42,353 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:42:42,353 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:42:42,488 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:42:42,489 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:42:42,489 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:42:42,919 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:42:42,920 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:42:42,920 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:42:45,764 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:42:45,764 - voice-business-agent - INFO - User speech received:  Thank you! I will now connect you to an agent using the mobile number 9313571554. Please hold for a moment.
2024-12-29 12:42:45,764 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:42:45,764 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you! I will now connect you to an agent using the mobile number 9313571554. Please hold for a moment.
2024-12-29 12:42:45,764 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 12:42:45,764 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:42:45,764 - voice-business-agent - INFO - Transferring call to 
2024-12-29 12:42:45,764 - voice-business-agent - INFO - User speech received:  Thank you! I will now connect you to an agent using the mobile number 9313571554. Please hold for a moment.
2024-12-29 12:42:45,764 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you! I will now connect you to an agent using the mobile number 9313571554. Please hold for a moment.
2024-12-29 12:42:45,764 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 12:42:45,764 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:42:45,764 - voice-business-agent - INFO - Transferring call to 
2024-12-29 12:42:45,804 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:42:45,804 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:42:45,879 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 74
2024-12-29 12:42:45,880 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:42:45,879 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 74
2024-12-29 12:42:45,880 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:42:45,882 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:42:45,883 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Call transfer initiated. You'll receive a call shortly.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:42:45,882 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:42:45,885 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:42:45,886 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:42:45,886 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:42:45,886 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:42:45,886 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:42:45,886 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:42:45,887 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:42:45,930 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:42:45,930 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:42:47,328 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:12:47 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1103'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-22gpj'), (b'x-envoy-upstream-service-time', b'1074'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_300f87f5cef86b429e35351517dc6d0b'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97fbcf0c5491af-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:42:47,329 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:42:47,329 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:42:47,329 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:42:48,489 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:42:48,490 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:42:48,490 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:42:48,805 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:42:48,806 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 12:42:48,805 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:42:48,806 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 12:42:48,806 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 12:42:48,806 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:42:48,806 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 12:42:48,806 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:42:48,806 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:42:48,806 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:42:48,807 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:42:48,807 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:42:48,844 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:42:48,844 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:42:48,883 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:42:48,883 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:42:52,136 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:42:52,136 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:42:52,136 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:42:52,137 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:42:52,137 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:42:52,137 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:42:52,136 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:42:52,137 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:42:52,137 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:42:52,137 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:42:52,177 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:42:52,177 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:42:55,535 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:42:55,535 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:42:55,912 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:42:55,912 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:42:55,922 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Can you please provide me with your mobile...'}, {'role': 'user', 'content': 'Yes. My mobile number is 9313-571 554.'}, {'role': 'assistant', 'content': ' Thank you! I will now connect you to an agent using the mobile number 9313571554. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:42:55,925 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:42:55,926 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:42:55,926 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:42:55,927 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:42:55,927 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:42:56,164 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:42:56,164 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:42:56,737 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:12:56 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'467'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29825'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'350ms'), (b'x-request-id', b'req_936b9508e8eef5a428b7920ec4e4ad84'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97fc0db90d91af-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:42:56,738 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:42:56,738 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:42:56,739 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:42:56,946 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! I am connecting your call now.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:42:56,948 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:42:56,949 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:42:56,949 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:42:56,950 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:42:56,950 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:42:57,001 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:42:57,001 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:42:57,001 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:42:58,013 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:12:58 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'776'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-gjjjf'), (b'x-envoy-upstream-service-time', b'759'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a0ac26d979a25ad7aa62d59b409d806b'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97fc14287491af-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:42:58,015 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:42:58,016 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:42:58,017 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:42:58,272 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:42:58,272 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:42:58,316 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:42:58,316 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:42:58,753 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:42:58,754 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:42:58,755 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:42:58,757 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold for a moment.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:42:58,758 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:42:58,759 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:42:58,759 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:42:58,760 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:42:58,760 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:42:59,935 - voice-business-agent - INFO - User speech received: Hello?
2024-12-29 12:42:59,936 - voice-business-agent - INFO - User speech received: Hello?
2024-12-29 12:42:59,936 - voice-business-agent - DEBUG - Validating phone number from text: Hello?
2024-12-29 12:42:59,937 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:42:59,935 - voice-business-agent - INFO - User speech received: Hello?
2024-12-29 12:42:59,936 - voice-business-agent - INFO - User speech received: Hello?
2024-12-29 12:42:59,936 - voice-business-agent - DEBUG - Validating phone number from text: Hello?
2024-12-29 12:42:59,937 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:43:00,152 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:13:00 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1081'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-bkchh'), (b'x-envoy-upstream-service-time', b'1056'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_0d6f9faba0c1438c61d76dfe76281128'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97fc1f7d7391af-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:43:00,153 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:43:00,153 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:43:00,153 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:43:00,699 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:43:00,700 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:43:00,700 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:43:01,686 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:43:01,686 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:43:01,686 - voice-business-agent - INFO - User speech received:  Hello! I am connecting your call now. Please hold for a moment.
2024-12-29 12:43:01,686 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! I am connecting your call now. Please hold for a moment.
2024-12-29 12:43:01,686 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:43:01,687 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:43:01,686 - voice-business-agent - INFO - User speech received:  Hello! I am connecting your call now. Please hold for a moment.
2024-12-29 12:43:01,686 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! I am connecting your call now. Please hold for a moment.
2024-12-29 12:43:01,686 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:43:01,687 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:43:01,727 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:43:01,727 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:44:00,037 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:44:00,037 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:44:01,451 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:44:01,451 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:44:01,464 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Can you please provide me with your mobile...'}, {'role': 'user', 'content': 'Yes. My mobile number is 9313-571 554.'}, {'role': 'assistant', 'content': ' Thank you! I will now connect you to an agent using the mobile number 9313571554. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hello! I am connecting your call now. Please hold for a moment.'}, {'role': 'user', 'content': 'It'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:44:01,467 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:44:01,467 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:44:01,468 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:44:01,468 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:44:01,468 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:44:01,704 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:44:01,704 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:44:02,042 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:14:02 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'271'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29807'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'386ms'), (b'x-request-id', b'req_4037969f494fdd173f3a6dfa9c9f328c'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97fda769ad91af-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:44:02,042 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:44:02,042 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:44:02,042 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:44:02,171 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm here to assist you.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:44:02,172 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:44:02,173 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:44:02,173 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:44:02,173 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:44:02,173 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:44:02,295 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:44:02,296 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:44:02,296 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:44:03,160 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:14:03 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'676'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-m4b79'), (b'x-envoy-upstream-service-time', b'577'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_88a3ff1f616bb209c6e55047d5e29e5f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97fdabcfb191af-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:44:03,163 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:44:03,164 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:44:03,164 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:44:04,660 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:44:04,660 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:44:04,705 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:44:04,705 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:44:06,134 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:44:06,134 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:44:06,134 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:44:06,135 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'How can I help further?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:44:06,135 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:44:06,136 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:44:06,136 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:44:06,136 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:44:06,136 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:44:06,972 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:14:06 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'530'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-58j94'), (b'x-envoy-upstream-service-time', b'505'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_eabbda8906cd4963fbf89339862cc6ec'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f97fdc48e7f91af-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:44:06,974 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:44:06,974 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:44:06,974 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:44:07,484 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:44:07,484 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:44:07,485 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:44:07,508 - voice-business-agent - INFO - User speech received: It
2024-12-29 12:44:07,508 - voice-business-agent - INFO - User speech received: It
2024-12-29 12:44:07,508 - voice-business-agent - DEBUG - Validating phone number from text: It
2024-12-29 12:44:07,508 - voice-business-agent - INFO - User speech received: It
2024-12-29 12:44:07,509 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:44:07,508 - voice-business-agent - INFO - User speech received: It
2024-12-29 12:44:07,508 - voice-business-agent - DEBUG - Validating phone number from text: It
2024-12-29 12:44:07,509 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:44:08,577 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:44:08,577 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:44:08,577 - voice-business-agent - INFO - User speech received:  I'm here to assist you. How can I help further?
2024-12-29 12:44:08,577 - voice-business-agent - DEBUG - Validating phone number from text:  I'm here to assist you. How can I help further?
2024-12-29 12:44:08,578 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:44:08,577 - voice-business-agent - INFO - User speech received:  I'm here to assist you. How can I help further?
2024-12-29 12:44:08,578 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:44:08,577 - voice-business-agent - DEBUG - Validating phone number from text:  I'm here to assist you. How can I help further?
2024-12-29 12:44:08,578 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:44:08,578 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:44:08,619 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:44:08,619 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:44:45,634 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 12:44:45,635 - livekit.agents - DEBUG - shutting down job task
2024-12-29 12:44:45,636 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 12:44:45,636 - livekit.agents - INFO - process exiting
2024-12-29 12:44:45,634 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 12:44:45,635 - livekit.agents - DEBUG - shutting down job task
2024-12-29 12:44:45,636 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 12:44:45,637 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 12:44:45,637 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 12:44:45,788 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 12:44:45,955 - livekit.agents - INFO - registered worker
2024-12-29 12:47:16,051 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 12:47:16,052 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 12:47:16,054 - livekit.agents - DEBUG - shutting down job task
2024-12-29 12:47:16,055 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 12:47:16,055 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 12:47:16,055 - livekit.agents - DEBUG - shutting down job task
2024-12-29 12:47:16,052 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 12:47:16,055 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 12:47:16,055 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 12:47:16,051 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 12:47:16,055 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 12:47:16,056 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 12:47:16,055 - livekit.agents - INFO - process exiting
2024-12-29 12:47:16,055 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 12:47:16,054 - livekit.agents - DEBUG - shutting down job task
2024-12-29 12:47:16,057 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 12:47:16,057 - livekit.agents - INFO - process exiting
2024-12-29 12:47:16,057 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 12:47:16,055 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 12:47:16,058 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 12:47:16,055 - livekit.agents - DEBUG - shutting down job task
2024-12-29 12:47:16,058 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 12:47:16,055 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 12:47:16,055 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 12:47:16,055 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 12:47:16,056 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 12:47:16,057 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 12:47:16,057 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 12:47:16,058 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 12:47:16,058 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 12:47:16,227 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 12:47:16,424 - livekit.agents - INFO - registered worker
2024-12-29 12:47:52,406 - livekit.agents - INFO - shutting down worker
2024-12-29 12:47:53,577 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:47:53,582 - livekit.agents - INFO - starting worker
2024-12-29 12:47:53,735 - livekit.agents - INFO - registered worker
2024-12-29 12:48:37,458 - livekit.agents - INFO - shutting down worker
2024-12-29 12:48:38,519 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:48:38,528 - livekit.agents - INFO - starting worker
2024-12-29 12:48:38,715 - livekit.agents - INFO - registered worker
2024-12-29 12:49:01,344 - livekit.agents - INFO - received job request
2024-12-29 12:49:02,337 - livekit.agents - INFO - initializing job process
2024-12-29 12:49:02,338 - livekit.agents - INFO - job process initialized
2024-12-29 12:49:02,338 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:49:02,337 - livekit.agents - INFO - initializing job process
2024-12-29 12:49:02,338 - livekit.agents - INFO - job process initialized
2024-12-29 12:49:02,338 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:49:02,495 - voice-business-agent - INFO - Connecting to room voice_assistant_room_7041
2024-12-29 12:49:02,495 - voice-business-agent - INFO - Connecting to room voice_assistant_room_7041
2024-12-29 12:49:02,496 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 12:49:02,496 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 12:49:02,496 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 12:49:02,496 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 12:49:02,497 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 12:49:02,497 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 12:49:03,015 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 12:49:03,015 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 12:49:03,015 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 12:49:03,015 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 12:49:03,015 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 12:49:03,015 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 12:49:03,015 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 12:49:03,015 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 12:49:03,054 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 12:49:03,057 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 12:49:03,054 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 12:49:03,057 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 12:49:03,057 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 12:49:03,057 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 12:49:03,057 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 12:49:03,057 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 12:49:03,173 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 12:49:03,173 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 12:49:03,384 - voice-business-agent - INFO - Participant connected: voice_assistant_user_8693
2024-12-29 12:49:03,384 - voice-business-agent - INFO - Participant connected: voice_assistant_user_8693
2024-12-29 12:49:03,441 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 12:49:03,441 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 12:49:03,479 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 12:49:03,479 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 12:49:03,519 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:49:03,520 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 12:49:03,543 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10b9fb0d0>
2024-12-29 12:49:03,543 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b9527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 12:49:03,569 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10a6d37d0>
2024-12-29 12:49:03,569 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:49:03,569 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:49:03,569 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:49:03,570 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:49:03,570 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:49:04,935 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:19:04 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'520'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-7n22v'), (b'x-envoy-upstream-service-time', b'504'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_ea3fb351183df17094d4835c1d100144'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=fSlUt4r_UUUSn1dK3vcZ5i8iEvl77kEF.ZUrrtKdWFo-1735456744-1.0.1.1-Mu3hTLlxhXYD13HbaK3CM87.5CLrVDQFpTRH3teSsJS7nyHtNUtOVcwAtvE.HTQlXPS4KGXvxYo98wImFqlmTg; path=/; expires=Sun, 29-Dec-24 07:49:04 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=suNaFFpRbnHeTK6CJ_QrqIGU_GSQn7iarFWbPI6Bv6k-1735456744960-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98050788dd5525-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:49:04,938 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:49:04,939 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:49:04,939 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:49:05,194 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:49:05,194 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:49:05,234 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:49:05,234 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:49:05,970 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:49:05,970 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:49:05,971 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:49:07,171 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:49:07,171 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:49:07,173 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 12:49:07,173 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 12:49:07,173 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:49:07,173 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:49:07,173 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 12:49:07,173 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 12:49:07,173 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:49:07,173 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:49:07,213 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:49:07,213 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:49:10,002 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:49:10,002 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:49:10,290 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:49:10,290 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:49:10,301 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:49:10,302 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 12:49:10,320 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10aecb7d0>
2024-12-29 12:49:10,320 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b952720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 12:49:10,340 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10aec3650>
2024-12-29 12:49:10,341 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:49:10,341 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:49:10,341 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:49:10,342 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:49:10,342 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:49:10,532 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:49:10,532 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:49:12,715 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:19:12 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'351'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29915'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'170ms'), (b'x-request-id', b'req_e1c59058c76901c9fb892964d9fea0ad'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=b80us0JHm1lBC5XlErr1Pb5VsC3gD1Xl8qXJXKOnAL4-1735456752-1.0.1.1-gtxRIUtD77f0RK5d_6HcOIC55AUo71TWk_Tov0m6imwhdbEvzBL5jxQbAhFmaSRWyfaY_DmrTTSO67b2oe1Mvw; path=/; expires=Sun, 29-Dec-24 07:49:12 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=tUgRQvNK0_o7OVOr_Jj72qhlqGgVWmA9HHCQr5S7szg-1735456752742-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f980531dfad54b0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:49:12,716 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:49:12,716 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:49:12,716 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:49:13,073 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:49:13,075 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:49:13,075 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:49:13,078 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Of course! Could you please provide your mobile number so I can connect you with an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:49:13,080 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:49:13,081 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:49:13,081 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:49:13,082 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:49:13,082 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:49:14,610 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:19:14 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'653'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-mhkjt'), (b'x-envoy-upstream-service-time', b'610'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c11a5865b8da617351f0715764642667'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f980542fdd45525-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:49:14,612 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:49:14,612 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:49:14,613 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:49:14,874 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:49:14,874 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:49:14,912 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:49:14,912 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:49:16,087 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:49:16,088 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:49:16,089 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:49:16,520 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 12:49:16,520 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 12:49:16,521 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 12:49:16,521 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:49:16,520 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 12:49:16,520 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 12:49:16,521 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 12:49:16,521 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:49:20,252 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:49:20,252 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:49:20,253 - voice-business-agent - INFO - User speech received:  Of course! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 12:49:20,253 - voice-business-agent - DEBUG - Validating phone number from text:  Of course! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 12:49:20,253 - voice-business-agent - INFO - User speech received:  Of course! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 12:49:20,253 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:49:20,253 - voice-business-agent - DEBUG - Validating phone number from text:  Of course! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 12:49:20,253 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:49:20,253 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:49:20,253 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:49:20,291 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:49:20,291 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:49:22,597 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:49:22,597 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:49:22,827 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:49:22,827 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:49:22,832 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Of course! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:49:22,834 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:49:22,835 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:49:22,835 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:49:22,836 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:49:22,836 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:49:23,073 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:49:23,073 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:49:23,410 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:49:23,410 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:49:23,411 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 12:49:23,411 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:49:23,411 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:49:23,411 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:49:23,412 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:49:27,102 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:49:27,102 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:49:27,103 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:49:27,103 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:49:27,112 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Of course! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. 9313571554.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:49:27,113 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 12:49:27,140 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10aee7e90>
2024-12-29 12:49:27,140 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b952720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 12:49:27,154 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10b9fab90>
2024-12-29 12:49:27,155 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:49:27,155 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:49:27,155 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:49:27,155 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:49:27,155 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:49:27,724 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:19:27 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'258'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29886'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'228ms'), (b'x-request-id', b'req_c99de357a20bb8f806721d04f8eef063'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98059aecca8e80-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:49:27,726 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:49:27,726 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:49:27,726 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:49:27,899 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for providing your mobile number.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:49:27,901 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:49:27,901 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:49:27,901 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:49:27,901 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:49:27,901 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:49:28,064 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:49:28,064 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:49:28,065 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:49:29,069 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:19:29 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'867'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-w55kr'), (b'x-envoy-upstream-service-time', b'849'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_cdda5eb4210a96824818eb01bad21ab0'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98059f9ff45525-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:49:29,071 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:49:29,072 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:49:29,073 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:49:29,318 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:49:29,318 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:49:29,365 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:49:29,365 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:49:29,838 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:49:29,839 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:49:29,840 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:49:29,844 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'll connect you with an agent now.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:49:29,846 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:49:29,847 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:49:29,847 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:49:29,848 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:49:29,848 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:49:30,929 - voice-business-agent - INFO - User speech received: Yes. 9313571554.
2024-12-29 12:49:30,931 - voice-business-agent - INFO - User speech received: Yes. 9313571554.
2024-12-29 12:49:30,931 - voice-business-agent - DEBUG - Validating phone number from text: Yes. 9313571554.
2024-12-29 12:49:30,929 - voice-business-agent - INFO - User speech received: Yes. 9313571554.
2024-12-29 12:49:30,932 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 12:49:30,931 - voice-business-agent - INFO - User speech received: Yes. 9313571554.
2024-12-29 12:49:30,931 - voice-business-agent - DEBUG - Validating phone number from text: Yes. 9313571554.
2024-12-29 12:49:30,932 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 12:49:30,973 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'phone_number': '9313571554'}
2024-12-29 12:49:30,973 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'phone_number': '9313571554'}
2024-12-29 12:49:30,973 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-29 12:49:30,973 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-29 12:49:31,020 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:49:31,020 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:49:31,196 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 12:49:31,196 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 12:49:31,198 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:49:31,198 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:49:31,201 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:49:31,202 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 12:49:31,204 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:19:31 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'955'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-npwqc'), (b'x-envoy-upstream-service-time', b'945'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a8e2d5da645e9ef3506ef02a3d981da1'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9805abbf4f5525-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:49:31,204 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:49:31,205 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:49:31,205 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:49:31,222 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10a5d2090>
2024-12-29 12:49:31,223 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b9527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 12:49:31,244 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10a5d3a50>
2024-12-29 12:49:31,244 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:49:31,245 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:49:31,245 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:49:31,245 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:49:31,246 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:49:31,903 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:49:31,903 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:49:31,903 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:49:31,905 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:49:31,906 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:49:31,906 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:49:31,907 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:49:31,907 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:49:31,907 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:49:32,925 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:19:32 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1357'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-8mpkt'), (b'x-envoy-upstream-service-time', b'1342'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_e2ac959cf73c13569c0b3f9989038472'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9805b478e11bce-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:49:32,926 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:49:32,926 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:49:32,926 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:49:33,027 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:19:33 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'814'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-pqz84'), (b'x-envoy-upstream-service-time', b'802'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b78a25f0989a21edde247b88a0ae8987'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9805b89e365525-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:49:33,029 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:49:33,030 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:49:33,031 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:49:33,555 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:49:33,555 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:49:33,556 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:49:33,706 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:49:33,706 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:49:33,706 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:49:34,321 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:49:34,322 - voice-business-agent - INFO - User speech received:  Thank you for providing your mobile number. I'll connect you with an agent now. Please hold on.
2024-12-29 12:49:34,321 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:49:34,322 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your mobile number. I'll connect you with an agent now. Please hold on.
2024-12-29 12:49:34,322 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:49:34,322 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:49:34,322 - voice-business-agent - INFO - User speech received:  Thank you for providing your mobile number. I'll connect you with an agent now. Please hold on.
2024-12-29 12:49:34,322 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your mobile number. I'll connect you with an agent now. Please hold on.
2024-12-29 12:49:34,322 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:49:34,322 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:49:34,323 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:49:34,323 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:49:34,356 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:49:34,356 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:49:34,394 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:49:34,394 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:49:37,044 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:49:37,044 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 12:49:37,044 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:49:37,045 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 12:49:37,044 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 12:49:37,045 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:49:37,045 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 12:49:37,045 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:49:37,045 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:49:37,045 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:49:37,081 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:49:37,081 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:53:00,648 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 12:53:00,649 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 12:53:00,648 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 12:53:00,649 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 12:53:00,651 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 12:53:00,652 - livekit.agents - DEBUG - shutting down job task
2024-12-29 12:53:00,653 - livekit.agents - INFO - process exiting
2024-12-29 12:53:00,651 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 12:53:00,654 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 12:53:00,652 - livekit.agents - DEBUG - shutting down job task
2024-12-29 12:53:00,654 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 12:53:00,656 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 12:53:00,656 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 12:53:00,816 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 12:53:01,239 - livekit.agents - INFO - registered worker
2024-12-29 12:55:00,599 - livekit.agents - INFO - received job request
2024-12-29 12:55:01,758 - livekit.agents - INFO - initializing job process
2024-12-29 12:55:01,758 - livekit.agents - INFO - job process initialized
2024-12-29 12:55:01,758 - livekit.agents - INFO - initializing job process
2024-12-29 12:55:01,758 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:55:01,758 - livekit.agents - INFO - job process initialized
2024-12-29 12:55:01,758 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 12:55:01,876 - voice-business-agent - INFO - Connecting to room voice_assistant_room_9229
2024-12-29 12:55:01,876 - voice-business-agent - INFO - Connecting to room voice_assistant_room_9229
2024-12-29 12:55:01,876 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 12:55:01,877 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 12:55:01,876 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 12:55:01,877 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 12:55:01,877 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 12:55:01,877 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 12:55:02,124 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 12:55:02,125 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 12:55:02,124 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 12:55:02,125 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 12:55:02,125 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 12:55:02,125 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 12:55:02,125 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 12:55:02,125 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 12:55:02,162 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 12:55:02,163 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 12:55:02,163 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 12:55:02,163 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 12:55:02,162 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 12:55:02,163 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 12:55:02,163 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 12:55:02,163 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 12:55:02,275 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 12:55:02,275 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 12:55:02,433 - voice-business-agent - INFO - Participant connected: voice_assistant_user_6061
2024-12-29 12:55:02,433 - voice-business-agent - INFO - Participant connected: voice_assistant_user_6061
2024-12-29 12:55:02,483 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 12:55:02,483 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 12:55:02,493 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 12:55:02,493 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 12:55:02,536 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:55:02,538 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 12:55:02,556 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x122d00110>
2024-12-29 12:55:02,557 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1237527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 12:55:02,573 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x121496e90>
2024-12-29 12:55:02,573 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:55:02,573 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:55:02,573 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:55:02,573 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:55:02,573 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:55:03,678 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:25:03 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'761'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-c2lpx'), (b'x-envoy-upstream-service-time', b'744'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_1c0da8945fb714bce1d60cdadb4998df'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=3_wFfxmGWnjlW4IkHJQxKfha.EarO3eaoSZiO0swc_g-1735457103-1.0.1.1-p3lYdsyCM4tQU5_G9oaPwpQ2btl88V3GZ8.WEcjwJhvJgtl6cxpuAuIryofhn.nZEW5ld3u_ZOMnLbgv4ajAgg; path=/; expires=Sun, 29-Dec-24 07:55:03 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=m1bmNDAr3cp.eMq01_Zb2PMmtApqCeW2cwJ5FhhxTPU-1735457103693-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f980dcb4c9c5519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:55:03,680 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:55:03,680 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:55:03,680 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:55:03,925 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:55:03,925 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:55:03,966 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:55:03,966 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:55:04,675 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:55:04,677 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:55:04,678 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:55:05,918 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:55:05,918 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:55:05,919 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 12:55:05,919 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 12:55:05,919 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:55:05,919 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 12:55:05,919 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:55:05,919 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 12:55:05,919 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:55:05,919 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:55:05,953 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:55:05,953 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:55:08,537 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:55:08,537 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:55:08,879 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:55:08,879 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:55:08,887 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:55:08,888 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 12:55:08,903 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x122d28610>
2024-12-29 12:55:08,903 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x123752720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 12:55:08,919 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x122d1d390>
2024-12-29 12:55:08,920 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:55:08,920 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:55:08,920 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:55:08,921 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:55:08,921 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:55:09,124 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:55:09,124 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:55:09,628 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:25:09 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'387'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29917'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'166ms'), (b'x-request-id', b'req_45f68d08df010887ec92c2ab8123664b'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=6hlvrq5jQsnL9IGIG04BjXomEnO1.Vdo0Q4GCUQyZKc-1735457109-1.0.1.1-dYj5NptYTafNQhKdTOD5B4PC9q2VogScJumTrn6OTtJ5kVUxvRmb0enkePoDoWkC33st5VVl4AJpN0O1SdDrfg; path=/; expires=Sun, 29-Dec-24 07:55:09 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=BotmzzSneyUqowTlZIgdtLCjFf1s.orS5.vlSF2QEYA-1735457109651-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f980df2fe815518-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:55:09,629 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:55:09,629 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:55:09,629 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:55:09,953 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:55:09,953 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:55:09,953 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:55:09,955 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure! May I have your mobile number to proceed?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:55:09,956 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:55:09,957 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:55:09,957 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:55:09,957 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:55:09,957 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:55:10,848 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:25:10 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'601'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-fvz47'), (b'x-envoy-upstream-service-time', b'583'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_ddc41d4e3559f0e0ac4454ac66c867ca'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f980df968995519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:55:10,849 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:55:10,850 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:55:10,850 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:55:11,102 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:55:11,102 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:55:11,141 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:55:11,141 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:55:11,607 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:55:11,608 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:55:11,608 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:55:12,703 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 12:55:12,703 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 12:55:12,703 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to agent.
2024-12-29 12:55:12,703 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:55:12,703 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 12:55:12,703 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 12:55:12,703 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to agent.
2024-12-29 12:55:12,703 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:55:13,779 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:55:13,780 - voice-business-agent - INFO - User speech received:  Sure! May I have your mobile number to proceed?
2024-12-29 12:55:13,779 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:55:13,780 - voice-business-agent - DEBUG - Validating phone number from text:  Sure! May I have your mobile number to proceed?
2024-12-29 12:55:13,780 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:55:13,780 - voice-business-agent - INFO - User speech received:  Sure! May I have your mobile number to proceed?
2024-12-29 12:55:13,780 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:55:13,780 - voice-business-agent - DEBUG - Validating phone number from text:  Sure! May I have your mobile number to proceed?
2024-12-29 12:55:13,780 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:55:13,780 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:55:13,812 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:55:13,812 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:55:16,476 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:55:16,476 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:55:20,031 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:55:20,031 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:55:20,408 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:55:20,408 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:55:20,416 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:55:20,418 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:55:20,419 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:55:20,419 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:55:20,420 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:55:20,420 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:55:20,650 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:55:20,650 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:55:20,986 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:25:21 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'253'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29894'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'212ms'), (b'x-request-id', b'req_5b1dfa14bd739bf53ee8d56c70d22919'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f980e3adca25518-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:55:20,988 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:55:20,989 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:55:20,989 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:55:21,597 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:55:21,597 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:55:21,598 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:55:21,600 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you! Just to confirm, your mobile number is 44757111554, correct?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:55:21,602 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:55:21,602 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:55:21,602 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:55:21,603 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:55:21,603 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:55:22,551 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:25:22 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'663'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-pg7qv'), (b'x-envoy-upstream-service-time', b'647'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_aeadfba707e7dd928ad443c073ea6834'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f980e423d6a5519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:55:22,551 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:55:22,552 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:55:22,552 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:55:22,807 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:55:22,807 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:55:22,845 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:55:22,845 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:55:24,437 - voice-business-agent - INFO - User speech received: Yes. It's a it 447-571-1, double 54.
2024-12-29 12:55:24,437 - voice-business-agent - INFO - User speech received: Yes. It's a it 447-571-1, double 54.
2024-12-29 12:55:24,438 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's a it 447-571-1, double 54.
2024-12-29 12:55:24,438 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:55:24,437 - voice-business-agent - INFO - User speech received: Yes. It's a it 447-571-1, double 54.
2024-12-29 12:55:24,437 - voice-business-agent - INFO - User speech received: Yes. It's a it 447-571-1, double 54.
2024-12-29 12:55:24,438 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's a it 447-571-1, double 54.
2024-12-29 12:55:24,438 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:55:24,772 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:55:24,772 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:55:24,772 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:55:29,122 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:55:29,122 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:55:29,123 - voice-business-agent - INFO - User speech received:  Thank you! Just to confirm, your mobile number is 44757111554, correct?
2024-12-29 12:55:29,123 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you! Just to confirm, your mobile number is 44757111554, correct?
2024-12-29 12:55:29,123 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:55:29,124 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:55:29,123 - voice-business-agent - INFO - User speech received:  Thank you! Just to confirm, your mobile number is 44757111554, correct?
2024-12-29 12:55:29,123 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you! Just to confirm, your mobile number is 44757111554, correct?
2024-12-29 12:55:29,123 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:55:29,124 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:55:29,159 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:55:29,159 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:55:30,974 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:55:30,974 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:55:31,439 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:55:31,439 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:55:31,448 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's"}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:55:31,451 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:55:31,452 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:55:31,452 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:55:31,452 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:55:31,453 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:55:31,678 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:55:31,678 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:55:32,031 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:25:32 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'281'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29872'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'256ms'), (b'x-request-id', b'req_553f0ab29e9e2b0a6778da53da213378'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f980e7fce0b5518-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:55:32,032 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:55:32,032 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:55:32,033 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:55:32,209 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide your mobile number once more?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:55:32,211 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:55:32,211 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:55:32,212 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:55:32,212 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:55:32,213 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:55:32,404 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:55:32,404 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:55:32,404 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:55:32,529 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:55:32,529 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:55:32,530 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:55:32,530 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:55:33,756 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:25:33 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1225'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-vgg9w'), (b'x-envoy-upstream-service-time', b'1213'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_9b28cf7181ebe5520d7bb4060ebe4597'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f980e84888d5519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:55:33,757 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:55:33,757 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:55:33,757 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:55:34,560 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:55:34,560 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:55:34,560 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:55:35,958 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:55:35,958 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:55:36,878 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:55:36,878 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:55:37,256 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:55:37,256 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:55:37,266 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:55:37,269 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:55:37,269 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:55:37,270 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:55:37,270 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:55:37,270 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:55:37,829 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:25:37 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'267'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29866'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'268ms'), (b'x-request-id', b'req_5d34e4236ccaf7ed3915757642055348'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f980ea42b365518-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:55:37,830 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:55:37,830 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:55:37,831 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:55:38,193 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Got it! Your mobile number is 8447571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:55:38,195 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:55:38,195 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:55:38,195 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:55:38,196 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:55:38,196 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:55:38,692 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:55:38,693 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:55:38,693 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:55:39,004 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:25:39 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'520'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-bmzrj'), (b'x-envoy-upstream-service-time', b'498'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_0a2670230ce8d6eafa2ab2576922c020'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f980ea9ecb55519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:55:39,004 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:55:39,004 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:55:39,005 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:55:39,254 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:55:39,254 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:55:39,290 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:55:39,290 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:55:40,749 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:55:40,749 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:55:40,750 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:55:40,750 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I will connect you with an agent now.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:55:40,751 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:55:40,751 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:55:40,751 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:55:40,751 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:55:40,752 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:55:40,881 - voice-business-agent - INFO - User speech received: No. It's 8, double 4, 7571 554.
2024-12-29 12:55:40,881 - voice-business-agent - INFO - User speech received: No. It's 8, double 4, 7571 554.
2024-12-29 12:55:40,881 - voice-business-agent - DEBUG - Validating phone number from text: No. It's 8, double 4, 7571 554.
2024-12-29 12:55:40,881 - voice-business-agent - INFO - User speech received: No. It's 8, double 4, 7571 554.
2024-12-29 12:55:40,881 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:55:40,881 - voice-business-agent - INFO - User speech received: No. It's 8, double 4, 7571 554.
2024-12-29 12:55:40,881 - voice-business-agent - DEBUG - Validating phone number from text: No. It's 8, double 4, 7571 554.
2024-12-29 12:55:40,881 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:55:41,481 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:25:41 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'410'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-7px5h'), (b'x-envoy-upstream-service-time', b'391'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_269e7c880597917a3b9f1e6fef0f7024'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f980eb9e9b35519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:55:41,483 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:55:41,484 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:55:41,484 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:55:42,302 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:55:42,302 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:55:42,303 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:55:42,305 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:55:42,306 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:55:42,307 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:55:42,307 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:55:42,308 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:55:42,308 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:55:43,105 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:25:43 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'515'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-5qz6z'), (b'x-envoy-upstream-service-time', b'501'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_37e6529e5129c8dbcb84b60af0f8697b'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f980ec39e995519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:55:43,107 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:55:43,107 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:55:43,108 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:55:43,598 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:55:43,598 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:55:43,599 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:55:46,160 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:55:46,160 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:55:46,161 - voice-business-agent - INFO - User speech received:  Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.
2024-12-29 12:55:46,161 - voice-business-agent - DEBUG - Validating phone number from text:  Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.
2024-12-29 12:55:46,161 - voice-business-agent - INFO - Valid phone number found: 8447571554
2024-12-29 12:55:46,161 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:55:46,161 - voice-business-agent - INFO - User speech received:  Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.
2024-12-29 12:55:46,162 - voice-business-agent - INFO - Transferring call to 
2024-12-29 12:55:46,161 - voice-business-agent - DEBUG - Validating phone number from text:  Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.
2024-12-29 12:55:46,161 - voice-business-agent - INFO - Valid phone number found: 8447571554
2024-12-29 12:55:46,161 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:55:46,162 - voice-business-agent - INFO - Transferring call to 
2024-12-29 12:55:46,249 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:55:46,249 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:55:46,401 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 74
2024-12-29 12:55:46,404 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:55:46,401 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 74
2024-12-29 12:55:46,407 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:55:46,404 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:55:46,407 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:55:46,409 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Call transfer initiated. You'll receive a call shortly.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:55:46,411 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:55:46,411 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:55:46,412 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:55:46,412 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:55:46,412 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:55:50,525 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:25:50 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'709'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-9pkfb'), (b'x-envoy-upstream-service-time', b'604'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_9645140f82ee9b693051da562ceba360'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f980edd4bd55519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:55:50,526 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:55:50,526 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:55:50,526 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:55:50,770 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:55:50,770 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:55:50,854 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:55:50,854 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:55:51,501 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:55:51,501 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:55:51,501 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:55:54,102 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:55:54,102 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:55:54,103 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:55:54,103 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:55:54,103 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:55:54,104 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:55:54,103 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:55:54,103 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:55:54,103 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:55:54,104 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:55:54,139 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:55:54,139 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:56:27,862 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:56:27,862 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:56:28,078 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:56:28,078 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:56:28,092 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:56:28,095 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:56:28,096 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:56:28,096 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:56:28,096 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:56:28,096 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:56:28,320 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:56:28,320 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:56:28,765 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:26:28 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'359'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29824'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'352ms'), (b'x-request-id', b'req_46feb438bae51028c78c14a0042d0e5c'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f980fe1c9d45518-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:56:28,765 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:56:28,765 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:56:28,766 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:56:28,978 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hi! Your call transfer is in process.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:56:28,979 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:56:28,979 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:56:28,979 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:56:28,980 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:56:28,980 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:56:29,287 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:56:29,288 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:56:29,289 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:56:30,804 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:26:30 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1487'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-r86z9'), (b'x-envoy-upstream-service-time', b'1471'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_40c07ec86430342100dcc9a202f466cf'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f980fe75e105519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:56:30,805 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:56:30,805 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:56:30,806 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:56:31,093 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:56:31,093 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:56:31,131 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:56:31,131 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:56:31,663 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:56:31,663 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:56:31,664 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:56:31,665 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'An agent will be with you shortly.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:56:31,667 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:56:31,668 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:56:31,668 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:56:31,668 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:56:31,668 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:56:32,647 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:26:32 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'655'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-55smp'), (b'x-envoy-upstream-service-time', b'616'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_0c35b0c471f5a72e2f198fd24e36a3e0'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f980ff819f05519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:56:32,647 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:56:32,647 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:56:32,647 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:56:32,708 - voice-business-agent - INFO - User speech received: Hello?
2024-12-29 12:56:32,708 - voice-business-agent - INFO - User speech received: Hello?
2024-12-29 12:56:32,708 - voice-business-agent - DEBUG - Validating phone number from text: Hello?
2024-12-29 12:56:32,708 - voice-business-agent - INFO - User speech received: Hello?
2024-12-29 12:56:32,708 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:56:32,708 - voice-business-agent - INFO - User speech received: Hello?
2024-12-29 12:56:32,708 - voice-business-agent - DEBUG - Validating phone number from text: Hello?
2024-12-29 12:56:32,708 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:56:35,277 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:56:35,278 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:56:35,280 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:56:35,283 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for your patience!', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:56:35,284 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:56:35,284 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:56:35,285 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:56:35,286 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:56:35,286 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:56:36,403 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:26:36 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'789'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-8t88r'), (b'x-envoy-upstream-service-time', b'770'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_735c4499a434a79057fc7aca54068090'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98100ebe105519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:56:36,405 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:56:36,405 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:56:36,405 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:56:37,047 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:56:37,048 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:56:37,048 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:56:38,002 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:56:38,002 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:56:38,002 - voice-business-agent - INFO - User speech received:  Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!
2024-12-29 12:56:38,002 - voice-business-agent - DEBUG - Validating phone number from text:  Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!
2024-12-29 12:56:38,002 - voice-business-agent - INFO - User speech received:  Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!
2024-12-29 12:56:38,002 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:56:38,002 - voice-business-agent - DEBUG - Validating phone number from text:  Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!
2024-12-29 12:56:38,002 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:56:38,002 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:56:38,002 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:56:38,036 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:56:38,036 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:56:51,225 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:56:51,225 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:56:51,535 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:56:51,535 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:56:51,546 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:56:51,548 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:56:51,548 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:56:51,549 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:56:51,549 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:56:51,550 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:56:51,778 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:56:51,778 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:56:52,111 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:26:52 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'271'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29788'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'424ms'), (b'x-request-id', b'req_af3f741c96b782109f8f59b3188febcf'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9810746dd95518-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:56:52,114 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:56:52,114 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:56:52,117 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:56:52,482 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:56:52,482 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:56:52,482 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:56:52,484 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Certainly! Could you please provide your mobile number so I can connect you with an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:56:52,485 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:56:52,485 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:56:52,485 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:56:52,485 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:56:52,485 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:56:53,660 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:26:53 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'879'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-gtwbv'), (b'x-envoy-upstream-service-time', b'866'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_486e6bbd6f148692c762b0487a72db96'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98107a3f325519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:56:53,662 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:56:53,663 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:56:53,663 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:56:53,915 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:56:53,915 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:56:53,951 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:56:53,951 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:56:55,563 - voice-business-agent - INFO - User speech received: Hello. Please connect me to agent.
2024-12-29 12:56:55,563 - voice-business-agent - INFO - User speech received: Hello. Please connect me to agent.
2024-12-29 12:56:55,563 - voice-business-agent - DEBUG - Validating phone number from text: Hello. Please connect me to agent.
2024-12-29 12:56:55,563 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:56:55,563 - voice-business-agent - INFO - User speech received: Hello. Please connect me to agent.
2024-12-29 12:56:55,563 - voice-business-agent - INFO - User speech received: Hello. Please connect me to agent.
2024-12-29 12:56:55,563 - voice-business-agent - DEBUG - Validating phone number from text: Hello. Please connect me to agent.
2024-12-29 12:56:55,563 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:56:56,850 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:56:56,851 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:56:56,851 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:56:59,508 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:56:59,508 - voice-business-agent - INFO - User speech received:  Certainly! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 12:56:59,508 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:56:59,508 - voice-business-agent - DEBUG - Validating phone number from text:  Certainly! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 12:56:59,508 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:56:59,508 - voice-business-agent - INFO - User speech received:  Certainly! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 12:56:59,508 - voice-business-agent - DEBUG - Validating phone number from text:  Certainly! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 12:56:59,508 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:56:59,508 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:56:59,508 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:56:59,541 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:56:59,541 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 12:57:02,275 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:57:02,275 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:57:04,279 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:57:04,279 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:57:06,330 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:57:06,330 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:57:06,708 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:57:06,708 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:57:06,724 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:57:06,725 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:57:06,726 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:57:06,726 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:57:06,726 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:57:06,726 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:57:06,950 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:57:06,950 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 12:57:07,326 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:27:07 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'299'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29755'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'490ms'), (b'x-request-id', b'req_37b817147a374c756b4292242c54ee98'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9810d34c8c5518-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:57:07,327 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:57:07,327 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:57:07,327 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:57:07,739 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you! Just to confirm, your mobile number is 8447571554, correct?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:57:07,740 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:57:07,741 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:57:07,741 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:57:07,741 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:57:07,741 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:57:08,030 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:57:08,030 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:57:08,031 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:57:08,818 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:27:08 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'759'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-7tp2j'), (b'x-envoy-upstream-service-time', b'740'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a7ca99140bddeacb23e1b9f8bb152021'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9810d99b4c5519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:57:08,819 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:57:08,820 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:57:08,820 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:57:09,093 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:57:09,093 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:57:09,133 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:57:09,133 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 12:57:10,741 - voice-business-agent - INFO - User speech received: Yes. My mobile number 8447 571554.
2024-12-29 12:57:10,741 - voice-business-agent - INFO - User speech received: Yes. My mobile number 8447 571554.
2024-12-29 12:57:10,741 - voice-business-agent - DEBUG - Validating phone number from text: Yes. My mobile number 8447 571554.
2024-12-29 12:57:10,741 - voice-business-agent - INFO - Valid phone number found: 8447571554
2024-12-29 12:57:10,741 - voice-business-agent - INFO - User speech received: Yes. My mobile number 8447 571554.
2024-12-29 12:57:10,741 - voice-business-agent - INFO - User speech received: Yes. My mobile number 8447 571554.
2024-12-29 12:57:10,741 - voice-business-agent - DEBUG - Validating phone number from text: Yes. My mobile number 8447 571554.
2024-12-29 12:57:10,741 - voice-business-agent - INFO - Valid phone number found: 8447571554
2024-12-29 12:57:10,781 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'phone_number': '8447571554'}
2024-12-29 12:57:10,782 - voice-business-agent - INFO - Transferring call to 8447571554
2024-12-29 12:57:10,781 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'phone_number': '8447571554'}
2024-12-29 12:57:10,782 - voice-business-agent - INFO - Transferring call to 8447571554
2024-12-29 12:57:10,968 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:57:10,968 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:57:11,104 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 12:57:11,108 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:57:11,104 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 12:57:11,108 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:57:11,111 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:57:11,113 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 12:57:11,117 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:57:11,118 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:57:11,119 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:57:11,121 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'll connect you to an agent now.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:57:11,123 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:57:11,123 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:57:11,123 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:57:11,123 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:57:11,124 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:57:11,139 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x125c7ad50>
2024-12-29 12:57:11,139 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1237527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 12:57:11,154 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x122d28f50>
2024-12-29 12:57:11,155 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:57:11,155 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:57:11,155 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:57:11,155 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:57:11,155 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:57:11,972 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:27:11 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'469'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-m4gsq'), (b'x-envoy-upstream-service-time', b'449'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_ceeffea7147bbe4a1ff6cb77288762c2'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9810eeea8254d1-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:57:11,973 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:57:11,973 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:57:11,973 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:57:12,472 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:27:12 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1000'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-68dql'), (b'x-envoy-upstream-service-time', b'922'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_27fada10be132f62934e939abb0126b4'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9810eebd775519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:57:12,473 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:57:12,473 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:57:12,473 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:57:12,842 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:57:12,842 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:57:12,843 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:57:13,328 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:57:13,329 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:57:13,330 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:57:13,333 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:57:13,335 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:57:13,335 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:57:13,336 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:57:13,336 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:57:13,336 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:57:15,800 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:57:15,800 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:57:15,803 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:57:15,803 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:57:15,803 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:57:15,803 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:57:15,804 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:57:15,804 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:57:15,828 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:57:15,828 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:57:15,830 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:57:15,830 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:57:15,831 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:57:15,831 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:57:15,837 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:57:15,837 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:57:15,874 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:57:15,874 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:57:15,874 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:57:15,874 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:57:16,072 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:57:16,072 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:57:16,450 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:57:16,450 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:57:16,465 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:57:16,467 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:57:16,468 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:57:16,468 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:57:16,469 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:57:16,469 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:57:16,693 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:57:16,693 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:57:17,082 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:27:17 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'293'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29722'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'556ms'), (b'x-request-id', b'req_157a8c116d948e53a66ba3db3f2900ab'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9811101d895518-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:57:17,085 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:57:17,085 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:57:17,085 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:57:17,307 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Great! I’m connecting you now.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:57:17,308 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:57:17,309 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:57:17,309 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:57:17,309 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:57:17,309 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:57:17,336 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:57:17,336 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:57:17,336 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:57:17,828 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:27:17 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'3450'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-c2lpx'), (b'x-envoy-upstream-service-time', b'1195'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_0a839b71fff309a0715d1a69cd7ddd48'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9810fc8fdd5519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:57:17,830 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:57:17,831 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:57:17,831 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:57:17,832 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:57:17,832 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:57:17,833 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:57:17,914 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:57:17,914 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:57:17,914 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:57:17,914 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:57:18,985 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:27:19 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'776'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-bjrft'), (b'x-envoy-upstream-service-time', b'756'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_cd797417fe21de2f115f36eb6a1f0ead'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9811155a3454d1-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:57:18,987 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:57:18,987 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:57:18,988 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:57:19,831 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:57:19,831 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:57:19,832 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:57:21,113 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:57:21,114 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:57:21,113 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:57:21,114 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:57:21,128 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it. Uh, the uh,'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:57:21,129 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:57:21,130 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:57:21,130 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:57:21,130 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:57:21,130 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:57:21,755 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:27:21 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'312'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29719'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'562ms'), (b'x-request-id', b'req_ef7d4adb36a04de8b091e34cde437b5a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98112d4b735518-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:57:21,756 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:57:21,756 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:57:21,757 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:57:22,161 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:57:22,161 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:57:22,162 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:57:22,163 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'If you have any other requests or need further assistance while waiting, just let me know!', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:57:22,164 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:57:22,165 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:57:22,165 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:57:22,165 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:57:22,165 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:57:23,463 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:27:23 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'976'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-fk96t'), (b'x-envoy-upstream-service-time', b'959'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c4235bd593ca25f91c6f4e929e143a35'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981133bbc45519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:57:23,463 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:57:23,465 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:57:23,466 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:57:23,772 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:57:23,772 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:57:23,813 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:57:23,813 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:57:24,614 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:57:24,615 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:57:24,615 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:57:25,346 - voice-business-agent - INFO - User speech received: Got it. Uh, the uh,
2024-12-29 12:57:25,347 - voice-business-agent - INFO - User speech received: Got it. Uh, the uh,
2024-12-29 12:57:25,348 - voice-business-agent - DEBUG - Validating phone number from text: Got it. Uh, the uh,
2024-12-29 12:57:25,348 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:57:25,346 - voice-business-agent - INFO - User speech received: Got it. Uh, the uh,
2024-12-29 12:57:25,347 - voice-business-agent - INFO - User speech received: Got it. Uh, the uh,
2024-12-29 12:57:25,348 - voice-business-agent - DEBUG - Validating phone number from text: Got it. Uh, the uh,
2024-12-29 12:57:25,348 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:57:29,011 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:57:29,011 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:57:29,014 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:57:29,014 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:57:29,015 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:57:29,015 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:57:29,049 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:57:29,049 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:57:40,024 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:57:40,024 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:57:40,401 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:57:40,401 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:57:40,412 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it. Uh, the uh,'}, {'role': 'assistant', 'content': ' If you have any other requests or need further assistance while waiting, just let...'}, {'role': 'user', 'content': 'web server route.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:57:40,413 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:57:40,413 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:57:40,413 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:57:40,414 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:57:40,414 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:57:40,639 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:57:40,639 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:57:41,054 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:27:41 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'325'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29692'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'616ms'), (b'x-request-id', b'req_ff5174958343dd97338f72c40a13119a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9811a5c9f35518-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:57:41,054 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:57:41,054 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:57:41,054 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:57:41,412 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please clarify your request related to the web server route?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:57:41,414 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:57:41,415 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:57:41,415 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:57:41,415 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:57:41,416 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:57:41,604 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:57:41,605 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:57:41,605 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:57:42,950 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:27:42 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1226'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-pp5gl'), (b'x-envoy-upstream-service-time', b'1210'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_ef215e180ee608c015ff77de3720f3e5'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9811ac0bf55519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:57:42,951 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:57:42,951 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:57:42,952 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:57:43,205 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:57:43,205 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:57:43,241 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:57:43,241 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:57:44,019 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:57:44,020 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:57:44,020 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:57:44,023 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'This will help me assist you better.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:57:44,025 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:57:44,026 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:57:44,026 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:57:44,027 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:57:44,027 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:57:44,833 - voice-business-agent - INFO - User speech received: web server route.
2024-12-29 12:57:44,833 - voice-business-agent - INFO - User speech received: web server route.
2024-12-29 12:57:44,834 - voice-business-agent - DEBUG - Validating phone number from text: web server route.
2024-12-29 12:57:44,834 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:57:44,833 - voice-business-agent - INFO - User speech received: web server route.
2024-12-29 12:57:44,833 - voice-business-agent - INFO - User speech received: web server route.
2024-12-29 12:57:44,834 - voice-business-agent - DEBUG - Validating phone number from text: web server route.
2024-12-29 12:57:44,834 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:57:44,868 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:27:44 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'562'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-bmzrj'), (b'x-envoy-upstream-service-time', b'515'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_29e9fbce7ad7faf913c0c7c8bba0bea2'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9811bc59095519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:57:44,869 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:57:44,869 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:57:44,869 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:57:45,920 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:57:45,920 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:57:45,921 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:57:46,319 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:57:46,319 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:57:46,321 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:57:46,321 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:57:46,322 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:57:46,322 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:57:46,359 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:57:46,359 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:57:49,113 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:57:49,113 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:57:49,909 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:57:49,909 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:57:49,920 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it. Uh, the uh,'}, {'role': 'assistant', 'content': ' If you have any other requests or need further assistance while waiting, just let...'}, {'role': 'user', 'content': 'web server route.'}, {'role': 'assistant', 'content': ' Could you please clarify your request related...'}, {'role': 'user', 'content': 'I like to match static site now to'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:57:49,921 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:57:49,921 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:57:49,922 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:57:49,922 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:57:49,922 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:57:50,151 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:57:50,151 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:57:50,961 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:57:50,961 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:57:50,962 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 12:57:50,962 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:57:50,963 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:57:50,963 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:57:50,963 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:57:57,764 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:57:57,764 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:57:57,777 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it. Uh, the uh,'}, {'role': 'assistant', 'content': ' If you have any other requests or need further assistance while waiting, just let...'}, {'role': 'user', 'content': 'web server route.'}, {'role': 'assistant', 'content': ' Could you please clarify your request related...'}, {'role': 'user', 'content': 'I like to match static site now to'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:57:57,778 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 12:57:57,808 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x125e0f0d0>
2024-12-29 12:57:57,808 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x123752720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 12:57:57,823 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x122d00390>
2024-12-29 12:57:57,824 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:57:57,824 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:57:57,824 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:57:57,824 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:57:57,824 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:57:58,413 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:27:58 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'287'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29669'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'662ms'), (b'x-request-id', b'req_3154f4961f69c0be99614f8479aa0ca2'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9812129d5b5492-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:57:58,416 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:57:58,417 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:57:58,417 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:57:58,449 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:57:58,449 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:57:58,450 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 12:57:58,450 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:57:58,450 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:57:58,450 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:57:58,451 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:58:02,009 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:58:02,009 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:58:03,322 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:58:03,322 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:58:03,823 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:58:03,823 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:58:03,832 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it. Uh, the uh,'}, {'role': 'assistant', 'content': ' If you have any other requests or need further assistance while waiting, just let...'}, {'role': 'user', 'content': 'web server route.'}, {'role': 'assistant', 'content': ' Could you please clarify your request related...'}, {'role': 'user', 'content': 'I like to match static site now to Domain domain'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:58:03,833 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 12:58:03,842 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x125e66b50>
2024-12-29 12:58:03,843 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x123752720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 12:58:03,858 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x125e53890>
2024-12-29 12:58:03,858 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:58:03,858 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:58:03,858 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:58:03,858 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:58:03,859 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:58:04,507 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:28:04 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'324'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29666'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'668ms'), (b'x-request-id', b'req_bd0a89a89e69b9808622f2c7b1cb6d8a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9812385eeb54e8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:58:04,507 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:58:04,508 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:58:04,508 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:58:04,969 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "To assist you better with matching a static site to a domain, I'll connect you to a technical support agent.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:58:04,971 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:58:04,972 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:58:04,972 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:58:04,972 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:58:04,972 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:58:05,290 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:58:05,290 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:58:05,290 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:58:05,791 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:28:05 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'487'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-d6qcw'), (b'x-envoy-upstream-service-time', b'470'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_712747ccc9c07f1b2cfc9fffa628823c'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98123f4ecf5519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:58:05,793 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:58:05,793 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:58:05,794 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:58:06,072 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:58:06,072 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:58:06,109 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:58:06,109 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:58:07,224 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:58:07,224 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:58:07,224 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:58:07,226 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please confirm if the mobile number I have, 8447571554, is correct for the connection.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:58:07,227 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:58:07,227 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:58:07,227 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:58:07,228 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:58:07,228 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:58:07,648 - voice-business-agent - INFO - User speech received: I like to match static site now to Domain domain
2024-12-29 12:58:07,649 - voice-business-agent - INFO - User speech received: I like to match static site now to Domain domain
2024-12-29 12:58:07,649 - voice-business-agent - DEBUG - Validating phone number from text: I like to match static site now to Domain domain
2024-12-29 12:58:07,649 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:58:07,648 - voice-business-agent - INFO - User speech received: I like to match static site now to Domain domain
2024-12-29 12:58:07,649 - voice-business-agent - INFO - User speech received: I like to match static site now to Domain domain
2024-12-29 12:58:07,649 - voice-business-agent - DEBUG - Validating phone number from text: I like to match static site now to Domain domain
2024-12-29 12:58:07,649 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:58:08,142 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:28:08 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'623'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-c2lpx'), (b'x-envoy-upstream-service-time', b'600'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_ad96182ccf9f0cb34370ca991ca6e884'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98124d588f5519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:58:08,142 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:58:08,143 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:58:08,143 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:58:09,734 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:58:09,735 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:58:09,736 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:58:11,540 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:58:11,540 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:58:11,543 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:58:11,543 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:58:11,543 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:58:11,543 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:58:11,579 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:58:11,579 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:58:24,383 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:58:24,383 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:58:26,679 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:58:26,679 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:58:26,687 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it. Uh, the uh,'}, {'role': 'assistant', 'content': ' If you have any other requests or need further assistance while waiting, just let...'}, {'role': 'user', 'content': 'web server route.'}, {'role': 'assistant', 'content': ' Could you please clarify your request related...'}, {'role': 'user', 'content': 'I like to match static site now to Domain domain'}, {'role': 'assistant', 'content': " To assist you better with matching a static site to a domain, I'll connect..."}, {'role': 'user', 'content': 'Yeah. Well, I see I got a'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:58:26,688 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:58:26,688 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:58:26,688 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:58:26,689 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:58:26,689 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:58:26,923 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:58:26,923 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:58:27,273 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:28:27 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'269'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29638'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'724ms'), (b'x-request-id', b'req_2036d4e34b7d019288405d1ae3777808'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9812c709c354e8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:58:27,275 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:58:27,276 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:58:27,279 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:58:27,530 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:58:27,534 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:58:27,538 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:58:27,541 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'If you need further assistance or have another question...', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:58:27,543 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:58:27,543 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:58:27,544 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:58:27,544 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:58:27,544 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:58:27,598 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:58:27,598 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:58:27,599 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:58:27,599 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:58:28,624 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:28:28 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'792'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-d6twl'), (b'x-envoy-upstream-service-time', b'778'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c31fb498a30473871196a2927af43e3e'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9812cc5a195519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:58:28,625 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:58:28,625 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:58:28,626 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:58:29,904 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:58:29,905 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:58:29,905 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:58:39,075 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:58:39,075 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:58:39,096 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it. Uh, the uh,'}, {'role': 'assistant', 'content': ' If you have any other requests or need further assistance while waiting, just let...'}, {'role': 'user', 'content': 'web server route.'}, {'role': 'assistant', 'content': ' Could you please clarify your request related...'}, {'role': 'user', 'content': 'I like to match static site now to Domain domain'}, {'role': 'assistant', 'content': " To assist you better with matching a static site to a domain, I'll connect..."}, {'role': 'user', 'content': 'Yeah. Well, I see I got a'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:58:39,098 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:58:39,098 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:58:39,098 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:58:39,099 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:58:39,099 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:58:39,744 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:28:39 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'309'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29638'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'724ms'), (b'x-request-id', b'req_ac6822ef7fce2ccf953ef7637e48b68e'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9813149ecf54e8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:58:39,747 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:58:39,748 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:58:39,748 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:58:40,398 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:58:40,398 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:58:40,399 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:58:40,401 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "If you could provide a bit more detail about what you're seeing or experiencing, I can assist...", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:58:40,402 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:58:40,402 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:58:40,403 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:58:40,403 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:58:40,403 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:58:41,322 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:28:41 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'623'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-kbdds'), (b'x-envoy-upstream-service-time', b'600'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_eb131e5f9d93520a60d430473f31025a'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98131cbab85519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:58:41,322 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:58:41,323 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:58:41,323 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:58:41,575 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:58:41,575 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:58:41,619 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:58:41,619 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:58:43,050 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:58:43,051 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:58:43,051 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:58:43,110 - voice-business-agent - INFO - User speech received: Yeah. Well, I see I got a
2024-12-29 12:58:43,110 - voice-business-agent - INFO - User speech received: Yeah. Well, I see I got a
2024-12-29 12:58:43,110 - voice-business-agent - DEBUG - Validating phone number from text: Yeah. Well, I see I got a
2024-12-29 12:58:43,110 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:58:43,110 - voice-business-agent - INFO - User speech received: Yeah. Well, I see I got a
2024-12-29 12:58:43,110 - voice-business-agent - INFO - User speech received: Yeah. Well, I see I got a
2024-12-29 12:58:43,110 - voice-business-agent - DEBUG - Validating phone number from text: Yeah. Well, I see I got a
2024-12-29 12:58:43,110 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:58:45,971 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:58:45,971 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:58:45,973 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:58:45,973 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:58:45,974 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:58:45,974 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:58:46,007 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:58:46,007 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:58:48,778 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:58:48,778 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:58:49,099 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:58:49,099 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:58:49,118 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it. Uh, the uh,'}, {'role': 'assistant', 'content': ' If you have any other requests or need further assistance while waiting, just let...'}, {'role': 'user', 'content': 'web server route.'}, {'role': 'assistant', 'content': ' Could you please clarify your request related...'}, {'role': 'user', 'content': 'I like to match static site now to Domain domain'}, {'role': 'assistant', 'content': " To assist you better with matching a static site to a domain, I'll connect..."}, {'role': 'user', 'content': 'Yeah. Well, I see I got a'}, {'role': 'assistant', 'content': " If you could provide a bit more detail about what you're seeing or experiencing..."}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:58:49,120 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:58:49,121 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:58:49,121 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:58:49,121 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:58:49,121 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:58:49,342 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:58:49,342 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:58:49,728 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:28:49 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'298'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29607'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'786ms'), (b'x-request-id', b'req_8a43346f2bfaf8ca105ed9ae68278c85'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9813533f7f54e8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:58:49,731 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:58:49,731 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:58:49,731 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:58:50,166 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:58:50,166 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:58:50,167 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:58:50,171 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Certainly! Could you please provide your mobile number so I can connect you with an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:58:50,173 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:58:50,174 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:58:50,174 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:58:50,174 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:58:50,174 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:58:51,323 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:28:51 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'825'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-6rv56'), (b'x-envoy-upstream-service-time', b'779'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_6dc15e565b8deca64ef2762aa79042f5'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981359c9705519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:58:51,325 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:58:51,325 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:58:51,325 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:58:51,587 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:58:51,587 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:58:51,625 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:58:51,625 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:58:52,664 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:58:52,664 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:58:52,665 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:58:53,131 - voice-business-agent - INFO - User speech received: Hello? Please connect me to agent.
2024-12-29 12:58:53,132 - voice-business-agent - INFO - User speech received: Hello? Please connect me to agent.
2024-12-29 12:58:53,132 - voice-business-agent - DEBUG - Validating phone number from text: Hello? Please connect me to agent.
2024-12-29 12:58:53,132 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:58:53,131 - voice-business-agent - INFO - User speech received: Hello? Please connect me to agent.
2024-12-29 12:58:53,132 - voice-business-agent - INFO - User speech received: Hello? Please connect me to agent.
2024-12-29 12:58:53,132 - voice-business-agent - DEBUG - Validating phone number from text: Hello? Please connect me to agent.
2024-12-29 12:58:53,132 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:58:57,091 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:58:57,091 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:58:57,093 - voice-business-agent - INFO - User speech received:  Certainly! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 12:58:57,094 - voice-business-agent - DEBUG - Validating phone number from text:  Certainly! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 12:58:57,094 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:58:57,094 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:58:57,093 - voice-business-agent - INFO - User speech received:  Certainly! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 12:58:57,094 - voice-business-agent - DEBUG - Validating phone number from text:  Certainly! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 12:58:57,094 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:58:57,094 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:58:57,127 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:58:57,127 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:59:02,533 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:59:02,533 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:59:02,910 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:59:02,910 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:59:02,922 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it. Uh, the uh,'}, {'role': 'assistant', 'content': ' If you have any other requests or need further assistance while waiting, just let...'}, {'role': 'user', 'content': 'web server route.'}, {'role': 'assistant', 'content': ' Could you please clarify your request related...'}, {'role': 'user', 'content': 'I like to match static site now to Domain domain'}, {'role': 'assistant', 'content': " To assist you better with matching a static site to a domain, I'll connect..."}, {'role': 'user', 'content': 'Yeah. Well, I see I got a'}, {'role': 'assistant', 'content': " If you could provide a bit more detail about what you're seeing or experiencing..."}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': "Yeah. It's 8, double 4, 7571554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:59:02,923 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:59:02,923 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:59:02,924 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:59:02,924 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:59:02,924 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:59:03,152 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:59:03,152 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:59:03,504 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:29:03 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'274'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29574'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'852ms'), (b'x-request-id', b'req_28ca9abc86c10547b6462f769da41080'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9813a979a854e8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:59:03,505 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:59:03,506 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:59:03,506 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:59:04,053 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you! Just to confirm, your mobile number is 8447571554, correct?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:59:04,054 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:59:04,054 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:59:04,054 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:59:04,054 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:59:04,054 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:59:04,354 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:59:04,354 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:59:04,355 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:59:05,368 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:29:05 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'953'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-vqswm'), (b'x-envoy-upstream-service-time', b'928'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_6544dd7180b2287e6f8028995ecc9183'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9813b08f235519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:59:05,370 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:59:05,370 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:59:05,370 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:59:05,647 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:59:05,647 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:59:05,686 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:59:05,686 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:59:07,019 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:59:07,020 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:59:07,021 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:59:07,023 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I will connect you with an agent now.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:59:07,024 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:59:07,025 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:59:07,025 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:59:07,025 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:59:07,025 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:59:07,345 - voice-business-agent - INFO - User speech received: Yeah. It's 8, double 4, 7571554.
2024-12-29 12:59:07,346 - voice-business-agent - INFO - User speech received: Yeah. It's 8, double 4, 7571554.
2024-12-29 12:59:07,346 - voice-business-agent - DEBUG - Validating phone number from text: Yeah. It's 8, double 4, 7571554.
2024-12-29 12:59:07,346 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:59:07,345 - voice-business-agent - INFO - User speech received: Yeah. It's 8, double 4, 7571554.
2024-12-29 12:59:07,346 - voice-business-agent - INFO - User speech received: Yeah. It's 8, double 4, 7571554.
2024-12-29 12:59:07,346 - voice-business-agent - DEBUG - Validating phone number from text: Yeah. It's 8, double 4, 7571554.
2024-12-29 12:59:07,346 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:59:08,108 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:29:08 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'791'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-c2lpx'), (b'x-envoy-upstream-service-time', b'768'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b41254543fdc9828aedd14eaf4b17e2f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9813c31e395519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:59:08,110 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:59:08,111 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:59:08,111 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:59:09,126 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:59:09,127 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:59:09,129 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:59:09,133 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:59:09,135 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:59:09,135 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:59:09,136 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:59:09,136 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:59:09,136 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:59:10,162 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:29:10 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'722'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-57952'), (b'x-envoy-upstream-service-time', b'699'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_ef2932657ab458d13ac3d0a530765da1'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9813d04e465519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:59:10,163 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:59:10,163 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:59:10,163 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:59:10,695 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:59:10,695 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:59:10,695 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:59:12,830 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:59:12,830 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:59:12,831 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:59:12,832 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:59:12,831 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:59:12,832 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:59:12,851 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it. Uh, the uh,'}, {'role': 'assistant', 'content': ' If you have any other requests or need further assistance while waiting, just let...'}, {'role': 'user', 'content': 'web server route.'}, {'role': 'assistant', 'content': ' Could you please clarify your request related...'}, {'role': 'user', 'content': 'I like to match static site now to Domain domain'}, {'role': 'assistant', 'content': " To assist you better with matching a static site to a domain, I'll connect..."}, {'role': 'user', 'content': 'Yeah. Well, I see I got a'}, {'role': 'assistant', 'content': " If you could provide a bit more detail about what you're seeing or experiencing..."}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': "Yeah. It's 8, double 4, 7571554."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 8447571554, correct? I will connect you with an agent now'}, {'role': 'user', 'content': 'No.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:59:12,854 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:59:12,854 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:59:12,854 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:59:12,855 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:59:12,855 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:59:12,856 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:59:12,856 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:59:12,856 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:59:12,856 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:59:12,893 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:59:12,893 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:59:13,429 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:59:13,429 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 12:59:13,430 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 12:59:13,430 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:59:13,430 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:59:13,430 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:59:13,431 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:59:15,576 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:59:15,576 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:59:18,179 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:59:18,179 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 12:59:18,422 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:59:18,422 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 12:59:18,442 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it. Uh, the uh,'}, {'role': 'assistant', 'content': ' If you have any other requests or need further assistance while waiting, just let...'}, {'role': 'user', 'content': 'web server route.'}, {'role': 'assistant', 'content': ' Could you please clarify your request related...'}, {'role': 'user', 'content': 'I like to match static site now to Domain domain'}, {'role': 'assistant', 'content': " To assist you better with matching a static site to a domain, I'll connect..."}, {'role': 'user', 'content': 'Yeah. Well, I see I got a'}, {'role': 'assistant', 'content': " If you could provide a bit more detail about what you're seeing or experiencing..."}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': "Yeah. It's 8, double 4, 7571554."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 8447571554, correct? I will connect you with an agent now....'}, {'role': 'user', 'content': "No. It's the 8447 571-554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 12:59:18,443 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 12:59:18,464 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x125cc5590>
2024-12-29 12:59:18,464 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x123752720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 12:59:18,476 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1237fbed0>
2024-12-29 12:59:18,476 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:59:18,476 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:59:18,476 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:59:18,477 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:59:18,477 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:59:18,747 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:59:18,747 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 12:59:19,106 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:29:19 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'318'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29537'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'926ms'), (b'x-request-id', b'req_e84fe1b751bf6c59f8f5196051d445a8'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98140aa8f95477-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:59:19,108 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 12:59:19,108 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 12:59:19,109 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:59:19,423 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Got it! Your mobile number is 8447571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:59:19,426 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:59:19,426 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:59:19,426 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:59:19,427 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:59:19,427 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:59:19,654 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:59:19,655 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:59:19,655 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:59:20,791 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:29:20 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1063'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-cg2rq'), (b'x-envoy-upstream-service-time', b'1052'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a3e67aaac60f0e455ef9bcab358ec633'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9814109d925519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:59:20,793 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:59:20,793 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:59:20,794 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:59:21,082 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:59:21,082 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:59:21,119 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:59:21,119 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:59:21,860 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:59:21,861 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:59:21,861 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:59:21,862 - httpcore.connection - DEBUG - close.started
2024-12-29 12:59:21,862 - httpcore.connection - DEBUG - close.complete
2024-12-29 12:59:21,864 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I will connect you with an agent now.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:59:21,865 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:59:21,865 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:59:21,866 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:59:21,866 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:59:21,866 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:59:22,666 - voice-business-agent - INFO - User speech received: No. It's the 8447 571-554.
2024-12-29 12:59:22,666 - voice-business-agent - INFO - User speech received: No. It's the 8447 571-554.
2024-12-29 12:59:22,666 - voice-business-agent - DEBUG - Validating phone number from text: No. It's the 8447 571-554.
2024-12-29 12:59:22,666 - voice-business-agent - INFO - Valid phone number found: 8447571554
2024-12-29 12:59:22,666 - voice-business-agent - INFO - User speech received: No. It's the 8447 571-554.
2024-12-29 12:59:22,666 - voice-business-agent - INFO - User speech received: No. It's the 8447 571-554.
2024-12-29 12:59:22,666 - voice-business-agent - DEBUG - Validating phone number from text: No. It's the 8447 571-554.
2024-12-29 12:59:22,666 - voice-business-agent - INFO - Valid phone number found: 8447571554
2024-12-29 12:59:22,700 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:59:22,701 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 12:59:22,711 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x125e6ad50>
2024-12-29 12:59:22,712 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1237527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 12:59:22,730 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x125e6ae90>
2024-12-29 12:59:22,730 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:59:22,730 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:59:22,730 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:59:22,731 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:59:22,731 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:59:22,862 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:29:22 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'691'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-x8jlx'), (b'x-envoy-upstream-service-time', b'681'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c9fe9939a49c038753775053e3432ad1'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98141fd9be5519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:59:22,863 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:59:22,863 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:59:22,863 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:59:23,516 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:29:23 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'472'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-5bf2w'), (b'x-envoy-upstream-service-time', b'447'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_9620c0b52fd08ca7e600c3bd5c934478'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981425499b9197-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:59:23,517 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:59:23,518 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:59:23,518 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:59:23,668 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:59:23,669 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:59:23,670 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:59:23,673 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:59:23,674 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:59:23,675 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:59:23,675 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:59:23,676 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:59:23,676 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:59:24,246 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:59:24,247 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:59:24,247 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:59:24,559 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:29:24 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'586'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-x7gdm'), (b'x-envoy-upstream-service-time', b'562'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_89a6469c91401a45c2795b4f585d4ba8'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98142b28245519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:59:24,561 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:59:24,563 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:59:24,563 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:59:25,042 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:59:25,042 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:59:25,043 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:59:28,174 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:59:28,174 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:59:28,175 - voice-business-agent - INFO - User speech received:  Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.
2024-12-29 12:59:28,176 - voice-business-agent - DEBUG - Validating phone number from text:  Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.
2024-12-29 12:59:28,175 - voice-business-agent - INFO - User speech received:  Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.
2024-12-29 12:59:28,176 - voice-business-agent - INFO - Valid phone number found: 8447571554
2024-12-29 12:59:28,176 - voice-business-agent - DEBUG - Validating phone number from text:  Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.
2024-12-29 12:59:28,176 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:59:28,176 - voice-business-agent - INFO - Transferring call to 
2024-12-29 12:59:28,176 - voice-business-agent - INFO - Valid phone number found: 8447571554
2024-12-29 12:59:28,176 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:59:28,176 - voice-business-agent - INFO - Transferring call to 
2024-12-29 12:59:28,215 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:59:28,215 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 12:59:28,280 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 74
2024-12-29 12:59:28,280 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 74
2024-12-29 12:59:28,282 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:59:28,282 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 12:59:28,284 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:59:28,284 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:59:28,284 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Call transfer initiated. You'll receive a call shortly.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 12:59:28,286 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 12:59:28,286 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 12:59:28,286 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 12:59:28,287 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:59:28,287 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:59:28,287 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 12:59:28,287 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 12:59:28,323 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:59:28,323 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:59:29,009 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:29:29 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'417'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-n879x'), (b'x-envoy-upstream-service-time', b'401'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_5240154ce69c0947776309a4bed4635d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981447feb45519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 12:59:29,009 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 12:59:29,009 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 12:59:29,009 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 12:59:30,735 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 12:59:30,736 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 12:59:30,736 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 12:59:31,013 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:59:31,013 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:59:31,013 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 12:59:31,013 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 12:59:31,013 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:59:31,013 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:59:31,013 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 12:59:31,013 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 12:59:31,013 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:59:31,013 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:59:31,014 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:59:31,014 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 12:59:31,046 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:59:31,046 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:59:31,079 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:59:31,079 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 12:59:34,256 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:59:34,256 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 12:59:34,256 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:59:34,257 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:59:34,256 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:59:34,257 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:59:34,257 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 12:59:34,257 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:59:34,257 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 12:59:34,257 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 12:59:34,291 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 12:59:34,291 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:00:16,425 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:00:16,425 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:00:16,748 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:00:16,748 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:00:16,763 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it. Uh, the uh,'}, {'role': 'assistant', 'content': ' If you have any other requests or need further assistance while waiting, just let...'}, {'role': 'user', 'content': 'web server route.'}, {'role': 'assistant', 'content': ' Could you please clarify your request related...'}, {'role': 'user', 'content': 'I like to match static site now to Domain domain'}, {'role': 'assistant', 'content': " To assist you better with matching a static site to a domain, I'll connect..."}, {'role': 'user', 'content': 'Yeah. Well, I see I got a'}, {'role': 'assistant', 'content': " If you could provide a bit more detail about what you're seeing or experiencing..."}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': "Yeah. It's 8, double 4, 7571554."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 8447571554, correct? I will connect you with an agent now....'}, {'role': 'user', 'content': "No. It's the 8447 571-554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:00:16,764 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:00:16,765 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:00:16,765 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:00:16,765 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:00:16,765 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:00:16,995 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:00:16,995 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:00:17,436 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:30:17 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'370'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29479'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'1.042s'), (b'x-request-id', b'req_bce58cb34fcd7cbd9083b6704d5a039f'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981576fdcd5477-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:00:17,437 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:00:17,437 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:00:17,437 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:00:17,833 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:00:17,833 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:00:17,833 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:00:17,834 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Certainly! Could you please provide your mobile number so I can connect you with an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:00:17,835 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:00:17,835 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:00:17,835 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:00:17,836 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:00:17,836 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:00:18,991 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:30:19 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'835'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-25pmb'), (b'x-envoy-upstream-service-time', b'816'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_4dcbd0ad0389da4ec465c52a29d38af0'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98157dabf65519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:00:18,993 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:00:18,993 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:00:18,993 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:00:19,251 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:00:19,251 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:00:19,289 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:00:19,289 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:00:20,314 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:00:20,314 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:00:20,314 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:00:20,785 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 13:00:20,785 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 13:00:20,785 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to agent.
2024-12-29 13:00:20,785 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:00:20,785 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 13:00:20,785 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 13:00:20,785 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to agent.
2024-12-29 13:00:20,785 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:00:24,105 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:00:24,105 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:00:24,105 - voice-business-agent - INFO - User speech received:  Certainly! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 13:00:24,106 - voice-business-agent - DEBUG - Validating phone number from text:  Certainly! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 13:00:24,106 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:00:24,105 - voice-business-agent - INFO - User speech received:  Certainly! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 13:00:24,106 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:00:24,106 - voice-business-agent - DEBUG - Validating phone number from text:  Certainly! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 13:00:24,106 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:00:24,106 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:00:24,200 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:00:24,200 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:00:29,617 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:00:29,617 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:00:29,998 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:00:29,998 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:00:30,028 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it. Uh, the uh,'}, {'role': 'assistant', 'content': ' If you have any other requests or need further assistance while waiting, just let...'}, {'role': 'user', 'content': 'web server route.'}, {'role': 'assistant', 'content': ' Could you please clarify your request related...'}, {'role': 'user', 'content': 'I like to match static site now to Domain domain'}, {'role': 'assistant', 'content': " To assist you better with matching a static site to a domain, I'll connect..."}, {'role': 'user', 'content': 'Yeah. Well, I see I got a'}, {'role': 'assistant', 'content': " If you could provide a bit more detail about what you're seeing or experiencing..."}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': "Yeah. It's 8, double 4, 7571554."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 8447571554, correct? I will connect you with an agent now....'}, {'role': 'user', 'content': "No. It's the 8447 571-554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yeah. I see 8, double 4, 7, 571, double 5.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:00:30,030 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:00:30,031 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:00:30,031 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:00:30,032 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:00:30,032 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:00:30,321 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:00:30,321 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:00:33,599 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:30:33 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'393'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29443'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'1.114s'), (b'x-request-id', b'req_78d9af066996f75bf6344d38583a34f6'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9815c9ecbc5477-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:00:33,601 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:00:33,601 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:00:33,601 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:00:33,913 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you! Just to confirm, your mobile number is 8447571555, correct?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:00:33,914 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:00:33,914 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:00:33,914 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:00:33,915 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:00:33,915 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:00:34,603 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:00:34,604 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:00:34,604 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:00:34,914 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:30:34 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'631'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-pp5gl'), (b'x-envoy-upstream-service-time', b'621'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_0357da656ec5614cba61f9500216da3b'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9815e22e145519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:00:34,916 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:00:34,916 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:00:34,917 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:00:35,170 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:00:35,170 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:00:35,295 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:00:35,295 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:00:36,123 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:00:36,123 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:00:36,123 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:00:36,125 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'll connect you to an agent now.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:00:36,126 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:00:36,127 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:00:36,127 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:00:36,127 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:00:36,127 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:00:36,857 - voice-business-agent - INFO - User speech received: Yeah. I see 8, double 4, 7, 571, double 5.
2024-12-29 13:00:36,858 - voice-business-agent - INFO - User speech received: Yeah. I see 8, double 4, 7, 571, double 5.
2024-12-29 13:00:36,858 - voice-business-agent - DEBUG - Validating phone number from text: Yeah. I see 8, double 4, 7, 571, double 5.
2024-12-29 13:00:36,859 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:00:36,857 - voice-business-agent - INFO - User speech received: Yeah. I see 8, double 4, 7, 571, double 5.
2024-12-29 13:00:36,858 - voice-business-agent - INFO - User speech received: Yeah. I see 8, double 4, 7, 571, double 5.
2024-12-29 13:00:36,858 - voice-business-agent - DEBUG - Validating phone number from text: Yeah. I see 8, double 4, 7, 571, double 5.
2024-12-29 13:00:36,859 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:00:37,380 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:30:37 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'925'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-6s6dq'), (b'x-envoy-upstream-service-time', b'916'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_380352b7115bed70c85d38b3a1530044'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9815efff615519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:00:37,380 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:00:37,380 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:00:37,380 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:00:38,243 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:00:38,244 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:00:38,245 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:00:38,248 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:00:38,249 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:00:38,249 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:00:38,250 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:00:38,250 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:00:38,250 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:00:39,337 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:30:39 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'798'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-9bmwj'), (b'x-envoy-upstream-service-time', b'780'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_27c8de0294ead47e36c79f2043e08136'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9815fd4ead5519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:00:39,337 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:00:39,338 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:00:39,338 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:00:39,848 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:00:39,848 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:00:39,849 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:00:43,677 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:00:43,677 - voice-business-agent - INFO - User speech received:  Thank you! Just to confirm, your mobile number is 8447571555, correct? I'll connect you to an agent now. Please hold on.
2024-12-29 13:00:43,677 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:00:43,677 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you! Just to confirm, your mobile number is 8447571555, correct? I'll connect you to an agent now. Please hold on.
2024-12-29 13:00:43,678 - voice-business-agent - INFO - Valid phone number found: 8447571555
2024-12-29 13:00:43,678 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:00:43,677 - voice-business-agent - INFO - User speech received:  Thank you! Just to confirm, your mobile number is 8447571555, correct? I'll connect you to an agent now. Please hold on.
2024-12-29 13:00:43,678 - voice-business-agent - INFO - Transferring call to 
2024-12-29 13:00:43,677 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you! Just to confirm, your mobile number is 8447571555, correct? I'll connect you to an agent now. Please hold on.
2024-12-29 13:00:43,678 - voice-business-agent - INFO - Valid phone number found: 8447571555
2024-12-29 13:00:43,678 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:00:43,678 - voice-business-agent - INFO - Transferring call to 
2024-12-29 13:00:43,705 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:00:43,705 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:00:43,775 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 74
2024-12-29 13:00:43,777 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:00:43,775 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 74
2024-12-29 13:00:43,777 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:00:43,779 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:00:43,779 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:00:43,779 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Call transfer initiated. You'll receive a call shortly.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:00:43,781 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:00:43,781 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:00:43,781 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:00:43,781 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:00:43,782 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:00:44,695 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:30:44 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'605'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-6cmnp'), (b'x-envoy-upstream-service-time', b'575'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_0d5bfabe61579eee98a3dda7e4530b55'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98161fdb6a5519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:00:44,695 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:00:44,696 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:00:44,696 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:00:44,935 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:00:44,935 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:00:44,975 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:00:44,975 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:00:45,690 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:00:45,690 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:00:45,690 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:00:48,266 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:00:48,266 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:00:48,266 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 13:00:48,266 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 13:00:48,266 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:00:48,267 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:00:48,266 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 13:00:48,266 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 13:00:48,266 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:00:48,267 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:00:48,299 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:00:48,299 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:01:36,574 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:01:36,574 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:01:36,952 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:01:36,952 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:01:36,972 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it. Uh, the uh,'}, {'role': 'assistant', 'content': ' If you have any other requests or need further assistance while waiting, just let...'}, {'role': 'user', 'content': 'web server route.'}, {'role': 'assistant', 'content': ' Could you please clarify your request related...'}, {'role': 'user', 'content': 'I like to match static site now to Domain domain'}, {'role': 'assistant', 'content': " To assist you better with matching a static site to a domain, I'll connect..."}, {'role': 'user', 'content': 'Yeah. Well, I see I got a'}, {'role': 'assistant', 'content': " If you could provide a bit more detail about what you're seeing or experiencing..."}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': "Yeah. It's 8, double 4, 7571554."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 8447571554, correct? I will connect you with an agent now....'}, {'role': 'user', 'content': "No. It's the 8447 571-554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yeah. I see 8, double 4, 7, 571, double 5.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571555, correct? I'll connect you to an agent now. Please hold on."}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:01:36,973 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:01:36,973 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:01:36,973 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:01:36,974 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:01:36,974 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:01:37,191 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:01:37,191 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:01:37,622 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:31:37 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'341'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29395'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'1.21s'), (b'x-request-id', b'req_e21dd1bdbfcecd9b8462abdb9f50c5e7'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98176c4a885477-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:01:37,622 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:01:37,622 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:01:37,623 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:01:37,819 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:01:37,819 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:01:37,819 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:01:37,821 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you further today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:01:37,822 - httpcore.connection - DEBUG - close.started
2024-12-29 13:01:37,823 - httpcore.connection - DEBUG - close.complete
2024-12-29 13:01:37,823 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:01:37,823 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:01:37,823 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:01:37,823 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:01:37,824 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:01:38,563 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:31:38 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'446'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-sjc95'), (b'x-envoy-upstream-service-time', b'432'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_69cd4c7897401872376cd91c6313e20d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981771996c5519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:01:38,564 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:01:38,564 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:01:38,564 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:01:38,841 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:01:38,841 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:01:38,887 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:01:38,887 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:01:39,302 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:01:39,303 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:01:39,303 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:01:40,382 - voice-business-agent - INFO - User speech received: Hello.
2024-12-29 13:01:40,383 - voice-business-agent - INFO - User speech received: Hello.
2024-12-29 13:01:40,383 - voice-business-agent - DEBUG - Validating phone number from text: Hello.
2024-12-29 13:01:40,383 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:01:40,382 - voice-business-agent - INFO - User speech received: Hello.
2024-12-29 13:01:40,383 - voice-business-agent - INFO - User speech received: Hello.
2024-12-29 13:01:40,383 - voice-business-agent - DEBUG - Validating phone number from text: Hello.
2024-12-29 13:01:40,383 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:01:41,381 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:01:41,381 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:01:41,381 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you further today?
2024-12-29 13:01:41,381 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you further today?
2024-12-29 13:01:41,381 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you further today?
2024-12-29 13:01:41,381 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:01:41,382 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:01:41,381 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you further today?
2024-12-29 13:01:41,381 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:01:41,382 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:01:41,416 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:01:41,416 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:01:45,527 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:01:45,527 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:01:45,530 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:01:45,530 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:01:45,555 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it. Uh, the uh,'}, {'role': 'assistant', 'content': ' If you have any other requests or need further assistance while waiting, just let...'}, {'role': 'user', 'content': 'web server route.'}, {'role': 'assistant', 'content': ' Could you please clarify your request related...'}, {'role': 'user', 'content': 'I like to match static site now to Domain domain'}, {'role': 'assistant', 'content': " To assist you better with matching a static site to a domain, I'll connect..."}, {'role': 'user', 'content': 'Yeah. Well, I see I got a'}, {'role': 'assistant', 'content': " If you could provide a bit more detail about what you're seeing or experiencing..."}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': "Yeah. It's 8, double 4, 7571554."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 8447571554, correct? I will connect you with an agent now....'}, {'role': 'user', 'content': "No. It's the 8447 571-554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yeah. I see 8, double 4, 7, 571, double 5.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571555, correct? I'll connect you to an agent now. Please hold on."}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you further today?'}, {'role': 'user', 'content': 'Connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:01:45,557 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:01:45,557 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:01:45,557 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:01:45,558 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:01:45,558 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:01:45,766 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:01:45,766 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:01:46,170 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:31:46 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'278'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29377'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'1.246s'), (b'x-request-id', b'req_a81ccf7d0ed45b75c6ecdd72897849f1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9817a1e9a05477-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:01:46,170 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:01:46,171 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:01:46,171 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:01:46,478 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:01:46,480 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:01:46,480 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:01:46,483 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Certainly! Could you please provide your mobile number so I can connect you with an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:01:46,485 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:01:46,485 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:01:46,486 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:01:46,486 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:01:46,486 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:01:47,690 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:31:47 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'875'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-4c6dw'), (b'x-envoy-upstream-service-time', b'845'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_60d64b0f802776a3177644855a21d967'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9817a7bb775519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:01:47,690 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:01:47,690 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:01:47,690 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:01:47,985 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:01:47,985 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:01:48,022 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:01:48,022 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:01:49,140 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:01:49,141 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:01:49,141 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:01:49,572 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 13:01:49,572 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 13:01:49,573 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to agent.
2024-12-29 13:01:49,573 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:01:49,572 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 13:01:49,572 - voice-business-agent - INFO - User speech received: Connect me to agent.
2024-12-29 13:01:49,573 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to agent.
2024-12-29 13:01:49,573 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:01:53,290 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:01:53,290 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:01:53,291 - voice-business-agent - INFO - User speech received:  Certainly! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 13:01:53,291 - voice-business-agent - DEBUG - Validating phone number from text:  Certainly! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 13:01:53,291 - voice-business-agent - INFO - User speech received:  Certainly! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 13:01:53,291 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:01:53,291 - voice-business-agent - DEBUG - Validating phone number from text:  Certainly! Could you please provide your mobile number so I can connect you with an agent?
2024-12-29 13:01:53,292 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:01:53,291 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:01:53,292 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:01:53,338 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:01:53,338 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:01:57,730 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:01:57,730 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:01:58,107 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:01:58,107 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:01:58,141 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it. Uh, the uh,'}, {'role': 'assistant', 'content': ' If you have any other requests or need further assistance while waiting, just let...'}, {'role': 'user', 'content': 'web server route.'}, {'role': 'assistant', 'content': ' Could you please clarify your request related...'}, {'role': 'user', 'content': 'I like to match static site now to Domain domain'}, {'role': 'assistant', 'content': " To assist you better with matching a static site to a domain, I'll connect..."}, {'role': 'user', 'content': 'Yeah. Well, I see I got a'}, {'role': 'assistant', 'content': " If you could provide a bit more detail about what you're seeing or experiencing..."}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': "Yeah. It's 8, double 4, 7571554."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 8447571554, correct? I will connect you with an agent now....'}, {'role': 'user', 'content': "No. It's the 8447 571-554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yeah. I see 8, double 4, 7, 571, double 5.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571555, correct? I'll connect you to an agent now. Please hold on."}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you further today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': '8, double 4, 7, 5, 7, 1554.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:01:58,142 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:01:58,143 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:01:58,143 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:01:58,143 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:01:58,143 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:01:58,344 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:01:58,344 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:01:58,751 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:31:58 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'307'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29345'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'1.31s'), (b'x-request-id', b'req_c7ce98bb4fdd8f28a9867118d9513168'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9817f09a5b5477-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:01:58,752 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:01:58,752 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:01:58,753 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:01:59,301 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you! Just to confirm, your mobile number is 8447571554, correct?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:01:59,303 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:01:59,304 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:01:59,304 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:01:59,304 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:01:59,304 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:01:59,892 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:01:59,892 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:01:59,893 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:02:02,022 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:32:02 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'2353'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-gqwvg'), (b'x-envoy-upstream-service-time', b'1130'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_5d1ac5d6b6b33206a2287585349beb9f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9817f7db8d5519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:02:02,023 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:02:02,024 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:02:02,024 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:02:02,585 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:02:02,585 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:02:02,624 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:02:02,624 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:02:03,480 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:02:03,481 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:02:03,482 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:02:03,484 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I will connect you with an agent now.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:02:03,485 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:02:03,486 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:02:03,486 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:02:03,486 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:02:03,486 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:02:04,163 - voice-business-agent - INFO - User speech received: 8, double 4, 7, 5, 7, 1554.
2024-12-29 13:02:04,164 - voice-business-agent - INFO - User speech received: 8, double 4, 7, 5, 7, 1554.
2024-12-29 13:02:04,164 - voice-business-agent - DEBUG - Validating phone number from text: 8, double 4, 7, 5, 7, 1554.
2024-12-29 13:02:04,164 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:02:04,163 - voice-business-agent - INFO - User speech received: 8, double 4, 7, 5, 7, 1554.
2024-12-29 13:02:04,164 - voice-business-agent - INFO - User speech received: 8, double 4, 7, 5, 7, 1554.
2024-12-29 13:02:04,164 - voice-business-agent - DEBUG - Validating phone number from text: 8, double 4, 7, 5, 7, 1554.
2024-12-29 13:02:04,164 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:02:04,364 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:32:04 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'590'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-bcqzd'), (b'x-envoy-upstream-service-time', b'573'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_5b2bd9e0af89a011453231857bebc861'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981811f8605519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:02:04,365 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:02:04,365 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:02:04,366 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:02:05,121 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:02:05,122 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:02:05,123 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:02:05,125 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:02:05,126 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:02:05,127 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:02:05,127 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:02:05,128 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:02:05,128 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:02:06,598 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:32:06 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1171'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-mqppv'), (b'x-envoy-upstream-service-time', b'1155'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_6395496c0ef09fdb9739cda1e6a28fb1'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98181c3e325519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:02:06,599 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:02:06,599 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:02:06,599 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:02:07,226 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:02:07,228 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:02:07,229 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:02:11,531 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:02:11,531 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:02:11,531 - voice-business-agent - INFO - User speech received:  Thank you! Just to confirm, your mobile number is 8447571554, correct? I will connect you with an agent now. Please hold.
2024-12-29 13:02:11,532 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you! Just to confirm, your mobile number is 8447571554, correct? I will connect you with an agent now. Please hold.
2024-12-29 13:02:11,532 - voice-business-agent - INFO - Valid phone number found: 8447571554
2024-12-29 13:02:11,531 - voice-business-agent - INFO - User speech received:  Thank you! Just to confirm, your mobile number is 8447571554, correct? I will connect you with an agent now. Please hold.
2024-12-29 13:02:11,532 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:02:11,532 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you! Just to confirm, your mobile number is 8447571554, correct? I will connect you with an agent now. Please hold.
2024-12-29 13:02:11,532 - voice-business-agent - INFO - Valid phone number found: 8447571554
2024-12-29 13:02:11,532 - voice-business-agent - INFO - Transferring call to 
2024-12-29 13:02:11,532 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:02:11,532 - voice-business-agent - INFO - Transferring call to 
2024-12-29 13:02:11,569 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:02:11,569 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:02:11,634 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 74
2024-12-29 13:02:11,636 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:02:11,634 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 74
2024-12-29 13:02:11,636 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:02:11,638 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:02:11,638 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:02:11,639 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Call transfer initiated. You'll receive a call shortly.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:02:11,641 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:02:11,642 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:02:11,642 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:02:11,643 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:02:11,643 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:02:13,349 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:32:13 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1331'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-bmzrj'), (b'x-envoy-upstream-service-time', b'1268'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_25b84603afc0d2253b7a1572583e25b5'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981844fa605519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:02:13,350 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:02:13,350 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:02:13,351 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:02:13,611 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:02:13,611 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:02:13,646 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:02:13,646 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:02:14,673 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:02:14,674 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:02:14,674 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:02:17,000 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:02:17,001 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 13:02:17,000 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:02:17,001 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 13:02:17,001 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:02:17,001 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:02:17,001 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 13:02:17,001 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 13:02:17,001 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:02:17,001 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:02:17,071 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:02:17,071 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:02:39,221 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:02:39,221 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:02:39,221 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:02:39,221 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:02:39,238 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure! May I have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's a it 447-571-1, double 54."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 44757111554, correct?'}, {'role': 'user', 'content': "No. It's 8, double 4, 7571 554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hi! Your call transfer is in process. An agent will be with you shortly. Thank you for your patience!'}, {'role': 'user', 'content': 'Hello. Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yes. My mobile number 8447 571554.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571554, correct? I'll connect you to an agent..."}, {'role': 'assistant', 'content': ' Thank...'}, {'role': 'user', 'content': 'Got it. Uh, the uh,'}, {'role': 'assistant', 'content': ' If you have any other requests or need further assistance while waiting, just let...'}, {'role': 'user', 'content': 'web server route.'}, {'role': 'assistant', 'content': ' Could you please clarify your request related...'}, {'role': 'user', 'content': 'I like to match static site now to Domain domain'}, {'role': 'assistant', 'content': " To assist you better with matching a static site to a domain, I'll connect..."}, {'role': 'user', 'content': 'Yeah. Well, I see I got a'}, {'role': 'assistant', 'content': " If you could provide a bit more detail about what you're seeing or experiencing..."}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': "Yeah. It's 8, double 4, 7571554."}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 8447571554, correct? I will connect you with an agent now....'}, {'role': 'user', 'content': "No. It's the 8447 571-554."}, {'role': 'assistant', 'content': ' Got it! Your mobile number is 8447571554. I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': 'Yeah. I see 8, double 4, 7, 571, double 5.'}, {'role': 'assistant', 'content': " Thank you! Just to confirm, your mobile number is 8447571555, correct? I'll connect you to an agent now. Please hold on."}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you further today?'}, {'role': 'user', 'content': 'Connect me to agent.'}, {'role': 'assistant', 'content': ' Certainly! Could you please provide your mobile number so I can connect you with an agent?'}, {'role': 'user', 'content': '8, double 4, 7, 5, 7, 1554.'}, {'role': 'assistant', 'content': ' Thank you! Just to confirm, your mobile number is 8447571554, correct? I will connect you with an agent now. Please hold.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'What?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:02:39,240 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:02:39,240 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:02:39,240 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:02:39,240 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:02:39,240 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:02:39,458 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:02:39,458 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:02:39,864 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:32:39 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'324'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29297'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'1.406s'), (b'x-request-id', b'req_d38b2d65c45b1d9401c856a54577995a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9818f17cad5477-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:02:39,865 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:02:39,865 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:02:39,865 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:02:40,444 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm processing your request to connect you with an agent.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:02:40,445 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:02:40,446 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:02:40,446 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:02:40,446 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:02:40,446 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:02:40,763 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:02:40,764 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:02:40,764 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:02:42,096 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:32:42 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'799'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-6rv56'), (b'x-envoy-upstream-service-time', b'786'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_fd619c912be71489c6d4f7420b499adb'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9818f8fbaa5519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:02:42,097 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:02:42,097 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:02:42,098 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:02:42,364 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:02:42,364 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:02:42,418 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:02:42,418 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:02:43,158 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:02:43,158 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:02:43,159 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:02:43,159 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'An agent should be with you shortly.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:02:43,160 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:02:43,160 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:02:43,160 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:02:43,160 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:02:43,160 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:02:44,058 - voice-business-agent - INFO - User speech received: What?
2024-12-29 13:02:44,059 - voice-business-agent - INFO - User speech received: What?
2024-12-29 13:02:44,059 - voice-business-agent - DEBUG - Validating phone number from text: What?
2024-12-29 13:02:44,060 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:02:44,058 - voice-business-agent - INFO - User speech received: What?
2024-12-29 13:02:44,059 - voice-business-agent - INFO - User speech received: What?
2024-12-29 13:02:44,059 - voice-business-agent - DEBUG - Validating phone number from text: What?
2024-12-29 13:02:44,060 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:02:44,340 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:32:44 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'881'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-cfcfg'), (b'x-envoy-upstream-service-time', b'868'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_2e08ea15a0cd9b51fe87fb69a14e7a85'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981909f9eb5519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:02:44,341 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:02:44,341 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:02:44,341 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:02:45,085 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:02:45,085 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:02:45,086 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:02:45,087 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for your patience!', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:02:45,089 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:02:45,090 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:02:45,090 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:02:45,091 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:02:45,091 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:02:45,907 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:32:45 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'500'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-5r5j6'), (b'x-envoy-upstream-service-time', b'488'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_eb645fcd7d32fcec2668d105dc069cf9'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98191608dd5519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:02:45,908 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:02:45,908 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:02:45,908 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:02:46,441 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:02:46,441 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:02:46,441 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:02:46,443 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'If you need any further assistance, feel free to ask.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:02:46,445 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:02:46,446 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:02:46,447 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:02:46,447 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:02:46,447 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:02:47,900 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:32:47 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1123'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-5f7kg'), (b'x-envoy-upstream-service-time', b'1105'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_cc791a28c7596270de2bca812408a370'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98191e7ae05519-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:02:47,900 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:02:47,900 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:02:47,900 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:02:49,061 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:02:49,062 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:02:49,063 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:02:52,066 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:02:52,066 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:02:52,066 - voice-business-agent - INFO - User speech received:  I'm processing your request to connect you with an agent. An agent should be with you shortly. Thank you for your patience! If you need any further assistance, feel free to ask.
2024-12-29 13:02:52,066 - voice-business-agent - DEBUG - Validating phone number from text:  I'm processing your request to connect you with an agent. An agent should be with you shortly. Thank you for your patience! If you need any further assistance, feel free to ask.
2024-12-29 13:02:52,066 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:02:52,066 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:02:52,066 - voice-business-agent - INFO - User speech received:  I'm processing your request to connect you with an agent. An agent should be with you shortly. Thank you for your patience! If you need any further assistance, feel free to ask.
2024-12-29 13:02:52,066 - voice-business-agent - DEBUG - Validating phone number from text:  I'm processing your request to connect you with an agent. An agent should be with you shortly. Thank you for your patience! If you need any further assistance, feel free to ask.
2024-12-29 13:02:52,066 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:02:52,066 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:02:52,098 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:02:52,098 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:03:35,656 - livekit.agents - INFO - shutting down worker
2024-12-29 13:03:35,656 - livekit.agents - DEBUG - shutting down job task
2024-12-29 13:03:35,656 - livekit.agents - DEBUG - shutting down job task
2024-12-29 13:03:35,657 - livekit.agents - INFO - process exiting
2024-12-29 13:03:35,695 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 13:03:35,695 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 13:03:35,696 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: ClientInitiated
2024-12-29 13:03:35,696 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: ClientInitiated
2024-12-29 13:03:35,697 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 13:03:35,697 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 13:03:36,934 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 13:03:36,945 - livekit.agents - INFO - starting worker
2024-12-29 13:03:36,955 - livekit.agents - DEV - reloading job
2024-12-29 13:03:37,845 - livekit.agents - INFO - initializing job process
2024-12-29 13:03:37,846 - livekit.agents - INFO - job process initialized
2024-12-29 13:03:37,846 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 13:03:37,845 - livekit.agents - INFO - initializing job process
2024-12-29 13:03:37,846 - livekit.agents - INFO - job process initialized
2024-12-29 13:03:37,846 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 13:03:37,952 - voice-business-agent - INFO - Connecting to room voice_assistant_room_9229
2024-12-29 13:03:37,952 - voice-business-agent - INFO - Connecting to room voice_assistant_room_9229
2024-12-29 13:03:37,952 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 13:03:37,953 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 13:03:37,952 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 13:03:37,953 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 13:03:37,953 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 13:03:37,953 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 13:03:38,181 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 13:03:38,181 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 13:03:38,181 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 13:03:38,181 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 13:03:38,181 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 13:03:38,181 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 13:03:38,181 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 13:03:38,181 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 13:03:38,221 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 13:03:38,221 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 13:03:38,221 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 13:03:38,221 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 13:03:38,221 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 13:03:38,221 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 13:03:38,221 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 13:03:38,221 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 13:03:38,336 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 13:03:38,336 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 13:03:38,549 - voice-business-agent - INFO - Participant connected: voice_assistant_user_6061
2024-12-29 13:03:38,549 - voice-business-agent - INFO - Participant connected: voice_assistant_user_6061
2024-12-29 13:03:38,605 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 13:03:38,605 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 13:03:38,641 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 13:03:38,641 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 13:03:38,673 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:03:38,674 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 13:03:38,693 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1178216d0>
2024-12-29 13:03:38,693 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1216527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 13:03:38,705 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123e1a890>
2024-12-29 13:03:38,706 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:03:38,706 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:03:38,706 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:03:38,707 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:03:38,707 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:03:39,778 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:33:39 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'733'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-5tbcw'), (b'x-envoy-upstream-service-time', b'721'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_0ab876eaf57c1b65e8d0b4ac9d2479d6'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=4Qb0PLj_c_K3r3MuoqTdryV6FozWHvWJQ.8J7QCXQPE-1735457619-1.0.1.1-GAtsy0rWeG_K81PBlCA5BYAqfyivj5Qp687QILx_jjSzyh0Qy8lV91RxdAWvva5YdWsdeT8M6nj89Rbqtns6NA; path=/; expires=Sun, 29-Dec-24 08:03:39 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=5F9SPfCH3HTfZXs.Zj6QUFvG1brvKs0MEGhPHryg9O4-1735457619797-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981a65183c91a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:03:39,779 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:03:39,780 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:03:39,780 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:03:40,081 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:03:40,081 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:03:40,122 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:03:40,122 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:03:40,230 - livekit.agents - INFO - registered worker
2024-12-29 13:03:40,268 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 13:03:40,408 - livekit.agents - INFO - registered worker
2024-12-29 13:03:40,634 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:03:40,634 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:03:40,635 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:03:40,786 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:03:40,786 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:03:40,789 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:03:40,789 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:03:40,790 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:03:40,790 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:03:40,827 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 13:03:40,827 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 13:03:44,849 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:03:44,849 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:03:45,193 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:03:45,193 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:03:45,204 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:03:45,205 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:03:45,217 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123e7aa50>
2024-12-29 13:03:45,218 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x121652720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:03:45,233 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123e7b250>
2024-12-29 13:03:45,233 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:03:45,234 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:03:45,234 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:03:45,235 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:03:45,235 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:03:45,442 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 13:03:45,442 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 13:03:45,839 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:33:45 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'273'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29921'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'158ms'), (b'x-request-id', b'req_8eef565dea14d4c9e9d4fbd579aa0cc5'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=t7C9SpwTUA1wPpr6nGCDMRzksSiwf7XmPemhLEe0qkM-1735457625-1.0.1.1-ezns1tmq_VtTn_k0bNHoEW_I.Ki4Ipn7KXw9HpsdPYxRZITELmuGi7aDV.0CePrVmyx_Als8pQSd8kMQONS9Dw; path=/; expires=Sun, 29-Dec-24 08:03:45 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=jSBsngA0yLkN0b6SZQDOPgFDyUWWxqPgPRSfuZApSNs-1735457625862-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981a8dec6854e0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:03:45,840 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:03:45,840 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:03:45,840 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:03:46,195 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, I can help you with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:03:46,197 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:03:46,197 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:03:46,198 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:03:46,198 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:03:46,198 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:03:46,319 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:03:46,319 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:03:46,319 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:03:47,062 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:33:47 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'577'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-c2lpx'), (b'x-envoy-upstream-service-time', b'564'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_97108e8848cb80eda0b87ae287a1e994'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981a93ede391a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:03:47,062 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:03:47,063 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:03:47,063 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:03:47,317 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:03:47,317 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:03:47,359 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:03:47,359 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:03:47,571 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:03:47,572 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:03:47,572 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:03:47,574 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'May I have your mobile number, please?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:03:47,576 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:03:47,576 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:03:47,577 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:03:47,577 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:03:47,577 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:03:49,084 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:33:49 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1206'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-mqppv'), (b'x-envoy-upstream-service-time', b'1167'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_9390a8d6666a2e8a704a209682c1c159'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981a9c895691a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:03:49,085 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:03:49,085 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:03:49,085 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:03:49,617 - voice-business-agent - INFO - User speech received: Connect me to an agent.
2024-12-29 13:03:49,618 - voice-business-agent - INFO - User speech received: Connect me to an agent.
2024-12-29 13:03:49,617 - voice-business-agent - INFO - User speech received: Connect me to an agent.
2024-12-29 13:03:49,619 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to an agent.
2024-12-29 13:03:49,618 - voice-business-agent - INFO - User speech received: Connect me to an agent.
2024-12-29 13:03:49,620 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:03:49,619 - voice-business-agent - DEBUG - Validating phone number from text: Connect me to an agent.
2024-12-29 13:03:49,620 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:03:49,843 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:03:49,843 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:03:49,844 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:03:51,590 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:03:51,591 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. May I have your mobile number, please?
2024-12-29 13:03:51,590 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:03:51,591 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help you with that. May I have your mobile number, please?
2024-12-29 13:03:51,591 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:03:51,591 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:03:51,591 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. May I have your mobile number, please?
2024-12-29 13:03:51,591 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help you with that. May I have your mobile number, please?
2024-12-29 13:03:51,591 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:03:51,591 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:03:51,629 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 13:03:51,629 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 13:03:55,949 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:03:55,949 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:03:56,202 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:03:56,202 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:03:56,207 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:03:56,209 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:03:56,210 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:03:56,210 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:03:56,211 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:03:56,211 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:03:56,443 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 13:03:56,443 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 13:03:56,760 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:33:56 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'236'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29896'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'208ms'), (b'x-request-id', b'req_6a00db6e8ec60bcc795e6b33f1557e0d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981ad28b1254e0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:03:56,760 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:03:56,760 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:03:56,760 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:03:56,911 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for providing your number.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:03:56,912 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:03:56,913 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:03:56,913 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:03:56,913 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:03:56,913 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:03:57,148 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:03:57,149 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:03:57,149 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:03:57,937 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:03:57,937 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:03:57,940 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:03:57,940 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:03:58,055 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:33:58 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'819'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-2zssc'), (b'x-envoy-upstream-service-time', b'806'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d8e71fdeb1c53a28a6c74be595accffb'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981ad6edfe91a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:03:58,057 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:03:58,057 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:03:58,058 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:03:58,899 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:03:58,900 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:03:58,901 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:03,101 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:04:03,101 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:04:03,109 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:04:03,111 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:03,112 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:03,112 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:03,113 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:03,113 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:03,696 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:03 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'281'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29896'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'208ms'), (b'x-request-id', b'req_61425eb9e348e410fe1e12704b2ca790'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981afda83554e0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:03,700 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:04:03,700 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:04:03,701 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:03,972 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for providing your mobile number.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:04:03,974 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:03,974 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:03,974 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:03,975 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:03,975 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:04,244 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:04,245 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:04,245 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:05,032 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:05 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'711'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-qqxmg'), (b'x-envoy-upstream-service-time', b'702'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_e15c2402179185df72e90fabfd157815'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981b0308c191a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:05,035 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:04:05,035 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:04:05,035 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:05,321 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:04:05,321 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:04:05,363 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:04:05,363 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:04:05,882 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:05,882 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:05,883 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:05,885 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I will now connect you to an agent.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:04:05,887 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:05,887 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:05,888 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:05,888 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:05,888 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:06,931 - voice-business-agent - INFO - User speech received: Yes. It's 8447571554.
2024-12-29 13:04:06,931 - voice-business-agent - INFO - User speech received: Yes. It's 8447571554.
2024-12-29 13:04:06,931 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 8447571554.
2024-12-29 13:04:06,931 - voice-business-agent - INFO - User speech received: Yes. It's 8447571554.
2024-12-29 13:04:06,932 - voice-business-agent - INFO - Valid phone number found: 8447571554
2024-12-29 13:04:06,931 - voice-business-agent - INFO - User speech received: Yes. It's 8447571554.
2024-12-29 13:04:06,931 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 8447571554.
2024-12-29 13:04:06,932 - voice-business-agent - INFO - Valid phone number found: 8447571554
2024-12-29 13:04:06,970 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'phone_number': '8447571554'}
2024-12-29 13:04:06,970 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'phone_number': '8447571554'}
2024-12-29 13:04:06,970 - voice-business-agent - INFO - Transferring call to 8447571554
2024-12-29 13:04:06,970 - voice-business-agent - INFO - Transferring call to 8447571554
2024-12-29 13:04:07,010 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:04:07,010 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:04:07,150 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 13:04:07,150 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 13:04:07,152 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:04:07,152 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:04:07,156 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:04:07,157 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 13:04:07,184 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x117f292d0>
2024-12-29 13:04:07,185 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1216527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 13:04:07,197 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x117eb8690>
2024-12-29 13:04:07,197 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:07,197 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:07,198 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:07,198 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:07,198 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:07,366 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:07 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1196'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-w55kr'), (b'x-envoy-upstream-service-time', b'1183'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_2cc35c91f2733e2f3d9db9160e73ce88'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981b0ef8e591a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:07,370 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:04:07,370 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:04:07,370 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:08,099 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:08,099 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:08,099 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:08,101 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on for a moment.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:04:08,102 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:08,102 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:08,103 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:08,103 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:08,103 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:08,740 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:08 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1234'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-9mxzm'), (b'x-envoy-upstream-service-time', b'1215'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_347f6451a6a08a62b7bc646ee23ba7f0'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981b173c8b5523-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:08,740 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:04:08,740 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:04:08,740 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:09,438 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:09 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'937'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-bncsq'), (b'x-envoy-upstream-service-time', b'924'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_1d8f0c15d7d888aadd30173c4843cb3f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981b1cd9ab91a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:09,439 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:04:09,439 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:04:09,440 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:09,518 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:09,519 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:09,519 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:10,004 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:10,005 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:10,006 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:11,059 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:04:11,059 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:04:11,060 - voice-business-agent - INFO - User speech received:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:04:11,060 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:04:11,060 - voice-business-agent - INFO - User speech received:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:04:11,060 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:04:11,060 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:04:11,060 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:04:11,060 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:04:11,060 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:04:11,060 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:04:11,060 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:04:11,094 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:04:11,094 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:04:11,134 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:04:11,134 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:04:14,012 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:04:14,012 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:04:14,013 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 13:04:14,013 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 13:04:14,013 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 13:04:14,013 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:04:14,013 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:04:14,013 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 13:04:14,013 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:04:14,013 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:04:14,064 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:04:14,064 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:04:18,944 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:04:18,944 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:04:19,449 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:04:19,449 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:04:19,456 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:04:19,459 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:19,459 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:19,460 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:19,460 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:19,460 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:19,700 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:04:19,700 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:04:20,079 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:20 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'300'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29850'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'300ms'), (b'x-request-id', b'req_8faece02d5f9b81acbcba0929aab6c4b'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981b63dead54e0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:20,081 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:04:20,082 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:04:20,083 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:20,277 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:04:20,277 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:04:20,278 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 13:04:20,278 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:20,279 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:04:20,279 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:04:20,279 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:21,041 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:04:21,041 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:04:21,547 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:04:21,547 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:04:21,555 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the Great. The call'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:04:21,557 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:04:21,577 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123e8e1d0>
2024-12-29 13:04:21,578 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x121652720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:04:21,594 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123ebf550>
2024-12-29 13:04:21,594 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:21,595 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:21,595 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:21,595 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:21,595 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:22,127 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:22 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'229'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29846'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'308ms'), (b'x-request-id', b'req_690f997f8883bcfd128a0bf02219b58d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981b712e1e548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:22,129 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:04:22,129 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:04:22,129 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:22,419 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It seems there might have been a misunderstanding in your message.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:04:22,420 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:22,421 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:22,421 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:22,422 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:22,422 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:22,806 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:22,806 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:22,807 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:23,127 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:04:23,127 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:04:23,128 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:04:23,128 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:04:23,954 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:23 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1246'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-kvkk2'), (b'x-envoy-upstream-service-time', b'1228'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_251a08a4cef6783516c2158d92136ae1'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981b764c1c91a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:23,956 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:04:23,957 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:04:23,957 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:24,298 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:04:24,298 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:04:24,301 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:04:24,301 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:04:24,308 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the Great. The call Hello?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:04:24,310 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:24,310 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:24,310 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:24,310 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:24,310 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:24,908 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:24 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'286'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29844'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'312ms'), (b'x-request-id', b'req_c40840746b80fb1abd9cd35b835f4ed5'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981b822c24548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:24,909 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:04:24,910 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:04:24,910 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:24,957 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:24,958 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:24,958 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:25,210 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It seems there was a mix-up in your message.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:04:25,213 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:25,214 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:25,215 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:25,215 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:25,215 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:25,279 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:25,279 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:25,279 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:27,399 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:27 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1370'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-4lljs'), (b'x-envoy-upstream-service-time', b'1350'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_1d103e66adfa4a9ea598c0fb658b5047'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981b87c8f591a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:27,399 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:04:27,399 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:04:27,399 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:27,658 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:04:27,658 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:04:27,700 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:04:27,700 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:04:28,160 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:28,160 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:28,161 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:28,164 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'How can I assist you further?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:04:28,166 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:28,166 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:28,166 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:28,167 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:28,167 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:29,038 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:29 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'567'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-wlpnm'), (b'x-envoy-upstream-service-time', b'535'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_fe1738ce6e532fc618f1ecfc13b448c8'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981b9a3f0891a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:29,039 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:04:29,040 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:04:29,040 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:29,335 - voice-business-agent - INFO - User speech received: Siri opened the Great. The call Hello?
2024-12-29 13:04:29,335 - voice-business-agent - INFO - User speech received: Siri opened the Great. The call Hello?
2024-12-29 13:04:29,338 - voice-business-agent - DEBUG - Validating phone number from text: Siri opened the Great. The call Hello?
2024-12-29 13:04:29,339 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:04:29,335 - voice-business-agent - INFO - User speech received: Siri opened the Great. The call Hello?
2024-12-29 13:04:29,335 - voice-business-agent - INFO - User speech received: Siri opened the Great. The call Hello?
2024-12-29 13:04:29,338 - voice-business-agent - DEBUG - Validating phone number from text: Siri opened the Great. The call Hello?
2024-12-29 13:04:29,339 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:04:29,809 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:29,809 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:29,810 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:31,574 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:04:31,574 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:04:31,574 - voice-business-agent - INFO - User speech received:  It seems there was a mix-up in your message. How can I assist you further?
2024-12-29 13:04:31,574 - voice-business-agent - DEBUG - Validating phone number from text:  It seems there was a mix-up in your message. How can I assist you further?
2024-12-29 13:04:31,575 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:04:31,575 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:04:31,574 - voice-business-agent - INFO - User speech received:  It seems there was a mix-up in your message. How can I assist you further?
2024-12-29 13:04:31,574 - voice-business-agent - DEBUG - Validating phone number from text:  It seems there was a mix-up in your message. How can I assist you further?
2024-12-29 13:04:31,575 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:04:31,575 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:04:31,610 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:04:31,610 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:04:43,646 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:04:43,646 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:04:43,647 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:04:43,647 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:04:43,655 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the Great. The call Hello?'}, {'role': 'assistant', 'content': ' It seems there was a mix-up in your message. How can I assist you further?'}, {'role': 'user', 'content': 'Hello. Connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:04:43,657 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:43,657 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:43,657 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:43,658 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:43,658 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:43,891 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:04:43,891 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:04:44,414 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:44 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'429'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29817'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'366ms'), (b'x-request-id', b'req_30981c1c56253537737f72cb3abc1117'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981bfb0d00548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:44,416 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:04:44,416 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:04:44,416 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:44,593 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, I can help you with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:04:44,595 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:44,596 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:44,596 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:44,596 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:44,596 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:44,728 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:44,728 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:44,728 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:45,463 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:45 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'562'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-phmcz'), (b'x-envoy-upstream-service-time', b'544'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c1c97bb1a7196c1435b8ebd17dee22ab'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981c00e9a591a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:45,464 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:04:45,464 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:04:45,464 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:45,715 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:04:45,715 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:04:45,758 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:04:45,758 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:04:46,224 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:46,225 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:46,225 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:46,227 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'May I have your mobile number, please?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:04:46,228 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:46,228 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:46,229 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:46,229 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:46,229 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:47,046 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:47 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'519'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-22jsn'), (b'x-envoy-upstream-service-time', b'503'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_17cac7d8404407f5b44496e8c4ca49b5'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981c0b1d5691a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:47,048 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:04:47,048 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:04:47,048 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:47,280 - voice-business-agent - INFO - User speech received: Hello. Connect me to agent.
2024-12-29 13:04:47,281 - voice-business-agent - INFO - User speech received: Hello. Connect me to agent.
2024-12-29 13:04:47,281 - voice-business-agent - DEBUG - Validating phone number from text: Hello. Connect me to agent.
2024-12-29 13:04:47,282 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:04:47,280 - voice-business-agent - INFO - User speech received: Hello. Connect me to agent.
2024-12-29 13:04:47,281 - voice-business-agent - INFO - User speech received: Hello. Connect me to agent.
2024-12-29 13:04:47,281 - voice-business-agent - DEBUG - Validating phone number from text: Hello. Connect me to agent.
2024-12-29 13:04:47,282 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:04:47,799 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:47,799 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:47,800 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:49,548 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:04:49,548 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. May I have your mobile number, please?
2024-12-29 13:04:49,548 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help you with that. May I have your mobile number, please?
2024-12-29 13:04:49,548 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:04:49,548 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:04:49,549 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:04:49,548 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. May I have your mobile number, please?
2024-12-29 13:04:49,548 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help you with that. May I have your mobile number, please?
2024-12-29 13:04:49,548 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:04:49,549 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:04:49,590 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:04:49,590 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '8447571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:04:53,347 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:04:53,347 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:04:53,723 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:04:53,723 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:04:53,732 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the Great. The call Hello?'}, {'role': 'assistant', 'content': ' It seems there was a mix-up in your message. How can I assist you further?'}, {'role': 'user', 'content': 'Hello. Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:04:53,734 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:53,734 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:53,734 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:53,735 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:53,735 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:53,968 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:04:53,968 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '8447571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:04:54,335 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:54 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'303'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29794'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'412ms'), (b'x-request-id', b'req_363e4774a85ab3197fc4dce3a641a21e'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981c3a0c10548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:54,335 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:04:54,335 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:04:54,335 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:54,555 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for providing your mobile number.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:04:54,556 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:54,556 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:54,556 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:54,557 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:54,557 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:54,772 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:54,773 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:54,773 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:55,434 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:55 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'568'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-zs289'), (b'x-envoy-upstream-service-time', b'538'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d6cf720d1bf286357d9c0398ee78baa0'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981c3f2da491a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:55,436 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:04:55,436 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:04:55,436 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:55,682 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:04:55,682 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:04:55,728 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:04:55,728 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '8447571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:04:56,167 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:56,167 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:56,168 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:56,169 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I will now connect you to an agent.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:04:56,170 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:56,171 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:56,171 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:56,171 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:56,172 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:57,319 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:57 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'814'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-jkgrj'), (b'x-envoy-upstream-service-time', b'738'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_fd7d8efb83e792acde02e5e6a7f0342c'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981c494c0a91a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:57,320 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:04:57,320 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:04:57,320 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:57,350 - voice-business-agent - INFO - User speech received: 931-357-1554.
2024-12-29 13:04:57,350 - voice-business-agent - INFO - User speech received: 931-357-1554.
2024-12-29 13:04:57,351 - voice-business-agent - DEBUG - Validating phone number from text: 931-357-1554.
2024-12-29 13:04:57,351 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 13:04:57,350 - voice-business-agent - INFO - User speech received: 931-357-1554.
2024-12-29 13:04:57,350 - voice-business-agent - INFO - User speech received: 931-357-1554.
2024-12-29 13:04:57,351 - voice-business-agent - DEBUG - Validating phone number from text: 931-357-1554.
2024-12-29 13:04:57,351 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 13:04:57,391 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'phone_number': '9313571554'}
2024-12-29 13:04:57,392 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-29 13:04:57,391 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'phone_number': '9313571554'}
2024-12-29 13:04:57,392 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-29 13:04:57,426 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:04:57,426 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:04:57,487 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 13:04:57,489 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:04:57,487 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 13:04:57,489 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:04:57,491 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:04:57,492 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:57,493 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:57,493 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:57,494 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:57,494 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:58,186 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:58,187 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:58,187 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:58,189 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on for a moment.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:04:58,190 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:04:58,191 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:04:58,191 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:04:58,192 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:04:58,192 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:04:58,467 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:58 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'642'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-7d62h'), (b'x-envoy-upstream-service-time', b'622'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_4032495a74f6df10e748d71c25343b19'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981c518f535523-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:58,468 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:04:58,468 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:04:58,468 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:59,298 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:34:59 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'742'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-p8n8t'), (b'x-envoy-upstream-service-time', b'733'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c40b479fbc99ea1e4c8432b723ff6184'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981c55dd0c91a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:04:59,300 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:04:59,301 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:04:59,301 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:04:59,325 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:59,325 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:59,326 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:04:59,832 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:04:59,833 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:04:59,833 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:05:01,190 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:05:01,190 - voice-business-agent - INFO - User speech received:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:05:01,190 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:05:01,190 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:05:01,190 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:05:01,190 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:05:01,190 - voice-business-agent - INFO - User speech received:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:05:01,190 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:05:01,190 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:05:01,190 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:05:01,191 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:05:01,191 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:05:01,225 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:05:01,225 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:05:01,260 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:05:01,260 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:05:04,143 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:05:04,144 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 13:05:04,144 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 13:05:04,143 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:05:04,144 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:05:04,144 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 13:05:04,144 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:05:04,144 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 13:05:04,144 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:05:04,144 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:05:04,187 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:05:04,187 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:05:33,555 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:05:33,555 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:05:33,777 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:05:33,777 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:05:33,788 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the Great. The call Hello?'}, {'role': 'assistant', 'content': ' It seems there was a mix-up in your message. How can I assist you further?'}, {'role': 'user', 'content': 'Hello. Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello? Connect me to a call.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:05:33,790 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:05:33,790 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:05:33,790 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:05:33,790 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:05:33,791 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:05:34,016 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:05:34,016 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:05:34,374 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:35:34 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'284'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29744'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'512ms'), (b'x-request-id', b'req_a1de0855003ed8246acc0ef7b685d98c'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981d3469c8548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:05:34,376 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:05:34,376 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:05:34,376 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:05:34,969 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:05:34,969 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:05:34,971 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 13:05:34,972 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:05:34,973 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:05:34,973 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:05:34,973 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:05:40,895 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:05:40,895 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:05:41,271 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:05:41,271 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:05:41,286 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the Great. The call Hello?'}, {'role': 'assistant', 'content': ' It seems there was a mix-up in your message. How can I assist you further?'}, {'role': 'user', 'content': 'Hello. Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello? Connect me to a call. Hello? Connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:05:41,288 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:05:42,357 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123efef50>
2024-12-29 13:05:42,358 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x121652720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:05:42,372 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123effd90>
2024-12-29 13:05:42,372 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:05:42,373 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:05:42,373 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:05:42,373 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:05:42,373 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:05:43,017 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:35:43 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'346'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29737'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'526ms'), (b'x-request-id', b'req_8e8cbc2aa3a6403ab8df0d2afafd4ce0'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981d6a0df35520-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:05:43,020 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:05:43,020 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:05:43,021 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:05:43,476 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, I can help you with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:05:43,477 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:05:43,478 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:05:43,478 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:05:43,478 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:05:43,478 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:05:43,648 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:05:43,649 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:05:43,651 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:05:45,889 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:35:45 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'2082'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-fh47x'), (b'x-envoy-upstream-service-time', b'1946'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_30d154c297acff6dbb3baba27131d0c0'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981d70fa8a91a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:05:45,890 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:05:45,891 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:05:45,891 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:05:46,444 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:05:46,444 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:05:46,445 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:05:46,445 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:05:47,781 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:05:47,782 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:05:47,784 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:05:56,478 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:05:56,478 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:05:56,493 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the Great. The call Hello?'}, {'role': 'assistant', 'content': ' It seems there was a mix-up in your message. How can I assist you further?'}, {'role': 'user', 'content': 'Hello. Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello? Connect me to a call. Hello? Connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:05:56,494 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:05:56,495 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:05:56,495 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:05:56,496 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:05:56,496 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:05:57,080 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:35:57 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'290'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29737'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'526ms'), (b'x-request-id', b'req_562f9b99761aaa0d26966ed389613a52'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981dc24a335520-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:05:57,082 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:05:57,083 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:05:57,084 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:05:57,308 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, I can help you with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:05:57,309 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:05:57,310 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:05:57,310 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:05:57,310 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:05:57,310 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:05:57,477 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:05:57,478 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:05:57,478 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:05:58,637 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:35:58 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'518'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-sb74z'), (b'x-envoy-upstream-service-time', b'506'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b198f4b01ee2e726d11389c9ff0c1f6f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981dc75dd691a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:05:58,637 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:05:58,637 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:05:58,637 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:05:58,895 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:05:58,895 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:05:58,935 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:05:58,935 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:05:59,406 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:05:59,407 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:05:59,407 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:05:59,410 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'May I have your mobile number, please?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:05:59,411 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:05:59,412 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:05:59,412 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:05:59,412 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:05:59,412 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:06:00,488 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:36:00 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'743'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-j6r7n'), (b'x-envoy-upstream-service-time', b'724'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_fa7fbdc97b98f184560ae1e841d592e2'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981dd48fb391a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:06:00,489 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:06:00,489 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:06:00,489 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:06:00,508 - voice-business-agent - INFO - User speech received: Hello? Connect me to a call. Hello? Connect me to agent.
2024-12-29 13:06:00,508 - voice-business-agent - INFO - User speech received: Hello? Connect me to a call. Hello? Connect me to agent.
2024-12-29 13:06:00,509 - voice-business-agent - DEBUG - Validating phone number from text: Hello? Connect me to a call. Hello? Connect me to agent.
2024-12-29 13:06:00,508 - voice-business-agent - INFO - User speech received: Hello? Connect me to a call. Hello? Connect me to agent.
2024-12-29 13:06:00,509 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:06:00,508 - voice-business-agent - INFO - User speech received: Hello? Connect me to a call. Hello? Connect me to agent.
2024-12-29 13:06:00,509 - voice-business-agent - DEBUG - Validating phone number from text: Hello? Connect me to a call. Hello? Connect me to agent.
2024-12-29 13:06:00,509 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:06:01,636 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:06:01,637 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:06:01,638 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:06:02,976 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:06:02,976 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:06:02,977 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. May I have your mobile number, please?
2024-12-29 13:06:02,977 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help you with that. May I have your mobile number, please?
2024-12-29 13:06:02,977 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:06:02,977 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. May I have your mobile number, please?
2024-12-29 13:06:02,977 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:06:02,977 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help you with that. May I have your mobile number, please?
2024-12-29 13:06:02,977 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:06:02,977 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:06:03,014 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:06:03,014 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:06:07,795 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:06:07,795 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:06:08,173 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:06:08,173 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:06:08,190 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the Great. The call Hello?'}, {'role': 'assistant', 'content': ' It seems there was a mix-up in your message. How can I assist you further?'}, {'role': 'user', 'content': 'Hello. Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello? Connect me to a call. Hello? Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:06:08,192 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:06:08,193 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:06:08,193 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:06:08,193 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:06:08,193 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:06:08,447 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:06:08,447 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:06:08,822 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:36:08 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'331'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29714'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'572ms'), (b'x-request-id', b'req_e0041fdc0e9e2d15027c7db5f823f1b2'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981e0b6f995520-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:06:08,823 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:06:08,823 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:06:08,823 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:06:09,187 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for providing your mobile number.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:06:09,188 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:06:09,188 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:06:09,188 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:06:09,188 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:06:09,189 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:06:09,482 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:06:09,483 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:06:09,483 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:06:10,008 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:36:10 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'496'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-9xbjm'), (b'x-envoy-upstream-service-time', b'469'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_33f7c785c28e2a9b2c567ec18f10326f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981e119e7091a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:06:10,009 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:06:10,009 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:06:10,009 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:06:10,298 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:06:10,298 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:06:10,340 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:06:10,340 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:06:10,862 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:06:10,863 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:06:10,863 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:06:10,865 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I will now connect you to an agent.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:06:10,867 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:06:10,867 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:06:10,867 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:06:10,867 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:06:10,868 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:06:11,739 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:36:11 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'525'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-h4hxl'), (b'x-envoy-upstream-service-time', b'504'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_614d10c696fdcd1e43c730c2102f1335'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981e1c1c1291a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:06:11,740 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:06:11,741 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:06:11,741 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:06:11,805 - voice-business-agent - INFO - User speech received: 931-357-1554.
2024-12-29 13:06:11,806 - voice-business-agent - INFO - User speech received: 931-357-1554.
2024-12-29 13:06:11,806 - voice-business-agent - DEBUG - Validating phone number from text: 931-357-1554.
2024-12-29 13:06:11,806 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 13:06:11,805 - voice-business-agent - INFO - User speech received: 931-357-1554.
2024-12-29 13:06:11,806 - voice-business-agent - INFO - User speech received: 931-357-1554.
2024-12-29 13:06:11,806 - voice-business-agent - DEBUG - Validating phone number from text: 931-357-1554.
2024-12-29 13:06:11,806 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 13:06:11,861 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:06:11,862 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:06:11,862 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:06:11,862 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:06:11,863 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:06:11,863 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:06:12,791 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:36:12 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'610'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-b7wvp'), (b'x-envoy-upstream-service-time', b'576'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a6af641f6d6fdd054c67536e9b9f496f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981e22583e5523-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:06:12,792 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:06:12,793 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:06:12,793 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:06:12,894 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:06:12,895 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:06:12,895 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:06:12,896 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on for a moment.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:06:12,897 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:06:12,897 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:06:12,897 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:06:12,898 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:06:12,898 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:06:14,439 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:06:14,439 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:06:14,440 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:06:14,557 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:36:14 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1370'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-kpcvr'), (b'x-envoy-upstream-service-time', b'1325'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a876ed74efca8ef53f3e55625a0cd8f3'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981e28ccae91a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:06:14,559 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:06:14,559 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:06:14,559 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:06:15,852 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:06:15,853 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:06:15,853 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:06:16,476 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:06:16,476 - voice-business-agent - INFO - User speech received:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:06:16,476 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:06:16,476 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:06:16,477 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:06:16,476 - voice-business-agent - INFO - User speech received:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:06:16,477 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:06:16,476 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:06:16,477 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:06:16,477 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:06:16,477 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:06:16,477 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:06:16,515 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:06:16,515 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:06:16,549 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:06:16,549 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:06:19,454 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:06:19,454 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:06:19,454 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 13:06:19,455 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 13:06:19,455 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:06:19,454 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 13:06:19,455 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:06:19,455 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 13:06:19,455 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:06:19,455 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:06:19,491 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:06:19,491 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:07:14,993 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:07:14,993 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:07:15,344 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:07:15,344 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:07:15,361 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the Great. The call Hello?'}, {'role': 'assistant', 'content': ' It seems there was a mix-up in your message. How can I assist you further?'}, {'role': 'user', 'content': 'Hello. Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello? Connect me to a call. Hello? Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:07:15,363 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:07:15,363 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:07:15,363 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:07:15,364 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:07:15,364 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:07:15,582 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:07:15,582 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:07:16,096 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:37:16 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'419'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29670'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'660ms'), (b'x-request-id', b'req_67adde31593f8924f9aecd7b35adb1e3'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981faf3bfd5520-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:07:16,097 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:07:16,097 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:07:16,097 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:07:16,309 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:07:16,310 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:07:16,310 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:07:16,311 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:07:16,313 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:07:16,313 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:07:16,313 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:07:16,314 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:07:16,314 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:07:17,110 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:37:17 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'499'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-4wjc8'), (b'x-envoy-upstream-service-time', b'480'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_cf94742cfb4be96fb3b38ffb277cfe87'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f981fb52cb391a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:07:17,113 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:07:17,114 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:07:17,115 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:07:17,369 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:07:17,369 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:07:17,410 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:07:17,410 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:07:17,864 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:07:17,864 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:07:17,864 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:07:18,979 - voice-business-agent - INFO - User speech received: Hello.
2024-12-29 13:07:18,980 - voice-business-agent - INFO - User speech received: Hello.
2024-12-29 13:07:18,980 - voice-business-agent - DEBUG - Validating phone number from text: Hello.
2024-12-29 13:07:18,980 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:07:18,979 - voice-business-agent - INFO - User speech received: Hello.
2024-12-29 13:07:18,980 - voice-business-agent - INFO - User speech received: Hello.
2024-12-29 13:07:18,980 - voice-business-agent - DEBUG - Validating phone number from text: Hello.
2024-12-29 13:07:18,980 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:07:19,338 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:07:19,338 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:07:19,339 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 13:07:19,339 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 13:07:19,339 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:07:19,340 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:07:19,339 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 13:07:19,339 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 13:07:19,339 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:07:19,340 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:07:19,376 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:07:19,376 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:07:22,051 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:07:22,051 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:07:22,899 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:07:22,899 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:07:22,912 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the Great. The call Hello?'}, {'role': 'assistant', 'content': ' It seems there was a mix-up in your message. How can I assist you further?'}, {'role': 'user', 'content': 'Hello. Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello? Connect me to a call. Hello? Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:07:22,913 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:07:22,914 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:07:22,914 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:07:22,914 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:07:22,914 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:07:23,094 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:07:23,094 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:07:23,096 - livekit.agents.pipeline - DEBUG - interrupt threshold is not met
2024-12-29 13:07:23,094 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:07:23,094 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:07:23,096 - livekit.agents.pipeline - DEBUG - interrupt threshold is not met
2024-12-29 13:07:23,096 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 13:07:23,096 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:07:23,097 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:07:23,097 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:07:23,097 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:07:23,140 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:07:23,140 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:07:33,441 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:07:33,441 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:07:33,445 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:07:33,445 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:07:33,461 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the Great. The call Hello?'}, {'role': 'assistant', 'content': ' It seems there was a mix-up in your message. How can I assist you further?'}, {'role': 'user', 'content': 'Hello. Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello? Connect me to a call. Hello? Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Hello?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:07:33,462 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:07:33,485 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123f3e410>
2024-12-29 13:07:33,485 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x121652720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:07:33,504 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123f3c110>
2024-12-29 13:07:33,504 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:07:33,505 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:07:33,505 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:07:33,505 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:07:33,505 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:07:34,137 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:37:34 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'319'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29657'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'686ms'), (b'x-request-id', b'req_c732a26ca1e22142cf0fb63c844c4054'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9820209ea38adb-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:07:34,138 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:07:34,138 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:07:34,139 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:07:34,318 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:07:34,318 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:07:34,318 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:07:34,319 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:07:34,319 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:07:34,320 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:07:34,320 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:07:34,320 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:07:34,320 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:07:35,133 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:37:35 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'494'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-zgwdx'), (b'x-envoy-upstream-service-time', b'416'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_86acd6d9437de874f18842fa0ed8e80d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f982025b8ec91a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:07:35,135 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:07:35,135 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:07:35,136 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:07:35,413 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:07:35,413 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:07:35,455 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:07:35,455 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:07:35,957 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:07:35,958 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:07:35,959 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:07:37,076 - voice-business-agent - INFO - User speech received: Hello?
2024-12-29 13:07:37,077 - voice-business-agent - INFO - User speech received: Hello?
2024-12-29 13:07:37,077 - voice-business-agent - DEBUG - Validating phone number from text: Hello?
2024-12-29 13:07:37,077 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:07:37,076 - voice-business-agent - INFO - User speech received: Hello?
2024-12-29 13:07:37,077 - voice-business-agent - INFO - User speech received: Hello?
2024-12-29 13:07:37,077 - voice-business-agent - DEBUG - Validating phone number from text: Hello?
2024-12-29 13:07:37,077 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:07:37,429 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:07:37,429 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 13:07:37,429 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:07:37,429 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 13:07:37,430 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:07:37,429 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 13:07:37,430 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:07:37,429 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 13:07:37,430 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:07:37,430 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:07:37,467 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:07:37,467 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:07:40,295 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:07:40,295 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:07:40,672 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:07:40,672 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:07:40,687 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the Great. The call Hello?'}, {'role': 'assistant', 'content': ' It seems there was a mix-up in your message. How can I assist you further?'}, {'role': 'user', 'content': 'Hello. Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello? Connect me to a call. Hello? Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:07:40,688 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:07:40,688 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:07:40,689 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:07:40,689 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:07:40,689 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:07:41,034 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:07:41,034 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:07:41,305 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:37:41 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'299'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29640'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'720ms'), (b'x-request-id', b'req_d3b86786821601504e840aac65b6faa4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98204d8e448adb-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:07:41,306 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:07:41,307 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:07:41,307 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:07:41,478 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, I can help with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:07:41,480 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:07:41,481 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:07:41,481 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:07:41,481 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:07:41,481 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:07:41,622 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:07:41,623 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:07:41,624 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:07:43,139 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:37:43 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1331'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-28j6p'), (b'x-envoy-upstream-service-time', b'1319'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c15de07dfac6573ad5ce2826a5839393'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9820527d7391a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:07:43,140 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:07:43,142 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:07:43,142 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:07:43,377 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:07:43,377 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:07:43,419 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:07:43,419 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:07:43,862 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:07:43,863 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:07:43,864 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:07:43,866 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Can I have your mobile number, please?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:07:43,867 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:07:43,867 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:07:43,868 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:07:43,868 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:07:43,868 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:07:44,911 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 13:07:44,912 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 13:07:44,913 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 13:07:44,913 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:07:44,911 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 13:07:44,912 - voice-business-agent - INFO - User speech received: Please connect me to agent.
2024-12-29 13:07:44,913 - voice-business-agent - DEBUG - Validating phone number from text: Please connect me to agent.
2024-12-29 13:07:44,913 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:07:44,977 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:37:44 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'797'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-4h56n'), (b'x-envoy-upstream-service-time', b'783'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_cd8cda125423b0ab409049769c5373f0'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98206158ae91a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:07:44,978 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:07:44,978 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:07:44,978 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:07:45,821 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:07:45,821 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:07:45,821 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:07:47,457 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:07:47,457 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:07:47,459 - voice-business-agent - INFO - User speech received:  Sure, I can help with that. Can I have your mobile number, please?
2024-12-29 13:07:47,460 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help with that. Can I have your mobile number, please?
2024-12-29 13:07:47,460 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:07:47,459 - voice-business-agent - INFO - User speech received:  Sure, I can help with that. Can I have your mobile number, please?
2024-12-29 13:07:47,460 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:07:47,460 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help with that. Can I have your mobile number, please?
2024-12-29 13:07:47,460 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:07:47,460 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:07:47,501 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:07:47,501 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:07:51,429 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:07:51,429 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:07:51,930 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:07:51,930 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:07:51,947 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the Great. The call Hello?'}, {'role': 'assistant', 'content': ' It seems there was a mix-up in your message. How can I assist you further?'}, {'role': 'user', 'content': 'Hello. Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello? Connect me to a call. Hello? Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help with that. Can I have your mobile number, please?'}, {'role': 'user', 'content': 'Yes. 931357155'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:07:51,949 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:07:51,949 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:07:51,950 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:07:51,950 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:07:51,950 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:07:52,176 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:07:52,176 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:07:52,558 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:37:52 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'318'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29618'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'764ms'), (b'x-request-id', b'req_3aa8172a2e2fbe316783fcdfb3c5b7a8'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f982093ea158adb-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:07:52,562 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:07:52,563 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:07:52,563 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:07:52,842 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "It seems the number you've provided is missing a digit.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:07:52,844 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:07:52,845 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:07:52,845 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:07:52,846 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:07:52,846 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:07:53,096 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:07:53,096 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:07:53,096 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:07:53,625 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:37:53 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'470'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-nbnxm'), (b'x-envoy-upstream-service-time', b'453'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_28db1d86dff9c412256a1d549e67aa18'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9820997cb091a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:07:53,626 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:07:53,629 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:07:53,630 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:07:53,898 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:07:53,898 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:07:53,939 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:07:53,939 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:07:54,440 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:07:54,440 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:07:54,441 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:07:54,443 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please double-check and provide the complete 10-digit mobile number?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:07:54,444 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:07:54,445 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:07:54,445 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:07:54,445 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:07:54,445 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:07:55,560 - voice-business-agent - INFO - User speech received: Yes. 931357155
2024-12-29 13:07:55,561 - voice-business-agent - INFO - User speech received: Yes. 931357155
2024-12-29 13:07:55,561 - voice-business-agent - DEBUG - Validating phone number from text: Yes. 931357155
2024-12-29 13:07:55,561 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:07:55,560 - voice-business-agent - INFO - User speech received: Yes. 931357155
2024-12-29 13:07:55,561 - voice-business-agent - INFO - User speech received: Yes. 931357155
2024-12-29 13:07:55,561 - voice-business-agent - DEBUG - Validating phone number from text: Yes. 931357155
2024-12-29 13:07:55,561 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:07:55,710 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:37:55 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'855'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-g67gg'), (b'x-envoy-upstream-service-time', b'839'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_9886d71f5a481193798b623148bde963'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9820a37a2791a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:07:55,711 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:07:55,713 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:07:55,713 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:07:56,843 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:07:56,844 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:07:56,845 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:08:01,554 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:08:01,555 - voice-business-agent - INFO - User speech received:  It seems the number you've provided is missing a digit. Could you please double-check and provide the complete 10-digit mobile number?
2024-12-29 13:08:01,554 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:08:01,555 - voice-business-agent - DEBUG - Validating phone number from text:  It seems the number you've provided is missing a digit. Could you please double-check and provide the complete 10-digit mobile number?
2024-12-29 13:08:01,555 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:08:01,555 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:08:01,555 - voice-business-agent - INFO - User speech received:  It seems the number you've provided is missing a digit. Could you please double-check and provide the complete 10-digit mobile number?
2024-12-29 13:08:01,555 - voice-business-agent - DEBUG - Validating phone number from text:  It seems the number you've provided is missing a digit. Could you please double-check and provide the complete 10-digit mobile number?
2024-12-29 13:08:01,555 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:08:01,555 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:08:01,587 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:08:01,587 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:08:06,094 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:08:06,094 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:08:06,471 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:08:06,471 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:08:06,482 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the Great. The call Hello?'}, {'role': 'assistant', 'content': ' It seems there was a mix-up in your message. How can I assist you further?'}, {'role': 'user', 'content': 'Hello. Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello? Connect me to a call. Hello? Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help with that. Can I have your mobile number, please?'}, {'role': 'user', 'content': 'Yes. 931357155'}, {'role': 'assistant', 'content': " It seems the number you've provided is missing a digit. Could you please double-check and provide the complete 10-digit mobile number?"}, {'role': 'user', 'content': '931-357-1554.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:08:06,483 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:08:06,484 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:08:06,484 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:08:06,484 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:08:06,484 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:08:06,714 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:08:06,714 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:08:07,144 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:38:07 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'338'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29579'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'842ms'), (b'x-request-id', b'req_12a651f4dcaf53f464b8c34ee9a269d1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9820eebfa68adb-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:08:07,145 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:08:07,145 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:08:07,145 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:08:07,469 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for providing your mobile number.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:08:07,469 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:08:07,470 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:08:07,470 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:08:07,470 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:08:07,470 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:08:07,820 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:08:07,821 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:08:07,821 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:08:08,261 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:38:08 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'502'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-22jsn'), (b'x-envoy-upstream-service-time', b'491'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_69ccf0dcac60f4fddae07167233c1b6f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9820f4db1791a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:08:08,262 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:08:08,263 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:08:08,264 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:08:08,506 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:08:08,506 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:08:08,546 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:08:08,546 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:08:11,507 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:08:11,507 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:08:11,507 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:08:11,509 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I will now connect you to an agent.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:08:11,510 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:08:11,510 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:08:11,510 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:08:11,510 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:08:11,510 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:08:11,708 - voice-business-agent - INFO - User speech received: 931-357-1554.
2024-12-29 13:08:11,709 - voice-business-agent - INFO - User speech received: 931-357-1554.
2024-12-29 13:08:11,709 - voice-business-agent - DEBUG - Validating phone number from text: 931-357-1554.
2024-12-29 13:08:11,709 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 13:08:11,708 - voice-business-agent - INFO - User speech received: 931-357-1554.
2024-12-29 13:08:11,709 - voice-business-agent - INFO - User speech received: 931-357-1554.
2024-12-29 13:08:11,709 - voice-business-agent - DEBUG - Validating phone number from text: 931-357-1554.
2024-12-29 13:08:11,709 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 13:08:11,746 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:08:11,746 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:08:11,747 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:08:11,747 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:08:11,747 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:08:11,747 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:08:12,216 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:38:12 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'382'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-22gpj'), (b'x-envoy-upstream-service-time', b'368'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a3368c0a51d496f522de829199b0b845'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98210e1c3891a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:08:12,218 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:08:12,218 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:08:12,219 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:08:12,764 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:38:12 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'700'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-qqxmg'), (b'x-envoy-upstream-service-time', b'683'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_093c61d3f0ecdb9b3e62c38c975ddf42'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98210f9f685523-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:08:12,765 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:08:12,765 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:08:12,766 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:08:13,072 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:08:13,072 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:08:13,073 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:08:13,075 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on for a moment.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:08:13,076 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:08:13,077 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:08:13,077 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:08:13,077 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:08:13,077 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:08:13,560 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:08:13,561 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:08:13,561 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:08:13,931 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:38:13 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'576'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-8dwvq'), (b'x-envoy-upstream-service-time', b'559'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_aada18619c6956670d1661ed0c5ed79e'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f982117e86391a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:08:13,932 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:08:13,933 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:08:13,933 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:08:14,664 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:08:14,665 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:08:14,665 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:08:16,299 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:08:16,299 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:08:16,300 - voice-business-agent - INFO - User speech received:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:08:16,300 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:08:16,301 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:08:16,301 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:08:16,300 - voice-business-agent - INFO - User speech received:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:08:16,300 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:08:16,301 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:08:16,301 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:08:16,302 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:08:16,302 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:08:16,341 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:08:16,341 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:08:16,382 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:08:16,382 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:08:19,131 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:08:19,131 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:08:19,131 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 13:08:19,131 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 13:08:19,131 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 13:08:19,132 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:08:19,132 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:08:19,131 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 13:08:19,132 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:08:19,132 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:08:19,170 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:08:19,170 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:08:42,990 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:08:42,990 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:08:42,991 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:08:42,991 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:08:43,012 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the Great. The call Hello?'}, {'role': 'assistant', 'content': ' It seems there was a mix-up in your message. How can I assist you further?'}, {'role': 'user', 'content': 'Hello. Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello? Connect me to a call. Hello? Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help with that. Can I have your mobile number, please?'}, {'role': 'user', 'content': 'Yes. 931357155'}, {'role': 'assistant', 'content': " It seems the number you've provided is missing a digit. Could you please double-check and provide the complete 10-digit mobile number?"}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:08:43,014 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:08:43,014 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:08:43,014 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:08:43,015 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:08:43,015 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:08:43,235 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:08:43,235 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:08:43,783 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:38:43 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'470'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29534'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'932ms'), (b'x-request-id', b'req_cf775d36b55ec61e20556bd6264798db'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9821d30ca28adb-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:08:43,787 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:08:43,788 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:08:43,788 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:08:44,028 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:08:44,029 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:08:44,029 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:08:44,030 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:08:44,031 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:08:44,032 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:08:44,032 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:08:44,032 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:08:44,032 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:08:44,176 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:08:44,176 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:08:44,176 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:08:44,176 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:08:45,797 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:08:45,797 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:08:45,866 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:38:45 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1508'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-cj6fk'), (b'x-envoy-upstream-service-time', b'1495'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_90f84c43b5202f0dfa519255850ddaf8'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9821d968be91a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:08:45,869 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:08:45,870 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:08:45,870 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:08:46,180 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:08:46,180 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:08:46,203 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the Great. The call Hello?'}, {'role': 'assistant', 'content': ' It seems there was a mix-up in your message. How can I assist you further?'}, {'role': 'user', 'content': 'Hello. Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello? Connect me to a call. Hello? Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help with that. Can I have your mobile number, please?'}, {'role': 'user', 'content': 'Yes. 931357155'}, {'role': 'assistant', 'content': " It seems the number you've provided is missing a digit. Could you please double-check and provide the complete 10-digit mobile number?"}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello? Rich, connect me to an agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:08:46,205 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:08:46,206 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:08:46,206 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:08:46,207 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:08:46,207 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:08:46,718 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:08:46,718 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:08:46,718 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:08:46,910 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:38:46 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'378'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29527'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'946ms'), (b'x-request-id', b'req_a6945d64b7b8c227e44dddd018765a2e'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9821e6ff478adb-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:08:46,911 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:08:46,911 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:08:46,912 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:08:47,131 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! I can help with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:08:47,132 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:08:47,133 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:08:47,133 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:08:47,133 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:08:47,134 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:08:47,240 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:08:47,240 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:08:47,240 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:08:48,651 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:38:48 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1227'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-k2lph'), (b'x-envoy-upstream-service-time', b'1210'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_ae0f14afdc88f017aaf8f6fe4fe22971'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9821ecc9d591a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:08:48,653 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:08:48,653 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:08:48,654 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:08:48,920 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:08:48,920 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:08:48,961 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:08:48,961 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:08:49,379 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:08:49,380 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:08:49,380 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:08:49,383 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could I please have your mobile number to proceed?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:08:49,385 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:08:49,385 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:08:49,386 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:08:49,386 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:08:49,386 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:08:50,259 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:38:50 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'580'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-j8pwt'), (b'x-envoy-upstream-service-time', b'564'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_2f29c0e193398ace3a73144ab6f1d293'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9821fadcc791a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:08:50,260 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:08:50,260 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:08:50,260 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:08:50,618 - voice-business-agent - INFO - User speech received: Hello? Rich, connect me to an agent.
2024-12-29 13:08:50,619 - voice-business-agent - INFO - User speech received: Hello? Rich, connect me to an agent.
2024-12-29 13:08:50,619 - voice-business-agent - DEBUG - Validating phone number from text: Hello? Rich, connect me to an agent.
2024-12-29 13:08:50,619 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:08:50,618 - voice-business-agent - INFO - User speech received: Hello? Rich, connect me to an agent.
2024-12-29 13:08:50,619 - voice-business-agent - INFO - User speech received: Hello? Rich, connect me to an agent.
2024-12-29 13:08:50,619 - voice-business-agent - DEBUG - Validating phone number from text: Hello? Rich, connect me to an agent.
2024-12-29 13:08:50,619 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:08:50,999 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:08:50,999 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:08:51,000 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:08:53,674 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:08:53,674 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:08:53,675 - voice-business-agent - INFO - User speech received:  Hello! I can help with that. Could I please have your mobile number to proceed?
2024-12-29 13:08:53,675 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! I can help with that. Could I please have your mobile number to proceed?
2024-12-29 13:08:53,675 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:08:53,675 - voice-business-agent - INFO - User speech received:  Hello! I can help with that. Could I please have your mobile number to proceed?
2024-12-29 13:08:53,675 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:08:53,675 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! I can help with that. Could I please have your mobile number to proceed?
2024-12-29 13:08:53,675 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:08:53,675 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:08:53,710 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:08:53,710 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:08:57,481 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:08:57,481 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:08:58,799 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:08:58,799 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:08:59,175 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:08:59,175 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:08:59,186 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How...'}, {'role': 'user', 'content': 'Connect me to an agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': "Yes. It's 8447571554."}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Siri opened the Great. The call Hello?'}, {'role': 'assistant', 'content': ' It seems there was a mix-up in your message. How can I assist you further?'}, {'role': 'user', 'content': 'Hello. Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello? Connect me to a call. Hello? Connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. May I have your mobile number, please?'}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Hello?'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help with that. Can I have your mobile number, please?'}, {'role': 'user', 'content': 'Yes. 931357155'}, {'role': 'assistant', 'content': " It seems the number you've provided is missing a digit. Could you please double-check and provide the complete 10-digit mobile number?"}, {'role': 'user', 'content': '931-357-1554.'}, {'role': 'assistant', 'content': ' Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'user', 'content': 'Hello? Rich, connect me to an agent.'}, {'role': 'assistant', 'content': ' Hello! I can help with that. Could I please have your mobile number to proceed?'}, {'role': 'user', 'content': "Yes. It's in 93135 71554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:08:59,187 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:08:59,187 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:08:59,187 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:08:59,188 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:08:59,188 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:08:59,413 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:08:59,413 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:08:59,861 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:38:59 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'383'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'1.002s'), (b'x-request-id', b'req_738069b1da6978ac8176374c417c5370'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98223818868adb-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:08:59,861 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:08:59,861 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:08:59,861 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:09:00,120 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for providing your mobile number.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:09:00,122 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:09:00,122 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:09:00,122 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:09:00,123 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:09:00,123 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:09:00,413 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:09:00,414 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:09:00,416 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:09:01,367 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:39:01 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'915'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-canary-867f6bddf6-shjl9'), (b'x-envoy-upstream-service-time', b'900'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_869ac54e5a2f7d769bef9c3c8d571a1a'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98223dfd2d91a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:09:01,367 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:09:01,367 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:09:01,367 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:09:01,487 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:09:01,487 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:09:01,534 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:09:01,534 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:09:02,026 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:09:02,026 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:09:02,027 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:09:02,029 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I will now connect you to an agent.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:09:02,031 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:09:02,031 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:09:02,031 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:09:02,032 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:09:02,032 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:09:03,084 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:39:03 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'744'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-9xbjm'), (b'x-envoy-upstream-service-time', b'733'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_9f6fbd7be46b7e2c2a8e894421602608'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f982249ecba91a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:09:03,085 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:09:03,085 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:09:03,085 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:09:03,209 - voice-business-agent - INFO - User speech received: Yes. It's in 93135 71554.
2024-12-29 13:09:03,210 - voice-business-agent - INFO - User speech received: Yes. It's in 93135 71554.
2024-12-29 13:09:03,210 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's in 93135 71554.
2024-12-29 13:09:03,210 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 13:09:03,209 - voice-business-agent - INFO - User speech received: Yes. It's in 93135 71554.
2024-12-29 13:09:03,210 - voice-business-agent - INFO - User speech received: Yes. It's in 93135 71554.
2024-12-29 13:09:03,210 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's in 93135 71554.
2024-12-29 13:09:03,210 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 13:09:03,250 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:09:03,252 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:09:03,253 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:09:03,253 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:09:03,253 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:09:03,253 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:09:03,618 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:09:03,619 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:09:03,619 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:09:03,621 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on for a moment.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:09:03,623 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:09:03,624 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:09:03,624 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:09:03,624 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:09:03,624 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:09:03,993 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:39:04 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'408'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-lmbwv'), (b'x-envoy-upstream-service-time', b'395'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_3db143364a2d6be39a7fdf61f8320aac'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9822518f525523-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:09:03,994 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:09:03,994 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:09:03,995 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:09:04,717 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:39:04 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'766'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-gd4lp'), (b'x-envoy-upstream-service-time', b'750'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a83a4235c86c20daff763a7ec5c1e30b'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f982253da4591a0-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:09:04,720 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:09:04,720 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:09:04,721 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:09:04,859 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:09:04,860 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:09:04,860 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:09:05,299 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:09:05,299 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:09:05,299 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:09:06,895 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:09:06,895 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:09:06,896 - voice-business-agent - INFO - User speech received:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:09:06,896 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:09:06,896 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:09:06,896 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:09:06,896 - voice-business-agent - INFO - User speech received:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:09:06,896 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you for providing your mobile number. I will now connect you to an agent. Please hold on for a moment.
2024-12-29 13:09:06,896 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:09:06,896 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:09:06,897 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:09:06,897 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:09:06,931 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:09:06,931 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:09:06,966 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:09:06,966 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:09:09,724 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:09:09,724 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:09:09,725 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 13:09:09,725 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 13:09:09,725 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:09:09,725 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 13:09:09,725 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:09:09,725 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 13:09:09,725 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:09:09,725 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:09:09,766 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:09:09,766 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:10:16,706 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 13:10:16,709 - livekit.agents - DEV - Watching /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python
2024-12-29 13:10:17,712 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 13:10:17,721 - livekit.agents - INFO - starting worker
2024-12-29 13:10:17,927 - livekit.agents - INFO - registered worker
2024-12-29 13:10:47,428 - livekit.agents - INFO - shutting down worker
2024-12-29 13:10:48,674 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 13:10:48,695 - livekit.agents - INFO - starting worker
2024-12-29 13:10:48,877 - livekit.agents - INFO - registered worker
2024-12-29 13:10:52,019 - livekit.agents - INFO - received job request
2024-12-29 13:10:52,966 - livekit.agents - INFO - initializing job process
2024-12-29 13:10:52,966 - livekit.agents - INFO - job process initialized
2024-12-29 13:10:52,967 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 13:10:52,966 - livekit.agents - INFO - initializing job process
2024-12-29 13:10:52,966 - livekit.agents - INFO - job process initialized
2024-12-29 13:10:52,967 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 13:10:53,082 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2207
2024-12-29 13:10:53,082 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2207
2024-12-29 13:10:53,082 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 13:10:53,082 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 13:10:53,083 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 13:10:53,083 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 13:10:53,084 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 13:10:53,084 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 13:10:53,341 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 13:10:53,341 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 13:10:53,341 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 13:10:53,341 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 13:10:53,341 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 13:10:53,341 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 13:10:53,341 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 13:10:53,341 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 13:10:53,388 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 13:10:53,389 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 13:10:53,388 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 13:10:53,389 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 13:10:53,389 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 13:10:53,389 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 13:10:53,389 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 13:10:53,389 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 13:10:53,518 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 13:10:53,518 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 13:10:53,837 - voice-business-agent - INFO - Participant connected: voice_assistant_user_4827
2024-12-29 13:10:53,837 - voice-business-agent - INFO - Participant connected: voice_assistant_user_4827
2024-12-29 13:10:53,897 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 13:10:53,897 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 13:10:53,927 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 13:10:53,927 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 13:10:53,959 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:10:53,960 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 13:10:53,980 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10aedbc10>
2024-12-29 13:10:53,980 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b0aa7b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 13:10:53,992 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10aef77d0>
2024-12-29 13:10:53,992 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:10:53,993 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:10:53,993 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:10:53,993 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:10:53,993 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:10:55,368 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:40:55 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1069'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-qqxmg'), (b'x-envoy-upstream-service-time', b'1053'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_130750db63a67d409e9cdb0c67f8ca8e'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=_pu5gAn3vzzjWl3srICPqQIRJ2Kq0s73R40jBVaB7n4-1735458055-1.0.1.1-B2HjzPnLJk7PDQy8Hm8GCQOhB_gRk6ke8Pjl.0ysGJzuO4rTCUcPpUKa8tQzHSdaPvtfMSHnMguHe0vQnnGPBw; path=/; expires=Sun, 29-Dec-24 08:10:55 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=GufE9yQOMWTV4dGY9fbbDGEvY22F4y08DTTqn6muhnQ-1735458055392-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f982505aea5549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:10:55,369 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:10:55,369 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:10:55,370 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:10:55,634 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:10:55,634 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:10:55,686 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:10:55,686 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:10:55,899 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:10:55,899 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:10:55,900 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:10:57,687 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:10:57,687 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:10:57,688 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 13:10:57,688 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 13:10:57,689 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:10:57,689 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:10:57,688 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 13:10:57,688 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 13:10:57,689 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:10:57,689 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:10:57,733 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 13:10:57,733 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 13:11:01,790 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:11:01,790 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:11:02,167 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:11:02,167 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:11:02,179 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:11:02,180 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:11:02,196 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c098e50>
2024-12-29 13:11:02,197 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b0aa720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:11:02,213 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c0fb550>
2024-12-29 13:11:02,214 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:11:02,214 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:11:02,214 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:11:02,215 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:11:02,215 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:11:02,415 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 13:11:02,415 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 13:11:02,783 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:41:02 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'246'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29915'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'170ms'), (b'x-request-id', b'req_334c9ea390ca955b42d8ecc24e766733'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=SAHp1ePAIuY4PWvsApv1qb7m6pJnSDNMcxuE1skuhs4-1735458062-1.0.1.1-.qM6SKz.fhZOuWIQNR7qrhFOBr8fbqLb4shOIE3gLyGFzg5.YN9CbkD92q7OMPoKXVhmA4erE_pZBRF4aXxjvQ; path=/; expires=Sun, 29-Dec-24 08:11:02 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=EBPYoERSxTwsw.Z9dEkIDGxeID68jEspvIqu8SalhwY-1735458062803-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9825391de354cc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:11:02,785 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:11:02,786 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:11:02,786 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:11:03,584 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:11:03,585 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:11:03,586 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:11:03,586 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:11:03,586 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:11:03,586 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:11:04,092 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:11:04,092 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:11:04,093 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:11:05,359 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:41:05 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1448'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-d5cmp'), (b'x-envoy-upstream-service-time', b'1423'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b1f834d2f7a60efed906ebeb95fb691b'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9825419b68549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:11:05,360 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:11:05,360 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:11:05,361 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:11:05,645 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:11:05,645 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:11:05,691 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:11:05,691 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:11:07,200 - voice-business-agent - INFO - User speech received: Uh, what is the date today?
2024-12-29 13:11:07,200 - voice-business-agent - INFO - User speech received: Uh, what is the date today?
2024-12-29 13:11:07,201 - voice-business-agent - DEBUG - Validating phone number from text: Uh, what is the date today?
2024-12-29 13:11:07,201 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:11:07,200 - voice-business-agent - INFO - User speech received: Uh, what is the date today?
2024-12-29 13:11:07,200 - voice-business-agent - INFO - User speech received: Uh, what is the date today?
2024-12-29 13:11:07,201 - voice-business-agent - DEBUG - Validating phone number from text: Uh, what is the date today?
2024-12-29 13:11:07,201 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:11:07,715 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:11:07,716 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:11:07,716 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:11:07,727 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Please include any special characters or spaces in your number, and I'll take care of formatting it correctly.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:11:07,729 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:11:07,730 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:11:07,730 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:11:07,731 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:11:07,731 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:11:08,907 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:41:08 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'845'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-scx74'), (b'x-envoy-upstream-service-time', b'833'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_7552091cc7dee6eca309d93bcf71d3c3'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98255b8d4c549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:11:08,908 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:11:08,909 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:11:08,909 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:11:10,058 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:11:10,058 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:11:10,058 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:11:15,085 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:11:15,085 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:11:15,087 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:11:15,087 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:11:15,088 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:11:15,088 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:11:15,135 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 13:11:15,135 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 13:11:15,285 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:11:15,285 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:11:15,786 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:11:15,786 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:11:15,794 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': 'Got'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:11:15,796 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:11:15,797 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:11:15,797 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:11:15,798 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:11:15,798 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:11:16,036 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 13:11:16,036 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 13:11:16,367 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:41:16 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'273'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29871'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'258ms'), (b'x-request-id', b'req_2659f2087fbfd47774d49be7907a70f0'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98258dfaf954cc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:11:16,368 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:11:16,368 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:11:16,369 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:11:16,672 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:11:16,673 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:11:16,674 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:11:16,676 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Great! Please provide your mobile number without any special characters or spaces.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:11:16,677 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:11:16,678 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:11:16,678 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:11:16,678 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:11:16,678 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:11:17,168 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:11:17,168 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:11:17,170 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:11:17,170 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:11:18,005 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:41:18 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'497'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-jbzz5'), (b'x-envoy-upstream-service-time', b'480'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f89462b11360c302de27b1aa317a02d4'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9825937847549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:11:18,006 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:11:18,006 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:11:18,006 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:11:19,041 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:11:19,050 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:11:19,051 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:11:20,318 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:11:20,318 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:11:20,384 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:11:20,384 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:11:20,885 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:11:20,885 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:11:20,893 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:11:20,895 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:11:20,896 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:11:20,896 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:11:20,897 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:11:20,897 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:11:21,449 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:41:21 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'255'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29867'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'266ms'), (b'x-request-id', b'req_2193feb99ddada01b4c8da12623ab6aa'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9825adcb0554cc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:11:21,451 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:11:21,451 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:11:21,452 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:11:22,241 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you! Let me verify the number: 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:11:22,243 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:11:22,244 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:11:22,244 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:11:22,244 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:11:22,244 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:11:22,790 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:11:22,791 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:11:22,792 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:11:23,916 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:41:23 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1369'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-5bf2w'), (b'x-envoy-upstream-service-time', b'1339'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_32980e4da1587cafb2bc1cd61d88391f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9825b63972549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:11:23,917 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:11:23,917 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:11:23,917 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:11:24,178 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:11:24,178 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:11:24,224 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:11:24,224 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:11:25,320 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:11:25,824 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:11:25,825 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:11:25,828 - voice-business-agent - INFO - User speech received: Got It's 931357155 4
2024-12-29 13:11:25,829 - voice-business-agent - INFO - User speech received: Got It's 931357155 4
2024-12-29 13:11:25,829 - voice-business-agent - DEBUG - Validating phone number from text: Got It's 931357155 4
2024-12-29 13:11:25,828 - voice-business-agent - INFO - User speech received: Got It's 931357155 4
2024-12-29 13:11:25,830 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 13:11:25,829 - voice-business-agent - INFO - User speech received: Got It's 931357155 4
2024-12-29 13:11:25,829 - voice-business-agent - DEBUG - Validating phone number from text: Got It's 931357155 4
2024-12-29 13:11:25,830 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 13:11:25,833 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I will connect you with an agent now.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:11:25,834 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:11:25,835 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:11:25,836 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:11:25,837 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:11:25,837 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:11:25,876 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'phone_number': '9313571554'}
2024-12-29 13:11:25,876 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'phone_number': '9313571554'}
2024-12-29 13:11:25,876 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-29 13:11:25,876 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-29 13:11:25,909 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:11:25,909 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:11:26,058 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 13:11:26,062 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:11:26,058 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 13:11:26,062 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:11:26,064 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:11:26,064 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 13:11:26,074 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c1494d0>
2024-12-29 13:11:26,075 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b0aa7b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 13:11:26,092 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10aee2a10>
2024-12-29 13:11:26,092 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:11:26,092 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:11:26,092 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:11:26,093 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:11:26,093 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:11:27,376 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:41:27 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1212'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-p8n8t'), (b'x-envoy-upstream-service-time', b'1200'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_14b40b4226b560b5e2a06f983536c56d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9825cca814549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:11:27,377 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:11:27,380 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:11:27,380 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:11:27,441 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:41:27 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1035'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-xcwh6'), (b'x-envoy-upstream-service-time', b'1018'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_958aeadbc01a2936960c66f3dd88421e'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9825ce486454e3-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:11:27,443 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:11:27,444 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:11:27,445 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:11:28,206 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:11:28,207 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:11:28,207 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:11:28,229 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:11:28,229 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:11:28,230 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:11:28,231 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold for a moment.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:11:28,233 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:11:28,233 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:11:28,233 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:11:28,233 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:11:28,234 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:11:28,975 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:41:29 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'421'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-nbnxm'), (b'x-envoy-upstream-service-time', b'403'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_17993f3ebd58a65281570400463a7b98'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9825dbaba9549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:11:28,977 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:11:28,977 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:11:28,977 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:11:29,554 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:11:29,555 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:11:29,555 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:11:32,371 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:11:32,371 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:11:32,372 - voice-business-agent - INFO - User speech received:  Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.
2024-12-29 13:11:32,372 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.
2024-12-29 13:11:32,372 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 13:11:32,372 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:11:32,372 - voice-business-agent - INFO - User speech received:  Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.
2024-12-29 13:11:32,372 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-29 13:11:32,372 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.
2024-12-29 13:11:32,372 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 13:11:32,372 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:11:32,372 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-29 13:11:32,407 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:11:32,407 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:11:32,474 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 13:11:32,476 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:11:32,474 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 13:11:32,476 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:11:32,477 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:11:32,477 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:11:32,478 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Call transfer initiated. You'll receive a call shortly.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:11:32,479 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:11:32,480 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:11:32,480 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:11:32,480 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:11:32,480 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:11:32,481 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:11:32,481 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:11:32,529 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:11:32,529 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:11:33,989 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:41:34 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1171'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-nbnxm'), (b'x-envoy-upstream-service-time', b'1152'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_44b02658292d7b6c73bf02b4faccf3a9'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9825f63834549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:11:33,991 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:11:33,991 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:11:33,992 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:11:35,165 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:11:35,166 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:11:35,166 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:11:35,396 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:11:35,396 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:11:35,396 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 13:11:35,396 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 13:11:35,397 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:11:35,396 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 13:11:35,397 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:11:35,396 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 13:11:35,397 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:11:35,397 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:11:35,397 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:11:35,397 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:11:35,438 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:11:35,438 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:11:35,482 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:11:35,482 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:11:38,738 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:11:38,739 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 13:11:38,738 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:11:38,739 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 13:11:38,739 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 13:11:38,739 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:11:38,739 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:11:38,739 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 13:11:38,739 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:11:38,739 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:11:38,781 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:11:38,781 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:11:43,788 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:11:43,788 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:11:44,197 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:11:44,197 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:11:44,207 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:11:44,208 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:11:44,209 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:11:44,209 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:11:44,209 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:11:44,210 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:11:44,449 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:11:44,449 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:11:44,809 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:41:44 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'300'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29802'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'396ms'), (b'x-request-id', b'req_10ada61ecebdd331db4aa4f242c55534'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98263f8beb54cc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:11:44,811 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:11:44,811 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:11:44,812 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:11:45,299 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Good afternoon! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:11:45,301 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:11:45,301 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:11:45,301 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:11:45,302 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:11:45,302 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:11:45,460 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:11:45,461 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:11:45,461 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:11:46,218 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:41:46 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'593'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-chcnm'), (b'x-envoy-upstream-service-time', b'552'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_17f2ada0ae767f4fe1006d1eb859d10a'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9826465c02549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:11:46,219 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:11:46,219 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:11:46,219 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:11:46,506 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:11:46,506 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:11:46,571 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:11:46,571 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:11:46,957 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:11:46,957 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:11:46,959 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:11:46,959 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:11:47,006 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:11:47,006 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:11:47,072 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:11:47,072 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:11:47,072 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:11:51,350 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:11:51,350 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:11:51,727 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:11:51,727 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:11:51,737 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:11:51,740 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:11:51,741 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:11:51,741 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:11:51,741 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:11:51,741 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:11:51,982 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:11:51,982 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:11:52,330 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:41:52 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'287'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29800'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'400ms'), (b'x-request-id', b'req_2b0ca7fe949d0bef8460a4136cf2569f'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98266e9e8754cc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:11:52,331 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:11:52,332 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:11:52,332 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:11:52,671 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Good afternoon! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:11:52,674 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:11:52,674 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:11:52,675 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:11:52,675 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:11:52,675 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:11:52,685 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:11:52,685 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:11:52,686 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 13:11:52,686 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:11:52,687 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:11:52,687 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:11:52,687 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:11:53,346 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:11:53,346 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:11:53,355 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:11:53,355 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:11:53,362 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter. Done.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:11:53,363 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:11:53,374 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c168d50>
2024-12-29 13:11:53,375 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b0aa720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:11:53,389 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c148fd0>
2024-12-29 13:11:53,389 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:11:53,390 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:11:53,390 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:11:53,390 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:11:53,390 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:11:53,727 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:41:53 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'713'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-hvslh'), (b'x-envoy-upstream-service-time', b'683'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_856d00af6619e3c1e1e2c8f6d64bd200'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9826746a1a549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:11:53,728 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:11:53,728 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:11:53,728 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:11:54,118 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:41:54 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'386'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29799'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'402ms'), (b'x-request-id', b'req_6196379cb0a536c857b034b242c8d545'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f982678e8a154c5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:11:54,123 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:11:54,127 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:11:54,127 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:11:54,339 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It seems there might be some confusion.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:11:54,341 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:11:54,341 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:11:54,341 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:11:54,342 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:11:54,342 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:11:54,479 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:11:54,479 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:11:54,480 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 13:11:54,481 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:11:54,481 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:11:54,481 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:11:54,481 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:11:54,819 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:11:54,819 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:11:54,820 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:11:56,022 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:41:56 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1366'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-n5rs5'), (b'x-envoy-upstream-service-time', b'1351'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_42a73a72b7b11e7c3cb7923cfe39420d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98267edaf654e3-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:11:56,023 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:11:56,023 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:11:56,023 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:11:56,786 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:11:56,787 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:11:56,787 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:12:08,788 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:12:08,788 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:12:09,990 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:12:09,990 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:12:10,856 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:12:10,856 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:12:10,862 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:12:10,863 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:12:10,889 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c34d790>
2024-12-29 13:12:10,889 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b0aa720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:12:10,906 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c34d4d0>
2024-12-29 13:12:10,906 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:12:10,906 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:12:10,907 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:12:10,907 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:12:10,907 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:12:10,934 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:12:10,934 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:12:10,935 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:12:10,935 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:12:10,935 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:12:10,935 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:12:10,943 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:12:10,944 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 13:12:10,944 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:12:10,944 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:12:10,945 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:12:10,945 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:12:10,945 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:12:10,955 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c17ea50>
2024-12-29 13:12:10,955 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b0aa720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:12:10,966 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c32dfd0>
2024-12-29 13:12:10,966 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:12:10,967 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:12:10,967 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:12:10,967 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:12:10,967 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:12:11,565 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:42:11 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'291'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'498'), (b'x-ratelimit-remaining-tokens', b'29614'), (b'x-ratelimit-reset-requests', b'173ms'), (b'x-ratelimit-reset-tokens', b'771ms'), (b'x-request-id', b'req_1027f126168271b4fd8461c816099a17'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9826e6b93f8ae5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:12:11,567 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:12:11,567 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:12:11,568 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:12:12,139 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Good afternoon! Could you please provide your mobile number, so I can connect you with an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:12:12,140 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:12:12,140 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:12:12,140 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:12:12,141 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:12:12,141 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:12:12,352 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:12:12,353 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:12:12,353 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:12:13,497 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:42:13 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1029'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-wrp9x'), (b'x-envoy-upstream-service-time', b'1016'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_330a3f109f480d26d21ac8f83ecb1203'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9826ee18ce549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:12:13,498 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:12:13,499 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:12:13,499 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:12:13,772 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:12:13,772 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:12:13,819 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:12:13,819 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:12:14,345 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:12:14,345 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:12:14,346 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:12:14,346 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:12:14,388 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:12:14,388 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:12:14,564 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:12:14,565 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:12:14,565 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:12:14,837 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:12:14,837 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:12:17,766 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:12:17,766 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:12:17,776 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:12:17,778 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:12:17,778 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:12:17,779 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:12:17,779 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:12:17,779 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:12:18,024 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:12:18,024 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:12:18,356 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:42:18 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'286'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29786'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'428ms'), (b'x-request-id', b'req_e9f399a71dc4dc60d057cd2fe7a5461b'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9827114a698ae5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:12:18,357 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:12:18,357 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:12:18,357 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:12:18,936 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Good afternoon! To assist you better, could you please provide your mobile number without any spaces or special characters?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:12:18,939 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:12:18,940 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:12:18,940 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:12:18,940 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:12:18,940 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:12:19,369 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:12:19,370 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:12:19,370 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:12:19,756 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:12:19,756 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:12:19,757 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:12:19,757 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:12:20,191 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:42:20 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'917'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-9lk8f'), (b'x-envoy-upstream-service-time', b'895'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_9ce18000ebd2ac60df8271aa70a895a3'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9827189bd0549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:12:20,193 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:12:20,194 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:12:20,195 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:12:22,445 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:12:22,447 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:12:22,448 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:12:25,139 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:12:25,139 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:12:25,149 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:12:25,151 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:12:25,153 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:12:25,153 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:12:25,154 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:12:25,154 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:12:25,719 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:42:25 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'275'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29786'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'428ms'), (b'x-request-id', b'req_9a4c6040e361c7ab8d2b865c34cb451f'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98273f6df88ae5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:12:25,720 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:12:25,720 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:12:25,721 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:12:26,132 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Good afternoon! I can connect you to an agent for further assistance.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:12:26,134 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:12:26,135 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:12:26,135 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:12:26,135 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:12:26,135 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:12:26,499 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:12:26,500 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:12:26,500 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:12:28,504 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:42:28 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'2043'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-6cmnp'), (b'x-envoy-upstream-service-time', b'2023'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_83208cf68eba0a2f6e338114f5bd7c8a'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9827458fae549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:12:28,505 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:12:28,505 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:12:28,506 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:12:28,762 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:12:28,762 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:12:28,810 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:12:28,810 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:12:29,415 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:12:29,415 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:12:29,419 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:12:29,419 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:12:29,462 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:12:29,462 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:12:29,919 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:12:29,919 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:12:29,919 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:12:29,982 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:12:29,982 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:12:31,878 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:12:31,878 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:12:31,888 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:12:31,890 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:12:31,891 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:12:31,891 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:12:31,892 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:12:31,892 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:12:32,125 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:12:32,125 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:12:32,493 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:42:32 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'302'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29784'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'432ms'), (b'x-request-id', b'req_6823099f99fc2176edd70275a217c1cd'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9827698ff88ae5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:12:32,494 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:12:32,495 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:12:32,495 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:12:33,098 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Good afternoon! To connect you with an agent, could you please provide your mobile number?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:12:33,099 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:12:33,099 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:12:33,099 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:12:33,100 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:12:33,100 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:12:33,474 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:12:33,474 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:12:33,475 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 13:12:33,475 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:12:33,475 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:12:33,475 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:12:33,475 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:12:33,975 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:42:33 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'560'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-hpnk7'), (b'x-envoy-upstream-service-time', b'541'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_aa24c53e00cbd446a404fc274c6fd381'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9827711fd6549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:12:33,977 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:12:33,978 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:12:33,978 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:12:36,148 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:12:36,149 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:12:36,149 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:12:39,840 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:12:39,840 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:12:40,227 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:12:40,227 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:12:40,240 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because look'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:12:40,241 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:12:40,265 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c377f10>
2024-12-29 13:12:40,266 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b0aa720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:12:40,279 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c377910>
2024-12-29 13:12:40,280 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:12:40,280 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:12:40,280 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:12:40,281 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:12:40,281 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:12:41,055 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:42:41 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'437'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29783'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'434ms'), (b'x-request-id', b'req_e507619d8af98daec575efe5f1e05906'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98279dfc575475-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:12:41,056 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:12:41,056 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:12:41,056 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:12:41,385 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:12:41,385 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:12:41,388 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 13:12:41,388 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:12:41,389 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:12:41,389 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:12:41,389 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:12:42,288 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:12:42,288 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:12:42,757 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:12:42,757 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:12:42,766 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because look Thank you for watching,'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:12:42,768 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:12:42,841 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10aef4c10>
2024-12-29 13:12:42,841 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b0aa720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:12:42,897 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c098210>
2024-12-29 13:12:42,898 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:12:42,898 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:12:42,898 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:12:42,898 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:12:42,898 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:12:44,018 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:42:44 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'289'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29777'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'446ms'), (b'x-request-id', b'req_de09d465f8e17633dadefb443fe19b9d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9827ae4c6c8aee-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:12:44,020 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:12:44,020 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:12:44,020 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:12:44,395 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Good afternoon! To connect you with an agent, I'll need your mobile number first.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:12:44,397 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:12:44,397 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:12:44,397 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:12:44,397 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:12:44,397 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:12:44,466 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:12:44,467 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:12:44,467 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:12:45,776 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:42:45 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'589'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-phmcz'), (b'x-envoy-upstream-service-time', b'553'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c5a916babbdd3b6f58f733add45aab0e'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9827b7be15549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:12:45,777 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:12:45,777 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:12:45,778 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:12:46,022 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:12:46,022 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:12:46,069 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:12:46,069 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:12:47,255 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:12:47,255 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:12:47,256 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:12:47,257 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide that?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:12:47,259 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:12:47,259 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:12:47,260 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:12:47,260 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:12:47,260 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:12:47,592 - voice-business-agent - INFO - User speech received: Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because look Thank you for watching,
2024-12-29 13:12:47,593 - voice-business-agent - INFO - User speech received: Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because look Thank you for watching,
2024-12-29 13:12:47,593 - voice-business-agent - DEBUG - Validating phone number from text: Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because look Thank you for watching,
2024-12-29 13:12:47,592 - voice-business-agent - INFO - User speech received: Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because look Thank you for watching,
2024-12-29 13:12:47,593 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:12:47,593 - voice-business-agent - INFO - User speech received: Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because look Thank you for watching,
2024-12-29 13:12:47,593 - voice-business-agent - DEBUG - Validating phone number from text: Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because look Thank you for watching,
2024-12-29 13:12:47,593 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:12:48,310 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:42:48 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'747'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-jbftg'), (b'x-envoy-upstream-service-time', b'727'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_02003a458f0e8c2d7849c1f3de46fe54'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9827c99d80549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:12:48,310 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:12:48,310 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:12:48,311 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:12:49,106 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:12:49,106 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:12:49,107 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:12:49,325 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:12:49,325 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:12:49,327 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:12:49,327 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:12:49,327 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:12:49,327 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:12:49,371 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:12:49,371 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:12:59,914 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:12:59,914 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:13:00,715 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:13:00,715 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:13:00,720 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because look Thank you for watching,'}, {'role': 'assistant', 'content': " Good afternoon! To connect you with an agent, I'll..."}, {'role': 'user', 'content': "Yes. It's a double 4, 75715"}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:13:00,721 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:13:00,721 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:13:00,721 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:13:00,721 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:13:00,721 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:13:00,737 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:13:00,737 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:13:00,738 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:13:00,738 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:13:00,738 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:13:00,738 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:13:00,743 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because look Thank you for watching,'}, {'role': 'assistant', 'content': " Good afternoon! To connect you with an agent, I'll..."}, {'role': 'user', 'content': "Yes. It's a double 4, 75715 54."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:13:00,743 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 13:13:00,744 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:13:00,744 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:13:00,744 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:13:00,744 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:13:00,744 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:13:00,780 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c098290>
2024-12-29 13:13:00,780 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b0aa720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:13:00,796 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10aee2810>
2024-12-29 13:13:00,796 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:13:00,796 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:13:00,796 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:13:00,796 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:13:00,797 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:13:00,981 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:13:00,981 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:13:01,413 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:43:01 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'314'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29754'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'492ms'), (b'x-request-id', b'req_d2029be293b104ee5dc667abf522ada8'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98281e3fa154c2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:13:01,415 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:13:01,418 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:13:01,419 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:13:01,592 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you for providing your number.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:13:01,594 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:13:01,594 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:13:01,594 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:13:01,595 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:13:01,595 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:13:02,060 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:13:02,060 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:13:02,060 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:13:02,699 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:43:02 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'811'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-22jsn'), (b'x-envoy-upstream-service-time', b'798'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_5a66955687aa9d3aefccebf7f0a365fa'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9828232a59549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:13:02,699 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:13:02,700 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:13:02,700 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:13:02,962 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:13:02,962 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:13:03,005 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:13:03,005 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:13:03,459 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:13:03,459 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:13:03,459 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:13:03,460 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Just to clarify, is your mobile number 75715554?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:13:03,460 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:13:03,461 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:13:03,461 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:13:03,461 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:13:03,461 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:13:04,554 - voice-business-agent - INFO - User speech received: Yes. It's a double 4, 75715 54.
2024-12-29 13:13:04,555 - voice-business-agent - INFO - User speech received: Yes. It's a double 4, 75715 54.
2024-12-29 13:13:04,555 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's a double 4, 75715 54.
2024-12-29 13:13:04,555 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:13:04,554 - voice-business-agent - INFO - User speech received: Yes. It's a double 4, 75715 54.
2024-12-29 13:13:04,555 - voice-business-agent - INFO - User speech received: Yes. It's a double 4, 75715 54.
2024-12-29 13:13:04,555 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's a double 4, 75715 54.
2024-12-29 13:13:04,555 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:13:05,118 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:43:05 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'822'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-kv9pt'), (b'x-envoy-upstream-service-time', b'803'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_993d6a7552094c2628744d4f30f84379'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98282ed9c7549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:13:05,119 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:13:05,119 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:13:05,119 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:13:06,183 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:13:06,183 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:13:06,184 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:13:06,185 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please confirm so I can connect you to the right agent.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:13:06,186 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:13:06,187 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:13:06,187 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:13:06,187 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:13:06,187 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:13:08,415 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:43:08 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1933'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-9fjwz'), (b'x-envoy-upstream-service-time', b'1918'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_591e4daea7813a022686e08ee4c3d376'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98283fd8af549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:13:08,416 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:13:08,417 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:13:08,417 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:13:09,517 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:13:09,518 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:13:09,518 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:13:11,815 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:13:11,815 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:13:11,817 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:13:11,817 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:13:11,817 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:13:11,817 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:13:11,899 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:13:11,899 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:13:12,789 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:13:12,789 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:13:13,166 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:13:13,166 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:13:13,179 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because look Thank you for watching,'}, {'role': 'assistant', 'content': " Good afternoon! To connect you with an agent, I'll..."}, {'role': 'user', 'content': "Yes. It's a double 4, 75715 54."}, {'role': 'assistant', 'content': ' Thank you for providing your number. Just to clarify, is your mobile number 75715554? Please confirm so I can connect you to...'}, {'role': 'user', 'content': "No. It's there."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:13:13,181 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:13:13,181 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:13:13,182 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:13:13,182 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:13:13,182 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:13:13,423 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:13:13,423 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:13:13,764 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:43:13 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'260'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29716'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'568ms'), (b'x-request-id', b'req_3a9cb2cb6df86f115f31df24d93cad9e'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98286b9fbd54c2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:13:13,765 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:13:13,765 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:13:13,766 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:13:14,007 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide your mobile number again?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:13:14,009 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:13:14,010 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:13:14,010 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:13:14,010 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:13:14,010 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:13:14,287 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:13:14,287 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:13:14,288 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 13:13:14,289 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:13:14,289 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:13:14,289 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:13:14,290 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:13:15,327 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:43:15 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'930'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-97zm2'), (b'x-envoy-upstream-service-time', b'921'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a8408e91960319e40298263bc1c94835'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f982870ca59549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:13:15,329 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:13:15,329 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:13:15,329 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:13:16,125 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:13:16,126 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:13:16,126 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:13:17,795 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:13:17,795 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:13:18,171 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:13:18,171 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:13:18,183 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because look Thank you for watching,'}, {'role': 'assistant', 'content': " Good afternoon! To connect you with an agent, I'll..."}, {'role': 'user', 'content': "Yes. It's a double 4, 75715 54."}, {'role': 'assistant', 'content': ' Thank you for providing your number. Just to clarify, is your mobile number 75715554? Please confirm so I can connect you to...'}, {'role': 'user', 'content': "No. It's there. 8, double 4, 7571, double 5, 4."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:13:18,185 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:13:18,296 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c0fa790>
2024-12-29 13:13:18,297 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b0aa720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:13:18,354 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10aed2450>
2024-12-29 13:13:18,355 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:13:18,356 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:13:18,356 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:13:18,356 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:13:18,357 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:13:18,994 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:43:18 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'296'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29708'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'584ms'), (b'x-request-id', b'req_28326a4fce8b6d94b127bc376808bbd0'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98288bfaea8e7b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:13:18,995 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:13:18,996 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:13:18,996 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:13:19,335 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Got it, thank you! Your mobile number is 8447571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:13:19,336 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:13:19,337 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:13:19,337 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:13:19,337 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:13:19,337 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:13:19,567 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:13:19,568 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:13:19,568 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:13:21,282 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:43:21 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1623'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-xqf9n'), (b'x-envoy-upstream-service-time', b'1606'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_ee2028acea3449a8256aa94d671b1bb6'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9828920c5c549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:13:21,284 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:13:21,285 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:13:21,285 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:13:21,566 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:13:21,566 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:13:21,615 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:13:21,615 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:13:22,691 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:13:22,691 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:13:22,692 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:13:22,692 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I will connect you with an agent now.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:13:22,693 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:13:22,693 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:13:22,693 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:13:22,693 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:13:22,693 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:13:23,407 - voice-business-agent - INFO - User speech received: No. It's there. 8, double 4, 7571, double 5, 4.
2024-12-29 13:13:23,408 - voice-business-agent - INFO - User speech received: No. It's there. 8, double 4, 7571, double 5, 4.
2024-12-29 13:13:23,408 - voice-business-agent - DEBUG - Validating phone number from text: No. It's there. 8, double 4, 7571, double 5, 4.
2024-12-29 13:13:23,408 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:13:23,407 - voice-business-agent - INFO - User speech received: No. It's there. 8, double 4, 7571, double 5, 4.
2024-12-29 13:13:23,408 - voice-business-agent - INFO - User speech received: No. It's there. 8, double 4, 7571, double 5, 4.
2024-12-29 13:13:23,408 - voice-business-agent - DEBUG - Validating phone number from text: No. It's there. 8, double 4, 7571, double 5, 4.
2024-12-29 13:13:23,408 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:13:24,739 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:43:24 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1713'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-xpwfw'), (b'x-envoy-upstream-service-time', b'1695'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_1258baca78a18cce894d4dfe906c27aa'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9828a70f1c549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:13:24,739 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:13:24,739 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:13:24,740 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:13:25,464 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:13:25,464 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:13:25,465 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:13:25,466 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold for a moment.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:13:25,467 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:13:25,468 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:13:25,468 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:13:25,468 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:13:25,468 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:13:26,505 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:43:26 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'752'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-mqppv'), (b'x-envoy-upstream-service-time', b'740'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_cd7daeed3968fde2ec4d8f84d4294aea'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9828b85d22549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:13:26,505 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:13:26,505 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:13:26,505 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:13:27,002 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:13:27,003 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:13:27,003 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:13:30,105 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:13:30,106 - voice-business-agent - INFO - User speech received:  Got it, thank you! Your mobile number is 8447571554. I will connect you with an agent now. Please hold for a moment.
2024-12-29 13:13:30,106 - voice-business-agent - DEBUG - Validating phone number from text:  Got it, thank you! Your mobile number is 8447571554. I will connect you with an agent now. Please hold for a moment.
2024-12-29 13:13:30,105 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:13:30,106 - voice-business-agent - INFO - Valid phone number found: 8447571554
2024-12-29 13:13:30,106 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:13:30,106 - voice-business-agent - INFO - User speech received:  Got it, thank you! Your mobile number is 8447571554. I will connect you with an agent now. Please hold for a moment.
2024-12-29 13:13:30,106 - voice-business-agent - DEBUG - Validating phone number from text:  Got it, thank you! Your mobile number is 8447571554. I will connect you with an agent now. Please hold for a moment.
2024-12-29 13:13:30,106 - voice-business-agent - INFO - Transferring call to 8447571554
2024-12-29 13:13:30,106 - voice-business-agent - INFO - Valid phone number found: 8447571554
2024-12-29 13:13:30,106 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:13:30,106 - voice-business-agent - INFO - Transferring call to 8447571554
2024-12-29 13:13:30,156 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:13:30,156 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:13:30,246 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 13:13:30,246 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 13:13:30,248 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:13:30,248 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:13:30,250 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:13:30,250 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:13:30,251 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Call transfer initiated. You'll receive a call shortly.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:13:30,253 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:13:30,254 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:13:30,254 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:13:30,255 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:13:30,255 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:13:31,144 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:43:31 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'597'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-bxj7b'), (b'x-envoy-upstream-service-time', b'575'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_3acecd057ac41a208e8acff35c34f02c'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9828d64a17549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:13:31,145 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:13:31,145 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:13:31,145 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:13:31,386 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:13:31,386 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:13:31,433 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:13:31,433 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:13:33,387 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:13:33,388 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:13:33,388 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:13:35,417 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:13:35,418 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 13:13:35,417 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:13:35,419 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 13:13:35,419 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:13:35,419 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:13:35,418 - voice-business-agent - INFO - User speech received:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 13:13:35,419 - voice-business-agent - DEBUG - Validating phone number from text:  Call transfer initiated. You'll receive a call shortly.
2024-12-29 13:13:35,419 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:13:35,419 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:13:35,460 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:13:35,460 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:13:58,185 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:13:58,185 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:13:58,186 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:13:58,186 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:13:58,196 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because look Thank you for watching,'}, {'role': 'assistant', 'content': " Good afternoon! To connect you with an agent, I'll..."}, {'role': 'user', 'content': "Yes. It's a double 4, 75715 54."}, {'role': 'assistant', 'content': ' Thank you for providing your number. Just to clarify, is your mobile number 75715554? Please confirm so I can connect you to...'}, {'role': 'user', 'content': "No. It's there. 8, double 4, 7571, double 5, 4."}, {'role': 'assistant', 'content': ' Got it, thank you! Your mobile number is 8447571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:13:58,198 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:13:58,198 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:13:58,199 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:13:58,199 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:13:58,199 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:13:58,455 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:13:58,455 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:13:58,991 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:13:58,991 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:13:58,992 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 13:13:58,992 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:13:58,993 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:13:58,993 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:13:58,993 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:14:20,838 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:14:20,838 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:14:20,839 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:14:20,839 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:14:20,847 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because look Thank you for watching,'}, {'role': 'assistant', 'content': " Good afternoon! To connect you with an agent, I'll..."}, {'role': 'user', 'content': "Yes. It's a double 4, 75715 54."}, {'role': 'assistant', 'content': ' Thank you for providing your number. Just to clarify, is your mobile number 75715554? Please confirm so I can connect you to...'}, {'role': 'user', 'content': "No. It's there. 8, double 4, 7571, double 5, 4."}, {'role': 'assistant', 'content': ' Got it, thank you! Your mobile number is 8447571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello? But,'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:14:20,847 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:14:20,869 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10aef6650>
2024-12-29 13:14:20,869 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b0aa720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:14:20,881 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10b14ee90>
2024-12-29 13:14:20,882 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:14:20,882 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:14:20,882 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:14:20,882 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:14:20,882 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:14:21,526 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:44:21 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'261'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29659'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'682ms'), (b'x-request-id', b'req_2b08d73d2ce26524e82a867481671f74'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f982a12bd5b8ae2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:14:21,528 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:14:21,528 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:14:21,528 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:14:21,808 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:14:21,808 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:14:21,810 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 13:14:21,810 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:14:21,810 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:14:21,810 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:14:21,811 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:14:23,037 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:14:23,037 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:14:23,413 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:14:23,413 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:14:23,422 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because look Thank you for watching,'}, {'role': 'assistant', 'content': " Good afternoon! To connect you with an agent, I'll..."}, {'role': 'user', 'content': "Yes. It's a double 4, 75715 54."}, {'role': 'assistant', 'content': ' Thank you for providing your number. Just to clarify, is your mobile number 75715554? Please confirm so I can connect you to...'}, {'role': 'user', 'content': "No. It's there. 8, double 4, 7571, double 5, 4."}, {'role': 'assistant', 'content': ' Got it, thank you! Your mobile number is 8447571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello? But, Hello?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:14:23,423 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:14:23,435 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c36fc90>
2024-12-29 13:14:23,435 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b0aa720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:14:23,451 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c34c550>
2024-12-29 13:14:23,451 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:14:23,452 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:14:23,452 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:14:23,452 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:14:23,452 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:14:24,089 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:44:24 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'329'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29657'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'686ms'), (b'x-request-id', b'req_f9f57b8f88ba80ea5e8208429351e766'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f982a22cafa91d4-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:14:24,091 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:14:24,091 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:14:24,092 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:14:24,438 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:14:24,438 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:14:24,443 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:14:24,443 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:14:24,443 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:14:24,443 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:14:24,455 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because look Thank you for watching,'}, {'role': 'assistant', 'content': " Good afternoon! To connect you with an agent, I'll..."}, {'role': 'user', 'content': "Yes. It's a double 4, 75715 54."}, {'role': 'assistant', 'content': ' Thank you for providing your number. Just to clarify, is your mobile number 75715554? Please confirm so I can connect you to...'}, {'role': 'user', 'content': "No. It's there. 8, double 4, 7571, double 5, 4."}, {'role': 'assistant', 'content': ' Got it, thank you! Your mobile number is 8447571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello? But, Hello? Hi.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:14:24,456 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 13:14:24,457 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:14:24,457 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:14:24,458 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:14:24,458 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:14:24,458 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:14:24,476 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c154410>
2024-12-29 13:14:24,477 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b0aa720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:14:24,493 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10c17ce10>
2024-12-29 13:14:24,494 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:14:24,494 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:14:24,494 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:14:24,495 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:14:24,495 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:14:25,097 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:44:25 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'299'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29656'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'688ms'), (b'x-request-id', b'req_2439e3e918a2f4405cf0571a222e6fae'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f982a294cb791d9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:14:25,097 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:14:25,097 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:14:25,097 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:14:25,339 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hi! It seems there might have been a misunderstanding.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:14:25,341 - httpcore.connection - DEBUG - close.started
2024-12-29 13:14:25,342 - httpcore.connection - DEBUG - close.complete
2024-12-29 13:14:25,342 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:14:25,343 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:14:25,344 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:14:25,344 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:14:25,344 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:14:25,775 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:14:25,776 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:14:25,776 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:14:26,665 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:14:26,665 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:14:26,667 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:14:26,667 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:14:27,009 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:44:27 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'820'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-kztxl'), (b'x-envoy-upstream-service-time', b'792'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_8cee047135cc6ca8084a9102a06cee30'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f982a2e9e4c549b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:14:27,009 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:14:27,010 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:14:27,010 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:14:28,385 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:14:28,386 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:14:28,387 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:14:29,194 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:14:29,194 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:14:29,195 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:14:29,195 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:14:29,202 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Uh, what is the date today?'}, {'role': 'assistant', 'content': ' I can help you with that, but first, could you please provide your mobile number so I can connect you with an agent who can assist you further? Please include any...'}, {'role': 'user', 'content': "Got It's 931357155 4"}, {'role': 'assistant', 'content': ' Thank you! Let me verify the number: 9313571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hi. Good afternoon. What Enter. Done. Hello. Please connect. To the Agent What subjects Because look Thank you for watching,'}, {'role': 'assistant', 'content': " Good afternoon! To connect you with an agent, I'll..."}, {'role': 'user', 'content': "Yes. It's a double 4, 75715 54."}, {'role': 'assistant', 'content': ' Thank you for providing your number. Just to clarify, is your mobile number 75715554? Please confirm so I can connect you to...'}, {'role': 'user', 'content': "No. It's there. 8, double 4, 7571, double 5, 4."}, {'role': 'assistant', 'content': ' Got it, thank you! Your mobile number is 8447571554. I will connect you with an agent now. Please hold for a moment.'}, {'role': 'assistant', 'content': " Call transfer initiated. You'll receive a call shortly."}, {'role': 'user', 'content': 'Hello? But, Hello? Hi. And so I was like, we think dynamic events can all save.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:14:29,204 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:14:29,204 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:14:29,204 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:14:29,204 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:14:29,204 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:14:29,788 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:44:29 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'283'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29642'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'716ms'), (b'x-request-id', b'req_6bbbc0171f91d24e715b963e80ce7a62'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f982a46bba091d9-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:14:29,789 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:14:29,790 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:14:29,790 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:14:29,866 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:14:29,866 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:14:29,866 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 13:14:29,866 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:14:29,867 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:14:29,867 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:14:29,867 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:23:17,447 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"ping timeout\"" UnknownReason Resume
2024-12-29 13:23:17,450 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 0
2024-12-29 13:23:17,447 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"ping timeout\"" UnknownReason Resume
2024-12-29 13:23:17,450 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 0
2024-12-29 13:23:25,719 - livekit - ERROR - livekit::rtc_engine::rtc_session:569:livekit::rtc_engine::rtc_session - Subscriber pc state failed
2024-12-29 13:23:25,720 - livekit - ERROR - livekit::rtc_engine::rtc_session:569:livekit::rtc_engine::rtc_session - Publisher pc state failed
2024-12-29 13:23:25,720 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "pc_state failed" UnknownReason Resume
2024-12-29 13:23:25,720 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "pc_state failed" UnknownReason Resume
2024-12-29 13:23:25,719 - livekit - ERROR - livekit::rtc_engine::rtc_session:569:livekit::rtc_engine::rtc_session - Subscriber pc state failed
2024-12-29 13:23:25,720 - livekit - ERROR - livekit::rtc_engine::rtc_session:569:livekit::rtc_engine::rtc_session - Publisher pc state failed
2024-12-29 13:23:25,720 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "pc_state failed" UnknownReason Resume
2024-12-29 13:23:25,720 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "pc_state failed" UnknownReason Resume
2024-12-29 13:24:32,109 - livekit - ERROR - livekit::rtc_engine::rtc_session:393:livekit::rtc_engine::rtc_session - rtc_event is taking too much time: IceCandidate { ice_candidate: IceCandidate { candidate: "candidate:1280999519 1 udp 2122194687 192.168.29.177 58799 typ host generation 0 ufrag JxCk network-id 1 network-cost 50" }, target: Subscriber }
2024-12-29 13:24:32,109 - livekit - ERROR - livekit::rtc_engine::rtc_session:393:livekit::rtc_engine::rtc_session - rtc_event is taking too much time: IceCandidate { ice_candidate: IceCandidate { candidate: "candidate:1280999519 1 udp 2122194687 192.168.29.177 58799 typ host generation 0 ufrag JxCk network-id 1 network-cost 50" }, target: Subscriber }
2024-12-29 13:24:54,770 - livekit.agents - DEBUG - shutting down job task
2024-12-29 13:24:54,770 - livekit.agents - DEBUG - shutting down job task
2024-12-29 13:24:54,771 - livekit.agents - INFO - process exiting
2024-12-29 13:24:54,800 - livekit.agents - INFO - received job request
2024-12-29 13:24:54,801 - livekit.agents - INFO - received job request
2024-12-29 13:24:54,801 - livekit.agents - INFO - received job request
2024-12-29 13:24:56,147 - livekit.agents - INFO - initializing job process
2024-12-29 13:24:56,148 - livekit.agents - INFO - job process initialized
2024-12-29 13:24:56,148 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 13:24:56,147 - livekit.agents - INFO - initializing job process
2024-12-29 13:24:56,148 - livekit.agents - INFO - job process initialized
2024-12-29 13:24:56,148 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 13:24:56,263 - voice-business-agent - INFO - Connecting to room voice_assistant_room_4562
2024-12-29 13:24:56,263 - voice-business-agent - INFO - Connecting to room voice_assistant_room_4562
2024-12-29 13:24:56,263 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 13:24:56,264 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 13:24:56,263 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 13:24:56,264 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 13:24:56,264 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 13:24:56,264 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 13:24:56,384 - livekit.agents - INFO - shutting down worker
2024-12-29 13:24:56,385 - livekit.agents - DEBUG - shutting down job task
2024-12-29 13:24:56,385 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 13:24:56,385 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 13:24:56,385 - livekit.agents - DEBUG - shutting down job task
2024-12-29 13:24:56,385 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 13:24:56,386 - livekit.agents - INFO - process exiting
2024-12-29 13:24:56,385 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 13:25:01,386 - watchfiles.main - WARNING - process has not terminated, sending SIGKILL
2024-12-29 13:25:02,554 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 13:25:02,564 - livekit.agents - INFO - starting worker
2024-12-29 13:25:02,579 - livekit.agents - DEV - reloading job
2024-12-29 13:25:02,840 - livekit.agents - INFO - registered worker
2024-12-29 13:25:03,710 - livekit.agents - INFO - initializing job process
2024-12-29 13:25:03,710 - livekit.agents - INFO - initializing job process
2024-12-29 13:25:03,711 - livekit.agents - INFO - job process initialized
2024-12-29 13:25:03,712 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 13:25:03,712 - livekit.agents - DEV - reloading job
2024-12-29 13:25:03,711 - livekit.agents - INFO - job process initialized
2024-12-29 13:25:03,712 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 13:25:03,769 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 13:25:03,830 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2207
2024-12-29 13:25:03,830 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2207
2024-12-29 13:25:03,831 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 13:25:03,831 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 13:25:03,831 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 13:25:03,831 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 13:25:03,832 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 13:25:03,832 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 13:25:03,931 - livekit.agents - INFO - registered worker
2024-12-29 13:25:04,095 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 13:25:04,095 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 13:25:04,095 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 13:25:04,095 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 13:25:04,095 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 13:25:04,095 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 13:25:04,095 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 13:25:04,095 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 13:25:04,140 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 13:25:04,140 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 13:25:04,140 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 13:25:04,140 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 13:25:04,140 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 13:25:04,140 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 13:25:04,140 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 13:25:04,140 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 13:25:04,563 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 13:25:04,563 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 13:25:04,854 - livekit.agents - INFO - initializing job process
2024-12-29 13:25:04,855 - livekit.agents - INFO - job process initialized
2024-12-29 13:25:04,855 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 13:25:04,854 - livekit.agents - INFO - initializing job process
2024-12-29 13:25:04,855 - livekit.agents - INFO - job process initialized
2024-12-29 13:25:04,855 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 13:25:04,896 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 13:25:04,961 - voice-business-agent - INFO - Connecting to room voice_assistant_room_4562
2024-12-29 13:25:04,961 - voice-business-agent - INFO - Connecting to room voice_assistant_room_4562
2024-12-29 13:25:04,962 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 13:25:04,962 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 13:25:04,962 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 13:25:04,962 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 13:25:04,963 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 13:25:04,963 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 13:25:05,120 - livekit.agents - INFO - registered worker
2024-12-29 13:25:05,231 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 13:25:05,231 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 13:25:05,231 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 13:25:05,231 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 13:25:05,231 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 13:25:05,231 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 13:25:05,231 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 13:25:05,231 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 13:25:05,288 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 13:25:05,288 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 13:25:05,288 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 13:25:05,288 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 13:25:05,288 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 13:25:05,288 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 13:25:05,288 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 13:25:05,288 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 13:25:05,431 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 13:25:05,431 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 13:25:05,692 - voice-business-agent - INFO - Participant connected: voice_assistant_user_9051
2024-12-29 13:25:05,692 - voice-business-agent - INFO - Participant connected: voice_assistant_user_9051
2024-12-29 13:25:05,754 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 13:25:05,754 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 13:25:05,790 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 13:25:05,790 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 13:25:05,826 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:25:05,827 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 13:25:05,848 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1209dd890>
2024-12-29 13:25:05,848 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1210ce7b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 13:25:05,885 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x120879c10>
2024-12-29 13:25:05,885 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:25:05,885 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:25:05,885 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:25:05,886 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:25:05,886 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:25:07,207 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:55:07 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'534'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-27zdr'), (b'x-envoy-upstream-service-time', b'518'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_1eeb66bcb31e7b769edb46017f9b9753'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=_18ES_N.dNf8VRfj.26N7MXMGrxsArjEimH2qLhairI-1735458907-1.0.1.1-4ntEGI.wg8z48ghnsAvByU4IrpD7TEBxRSURY5Gcu.JJnukZnuxLMravo_AHq6WpWzkfOk6bOVlvVqnU8XQw_g; path=/; expires=Sun, 29-Dec-24 08:25:07 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=m5BhvtjOibhcg7A62kQJDDUDlMioZhe9ovNK5nRDgbM-1735458907238-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9839d21bd691dc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:25:07,209 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:25:07,210 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:25:07,210 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:25:07,939 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:25:07,939 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:25:07,939 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:25:08,837 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:25:08,837 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:25:08,897 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:25:08,897 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:25:10,641 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:25:10,641 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:25:10,642 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:25:10,642 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:25:10,648 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you'}, {'role': 'user', 'content': 'Hello?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:25:10,649 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:25:10,662 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x121176f90>
2024-12-29 13:25:10,662 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1210ce720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:25:10,674 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1209f1090>
2024-12-29 13:25:10,675 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:25:10,675 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:25:10,675 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:25:10,676 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:25:10,676 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:25:10,864 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:25:10,864 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:25:10,865 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 13:25:10,865 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 13:25:10,865 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 13:25:10,865 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:25:10,865 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:25:10,865 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 13:25:10,865 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:25:10,865 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:25:10,894 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 13:25:10,894 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 13:25:10,942 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 13:25:10,942 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 13:25:11,238 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:55:11 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'243'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29922'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'156ms'), (b'x-request-id', b'req_638d125a5dfd7f0fb328440e5da90a88'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=_F9ImBjbg.4qkJPhP7p45onxJBM.hjTHMBSoiqWp_vI-1735458911-1.0.1.1-sYTtvMxjwjk3sXlGMhnWHH7Nnc9JzDJJ3P9yut0Tt5sF1PfXx1Y.8eH6a1KmvChtdthSVWujfqorSMa1_9Vvtw; path=/; expires=Sun, 29-Dec-24 08:25:11 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=_Npxw16oc8aiZXbaxGuEqX_7LcR1xaa6cJP9ang2gS8-1735458911272-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9839effabf8aee-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:25:11,239 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:25:11,240 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:25:11,240 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:25:11,560 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:25:11,561 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:25:11,561 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:25:11,563 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hi there! Can I have your mobile number so I can connect you with an agent?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:25:11,564 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:25:11,565 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:25:11,565 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:25:11,565 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:25:11,566 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:25:12,450 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:55:12 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'597'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-jsl7m'), (b'x-envoy-upstream-service-time', b'576'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_97b1f9ac5f8762f166e3bc5d7833399f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9839f5980a91dc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:25:12,451 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:25:12,451 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:25:12,451 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:25:12,596 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:25:12,596 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:25:12,596 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:25:12,596 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:25:14,034 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:25:14,034 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:25:14,328 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:25:14,328 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:25:14,329 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:25:14,410 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:25:14,410 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:25:14,414 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:25:14,415 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:25:14,415 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:25:14,416 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:25:14,416 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:25:14,416 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:25:14,660 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 13:25:14,660 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 13:25:14,992 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:55:15 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'274'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29913'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'174ms'), (b'x-request-id', b'req_ac0d1c7836ba79345545814017e70e81'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f983a0758668aee-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:25:14,993 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:25:14,994 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:25:14,994 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:25:15,291 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Sure, I can help you with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:25:15,292 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:25:15,293 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:25:15,293 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:25:15,293 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:25:15,293 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:25:15,453 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:25:15,454 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:25:15,454 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:25:16,382 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 13:25:16,382 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 13:25:16,382 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 13:25:16,382 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 0
2024-12-29 13:25:16,383 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_jyERiJt8aCNc&access_token=...
2024-12-29 13:25:16,382 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 13:25:16,382 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 13:25:16,382 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 13:25:16,382 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 0
2024-12-29 13:25:16,383 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_jyERiJt8aCNc&access_token=...
2024-12-29 13:25:16,658 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 13:25:16,658 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 13:25:16,658 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 13:25:16,658 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 13:25:16,658 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 13:25:16,658 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 13:25:16,658 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 13:25:16,658 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 13:25:16,707 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 13:25:16,708 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 13:25:16,707 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 13:25:16,708 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 13:25:16,708 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 13:25:16,708 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 13:25:16,708 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 13:25:16,708 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 13:25:16,848 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 13:25:16,848 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 13:25:16,854 - livekit - INFO - livekit::rtc_engine:617:livekit::rtc_engine - RtcEngine successfully recovered
2024-12-29 13:25:16,854 - livekit - INFO - livekit::rtc_engine:617:livekit::rtc_engine - RtcEngine successfully recovered
2024-12-29 13:25:16,858 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:55:16 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1262'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-cfcfg'), (b'x-envoy-upstream-service-time', b'1248'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f75b5a11cdedb6e9b07388b63902e830'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f983a0cdd0c91dc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:25:16,858 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:25:16,858 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:25:16,859 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:25:17,114 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:25:17,114 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:25:17,170 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:25:17,170 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:25:17,620 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:25:17,620 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:25:17,620 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:25:17,622 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could I please have your mobile number first?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:25:17,623 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:25:17,623 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:25:17,623 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:25:17,624 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:25:17,624 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:25:18,477 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:55:18 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'568'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-vh9xh'), (b'x-envoy-upstream-service-time', b'551'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_418f8bd9a81e143d950e3f2c7ae7fb29'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f983a1b6eb891dc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:25:18,478 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:25:18,478 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:25:18,479 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:25:18,627 - voice-business-agent - INFO - User speech received: Hello? Please connect me to agent.
2024-12-29 13:25:18,627 - voice-business-agent - INFO - User speech received: Hello? Please connect me to agent.
2024-12-29 13:25:18,627 - voice-business-agent - DEBUG - Validating phone number from text: Hello? Please connect me to agent.
2024-12-29 13:25:18,627 - voice-business-agent - INFO - User speech received: Hello? Please connect me to agent.
2024-12-29 13:25:18,627 - voice-business-agent - INFO - User speech received: Hello? Please connect me to agent.
2024-12-29 13:25:18,627 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:25:18,627 - voice-business-agent - DEBUG - Validating phone number from text: Hello? Please connect me to agent.
2024-12-29 13:25:18,627 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:25:19,214 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:25:19,214 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:25:19,214 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:25:21,573 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:25:21,573 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:25:21,573 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. Could I please have your mobile number first?
2024-12-29 13:25:21,573 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help you with that. Could I please have your mobile number first?
2024-12-29 13:25:21,573 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:25:21,573 - voice-business-agent - INFO - User speech received:  Sure, I can help you with that. Could I please have your mobile number first?
2024-12-29 13:25:21,573 - voice-business-agent - DEBUG - Validating phone number from text:  Sure, I can help you with that. Could I please have your mobile number first?
2024-12-29 13:25:21,574 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:25:21,573 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:25:21,574 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:25:21,623 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 13:25:21,623 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 13:25:24,638 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:25:24,638 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:25:26,582 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:25:26,582 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:25:26,958 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:25:26,958 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:25:26,961 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could I please have your mobile number first?'}, {'role': 'user', 'content': "Yes. It's 9313 571554."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:25:26,962 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:25:26,962 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:25:26,963 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:25:26,963 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:25:26,963 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:25:27,210 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 13:25:27,210 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 13:25:27,593 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:55:27 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'321'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29886'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'228ms'), (b'x-request-id', b'req_d02c04186541bb53dd19a1ce186ab17d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f983a55ca708aee-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:25:27,594 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:25:27,595 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:25:27,596 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:25:27,942 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Let me confirm the number: 9313571554.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:25:27,943 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:25:27,943 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:25:27,944 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:25:27,944 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:25:27,944 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:25:28,218 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:25:28,219 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:25:28,219 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:25:28,871 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:55:28 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'615'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-cqscz'), (b'x-envoy-upstream-service-time', b'596'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_cd770c02f41f3edf0b55104d5fb444e5'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f983a5bfcea91dc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:25:28,872 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:25:28,872 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:25:28,872 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:25:29,126 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:25:29,126 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:25:29,178 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:25:29,178 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 13:25:29,707 - livekit.agents - INFO - received job request
2024-12-29 13:25:30,168 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:25:30,168 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:25:30,168 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:25:30,169 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I will connect you with an agent right away.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:25:30,170 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:25:30,170 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:25:30,170 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:25:30,170 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:25:30,170 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:25:30,773 - voice-business-agent - INFO - User speech received: Yes. It's 9313 571554.
2024-12-29 13:25:30,773 - voice-business-agent - INFO - User speech received: Yes. It's 9313 571554.
2024-12-29 13:25:30,773 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 9313 571554.
2024-12-29 13:25:30,773 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 13:25:30,773 - voice-business-agent - INFO - User speech received: Yes. It's 9313 571554.
2024-12-29 13:25:30,773 - voice-business-agent - INFO - User speech received: Yes. It's 9313 571554.
2024-12-29 13:25:30,773 - voice-business-agent - DEBUG - Validating phone number from text: Yes. It's 9313 571554.
2024-12-29 13:25:30,773 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 13:25:30,837 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'phone_number': '9313571554'}
2024-12-29 13:25:30,838 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-29 13:25:30,837 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'phone_number': '9313571554'}
2024-12-29 13:25:30,838 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-29 13:25:30,902 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:25:30,902 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:25:31,032 - livekit.agents - INFO - initializing job process
2024-12-29 13:25:31,033 - livekit.agents - INFO - job process initialized
2024-12-29 13:25:31,032 - livekit.agents - INFO - initializing job process
2024-12-29 13:25:31,033 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 13:25:31,033 - livekit.agents - INFO - job process initialized
2024-12-29 13:25:31,033 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 13:25:31,053 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 13:25:31,054 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:25:31,053 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 13:25:31,054 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:25:31,056 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Please hold while I connect your call.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:25:31,057 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 13:25:31,083 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x137ac5510>
2024-12-29 13:25:31,083 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1210ce7b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 13:25:31,103 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x137ac76d0>
2024-12-29 13:25:31,104 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:25:31,104 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:25:31,104 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:25:31,104 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:25:31,104 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:25:31,133 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2207
2024-12-29 13:25:31,133 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2207
2024-12-29 13:25:31,134 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 13:25:31,134 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 13:25:31,134 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 13:25:31,134 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 13:25:31,135 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 13:25:31,135 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 13:25:31,249 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:55:31 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'769'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-4wjc8'), (b'x-envoy-upstream-service-time', b'752'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_52ae0e378aa1611ccb683a7fa971fe3c'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f983a69ed2d91dc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:25:31,249 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:25:31,249 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:25:31,250 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:25:31,394 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 13:25:31,394 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 13:25:31,395 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 13:25:31,394 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 13:25:31,395 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 13:25:31,394 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 13:25:31,395 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 13:25:31,395 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 13:25:31,429 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 13:25:31,429 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 13:25:31,429 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 13:25:31,429 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 13:25:31,429 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 13:25:31,429 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 13:25:31,429 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 13:25:31,429 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 13:25:31,540 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 13:25:31,540 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 13:25:32,180 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:25:32,180 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:25:32,180 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:25:32,184 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please hold on.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:25:32,188 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:25:32,189 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:25:32,189 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:25:32,189 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:25:32,189 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:25:32,651 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:55:32 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1227'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-lnr85'), (b'x-envoy-upstream-service-time', b'1210'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_6a563edba5f7acb64e1c93e8f2e03702'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f983a6faf2c5506-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:25:32,651 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:25:32,651 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:25:32,651 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:25:33,733 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:25:33,733 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:25:33,734 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:25:34,337 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:55:34 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'523'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-fvwld'), (b'x-envoy-upstream-service-time', b'504'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_ee9937b4e241a6f5998b72b0ccbc9d7d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f983a767b7691dc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:25:34,337 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:25:34,338 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:25:34,338 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:25:34,340 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:25:34,340 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:25:34,340 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:25:37,266 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:25:37,266 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:25:37,266 - voice-business-agent - INFO - User speech received:  Thank you. Let me confirm the number: 9313571554. I will connect you with an agent right away. Please hold on.
2024-12-29 13:25:37,266 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Let me confirm the number: 9313571554. I will connect you with an agent right away. Please hold on.
2024-12-29 13:25:37,266 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 13:25:37,266 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:25:37,266 - voice-business-agent - INFO - User speech received:  Thank you. Let me confirm the number: 9313571554. I will connect you with an agent right away. Please hold on.
2024-12-29 13:25:37,267 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-29 13:25:37,266 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Let me confirm the number: 9313571554. I will connect you with an agent right away. Please hold on.
2024-12-29 13:25:37,266 - voice-business-agent - INFO - Valid phone number found: 9313571554
2024-12-29 13:25:37,266 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:25:37,267 - voice-business-agent - INFO - Transferring call to 9313571554
2024-12-29 13:25:37,290 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:25:37,290 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): c2c.ivrobd.com:443
2024-12-29 13:25:37,339 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 13:25:37,340 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:25:37,339 - urllib3.connectionpool - DEBUG - https://c2c.ivrobd.com:443 "POST /api/c2c/process HTTP/1.1" 200 79
2024-12-29 13:25:37,340 - voice-business-agent - INFO - Call transfer successful.
2024-12-29 13:25:37,342 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:25:37,342 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:25:37,342 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Call transfer initiated. You'll receive a call shortly.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:25:37,343 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:25:37,344 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:25:37,344 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:25:37,344 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:25:37,344 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:25:37,344 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:25:37,344 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:25:37,394 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:25:37,394 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:25:39,423 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:55:39 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1265'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-canary-66b759597b-2thc5'), (b'x-envoy-upstream-service-time', b'1252'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_9d4eab1a69c65208edacced6573df9cb'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f983a96abb191dc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:25:39,423 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:25:39,423 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:25:39,424 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:25:40,359 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:25:40,359 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:25:40,360 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 13:25:40,360 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 13:25:40,360 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:25:40,360 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:25:40,360 - voice-business-agent - INFO - User speech received:  Thank you. Please hold while I connect your call.
2024-12-29 13:25:40,360 - voice-business-agent - DEBUG - Validating phone number from text:  Thank you. Please hold while I connect your call.
2024-12-29 13:25:40,360 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:25:40,360 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:25:40,361 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:25:40,361 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:25:40,408 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:25:40,408 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:25:40,457 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:25:40,457 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:25:40,691 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:25:40,691 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:25:40,691 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:25:41,874 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:25:41,874 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:25:41,879 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:25:41,879 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:25:41,879 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:25:41,879 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:25:41,976 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:25:41,976 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:25:47,088 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:25:47,088 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:25:48,120 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:25:48,120 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:25:48,128 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could I please have your mobile number first?'}, {'role': 'user', 'content': "Yes. It's 9313 571554."}, {'role': 'assistant', 'content': ' Thank you. Let me confirm the number: 9313571554. I will connect you with an agent right away. Please hold on.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': ' Call transfer initiated....'}, {'role': 'user', 'content': 'Caller is'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:25:48,129 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:25:48,130 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:25:48,130 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:25:48,130 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:25:48,130 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:25:48,373 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:25:48,373 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:25:48,707 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:55:48 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'261'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29833'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'334ms'), (b'x-request-id', b'req_0064d05c671a7c1720c7e5b9cb3a3752'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f983ada1f6e8aee-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:25:48,708 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:25:48,709 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:25:48,709 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:25:48,917 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It seems like your message got cut off.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:25:48,918 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:25:48,918 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:25:48,918 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:25:48,919 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:25:48,919 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:25:48,978 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:25:48,978 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:25:48,978 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:25:50,019 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:55:50 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'739'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-pvdmd'), (b'x-envoy-upstream-service-time', b'703'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_4169c2023350560f295a6791cd22e1ed'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f983adf0a7e91dc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:25:50,019 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:25:50,019 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:25:50,020 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:25:50,321 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:25:50,321 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:25:50,373 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:25:50,373 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:25:52,146 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:25:52,146 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:25:52,148 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:25:52,148 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:25:52,198 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:25:52,198 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:25:52,538 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:25:52,539 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:25:52,539 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:25:58,939 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:25:58,939 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:25:59,219 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:25:59,219 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:25:59,227 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could I please have your mobile number first?'}, {'role': 'user', 'content': "Yes. It's 9313 571554."}, {'role': 'assistant', 'content': ' Thank you. Let me confirm the number: 9313571554. I will connect you with an agent right away. Please hold on.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': ' Call transfer initiated....'}, {'role': 'user', 'content': 'Caller is Mary Poon Ferry.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:25:59,229 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:25:59,229 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:25:59,229 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:25:59,230 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:25:59,230 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:25:59,472 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:25:59,472 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking', 'phone_number': '9313571554'} {'lk.agent.state': 'thinking'}
2024-12-29 13:25:59,990 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:25:59,990 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:25:59,991 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 13:25:59,991 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:25:59,991 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:25:59,991 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:25:59,992 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:26:08,929 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:26:08,929 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:26:10,269 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:26:10,269 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:26:10,276 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could I please have your mobile number first?'}, {'role': 'user', 'content': "Yes. It's 9313 571554."}, {'role': 'assistant', 'content': ' Thank you. Let me confirm the number: 9313571554. I will connect you with an agent right away. Please hold on.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': ' Call transfer initiated....'}, {'role': 'user', 'content': 'Caller is Mary Poon Ferry. 9 Pine Court'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:26:10,277 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:26:10,281 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:26:10,282 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:26:10,281 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:26:10,282 - livekit.agents.pipeline - DEBUG - interrupt threshold is not met
2024-12-29 13:26:10,282 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:26:10,282 - livekit.agents.pipeline - DEBUG - interrupt threshold is not met
2024-12-29 13:26:10,283 - httpcore.connection - DEBUG - connect_tcp.failed exception=CancelledError()
2024-12-29 13:26:10,283 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:26:10,283 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:26:14,577 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:26:14,577 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:26:16,529 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:26:16,529 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:26:16,680 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:26:16,680 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:26:16,684 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could I please have your mobile number first?'}, {'role': 'user', 'content': "Yes. It's 9313 571554."}, {'role': 'assistant', 'content': ' Thank you. Let me confirm the number: 9313571554. I will connect you with an agent right away. Please hold on.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': ' Call transfer initiated....'}, {'role': 'user', 'content': 'Yeah. Not low. Local.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:26:16,685 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:26:16,696 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x137b0fe50>
2024-12-29 13:26:16,696 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1210ce720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:26:16,713 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1209dff10>
2024-12-29 13:26:16,713 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:26:16,714 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:26:16,714 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:26:16,714 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:26:16,714 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:26:17,501 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:56:17 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'487'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29830'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'340ms'), (b'x-request-id', b'req_78dbd48f15c31cae1be41233e8e9d33d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f983b8cbc088e7b-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:26:17,501 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:26:17,501 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:26:17,501 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:26:17,585 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:26:17,585 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:26:17,586 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 13:26:17,586 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:26:17,586 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:26:17,586 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:26:17,586 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:26:18,387 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:26:18,387 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:26:18,545 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:26:18,545 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:26:18,552 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could I please have your mobile number first?'}, {'role': 'user', 'content': "Yes. It's 9313 571554."}, {'role': 'assistant', 'content': ' Thank you. Let me confirm the number: 9313571554. I will connect you with an agent right away. Please hold on.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': ' Call transfer initiated....'}, {'role': 'user', 'content': 'Yeah. Not low. Local. Uh, yeah.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:26:18,553 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 13:26:18,563 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x137a98a50>
2024-12-29 13:26:18,563 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1210ce720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 13:26:18,575 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x137b15cd0>
2024-12-29 13:26:18,576 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:26:18,577 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:26:18,577 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:26:18,577 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:26:18,577 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:26:19,161 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:56:19 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'267'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29827'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'346ms'), (b'x-request-id', b'req_2acc772d4fb63c89d911bfafafea41f9'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f983b985c8f91ca-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:26:19,162 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:26:19,163 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:26:19,163 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:26:19,381 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Got it, thank you for clarifying.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:26:19,383 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:26:19,384 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:26:19,384 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:26:19,384 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:26:19,384 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:26:19,500 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:26:19,501 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:26:19,501 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:26:20,504 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:26:20,504 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:26:20,504 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:26:20,504 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:26:20,805 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:56:20 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1031'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-7cf2q'), (b'x-envoy-upstream-service-time', b'1015'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_07eb8771138e0c7c7056aa013576376c'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f983b9d7b2e91dc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:26:20,805 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:26:20,805 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:26:20,805 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:26:21,657 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:26:21,657 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:26:21,657 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:26:23,178 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:26:23,178 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 13:26:23,471 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:26:23,471 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 13:26:23,480 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Hello? Please connect me to agent.'}, {'role': 'assistant', 'content': ' Sure, I can help you with that. Could I please have your mobile number first?'}, {'role': 'user', 'content': "Yes. It's 9313 571554."}, {'role': 'assistant', 'content': ' Thank you. Let me confirm the number: 9313571554. I will connect you with an agent right away. Please hold on.'}, {'role': 'assistant', 'content': ' Thank you. Please hold while I connect your call.'}, {'role': 'assistant', 'content': ' Call transfer initiated....'}, {'role': 'user', 'content': 'Yeah. Not low. Local. Uh, yeah. Local.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 13:26:23,481 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:26:23,482 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:26:23,482 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:26:23,482 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:26:23,482 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:26:24,201 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:56:24 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'326'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29826'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'348ms'), (b'x-request-id', b'req_cc961a8f1cfa7a0b2ac388fb885e632c'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f983bb70da791ca-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:26:24,204 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 13:26:24,204 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 13:26:24,205 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:26:24,419 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It seems there is a bit of confusion.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:26:24,421 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:26:24,421 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:26:24,421 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:26:24,421 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:26:24,421 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:26:24,638 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:26:24,639 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:26:24,639 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:26:25,346 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:56:25 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'620'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-n5rs5'), (b'x-envoy-upstream-service-time', b'593'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_cd8310eb256be9a92a2d6fc28b6e0f53'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f983bbceb7591dc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:26:25,346 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:26:25,347 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:26:25,347 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:26:25,603 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:26:25,603 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 13:26:25,658 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:26:25,658 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking', 'phone_number': '9313571554'} {'lk.agent.state': 'speaking'}
2024-12-29 13:26:26,358 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:26:26,359 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:26:26,359 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:26:26,360 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'If you need help with something specific, could you please clarify?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 13:26:26,361 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 13:26:26,361 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 13:26:26,361 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 13:26:26,361 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 13:26:26,361 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 13:26:27,286 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 07:56:27 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'593'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-kv9pt'), (b'x-envoy-upstream-service-time', b'560'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_8d42bdae42c7be16ea8cecf857677e39'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f983bc90b8691dc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 13:26:27,287 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 13:26:27,287 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 13:26:27,288 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 13:26:27,303 - voice-business-agent - INFO - User speech received: Yeah. Not low. Local. Uh, yeah. Local.
2024-12-29 13:26:27,303 - voice-business-agent - INFO - User speech received: Yeah. Not low. Local. Uh, yeah. Local.
2024-12-29 13:26:27,303 - voice-business-agent - DEBUG - Validating phone number from text: Yeah. Not low. Local. Uh, yeah. Local.
2024-12-29 13:26:27,303 - voice-business-agent - INFO - User speech received: Yeah. Not low. Local. Uh, yeah. Local.
2024-12-29 13:26:27,304 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:26:27,303 - voice-business-agent - INFO - User speech received: Yeah. Not low. Local. Uh, yeah. Local.
2024-12-29 13:26:27,303 - voice-business-agent - DEBUG - Validating phone number from text: Yeah. Not low. Local. Uh, yeah. Local.
2024-12-29 13:26:27,304 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 13:26:29,255 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 13:26:29,256 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 13:26:29,256 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 13:26:30,935 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:26:30,935 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 13:26:30,936 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:26:30,936 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 13:26:30,936 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:26:30,936 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 13:26:30,987 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:26:30,987 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening', 'phone_number': '9313571554'} {'lk.agent.state': 'listening'}
2024-12-29 13:26:55,608 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 13:26:55,610 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 13:26:55,608 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 13:26:55,610 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 13:26:55,612 - livekit.agents - DEBUG - shutting down job task
2024-12-29 13:26:55,613 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 13:26:55,613 - livekit.agents - INFO - process exiting
2024-12-29 13:26:55,613 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 13:26:55,615 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 13:26:55,612 - livekit.agents - DEBUG - shutting down job task
2024-12-29 13:26:55,613 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 13:26:55,613 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 13:26:55,615 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 13:26:55,790 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 13:26:55,972 - livekit.agents - INFO - registered worker
2024-12-29 13:30:05,633 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 13:30:05,634 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 13:30:05,635 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 13:30:05,635 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 13:30:05,633 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 13:30:05,636 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 13:30:05,636 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 13:30:05,635 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 13:30:05,634 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 13:30:05,636 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 13:30:05,637 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 13:30:05,638 - livekit.agents - DEBUG - shutting down job task
2024-12-29 13:30:05,638 - livekit.agents - DEBUG - shutting down job task
2024-12-29 13:30:05,635 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 13:30:05,636 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 13:30:05,638 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 13:30:05,638 - livekit.agents - DEBUG - shutting down job task
2024-12-29 13:30:05,638 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 13:30:05,639 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 13:30:05,638 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 13:30:05,639 - livekit.agents - INFO - process exiting
2024-12-29 13:30:05,639 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 13:30:05,637 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 13:30:05,638 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 13:30:05,640 - livekit.agents - INFO - process exiting
2024-12-29 13:30:05,638 - livekit.agents - DEBUG - shutting down job task
2024-12-29 13:30:05,638 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 13:30:05,638 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 13:30:05,639 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 13:30:05,639 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 13:30:05,809 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 13:30:06,056 - livekit.agents - INFO - registered worker
2024-12-29 14:04:34,450 - livekit.agents - INFO - shutting down worker
2024-12-29 14:04:36,050 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:04:36,055 - livekit.agents - INFO - starting worker
2024-12-29 14:04:36,278 - livekit.agents - INFO - registered worker
2024-12-29 14:04:54,363 - livekit.agents - INFO - shutting down worker
2024-12-29 14:04:55,708 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:04:55,731 - livekit.agents - INFO - starting worker
2024-12-29 14:04:55,972 - livekit.agents - INFO - registered worker
2024-12-29 14:11:22,653 - livekit.agents - INFO - shutting down worker
2024-12-29 14:11:24,079 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:11:24,085 - livekit.agents - INFO - starting worker
2024-12-29 14:11:24,261 - livekit.agents - INFO - registered worker
2024-12-29 14:11:41,524 - livekit.agents - INFO - received job request
2024-12-29 14:11:46,524 - livekit.agents - INFO - received job request
2024-12-29 14:11:49,028 - livekit.agents - WARNING - assignment for job AJ_SzodpvDUuWoR timed out
2024-12-29 14:11:49,028 - livekit.agents - ERROR - job_request_fnc failed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 490, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 681, in _on_accept
    await asyncio.wait_for(wait_assignment, ASSIGNMENT_TIMEOUT)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 492, in wait_for
    raise exceptions.TimeoutError() from exc
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 715, in _job_request_task
    await self._opts.request_fnc(job_req)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 68, in _default_request_fnc
    await ctx.accept()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/job.py", line 355, in accept
    await self._on_accept(accept_arguments)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 687, in _on_accept
    raise AssignmentTimeoutError()
livekit.agents._exceptions.AssignmentTimeoutError
2024-12-29 14:11:53,525 - livekit.agents - INFO - received job request
2024-12-29 14:11:54,026 - livekit.agents - WARNING - assignment for job AJ_SzodpvDUuWoR timed out
2024-12-29 14:11:54,026 - livekit.agents - ERROR - job_request_fnc failed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 490, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 681, in _on_accept
    await asyncio.wait_for(wait_assignment, ASSIGNMENT_TIMEOUT)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 492, in wait_for
    raise exceptions.TimeoutError() from exc
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 715, in _job_request_task
    await self._opts.request_fnc(job_req)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 68, in _default_request_fnc
    await ctx.accept()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/job.py", line 355, in accept
    await self._on_accept(accept_arguments)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 687, in _on_accept
    raise AssignmentTimeoutError()
livekit.agents._exceptions.AssignmentTimeoutError
2024-12-29 14:12:01,027 - livekit.agents - WARNING - assignment for job AJ_SzodpvDUuWoR timed out
2024-12-29 14:12:01,029 - livekit.agents - ERROR - job_request_fnc failed
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 490, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 681, in _on_accept
    await asyncio.wait_for(wait_assignment, ASSIGNMENT_TIMEOUT)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/tasks.py", line 492, in wait_for
    raise exceptions.TimeoutError() from exc
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 715, in _job_request_task
    await self._opts.request_fnc(job_req)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 68, in _default_request_fnc
    await ctx.accept()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/job.py", line 355, in accept
    await self._on_accept(accept_arguments)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/worker.py", line 687, in _on_accept
    raise AssignmentTimeoutError()
livekit.agents._exceptions.AssignmentTimeoutError
2024-12-29 14:12:02,597 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:12:02,599 - livekit.agents - DEV - Watching /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python
2024-12-29 14:12:03,691 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:12:03,719 - livekit.agents - INFO - starting worker
2024-12-29 14:12:05,492 - livekit.agents - INFO - registered worker
2024-12-29 14:12:18,534 - livekit.agents - INFO - received job request
2024-12-29 14:12:19,862 - livekit.agents - INFO - initializing job process
2024-12-29 14:12:19,862 - livekit.agents - INFO - initializing job process
2024-12-29 14:12:19,926 - voice-business-agent - INFO - VAD model loaded successfully during prewarm.
2024-12-29 14:12:19,926 - livekit.agents - INFO - job process initialized
2024-12-29 14:12:19,926 - voice-business-agent - INFO - VAD model loaded successfully during prewarm.
2024-12-29 14:12:19,927 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:12:19,926 - livekit.agents - INFO - job process initialized
2024-12-29 14:12:19,927 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:12:19,928 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2826
2024-12-29 14:12:19,928 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2826
2024-12-29 14:12:19,929 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 14:12:19,929 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 14:12:19,929 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 14:12:19,929 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 14:12:19,930 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 14:12:19,930 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 14:12:20,286 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:12:20,287 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:12:20,287 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:12:20,286 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:12:20,287 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:12:20,287 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:12:20,287 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:12:20,287 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:12:20,397 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:12:20,397 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:12:20,397 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:12:20,397 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:12:20,397 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:12:20,397 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:12:20,397 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:12:20,397 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:12:20,618 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 14:12:20,618 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 14:12:29,109 - livekit.agents - INFO - shutting down worker
2024-12-29 14:12:29,123 - livekit.agents - INFO - shutting down worker
2024-12-29 14:12:29,124 - livekit.agents - DEBUG - shutting down job task
2024-12-29 14:12:29,124 - livekit.agents - INFO - process exiting
2024-12-29 14:12:29,124 - livekit.agents - DEBUG - shutting down job task
2024-12-29 14:12:29,164 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 14:12:29,164 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 14:12:30,165 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 14:12:30,166 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 14:12:30,165 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 14:12:30,166 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 14:12:30,185 - asyncio - ERROR - Task was destroyed but it is pending!
task: <Task pending name='job_user_entrypoint' coro=<entrypoint() running at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/agent.py:141> wait_for=<Future pending cb=[Task.task_wakeup()]> cb=[_JobProc._run_job_task.<locals>.<lambda>() at /Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/ipc/job_proc_lazy_main.py:235, _JobProc._run_job_task.<locals>.log_exception() at /Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/ipc/job_proc_lazy_main.py:237]>
2024-12-29 14:12:30,529 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:12:30,537 - livekit.agents - INFO - starting worker
2024-12-29 14:12:31,588 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:12:31,611 - livekit.agents - INFO - starting worker
2024-12-29 14:12:31,617 - livekit.agents - DEV - reloading job
2024-12-29 14:12:31,663 - livekit.agents - INFO - registered worker
2024-12-29 14:12:31,766 - livekit.agents - INFO - registered worker
2024-12-29 14:12:32,745 - livekit.agents - INFO - initializing job process
2024-12-29 14:12:32,745 - livekit.agents - INFO - initializing job process
2024-12-29 14:12:32,815 - voice-business-agent - INFO - VAD model loaded successfully during prewarm.
2024-12-29 14:12:32,815 - livekit.agents - INFO - job process initialized
2024-12-29 14:12:32,815 - voice-business-agent - INFO - VAD model loaded successfully during prewarm.
2024-12-29 14:12:32,815 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:12:32,815 - livekit.agents - INFO - job process initialized
2024-12-29 14:12:32,815 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:12:32,816 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2826
2024-12-29 14:12:32,816 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2826
2024-12-29 14:12:32,817 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 14:12:32,817 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 14:12:32,817 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 14:12:32,817 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 14:12:32,818 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 14:12:32,818 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 14:12:32,849 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 14:12:32,990 - livekit.agents - INFO - registered worker
2024-12-29 14:12:33,079 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:12:33,079 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:12:33,079 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:12:33,079 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:12:33,079 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:12:33,079 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:12:33,079 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:12:33,079 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:12:33,115 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:12:33,116 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:12:33,115 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:12:33,116 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:12:33,116 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:12:33,116 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:12:33,116 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:12:33,116 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:12:33,230 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 14:12:33,230 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 14:12:45,944 - livekit.agents - INFO - received job request
2024-12-29 14:12:47,231 - livekit.agents - INFO - initializing job process
2024-12-29 14:12:47,231 - livekit.agents - INFO - initializing job process
2024-12-29 14:12:47,303 - voice-business-agent - INFO - VAD model loaded successfully during prewarm.
2024-12-29 14:12:47,304 - livekit.agents - INFO - job process initialized
2024-12-29 14:12:47,303 - voice-business-agent - INFO - VAD model loaded successfully during prewarm.
2024-12-29 14:12:47,304 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:12:47,304 - livekit.agents - INFO - job process initialized
2024-12-29 14:12:47,305 - voice-business-agent - INFO - Connecting to room voice_assistant_room_8451
2024-12-29 14:12:47,304 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:12:47,305 - voice-business-agent - INFO - Connecting to room voice_assistant_room_8451
2024-12-29 14:12:47,305 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 14:12:47,306 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 14:12:47,305 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 14:12:47,306 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 14:12:47,307 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 14:12:47,307 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 14:12:47,558 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:12:47,558 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:12:47,558 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:12:47,558 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:12:47,558 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:12:47,558 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:12:47,558 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:12:47,558 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:12:47,595 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:12:47,595 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:12:47,595 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:12:47,595 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:12:47,595 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:12:47,595 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:12:47,595 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:12:47,595 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:12:47,697 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 14:12:47,697 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 14:12:51,470 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 14:12:51,471 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 14:12:51,470 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 14:12:51,471 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 14:12:51,471 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 14:12:51,472 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 14:12:51,472 - livekit.agents - DEBUG - shutting down job task
2024-12-29 14:12:51,471 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 14:12:51,472 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 14:12:51,472 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 14:12:51,472 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 14:12:51,472 - livekit.agents - DEBUG - shutting down job task
2024-12-29 14:12:51,472 - livekit.agents - INFO - process exiting
2024-12-29 14:12:51,472 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 14:12:51,472 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 14:12:51,609 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 14:12:51,882 - livekit.agents - INFO - registered worker
2024-12-29 14:13:05,613 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 14:13:05,613 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 14:13:05,613 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 14:13:05,613 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 14:13:05,615 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 14:13:05,616 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 14:13:05,615 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 14:13:05,616 - livekit.agents - DEBUG - shutting down job task
2024-12-29 14:13:05,616 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 14:13:05,616 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 14:13:05,616 - livekit.agents - INFO - process exiting
2024-12-29 14:13:05,616 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 14:13:05,616 - livekit.agents - DEBUG - shutting down job task
2024-12-29 14:13:05,616 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 14:13:05,616 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 14:13:05,789 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 14:13:05,931 - livekit.agents - INFO - registered worker
2024-12-29 14:13:12,798 - livekit.agents - INFO - received job request
2024-12-29 14:13:14,006 - livekit.agents - INFO - initializing job process
2024-12-29 14:13:14,007 - livekit.agents - INFO - job process initialized
2024-12-29 14:13:14,007 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:13:14,006 - livekit.agents - INFO - initializing job process
2024-12-29 14:13:14,007 - livekit.agents - INFO - job process initialized
2024-12-29 14:13:14,007 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:13:14,125 - voice-business-agent - INFO - Connecting to room voice_assistant_room_4437
2024-12-29 14:13:14,125 - voice-business-agent - INFO - Connecting to room voice_assistant_room_4437
2024-12-29 14:13:14,126 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 14:13:14,126 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 14:13:14,126 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 14:13:14,126 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 14:13:14,127 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 14:13:14,127 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 14:13:14,390 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:13:14,390 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:13:14,390 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:13:14,390 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:13:14,390 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:13:14,390 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:13:14,390 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:13:14,390 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:13:14,432 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:13:14,432 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:13:14,432 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:13:14,432 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:13:14,432 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:13:14,432 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:13:14,432 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:13:14,432 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:13:14,544 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 14:13:14,544 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 14:13:16,925 - livekit.agents - INFO - shutting down worker
2024-12-29 14:13:16,926 - livekit.agents - DEBUG - shutting down job task
2024-12-29 14:13:16,926 - livekit.agents - INFO - process exiting
2024-12-29 14:13:16,926 - livekit.agents - DEBUG - shutting down job task
2024-12-29 14:13:16,948 - livekit.agents - INFO - shutting down worker
2024-12-29 14:13:16,965 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 14:13:16,965 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 14:13:16,965 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 14:13:16,966 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 14:13:16,965 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 14:13:16,966 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 14:13:18,299 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:13:18,317 - livekit.agents - INFO - starting worker
2024-12-29 14:13:18,438 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:13:18,448 - livekit.agents - INFO - starting worker
2024-12-29 14:13:18,458 - livekit.agents - DEV - reloading job
2024-12-29 14:13:18,507 - livekit.agents - INFO - registered worker
2024-12-29 14:13:18,620 - livekit.agents - INFO - registered worker
2024-12-29 14:13:19,610 - livekit.agents - INFO - initializing job process
2024-12-29 14:13:19,610 - livekit.agents - INFO - initializing job process
2024-12-29 14:13:19,611 - livekit.agents - INFO - job process initialized
2024-12-29 14:13:19,611 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:13:19,611 - livekit.agents - INFO - job process initialized
2024-12-29 14:13:19,611 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:13:19,648 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 14:13:19,715 - voice-business-agent - INFO - Connecting to room voice_assistant_room_4437
2024-12-29 14:13:19,715 - voice-business-agent - INFO - Connecting to room voice_assistant_room_4437
2024-12-29 14:13:19,715 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 14:13:19,715 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 14:13:19,716 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 14:13:19,716 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 14:13:19,716 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 14:13:19,716 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 14:13:19,798 - livekit.agents - INFO - registered worker
2024-12-29 14:13:19,990 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:13:19,990 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:13:19,990 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:13:19,990 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:13:19,990 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:13:19,990 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:13:19,990 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:13:19,990 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:13:20,028 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:13:20,028 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:13:20,028 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:13:20,028 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:13:20,028 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:13:20,028 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:13:20,028 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:13:20,028 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:13:20,147 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 14:13:20,147 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 14:13:31,994 - livekit.agents - INFO - received job request
2024-12-29 14:13:33,185 - livekit.agents - INFO - initializing job process
2024-12-29 14:13:33,185 - livekit.agents - INFO - job process initialized
2024-12-29 14:13:33,185 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:13:33,185 - livekit.agents - INFO - initializing job process
2024-12-29 14:13:33,185 - livekit.agents - INFO - job process initialized
2024-12-29 14:13:33,185 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 14:13:33,309 - voice-business-agent - INFO - Connecting to room voice_assistant_room_1006
2024-12-29 14:13:33,309 - voice-business-agent - INFO - Connecting to room voice_assistant_room_1006
2024-12-29 14:13:33,309 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 14:13:33,310 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 14:13:33,309 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 14:13:33,310 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 14:13:33,311 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 14:13:33,311 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 14:13:33,624 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:13:33,624 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:13:33,624 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:13:33,624 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:13:33,624 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:13:33,624 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:13:33,624 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:13:33,624 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:13:33,721 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:13:33,721 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:13:33,721 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:13:33,721 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:13:33,721 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:13:33,721 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:13:33,721 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:13:33,721 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:13:33,962 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 14:13:33,962 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 14:13:34,326 - voice-business-agent - INFO - Participant connected: voice_assistant_user_5750
2024-12-29 14:13:34,326 - voice-business-agent - INFO - Participant connected: voice_assistant_user_5750
2024-12-29 14:13:34,420 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 14:13:34,420 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 14:13:34,455 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 14:13:34,455 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 14:13:34,490 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:13:34,492 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 14:13:34,516 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1304c4610>
2024-12-29 14:13:34,516 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x133d9a7b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 14:13:34,533 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1315377d0>
2024-12-29 14:13:34,534 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:13:34,534 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:13:34,534 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:13:34,534 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:13:34,534 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:13:35,154 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:13:35,154 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:13:35,155 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 14:13:35,155 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:13:35,155 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:13:35,155 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:13:35,155 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:13:37,364 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 14:13:37,365 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 14:13:37,364 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 14:13:37,365 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 14:13:37,366 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 14:13:37,366 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 14:13:37,367 - livekit.agents - DEBUG - shutting down job task
2024-12-29 14:13:37,367 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 14:13:37,367 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 14:13:37,367 - livekit.agents - INFO - process exiting
2024-12-29 14:13:37,367 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 14:13:37,367 - livekit.agents - DEBUG - shutting down job task
2024-12-29 14:13:37,367 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 14:13:37,367 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 14:13:37,367 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 14:13:37,511 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 14:13:37,652 - livekit.agents - INFO - registered worker
2024-12-29 14:13:48,354 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:13:48,354 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:13:48,708 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:13:48,708 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:13:48,711 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:13:48,712 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 14:13:48,794 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1346ae850>
2024-12-29 14:13:48,794 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x133d9a720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 14:13:48,879 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x133e41bd0>
2024-12-29 14:13:48,879 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:13:48,879 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:13:48,880 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:13:48,880 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:13:48,881 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:13:49,012 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:13:49,012 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:13:49,292 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:13:49,292 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:13:49,294 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 14:13:49,294 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:13:49,295 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:13:49,295 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:13:49,295 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:13:50,264 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:13:50,264 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:13:51,614 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:13:51,614 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:13:51,948 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:13:51,948 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:13:51,958 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:13:51,959 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 14:13:51,981 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1346ac950>
2024-12-29 14:13:51,984 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x133d9a720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 14:13:52,006 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1346ae650>
2024-12-29 14:13:52,006 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:13:52,006 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:13:52,006 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:13:52,007 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:13:52,007 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:13:52,574 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:43:52 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'250'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29924'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'152ms'), (b'x-request-id', b'req_abcabf2a1d0d6f29170d24507f9dd8dc'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=KPoqU4M19D8vQJe_YKjQ.aE2hQw86lV6ubKZLD6n608-1735461832-1.0.1.1-Kas07BK3HYDBqtsDiO6FTnYVuBlE_kPSkq_9iuoiwhnjOGOYM55H1MaPtFs_AO35OqsrXfval00Ng5guLcj.Qw; path=/; expires=Sun, 29-Dec-24 09:13:52 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=z7rpbUAYrcff4iK.COP6V4PcYvfywn4KLIvRa91K99E-1735461832598-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98814249465498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:13:52,576 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:13:52,577 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:13:52,577 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:13:52,763 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:13:52,763 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:13:52,763 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:13:52,764 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:13:52,765 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 14:13:52,776 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1346c3f10>
2024-12-29 14:13:52,776 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x133d9a7b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 14:13:52,791 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1346c3890>
2024-12-29 14:13:52,792 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:13:52,792 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:13:52,793 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:13:52,793 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:13:52,793 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:13:54,006 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:13:54,006 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:13:54,008 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:13:54,008 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:13:54,914 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:43:54 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1313'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-pg7qv'), (b'x-envoy-upstream-service-time', b'1301'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_84687eb1733ce869b29996c9ece51dbd'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=XNI0zgXTiId9IUbjvqYfCpt07oJn32mFyhtlS7lDkXU-1735461834-1.0.1.1-rTzN8u1QYoI83Wp9fYhGkEI77vwfS.C.P45UNjNzf5lEy_0x.giQU55_AvNKgE7IO3kVdovtqP9l_dYD2YcsLQ; path=/; expires=Sun, 29-Dec-24 09:13:54 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=icIN2IytWOGeNPz4UcS3E6I.Gwlw6zYPm7MCJvPIEYs-1735461834936-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98814728601bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:13:54,916 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:13:54,916 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:13:54,916 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:13:55,564 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:13:55,564 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:13:55,679 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:13:55,680 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:13:55,680 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:13:55,940 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:13:55,940 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:13:55,945 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:13:55,947 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:13:55,947 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:13:55,947 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:13:55,948 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:13:55,948 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:13:56,624 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:43:56 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'288'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29919'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'162ms'), (b'x-request-id', b'req_86f001ce3d1f013c1881379f9a297968'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98815ae9ae5498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:13:56,625 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:13:56,625 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:13:56,626 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:13:56,945 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Hello! I'm here to help.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:13:56,947 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:13:56,947 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:13:56,947 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:13:56,948 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:13:56,948 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:13:57,079 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:13:57,080 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:13:57,080 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:13:58,035 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:43:58 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'783'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-zz96w'), (b'x-envoy-upstream-service-time', b'774'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b1e6201c6ba5acdbeb2cbe9df50f2172'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98816118e81bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:13:58,036 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:13:58,037 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:13:58,037 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:13:58,316 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:13:58,316 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:13:58,356 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:13:58,356 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:13:58,581 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:13:58,581 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:13:58,581 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:13:58,582 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:13:58,584 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:13:58,584 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:13:58,584 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:13:58,585 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:13:58,585 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:14:00,012 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:44:00 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'523'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-mwb56'), (b'x-envoy-upstream-service-time', b'512'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_10a7ed0a8797666b29147f9cc8fc69f3'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98816b5a751bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:14:00,013 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:14:00,013 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:14:00,013 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:14:00,563 - voice-business-agent - INFO - User speech received: Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?
2024-12-29 14:14:00,563 - voice-business-agent - INFO - User speech received: Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?
2024-12-29 14:14:00,563 - voice-business-agent - DEBUG - Validating phone number from text: Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?
2024-12-29 14:14:00,564 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:14:00,563 - voice-business-agent - INFO - User speech received: Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?
2024-12-29 14:14:00,563 - voice-business-agent - INFO - User speech received: Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?
2024-12-29 14:14:00,563 - voice-business-agent - DEBUG - Validating phone number from text: Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?
2024-12-29 14:14:00,564 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:14:00,863 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:14:00,863 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:14:00,864 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:14:01,882 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:14:01,882 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:14:01,882 - voice-business-agent - INFO - User speech received:  Hello! I'm here to help. How can I assist you today?
2024-12-29 14:14:01,883 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! I'm here to help. How can I assist you today?
2024-12-29 14:14:01,883 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:14:01,882 - voice-business-agent - INFO - User speech received:  Hello! I'm here to help. How can I assist you today?
2024-12-29 14:14:01,883 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 14:14:01,883 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! I'm here to help. How can I assist you today?
2024-12-29 14:14:01,883 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:14:01,883 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 14:14:01,919 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:14:01,919 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:14:05,614 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:14:05,614 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:14:05,990 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:14:05,990 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:14:05,995 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:14:05,996 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:14:05,997 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:14:05,997 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:14:05,997 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:14:05,998 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:14:06,225 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:14:06,225 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:14:06,544 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:44:06 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'241'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29895'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'210ms'), (b'x-request-id', b'req_8e88fe3bacaf193127824d19e3d2704d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f988199b80a5498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:14:06,545 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:14:06,545 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:14:06,545 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:14:06,840 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I can connect you with an agent who can assist you further.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:14:06,842 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:14:06,842 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:14:06,842 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:14:06,843 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:14:06,843 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:14:07,290 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:14:07,291 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:14:07,291 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:14:08,420 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:44:08 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'796'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-4lljs'), (b'x-envoy-upstream-service-time', b'777'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_0a416b42d0e7a9c5268ccbe493202126'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98819efe561bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:14:08,422 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:14:08,423 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:14:08,423 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:14:08,670 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:14:08,670 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:14:08,709 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:14:08,709 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:14:09,397 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:14:09,397 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:14:09,398 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:14:09,398 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide your mobile number so I can proceed with the connection?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:14:09,399 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:14:09,400 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:14:09,400 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:14:09,400 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:14:09,400 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:14:10,215 - voice-business-agent - INFO - User speech received: Um, which service provided by you?
2024-12-29 14:14:10,216 - voice-business-agent - INFO - User speech received: Um, which service provided by you?
2024-12-29 14:14:10,216 - voice-business-agent - DEBUG - Validating phone number from text: Um, which service provided by you?
2024-12-29 14:14:10,215 - voice-business-agent - INFO - User speech received: Um, which service provided by you?
2024-12-29 14:14:10,216 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:14:10,216 - voice-business-agent - INFO - User speech received: Um, which service provided by you?
2024-12-29 14:14:10,216 - voice-business-agent - DEBUG - Validating phone number from text: Um, which service provided by you?
2024-12-29 14:14:10,216 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:14:10,939 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:44:10 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1227'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-gtwbv'), (b'x-envoy-upstream-service-time', b'1212'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_7b6e7d8f34b52ed3b2c8cacb7e04c023'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9881aefcfd1bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:14:10,941 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:14:10,941 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:14:10,942 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:14:12,499 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:14:12,500 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:14:12,500 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:14:16,675 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:14:16,675 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:14:16,676 - voice-business-agent - INFO - User speech received:  I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?
2024-12-29 14:14:16,676 - voice-business-agent - DEBUG - Validating phone number from text:  I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?
2024-12-29 14:14:16,676 - voice-business-agent - INFO - User speech received:  I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?
2024-12-29 14:14:16,676 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:14:16,676 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 14:14:16,676 - voice-business-agent - DEBUG - Validating phone number from text:  I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?
2024-12-29 14:14:16,676 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:14:16,676 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 14:14:16,711 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:14:16,711 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:14:40,567 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:14:40,567 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:14:41,071 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:14:41,071 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:14:41,081 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}, {'role': 'assistant', 'content': ' I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?'}, {'role': 'user', 'content': 'Hugely speech committed'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:14:41,083 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:14:41,084 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:14:41,084 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:14:41,085 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:14:41,085 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:14:41,306 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:14:41,306 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:14:41,704 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:44:41 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'273'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29852'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'296ms'), (b'x-request-id', b'req_7d296ef77219f56c1ba51e26d804944d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f988274fbc15498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:14:41,704 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:14:41,704 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:14:41,704 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:14:41,939 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It seems there might have been a misunderstanding.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:14:41,940 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:14:41,941 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:14:41,941 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:14:41,942 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:14:41,942 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:14:42,302 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:14:42,302 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:14:42,302 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:14:43,854 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:44:43 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1567'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-mntqp'), (b'x-envoy-upstream-service-time', b'1524'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c34b00ddce1f90e35d1b2b78e3c8fbd2'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98827a5fd11bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:14:43,855 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:14:43,855 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:14:43,855 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:14:44,145 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:14:44,145 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:14:44,183 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:14:44,183 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:14:44,436 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:14:44,436 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:14:44,439 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:14:44,439 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:14:44,475 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:14:44,475 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:14:44,687 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:14:44,688 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:14:44,688 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:14:51,867 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:14:51,867 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:14:52,292 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:14:52,292 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:14:52,301 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}, {'role': 'assistant', 'content': ' I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?'}, {'role': 'user', 'content': 'Hugely speech committed With service provided by you,'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:14:52,302 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:14:52,303 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:14:52,303 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:14:52,304 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:14:52,304 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:14:52,605 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:14:52,605 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:14:52,946 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:44:52 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'256'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29844'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'312ms'), (b'x-request-id', b'req_5987c5f7177e872d0caa74629d779777'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9882bb1a7f5498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:14:52,946 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:14:52,946 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:14:52,947 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:14:53,073 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It sounds like you need more details about the services.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:14:53,074 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:14:53,074 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:14:53,074 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:14:53,075 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:14:53,075 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:14:53,445 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:14:53,446 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:14:53,446 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:14:54,211 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:44:54 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'610'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-2sh65'), (b'x-envoy-upstream-service-time', b'595'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_564ea5c34e0e217a7a502dc093a3e28e'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9882bfeb671bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:14:54,212 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:14:54,212 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:14:54,212 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:14:54,215 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:14:54,215 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:14:54,251 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:14:54,251 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:14:55,304 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:14:55,304 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:14:55,305 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:14:55,306 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I can connect you with an agent for further assistance.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:14:55,307 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:14:55,307 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:14:55,307 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:14:55,307 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:14:55,308 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:14:55,912 - voice-business-agent - INFO - User speech received: Hugely speech committed With service provided by you,
2024-12-29 14:14:55,912 - voice-business-agent - INFO - User speech received: Hugely speech committed With service provided by you,
2024-12-29 14:14:55,912 - voice-business-agent - DEBUG - Validating phone number from text: Hugely speech committed With service provided by you,
2024-12-29 14:14:55,912 - voice-business-agent - INFO - User speech received: Hugely speech committed With service provided by you,
2024-12-29 14:14:55,912 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:14:55,912 - voice-business-agent - INFO - User speech received: Hugely speech committed With service provided by you,
2024-12-29 14:14:55,912 - voice-business-agent - DEBUG - Validating phone number from text: Hugely speech committed With service provided by you,
2024-12-29 14:14:55,912 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:14:56,485 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:44:56 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'852'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-zq6bz'), (b'x-envoy-upstream-service-time', b'840'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_e18d24e8dc987f2bb830ab9c9e77e79d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9882cdd8c31bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:14:56,486 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:14:56,488 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:14:56,488 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:14:57,411 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:14:57,412 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:14:57,412 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:14:57,414 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please provide your mobile number so I can proceed with connecting you.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:14:57,414 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:14:57,415 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:14:57,415 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:14:57,415 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:14:57,415 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:14:58,790 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:44:58 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'533'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-58j94'), (b'x-envoy-upstream-service-time', b'504'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_5b0e6c37996d0349a71f51ff1391dcfc'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9882db0ea61bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:14:58,791 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:14:58,791 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:14:58,792 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:15:00,054 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:15:00,054 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:15:00,054 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:15:04,359 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:15:04,359 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:15:04,359 - voice-business-agent - INFO - User speech received:  It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.
2024-12-29 14:15:04,359 - voice-business-agent - DEBUG - Validating phone number from text:  It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.
2024-12-29 14:15:04,359 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:15:04,359 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 14:15:04,359 - voice-business-agent - INFO - User speech received:  It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.
2024-12-29 14:15:04,359 - voice-business-agent - DEBUG - Validating phone number from text:  It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.
2024-12-29 14:15:04,359 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:15:04,359 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 14:15:04,396 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:15:04,396 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:15:10,964 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:15:10,964 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:15:11,341 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:15:11,341 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:15:11,350 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}, {'role': 'assistant', 'content': ' I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?'}, {'role': 'user', 'content': 'Hugely speech committed With service provided by you,'}, {'role': 'assistant', 'content': ' It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.'}, {'role': 'user', 'content': 'Which service provided by you?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:15:11,352 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:15:11,352 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:15:11,352 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:15:11,353 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:15:11,353 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:15:11,579 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:15:11,579 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:15:15,114 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:45:15 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'3450'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29788'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'424ms'), (b'x-request-id', b'req_5b97282ab8ccf1e131b006fa5a1ff1fa'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f988332282f5498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:15:15,115 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:15:15,115 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:15:15,116 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:15:15,624 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm here to help connect you with the right agent who can provide detailed information and assistance on various services.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:15:15,626 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:15:15,626 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:15:15,626 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:15:15,627 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:15:15,627 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:15:15,997 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:15:15,997 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:15:15,997 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:15:16,592 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:15:16,592 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:15:16,594 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:15:16,594 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:15:17,249 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:45:17 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1309'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-flthr'), (b'x-envoy-upstream-service-time', b'1295'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_3cc0ca002a8240f90bd295a7ccbbc560'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98834cdfd71bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:15:17,251 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:15:17,251 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:15:17,251 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:15:20,417 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:15:20,417 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:15:20,418 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:15:22,108 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:15:22,108 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:15:22,117 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}, {'role': 'assistant', 'content': ' I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?'}, {'role': 'user', 'content': 'Hugely speech committed With service provided by you,'}, {'role': 'assistant', 'content': ' It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.'}, {'role': 'user', 'content': 'Which service provided by you?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:15:22,119 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:15:22,119 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:15:22,119 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:15:22,120 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:15:22,120 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:15:22,712 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:45:22 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'294'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29788'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'424ms'), (b'x-request-id', b'req_1814427ec49f8f669f6b5b507e68f11d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98837578635498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:15:22,712 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:15:22,712 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:15:22,713 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:15:23,161 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm here to help connect you with the appropriate agent who can assist you with specific services or questions you have.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:15:23,162 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:15:23,163 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:15:23,163 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:15:23,164 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:15:23,164 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:15:23,602 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:15:23,602 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:15:23,603 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:15:24,326 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:45:24 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'817'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-zh595'), (b'x-envoy-upstream-service-time', b'774'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_8b4dabf6f5facac896142402e0e5a644'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98837bfdce1bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:15:24,327 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:15:24,327 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:15:24,327 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:15:24,588 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:15:24,588 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:15:24,626 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:15:24,626 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:15:24,884 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:15:24,884 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:15:24,887 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:15:24,887 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:15:24,920 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:15:24,920 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:15:25,311 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:15:25,311 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:15:25,687 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:15:25,687 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:15:25,694 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}, {'role': 'assistant', 'content': ' I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?'}, {'role': 'user', 'content': 'Hugely speech committed With service provided by you,'}, {'role': 'assistant', 'content': ' It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.'}, {'role': 'user', 'content': 'Which service provided by you? Hello?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:15:25,695 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:15:25,696 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:15:25,696 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:15:25,696 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:15:25,696 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:15:25,922 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:15:25,922 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:15:26,271 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:45:26 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'266'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29787'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'426ms'), (b'x-request-id', b'req_1f439d0b1d86889e4782a7e8d4b86e33'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98838bd8975498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:15:26,272 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:15:26,273 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:15:26,273 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:15:26,696 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:15:26,696 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:15:26,697 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:15:26,712 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I can help connect you with an agent who can provide detailed information and assistance regarding the services offered.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:15:26,713 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:15:26,714 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:15:26,714 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:15:26,714 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:15:26,714 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:15:26,824 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:15:26,825 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:15:26,825 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:15:28,469 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:45:28 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1456'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-27zdr'), (b'x-envoy-upstream-service-time', b'1444'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_5ba8565ba2731978792d6cbe2c66615f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9883922b1e1bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:15:28,470 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:15:28,470 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:15:28,470 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:15:28,725 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:15:28,725 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:15:28,761 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:15:28,761 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:15:29,232 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:15:29,232 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:15:29,234 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:15:29,234 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:15:29,268 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:15:29,268 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:15:31,177 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:15:31,177 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:15:31,178 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:15:36,639 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:15:36,639 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:15:36,644 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}, {'role': 'assistant', 'content': ' I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?'}, {'role': 'user', 'content': 'Hugely speech committed With service provided by you,'}, {'role': 'assistant', 'content': ' It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.'}, {'role': 'user', 'content': 'Which service provided by you? Hello?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:15:36,646 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:15:36,646 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:15:36,646 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:15:36,646 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:15:36,646 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:15:36,875 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:15:36,875 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:15:37,226 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:45:37 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'266'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29787'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'426ms'), (b'x-request-id', b'req_763a06f7296c15bc1a6ea2b948b8c8f0'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9883d04dd75498-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:15:37,226 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:15:37,227 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:15:37,227 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:15:37,634 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm here to help connect you with the right agent who can provide more details about the services we offer.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:15:37,635 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:15:37,635 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:15:37,635 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:15:37,636 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:15:37,636 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:15:37,842 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:15:37,842 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:15:37,844 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 14:15:37,844 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:15:37,845 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:15:37,845 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:15:37,845 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:15:39,240 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:45:39 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1290'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-rjqzx'), (b'x-envoy-upstream-service-time', b'1277'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_710fd1ac1144e1642567fd9fe3ebfbed'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9883d66ed41bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:15:39,241 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:15:39,241 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:15:39,241 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:15:40,667 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:15:40,667 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:15:40,667 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:15:43,675 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:15:43,675 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:15:43,679 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}, {'role': 'assistant', 'content': ' I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?'}, {'role': 'user', 'content': 'Hugely speech committed With service provided by you,'}, {'role': 'assistant', 'content': ' It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.'}, {'role': 'user', 'content': 'Which service provided by you? Hello?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:15:43,679 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 14:15:43,712 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x13467a650>
2024-12-29 14:15:43,713 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x133d9a720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 14:15:43,737 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x13480a710>
2024-12-29 14:15:43,737 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:15:43,738 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:15:43,738 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:15:43,738 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:15:43,738 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:15:44,313 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:45:44 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'273'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29787'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'426ms'), (b'x-request-id', b'req_1b5a655f386423f8df9548fbd8f6c7e4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9883fc9e5b91b5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:15:44,314 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:15:44,314 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:15:44,315 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:15:44,744 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I can assist by connecting you with the right agent to discuss the specific services you are interested in.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:15:44,745 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:15:44,746 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:15:44,746 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:15:44,746 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:15:44,746 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:15:44,899 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:15:44,899 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:15:44,901 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:15:45,043 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:15:45,043 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:15:45,044 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:15:45,044 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:15:46,076 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:45:46 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'991'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-5gknr'), (b'x-envoy-upstream-service-time', b'965'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_badb9ea61e87a1249c93b2ae863dd566'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f988402dbb21bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:15:46,077 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:15:46,077 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:15:46,078 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:15:46,323 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:15:46,323 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:15:47,601 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:15:47,601 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:15:47,602 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:15:47,765 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:15:47,765 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:15:48,869 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:15:48,869 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:15:48,874 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}, {'role': 'assistant', 'content': ' I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?'}, {'role': 'user', 'content': 'Hugely speech committed With service provided by you,'}, {'role': 'assistant', 'content': ' It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.'}, {'role': 'user', 'content': 'Which service provided by you? Hello? Basically on engagement?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:15:48,874 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:15:48,875 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:15:48,875 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:15:48,875 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:15:48,875 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:15:49,475 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:45:49 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'282'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29780'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'440ms'), (b'x-request-id', b'req_12c89191c23cd7ef67e56dd84fe2629b'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98841cbd4a91b5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:15:49,476 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:15:49,476 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:15:49,477 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:15:49,786 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I assist in connecting callers with the appropriate agents based on their needs.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:15:49,787 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:15:49,788 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:15:49,788 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:15:49,788 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:15:49,788 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:15:50,428 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:15:50,428 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:15:50,428 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:15:50,709 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:45:50 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'596'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-n879x'), (b'x-envoy-upstream-service-time', b'578'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_3298f9ba72ddb321ccad1a8f5d3776a4'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9884225a451bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:15:50,709 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:15:50,710 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:15:50,710 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:15:50,985 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:15:50,985 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:15:51,024 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:15:51,024 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:15:51,374 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:15:51,374 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:15:51,377 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:15:51,377 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:15:51,409 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:15:51,409 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:15:52,067 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:15:52,068 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:15:52,068 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:15:56,537 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:15:56,537 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:15:56,544 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}, {'role': 'assistant', 'content': ' I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?'}, {'role': 'user', 'content': 'Hugely speech committed With service provided by you,'}, {'role': 'assistant', 'content': ' It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.'}, {'role': 'user', 'content': 'Which service provided by you? Hello? Basically on engagement?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:15:56,545 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:15:56,545 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:15:56,546 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:15:56,546 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:15:56,546 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:15:56,854 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:15:56,854 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:15:57,188 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:45:57 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'288'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29780'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'440ms'), (b'x-request-id', b'req_915514d139c7abb1d3e8e162caad8b17'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98844c988291b5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:15:57,189 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:15:57,189 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:15:57,190 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:15:57,389 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm here to help connect you to the right department for your needs.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:15:57,390 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:15:57,391 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:15:57,391 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:15:57,391 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:15:57,392 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:15:57,966 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:15:57,967 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:15:57,967 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:15:58,271 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:45:58 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'577'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-9tc5m'), (b'x-envoy-upstream-service-time', b'559'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_4ecebfad94f2e747c765b3ac6a701832'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f988451e8f41bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:15:58,271 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:15:58,271 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:15:58,271 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:15:58,527 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:15:58,527 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:15:58,565 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:15:58,565 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:15:58,613 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:15:58,613 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:15:58,616 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:15:58,616 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:15:58,652 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:15:58,652 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:15:59,326 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:15:59,327 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:15:59,327 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:16:03,829 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:16:03,829 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:16:04,296 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:16:04,296 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:16:04,304 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}, {'role': 'assistant', 'content': ' I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?'}, {'role': 'user', 'content': 'Hugely speech committed With service provided by you,'}, {'role': 'assistant', 'content': ' It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.'}, {'role': 'user', 'content': 'Which service provided by you? Hello? Basically on engagement? Uh-huh. Uh, I try you like it testing'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:16:04,305 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:16:04,306 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:16:04,306 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:16:04,306 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:16:04,306 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:16:04,531 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:16:04,531 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:16:04,897 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:46:04 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'292'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29771'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'458ms'), (b'x-request-id', b'req_e36ba17f191ddfa142553c51b7e5f3d2'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98847d1d7891b5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:16:04,898 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:16:04,898 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:16:04,898 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:16:05,395 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm here to connect you with an agent who can provide detailed information about the services we offer and assist you further.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:16:05,396 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:16:05,396 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:16:05,397 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:16:05,397 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:16:05,397 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:16:05,488 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:16:05,489 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:16:05,489 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:16:05,935 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:16:05,935 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:16:05,937 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:16:05,937 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:16:06,779 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:46:06 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1050'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-7s2qd'), (b'x-envoy-upstream-service-time', b'1032'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_7192ddf60d3baff7ca36d5bbee0de2f4'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f988483e8eb1bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:16:06,779 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:16:06,779 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:16:06,780 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:16:08,511 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:16:08,511 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:16:08,511 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:16:11,195 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:16:11,195 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:16:11,201 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}, {'role': 'assistant', 'content': ' I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?'}, {'role': 'user', 'content': 'Hugely speech committed With service provided by you,'}, {'role': 'assistant', 'content': ' It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.'}, {'role': 'user', 'content': 'Which service provided by you? Hello? Basically on engagement? Uh-huh. Uh, I try you like it testing'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:16:11,202 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:16:11,203 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:16:11,203 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:16:11,203 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:16:11,203 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:16:11,771 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:46:11 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'257'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29771'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'458ms'), (b'x-request-id', b'req_3dd1ea4ae9fe981b1251038bcb2a4370'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9884a8396791b5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:16:11,772 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:16:11,772 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:16:11,773 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:16:12,145 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm here to help connect you with an agent who can discuss the services we provide in detail.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:16:12,146 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:16:12,146 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:16:12,146 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:16:12,146 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:16:12,146 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:16:12,360 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:16:12,361 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:16:12,361 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:16:13,054 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:46:13 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'614'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-54bs6'), (b'x-envoy-upstream-service-time', b'597'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_5cf86f723d336c7455e9b99e45eed2cc'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9884ae18591bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:16:13,054 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:16:13,054 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:16:13,054 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:16:13,292 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:16:13,292 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:16:13,329 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:16:13,329 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:16:14,025 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:16:14,026 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:16:14,027 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:16:14,028 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide your mobile number so I can proceed with the connection?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:16:14,029 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:16:14,029 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:16:14,030 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:16:14,030 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:16:14,030 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:16:14,814 - voice-business-agent - INFO - User speech received: Which service provided by you? Hello? Basically on engagement? Uh-huh. Uh, I try you like it testing
2024-12-29 14:16:14,814 - voice-business-agent - INFO - User speech received: Which service provided by you? Hello? Basically on engagement? Uh-huh. Uh, I try you like it testing
2024-12-29 14:16:14,815 - voice-business-agent - DEBUG - Validating phone number from text: Which service provided by you? Hello? Basically on engagement? Uh-huh. Uh, I try you like it testing
2024-12-29 14:16:14,814 - voice-business-agent - INFO - User speech received: Which service provided by you? Hello? Basically on engagement? Uh-huh. Uh, I try you like it testing
2024-12-29 14:16:14,814 - voice-business-agent - INFO - User speech received: Which service provided by you? Hello? Basically on engagement? Uh-huh. Uh, I try you like it testing
2024-12-29 14:16:14,815 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:16:14,815 - voice-business-agent - DEBUG - Validating phone number from text: Which service provided by you? Hello? Basically on engagement? Uh-huh. Uh, I try you like it testing
2024-12-29 14:16:14,815 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:16:14,947 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:46:14 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'560'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-96tmx'), (b'x-envoy-upstream-service-time', b'543'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_1c91daac9bca0f2ecc2901f4244933da'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9884b9dadf1bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:16:14,947 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:16:14,947 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:16:14,947 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:16:16,295 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:16:16,295 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:16:16,295 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:16:23,032 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:16:23,032 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:16:23,033 - voice-business-agent - INFO - User speech received:  I'm here to help connect you with an agent who can discuss the services we provide in detail. Could you please provide your mobile number so I can proceed with the connection?
2024-12-29 14:16:23,033 - voice-business-agent - DEBUG - Validating phone number from text:  I'm here to help connect you with an agent who can discuss the services we provide in detail. Could you please provide your mobile number so I can proceed with the connection?
2024-12-29 14:16:23,033 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:16:23,033 - voice-business-agent - INFO - User speech received:  I'm here to help connect you with an agent who can discuss the services we provide in detail. Could you please provide your mobile number so I can proceed with the connection?
2024-12-29 14:16:23,033 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 14:16:23,033 - voice-business-agent - DEBUG - Validating phone number from text:  I'm here to help connect you with an agent who can discuss the services we provide in detail. Could you please provide your mobile number so I can proceed with the connection?
2024-12-29 14:16:23,033 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:16:23,033 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 14:16:23,107 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:16:23,107 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:16:56,180 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:16:56,180 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:16:56,431 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:16:56,431 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:16:56,438 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}, {'role': 'assistant', 'content': ' I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?'}, {'role': 'user', 'content': 'Hugely speech committed With service provided by you,'}, {'role': 'assistant', 'content': ' It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.'}, {'role': 'user', 'content': 'Which service provided by you? Hello? Basically on engagement? Uh-huh. Uh, I try you like it testing'}, {'role': 'assistant', 'content': " I'm here to help connect you with an agent who can discuss the services we provide in detail. Could you please provide your mobile number so I can proceed with the connection?"}, {'role': 'user', 'content': 'Yeah.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:16:56,440 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:16:56,440 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:16:56,440 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:16:56,441 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:16:56,441 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:16:56,788 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:16:56,788 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:16:57,088 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:46:57 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'270'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29724'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'552ms'), (b'x-request-id', b'req_563d88a2dae2d9b445924e24d5f43684'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9885c2f83c91b5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:16:57,089 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:16:57,089 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:16:57,090 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:16:57,393 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:16:57,394 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:16:57,394 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:16:57,396 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Great! Please provide your mobile number so I can connect you with an agent.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:16:57,396 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:16:57,397 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:16:57,397 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:16:57,397 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:16:57,397 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:16:58,192 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:46:58 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'465'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-d7wvm'), (b'x-envoy-upstream-service-time', b'455'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a06a0036ff4060d3146503ffdefe8859'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9885c8eec31bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:16:58,192 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:16:58,193 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:16:58,193 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:16:58,251 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:16:58,251 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:16:58,256 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:16:58,256 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:16:58,257 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:16:58,257 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:16:58,314 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:16:58,314 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:16:58,344 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:16:58,344 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:16:59,043 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:16:59,044 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:16:59,044 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:17:03,385 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:17:03,385 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:17:03,394 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}, {'role': 'assistant', 'content': ' I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?'}, {'role': 'user', 'content': 'Hugely speech committed With service provided by you,'}, {'role': 'assistant', 'content': ' It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.'}, {'role': 'user', 'content': 'Which service provided by you? Hello? Basically on engagement? Uh-huh. Uh, I try you like it testing'}, {'role': 'assistant', 'content': " I'm here to help connect you with an agent who can discuss the services we provide in detail. Could you please provide your mobile number so I can proceed with the connection?"}, {'role': 'user', 'content': 'Yeah.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:17:03,395 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:17:03,395 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:17:03,395 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:17:03,396 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:17:03,396 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:17:03,659 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:17:03,659 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:17:03,967 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:47:03 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'260'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29724'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'552ms'), (b'x-request-id', b'req_572024844c96f1dedada0d678854ba1a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9885ee6ec491b5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:17:03,968 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:17:03,968 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:17:03,969 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:17:04,216 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:17:04,216 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:17:04,217 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:17:04,218 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Great! Please go ahead and provide your mobile number.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:17:04,219 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:17:04,220 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:17:04,220 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:17:04,220 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:17:04,220 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:17:05,813 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:47:05 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1248'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-kp5mf'), (b'x-envoy-upstream-service-time', b'1235'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_da4d57c2480452bf9bd689c6528b5da8'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9885f39fc81bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:17:05,814 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:17:05,814 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:17:05,815 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:17:05,932 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:17:05,932 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:17:05,935 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:17:05,935 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:17:06,798 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:17:06,798 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:17:06,798 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:17:06,936 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:17:06,936 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:17:07,334 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:17:07,334 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:17:07,340 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}, {'role': 'assistant', 'content': ' I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?'}, {'role': 'user', 'content': 'Hugely speech committed With service provided by you,'}, {'role': 'assistant', 'content': ' It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.'}, {'role': 'user', 'content': 'Which service provided by you? Hello? Basically on engagement? Uh-huh. Uh, I try you like it testing'}, {'role': 'assistant', 'content': " I'm here to help connect you with an agent who can discuss the services we provide in detail. Could you please provide your mobile number so I can proceed with the connection?"}, {'role': 'user', 'content': 'Yeah. Uh, so, Andrea,'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:17:07,341 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:17:07,342 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:17:07,342 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:17:07,342 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:17:07,342 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:17:07,909 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:47:07 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'267'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29720'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'560ms'), (b'x-request-id', b'req_4f180a1282df4cd206e06e8bd56254f7'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9886071fe291b5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:17:07,911 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:17:07,911 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:17:07,911 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:17:08,544 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:17:08,545 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:17:08,545 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:17:08,547 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Thank you. Could you please provide your mobile number so I can connect you to the right agent to assist you further?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:17:08,548 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:17:08,549 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:17:08,549 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:17:08,550 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:17:08,550 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:17:09,135 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:17:09,135 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:17:09,136 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:17:09,136 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:17:09,672 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:17:09,672 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:17:09,932 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:17:09,932 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:17:09,945 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}, {'role': 'assistant', 'content': ' I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?'}, {'role': 'user', 'content': 'Hugely speech committed With service provided by you,'}, {'role': 'assistant', 'content': ' It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.'}, {'role': 'user', 'content': 'Which service provided by you? Hello? Basically on engagement? Uh-huh. Uh, I try you like it testing'}, {'role': 'assistant', 'content': " I'm here to help connect you with an agent who can discuss the services we provide in detail. Could you please provide your mobile number so I can proceed with the connection?"}, {'role': 'user', 'content': 'Yeah. Uh, so, Andrea, uh-huh.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:17:09,946 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:17:09,946 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:17:09,947 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:17:09,947 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:17:09,947 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:17:10,319 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:47:10 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1425'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-pg7qv'), (b'x-envoy-upstream-service-time', b'1412'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_13035033684db36ae988aa668b215ba9'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98860e99421bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:17:10,320 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:17:10,320 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:17:10,321 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:17:10,576 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:47:10 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'270'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29718'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'564ms'), (b'x-request-id', b'req_9e7a2a27e7566491db0ded660c9d02f2'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9886176cc191b5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:17:10,577 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:17:10,577 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:17:10,577 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:17:10,844 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:17:10,844 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:17:10,845 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:17:10,845 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Great! Please provide your mobile number so I can connect you with an agent to assist you further.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:17:10,846 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 14:17:10,863 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x13484b090>
2024-12-29 14:17:10,863 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x133d9a7b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 14:17:10,878 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x134848310>
2024-12-29 14:17:10,878 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:17:10,879 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:17:10,879 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:17:10,879 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:17:10,879 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:17:11,737 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:17:11,738 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:17:11,739 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:17:11,806 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:47:11 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'632'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-kztxl'), (b'x-envoy-upstream-service-time', b'618'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_7795b3fa977289b9bb9a0656b07d7688'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98861d39b254bc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:17:11,807 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:17:11,807 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:17:11,807 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:17:12,054 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:17:12,054 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:17:12,093 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:17:12,093 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:17:13,091 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:17:13,091 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:17:13,092 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:17:13,564 - voice-business-agent - INFO - User speech received: Yeah. Uh, so, Andrea, uh-huh.
2024-12-29 14:17:13,564 - voice-business-agent - INFO - User speech received: Yeah. Uh, so, Andrea, uh-huh.
2024-12-29 14:17:13,564 - voice-business-agent - DEBUG - Validating phone number from text: Yeah. Uh, so, Andrea, uh-huh.
2024-12-29 14:17:13,565 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:17:13,564 - voice-business-agent - INFO - User speech received: Yeah. Uh, so, Andrea, uh-huh.
2024-12-29 14:17:13,564 - voice-business-agent - INFO - User speech received: Yeah. Uh, so, Andrea, uh-huh.
2024-12-29 14:17:13,564 - voice-business-agent - DEBUG - Validating phone number from text: Yeah. Uh, so, Andrea, uh-huh.
2024-12-29 14:17:13,565 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:17:17,938 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:17:17,938 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:17:17,940 - voice-business-agent - INFO - User speech received:  Great! Please provide your mobile number so I can connect you with an agent to assist you further.
2024-12-29 14:17:17,940 - voice-business-agent - DEBUG - Validating phone number from text:  Great! Please provide your mobile number so I can connect you with an agent to assist you further.
2024-12-29 14:17:17,940 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:17:17,940 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 14:17:17,940 - voice-business-agent - INFO - User speech received:  Great! Please provide your mobile number so I can connect you with an agent to assist you further.
2024-12-29 14:17:17,940 - voice-business-agent - DEBUG - Validating phone number from text:  Great! Please provide your mobile number so I can connect you with an agent to assist you further.
2024-12-29 14:17:17,940 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:17:17,940 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 14:17:17,970 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:17:17,970 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 14:17:34,812 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:17:34,812 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:17:35,112 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:17:35,112 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:17:35,124 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}, {'role': 'assistant', 'content': ' I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?'}, {'role': 'user', 'content': 'Hugely speech committed With service provided by you,'}, {'role': 'assistant', 'content': ' It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.'}, {'role': 'user', 'content': 'Which service provided by you? Hello? Basically on engagement? Uh-huh. Uh, I try you like it testing'}, {'role': 'assistant', 'content': " I'm here to help connect you with an agent who can discuss the services we provide in detail. Could you please provide your mobile number so I can proceed with the connection?"}, {'role': 'user', 'content': 'Yeah. Uh, so, Andrea, uh-huh.'}, {'role': 'assistant', 'content': ' Great! Please provide your mobile number so I can connect you with an agent to assist you further.'}, {'role': 'user', 'content': 'Okay.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:17:35,126 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:17:35,126 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:17:35,126 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:17:35,127 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:17:35,127 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:17:35,350 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:17:35,350 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 14:17:35,667 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:47:35 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'245'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29690'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'620ms'), (b'x-request-id', b'req_ee2a28c6c26e0a2f448e5d99fa462965'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9886b4b97c91b5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:17:35,667 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:17:35,668 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:17:35,668 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:17:35,838 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:17:35,838 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:17:35,838 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:17:35,839 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please go ahead and share your mobile number with me.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:17:35,839 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:17:35,840 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:17:35,840 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:17:35,840 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:17:35,840 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:17:36,086 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:17:36,086 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 14:17:36,087 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:17:36,087 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:17:37,364 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:17:37,364 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 14:17:37,479 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:47:37 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1322'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-qh5dp'), (b'x-envoy-upstream-service-time', b'1302'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c4b33388e64326e7a004c52fbd1f8a0c'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9886b93dbc1bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:17:37,480 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:17:37,481 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:17:37,481 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:17:37,837 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:17:37,837 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 14:17:37,842 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'user', 'content': 'Hello? Hello. Yeah. Hello. Yeah. Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm here to help. How can I assist you today?"}, {'role': 'user', 'content': 'Um, which service provided by you?'}, {'role': 'assistant', 'content': ' I can connect you with an agent who can assist you further. Could you please provide your mobile number so I can proceed with the connection?'}, {'role': 'user', 'content': 'Hugely speech committed With service provided by you,'}, {'role': 'assistant', 'content': ' It sounds like you need more details about the services. I can connect you with an agent for further assistance. Please provide your mobile number so I can proceed with connecting you.'}, {'role': 'user', 'content': 'Which service provided by you? Hello? Basically on engagement? Uh-huh. Uh, I try you like it testing'}, {'role': 'assistant', 'content': " I'm here to help connect you with an agent who can discuss the services we provide in detail. Could you please provide your mobile number so I can proceed with the connection?"}, {'role': 'user', 'content': 'Yeah. Uh, so, Andrea, uh-huh.'}, {'role': 'assistant', 'content': ' Great! Please provide your mobile number so I can connect you with an agent to assist you further.'}, {'role': 'user', 'content': 'Okay. About this little'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 14:17:37,844 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:17:37,844 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:17:37,844 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:17:37,845 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:17:37,845 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:17:38,166 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:17:38,166 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:17:38,166 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:17:38,538 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:47:38 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'297'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29685'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'630ms'), (b'x-request-id', b'req_427c8ab8aa8bb0a1087b2dd48cd740e2'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9886c61e5891b5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:17:38,539 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 14:17:38,539 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 14:17:38,540 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:17:38,894 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:17:38,895 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:17:38,895 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:17:38,904 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Please go ahead and share your mobile number with me, and I will help you get connected with the right agent.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 14:17:38,905 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 14:17:38,905 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 14:17:38,906 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 14:17:38,906 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 14:17:38,906 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 14:17:40,506 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 08:47:40 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1301'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-pj7pq'), (b'x-envoy-upstream-service-time', b'1286'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a0e2506f8051dc37976ac8df7ed67bf6'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9886cca96a1bb6-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 14:17:40,507 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 14:17:40,507 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 14:17:40,507 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 14:17:40,829 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:17:40,829 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 14:17:40,864 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:17:40,864 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 14:17:42,027 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 14:17:42,028 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 14:17:42,028 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 14:17:42,435 - voice-business-agent - INFO - User speech received: Okay. About this little
2024-12-29 14:17:42,436 - voice-business-agent - INFO - User speech received: Okay. About this little
2024-12-29 14:17:42,436 - voice-business-agent - DEBUG - Validating phone number from text: Okay. About this little
2024-12-29 14:17:42,436 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:17:42,435 - voice-business-agent - INFO - User speech received: Okay. About this little
2024-12-29 14:17:42,436 - voice-business-agent - INFO - User speech received: Okay. About this little
2024-12-29 14:17:42,436 - voice-business-agent - DEBUG - Validating phone number from text: Okay. About this little
2024-12-29 14:17:42,436 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:34:42,827 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 14:34:42,997 - livekit.agents - INFO - registered worker
2024-12-29 14:34:44,241 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:34:44,242 - voice-business-agent - INFO - User speech received:  Please go ahead and share your mobile number with me, and I will help you get connected with the right agent.
2024-12-29 14:34:44,241 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 14:34:44,242 - voice-business-agent - DEBUG - Validating phone number from text:  Please go ahead and share your mobile number with me, and I will help you get connected with the right agent.
2024-12-29 14:34:44,242 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:34:44,243 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 14:34:44,242 - voice-business-agent - INFO - User speech received:  Please go ahead and share your mobile number with me, and I will help you get connected with the right agent.
2024-12-29 14:34:44,242 - voice-business-agent - DEBUG - Validating phone number from text:  Please go ahead and share your mobile number with me, and I will help you get connected with the right agent.
2024-12-29 14:34:44,242 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 14:34:44,243 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 14:34:46,966 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 14:50:17,710 - livekit.agents - INFO - registered worker
2024-12-29 14:50:17,801 - livekit - ERROR - livekit_api::signal_client::signal_stream:192:livekit_api::signal_client::signal_stream - unhandled websocket message Err(Io(Os { code: 60, kind: TimedOut, message: "Operation timed out" }))
2024-12-29 14:50:17,801 - livekit - ERROR - livekit_api::signal_client::signal_stream:192:livekit_api::signal_client::signal_stream - unhandled websocket message Err(Io(Os { code: 60, kind: TimedOut, message: "Operation timed out" }))
2024-12-29 14:50:17,801 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 14:50:17,802 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 0
2024-12-29 14:50:17,801 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 14:50:17,802 - livekit - DEBUG - tokio_tungstenite:390:tokio_tungstenite - websocket close error: IO error: Broken pipe (os error 32)
2024-12-29 14:50:17,802 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 0
2024-12-29 14:50:17,802 - livekit - DEBUG - tokio_tungstenite:390:tokio_tungstenite - websocket close error: IO error: Broken pipe (os error 32)
2024-12-29 14:50:17,802 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:17,802 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:18,162 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:18,163 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:18,163 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:18,162 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:18,163 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:18,163 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:18,163 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:18,163 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:18,196 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:18,196 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:18,196 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:18,197 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:18,196 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:18,197 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:18,197 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:18,197 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:18,564 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:18,564 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 1
2024-12-29 14:50:18,564 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:18,564 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:18,564 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 1
2024-12-29 14:50:18,564 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:18,956 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:18,956 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:18,956 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:18,956 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:18,956 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:18,956 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:18,956 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:18,956 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:19,026 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:19,026 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:19,026 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:19,027 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:19,027 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:19,026 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:19,027 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:19,027 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:19,209 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:19,209 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 2
2024-12-29 14:50:19,209 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:19,209 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 2
2024-12-29 14:50:19,210 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:19,210 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:19,436 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:19,436 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:19,436 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:19,436 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:19,436 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:19,436 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:19,436 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:19,436 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:19,695 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:19,696 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:19,696 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:19,697 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:19,695 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:19,696 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:19,696 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:19,697 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:19,822 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:19,822 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 3
2024-12-29 14:50:19,823 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:19,822 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:19,822 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 3
2024-12-29 14:50:19,823 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:20,046 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:20,046 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:20,047 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:20,047 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:20,047 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:20,047 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:20,047 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:20,047 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:20,128 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:20,128 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:20,128 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:20,128 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:20,128 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:20,128 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:20,128 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:20,128 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:20,297 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:20,297 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 4
2024-12-29 14:50:20,297 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:20,297 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 4
2024-12-29 14:50:20,298 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:20,298 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:20,527 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:20,528 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:20,528 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:20,528 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:20,527 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:20,528 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:20,528 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:20,528 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:20,595 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:20,595 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:20,595 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:20,595 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:20,595 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:20,595 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:20,595 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:20,595 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:20,626 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:20,627 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 5
2024-12-29 14:50:20,626 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:20,627 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:20,627 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 5
2024-12-29 14:50:20,627 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:20,801 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:20,802 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:20,802 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:20,802 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:20,801 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:20,802 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:20,802 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:20,802 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:20,872 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:20,872 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:20,872 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:20,872 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:20,872 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:20,872 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:20,872 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:20,872 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:20,905 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:20,905 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 6
2024-12-29 14:50:20,905 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:20,905 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:20,905 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 6
2024-12-29 14:50:20,905 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:21,115 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:21,115 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:21,115 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:21,115 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:21,115 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:21,115 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:21,115 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:21,115 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:21,156 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:21,156 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:21,156 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:21,156 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:21,157 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:21,157 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:21,157 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:21,157 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:21,266 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:21,266 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 7
2024-12-29 14:50:21,266 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:21,266 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:21,266 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 7
2024-12-29 14:50:21,266 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:21,519 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:21,519 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:21,519 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:21,519 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:21,520 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:21,519 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:21,519 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:21,520 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:21,587 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:21,587 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:21,587 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:21,587 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:21,587 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:21,587 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:21,587 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:21,587 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:21,753 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:21,753 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 8
2024-12-29 14:50:21,754 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:21,753 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:21,753 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 8
2024-12-29 14:50:21,754 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:21,948 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:21,948 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:21,948 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:21,948 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:21,948 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:21,948 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:21,948 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:21,948 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:21,982 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:21,982 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:21,982 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:21,983 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:21,982 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:21,983 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:21,983 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:21,983 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:22,084 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:22,085 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 9
2024-12-29 14:50:22,084 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:22,085 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:22,085 - livekit - ERROR - livekit::rtc_engine:680:livekit::rtc_engine - resuming connection... attempt: 9
2024-12-29 14:50:22,085 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&reconnect=1&sid=PA_9obxdxhrYWwu&access_token=...
2024-12-29 14:50:22,305 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:22,305 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:22,305 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 14:50:22,305 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 14:50:22,305 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:22,305 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:22,305 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 14:50:22,305 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 14:50:22,348 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:22,348 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:22,348 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:22,348 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 14:50:22,348 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 14:50:22,348 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:22,348 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 14:50:22,348 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 14:50:22,492 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:22,492 - livekit - ERROR - livekit::rtc_engine:614:livekit::rtc_engine - failed to reconnect to the livekit room
2024-12-29 14:50:22,492 - livekit - ERROR - livekit::rtc_engine:682:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: HTTP error: 401 Unauthorized
2024-12-29 14:50:22,492 - livekit - ERROR - livekit::rtc_engine:614:livekit::rtc_engine - failed to reconnect to the livekit room
2024-12-29 14:50:22,495 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: UnknownReason
2024-12-29 14:50:22,495 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: UnknownReason
2024-12-29 14:50:22,496 - livekit.agents - DEBUG - shutting down job task
2024-12-29 14:50:22,497 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 14:50:22,497 - livekit.agents - INFO - process exiting
2024-12-29 14:50:22,496 - livekit.agents - DEBUG - shutting down job task
2024-12-29 14:50:22,497 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 14:50:22,675 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 14:50:22,821 - livekit.agents - INFO - registered worker
2024-12-29 15:09:27,384 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 15:09:27,609 - livekit.agents - INFO - registered worker
2024-12-29 15:09:29,868 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 15:09:30,050 - livekit.agents - INFO - registered worker
2024-12-29 15:22:16,368 - livekit.agents - INFO - shutting down worker
2024-12-29 15:22:17,475 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:22:17,482 - livekit.agents - INFO - starting worker
2024-12-29 15:22:17,667 - livekit.agents - INFO - registered worker
2024-12-29 15:22:20,785 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:22:20,788 - livekit.agents - DEV - Watching /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python
2024-12-29 15:22:21,665 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:22:21,677 - livekit.agents - INFO - starting worker
2024-12-29 15:22:21,827 - livekit.agents - INFO - registered worker
2024-12-29 15:22:34,571 - livekit.agents - INFO - received job request
2024-12-29 15:22:35,748 - livekit.agents - INFO - initializing job process
2024-12-29 15:22:35,748 - livekit.agents - INFO - job process initialized
2024-12-29 15:22:35,748 - livekit.agents - INFO - initializing job process
2024-12-29 15:22:35,749 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:22:35,748 - livekit.agents - INFO - job process initialized
2024-12-29 15:22:35,749 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:22:35,856 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2209
2024-12-29 15:22:35,856 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2209
2024-12-29 15:22:35,857 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 15:22:35,857 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 15:22:35,857 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 15:22:35,857 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 15:22:35,858 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 15:22:35,858 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 15:22:36,083 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 15:22:36,084 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 15:22:36,084 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 15:22:36,083 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 15:22:36,084 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 15:22:36,084 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 15:22:36,084 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 15:22:36,084 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 15:22:36,120 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 15:22:36,120 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 15:22:36,120 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 15:22:36,120 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 15:22:36,120 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 15:22:36,120 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 15:22:36,120 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 15:22:36,120 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 15:22:36,228 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 15:22:36,228 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 15:22:36,439 - voice-business-agent - INFO - Participant connected: voice_assistant_user_4338
2024-12-29 15:22:36,439 - voice-business-agent - INFO - Participant connected: voice_assistant_user_4338
2024-12-29 15:22:36,491 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 15:22:36,491 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 15:22:36,507 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 15:22:36,507 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 15:22:36,555 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:22:36,556 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 15:22:36,569 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x130414410>
2024-12-29 15:22:36,569 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1274d27b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 15:22:36,592 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1238cbcd0>
2024-12-29 15:22:36,592 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:22:36,593 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:22:36,593 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:22:36,593 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:22:36,593 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:22:38,184 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:52:38 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'585'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-4p4m8'), (b'x-envoy-upstream-service-time', b'576'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_abadfea3b77ac63d52ebccc1ec144050'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=JBYzR34zZnHIAGhLLQoxwZJR7LrqnlLN6zKC49mtB4E-1735465958-1.0.1.1-1qWhv.f4OULk8Y_hup_fVjpCoSbfTmvCQi3haGSEV5DMOKB.MRPPRwHnNsyL_nHlLMGRAm4cnFNb8G3YcavtxA; path=/; expires=Sun, 29-Dec-24 10:22:38 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=SPwaK3ecZmVx6R3IT9S.0_LdW7y33jlSkpNVKOKS_IE-1735465958210-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e5f4ffde54dd-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:22:38,188 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:22:38,188 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:22:38,190 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:22:38,457 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:22:38,457 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:22:38,491 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:22:38,491 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:22:38,998 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:22:38,999 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:22:38,999 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:22:39,251 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:22:39,251 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:22:39,254 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:22:39,254 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:22:39,254 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:22:39,254 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:22:39,291 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:22:39,291 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:22:39,529 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:22:39,529 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:22:39,846 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:22:39,846 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:22:39,854 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can...'}, {'role': 'user', 'content': 'Hello?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:22:39,855 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 15:22:39,918 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1238c7c90>
2024-12-29 15:22:39,918 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1274d2720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 15:22:39,950 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1238dd950>
2024-12-29 15:22:39,951 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:22:39,952 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:22:39,952 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:22:39,953 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:22:39,953 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:22:40,122 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:22:40,122 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:22:40,514 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:52:40 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'261'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29925'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'150ms'), (b'x-request-id', b'req_9b72825c0e3037238e5e2a61d49340ad'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=vvHlQ5ZdBgNjBXdeS6cIpa6wuvdlcFsKQxzdSASXlUY-1735465960-1.0.1.1-hSy8ej1zd9XXkz67vRjkWEaN8oVh4V1qpUeLpPs0vDp4tBwIEoR0FraquGU90qlr7EVS3JjC_BPbUnf69emyFw; path=/; expires=Sun, 29-Dec-24 10:22:40 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=Cwl76XAD2SvTXpiDCyzx43WWBSB7bSCsjobHOp2oPBA-1735465960540-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e609ec7391bc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:22:40,515 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:22:40,515 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:22:40,516 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:22:40,689 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:22:40,689 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:22:40,690 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 15:22:40,690 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:22:40,690 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:22:40,690 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:22:40,690 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:22:43,261 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:22:43,261 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:22:43,559 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:22:43,559 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:22:43,562 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can...'}, {'role': 'user', 'content': 'Hello? How are you?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:22:43,562 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 15:22:43,572 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1238e7b50>
2024-12-29 15:22:43,572 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1274d2720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 15:22:43,585 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1304cb3d0>
2024-12-29 15:22:43,585 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:22:43,586 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:22:43,586 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:22:43,586 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:22:43,586 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:22:44,134 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:52:44 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'257'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29921'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'158ms'), (b'x-request-id', b'req_25dc5c21c8a1413114f4d92b7f7ab34a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e620af655522-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:22:44,136 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:22:44,136 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:22:44,137 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:22:44,417 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm good, thank you for asking!", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:22:44,420 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:22:44,421 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:22:44,422 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:22:44,423 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:22:44,423 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:22:45,052 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:22:45,053 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:22:45,053 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:22:46,261 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:52:46 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'938'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-canary-867f6bddf6-shjl9'), (b'x-envoy-upstream-service-time', b'927'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_ce0f3a113f46138f243ba92dc3de78b8'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e625dd7f54dd-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:22:46,262 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:22:46,262 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:22:46,262 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:22:46,537 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:22:46,537 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:22:46,569 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:22:46,569 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:22:47,095 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:22:47,096 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:22:47,096 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:22:47,098 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:22:47,099 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:22:47,100 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:22:47,100 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:22:47,100 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:22:47,100 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:22:48,180 - voice-business-agent - INFO - User speech received: Hello? How are you?
2024-12-29 15:22:48,181 - voice-business-agent - INFO - User speech received: Hello? How are you?
2024-12-29 15:22:48,181 - voice-business-agent - DEBUG - Validating phone number from text: Hello? How are you?
2024-12-29 15:22:48,182 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:22:48,180 - voice-business-agent - INFO - User speech received: Hello? How are you?
2024-12-29 15:22:48,181 - voice-business-agent - INFO - User speech received: Hello? How are you?
2024-12-29 15:22:48,181 - voice-business-agent - DEBUG - Validating phone number from text: Hello? How are you?
2024-12-29 15:22:48,182 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:22:48,194 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:52:48 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'772'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-98jts'), (b'x-envoy-upstream-service-time', b'756'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_0384ea176774686e06e56f88209fa3b6'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e6369bd454dd-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:22:48,195 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:22:48,195 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:22:48,195 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:22:48,996 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:22:48,996 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:22:48,997 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:22:49,003 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'If you need to connect with an agent, may I have your mobile number, please?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:22:49,006 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:22:49,006 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:22:49,006 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:22:49,006 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:22:49,006 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:22:49,967 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:52:49 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'670'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-q496g'), (b'x-envoy-upstream-service-time', b'660'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_0ee608ea73716e336f29045d2c61c89d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e6428b0c54dd-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:22:49,967 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:22:49,968 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:22:49,968 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:22:50,955 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:22:50,955 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:22:50,956 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:22:50,957 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Ensure to provide it without any spaces or special characters.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:22:50,957 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:22:50,958 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:22:50,958 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:22:50,958 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:22:50,958 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:22:52,455 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:52:52 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'654'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-7x4r5'), (b'x-envoy-upstream-service-time', b'639'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_43020fa2a97f0d746b445c374c190318'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e64ebaa154dd-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:22:52,457 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:22:52,458 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:22:52,458 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:22:53,480 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:22:53,481 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:22:53,482 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:22:58,405 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:22:58,405 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:22:58,407 - voice-business-agent - INFO - User speech received:  I'm good, thank you for asking! How can I assist you today? If you need to connect with an agent, may I have your mobile number, please? Ensure to provide it without any spaces or special characters.
2024-12-29 15:22:58,407 - voice-business-agent - DEBUG - Validating phone number from text:  I'm good, thank you for asking! How can I assist you today? If you need to connect with an agent, may I have your mobile number, please? Ensure to provide it without any spaces or special characters.
2024-12-29 15:22:58,407 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:22:58,407 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:22:58,407 - voice-business-agent - INFO - User speech received:  I'm good, thank you for asking! How can I assist you today? If you need to connect with an agent, may I have your mobile number, please? Ensure to provide it without any spaces or special characters.
2024-12-29 15:22:58,407 - voice-business-agent - DEBUG - Validating phone number from text:  I'm good, thank you for asking! How can I assist you today? If you need to connect with an agent, may I have your mobile number, please? Ensure to provide it without any spaces or special characters.
2024-12-29 15:22:58,407 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:22:58,407 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:22:58,434 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:22:58,434 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:23:04,222 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:23:04,222 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:23:04,600 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:23:04,600 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:23:04,607 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can...'}, {'role': 'user', 'content': 'Hello? How are you?'}, {'role': 'assistant', 'content': " I'm good, thank you for asking! How can I assist you today? If you need to connect with an agent, may I have your mobile number, please? Ensure to provide it without any spaces or special characters."}, {'role': 'user', 'content': "No. I don't want to connect. I want to talk to you."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:23:04,608 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:23:04,609 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:23:04,609 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:23:04,610 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:23:04,610 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:23:04,840 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:23:04,840 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:23:05,205 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:53:05 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'283'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29857'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'286ms'), (b'x-request-id', b'req_c484ec5925a22af6b926ba1d73a63d2c'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e6a40d405522-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:23:05,206 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:23:05,206 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:23:05,207 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:23:05,478 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Of course! I'm here to help.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:23:05,480 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:23:05,480 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:23:05,480 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:23:05,480 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:23:05,480 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:23:05,772 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:23:05,772 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:23:05,772 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:23:06,343 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:53:06 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'509'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-mntqp'), (b'x-envoy-upstream-service-time', b'490'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d399733d1b83d2b5078f3b224b523dde'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e6a97da054dd-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:23:06,343 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:23:06,343 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:23:06,344 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:23:06,573 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:23:06,573 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:23:06,617 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:23:06,617 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:23:07,118 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:23:07,119 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:23:07,120 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:23:07,121 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'What would you like to talk about or discuss today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:23:07,123 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:23:07,124 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:23:07,124 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:23:07,125 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:23:07,125 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:23:08,231 - voice-business-agent - INFO - User speech received: No. I don't want to connect. I want to talk to you.
2024-12-29 15:23:08,232 - voice-business-agent - INFO - User speech received: No. I don't want to connect. I want to talk to you.
2024-12-29 15:23:08,232 - voice-business-agent - DEBUG - Validating phone number from text: No. I don't want to connect. I want to talk to you.
2024-12-29 15:23:08,232 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:23:08,231 - voice-business-agent - INFO - User speech received: No. I don't want to connect. I want to talk to you.
2024-12-29 15:23:08,232 - voice-business-agent - INFO - User speech received: No. I don't want to connect. I want to talk to you.
2024-12-29 15:23:08,232 - voice-business-agent - DEBUG - Validating phone number from text: No. I don't want to connect. I want to talk to you.
2024-12-29 15:23:08,232 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:23:08,540 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:53:08 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1088'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-8qj28'), (b'x-envoy-upstream-service-time', b'1075'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b6fcc2259b34c5d811975b43ba833055'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e6b3c9a654dd-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:23:08,540 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:23:08,540 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:23:08,540 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:23:09,439 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:23:09,439 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:23:09,439 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:23:11,997 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:23:11,997 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:23:11,999 - voice-business-agent - INFO - User speech received:  Of course! I'm here to help. What would you like to talk about or discuss today?
2024-12-29 15:23:11,999 - voice-business-agent - DEBUG - Validating phone number from text:  Of course! I'm here to help. What would you like to talk about or discuss today?
2024-12-29 15:23:11,999 - voice-business-agent - INFO - User speech received:  Of course! I'm here to help. What would you like to talk about or discuss today?
2024-12-29 15:23:11,999 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:23:11,999 - voice-business-agent - DEBUG - Validating phone number from text:  Of course! I'm here to help. What would you like to talk about or discuss today?
2024-12-29 15:23:11,999 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:23:11,999 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:23:11,999 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:23:12,031 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:23:12,031 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:23:14,902 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:23:14,902 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:23:17,106 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:23:17,106 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:23:17,609 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:23:17,609 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:23:17,619 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can...'}, {'role': 'user', 'content': 'Hello? How are you?'}, {'role': 'assistant', 'content': " I'm good, thank you for asking! How can I assist you today? If you need to connect with an agent, may I have your mobile number, please? Ensure to provide it without any spaces or special characters."}, {'role': 'user', 'content': "No. I don't want to connect. I want to talk to you."}, {'role': 'assistant', 'content': " Of course! I'm here to help. What would you like to talk about or discuss today?"}, {'role': 'user', 'content': 'So my request is going to'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:23:17,622 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:23:17,623 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:23:17,623 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:23:17,623 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:23:17,623 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:23:17,843 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:23:17,843 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:23:18,209 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:53:18 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'286'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29828'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'344ms'), (b'x-request-id', b'req_af1fb2fd6e8dfd8e1a94fccda885d71e'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e6f55bd45522-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:23:18,213 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:23:18,213 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:23:18,214 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:23:18,519 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It seems like your message got cut off.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:23:18,520 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:23:18,521 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:23:18,521 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:23:18,521 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:23:18,521 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:23:18,677 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:23:18,677 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:23:18,678 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:23:19,662 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:53:19 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'734'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-lsdsg'), (b'x-envoy-upstream-service-time', b'711'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_05f232fc88f3a831e21f9244b86480db'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e6fafc5354dd-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:23:19,663 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:23:19,663 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:23:19,663 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:23:19,944 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:23:19,944 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:23:20,040 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:23:20,040 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:23:20,461 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:23:20,461 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:23:20,464 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:23:20,464 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:23:20,533 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:23:20,533 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:23:21,365 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:23:21,366 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:23:21,367 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:23:21,810 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:23:21,810 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:23:21,812 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:23:21,812 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:23:21,820 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can...'}, {'role': 'user', 'content': 'Hello? How are you?'}, {'role': 'assistant', 'content': " I'm good, thank you for asking! How can I assist you today? If you need to connect with an agent, may I have your mobile number, please? Ensure to provide it without any spaces or special characters."}, {'role': 'user', 'content': "No. I don't want to connect. I want to talk to you."}, {'role': 'assistant', 'content': " Of course! I'm here to help. What would you like to talk about or discuss today?"}, {'role': 'user', 'content': 'So my request is going to server.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:23:21,822 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:23:21,822 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:23:21,822 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:23:21,823 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:23:21,823 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:23:22,044 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:23:22,044 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:23:22,354 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:53:22 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'229'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29826'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'348ms'), (b'x-request-id', b'req_5eec3de6911e80a1742ccfa8d96251ce'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e70fa8ab5522-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:23:22,355 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:23:22,356 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:23:22,356 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:23:22,506 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Yes, that's correct!", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:23:22,508 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:23:22,508 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:23:22,508 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:23:22,509 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:23:22,509 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:23:23,097 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:23:23,097 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:23:23,097 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:23:23,344 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:53:23 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'513'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-bncsq'), (b'x-envoy-upstream-service-time', b'502'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_989c7bd36eb626eaffdd7b135010a08c'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e713eaa654dd-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:23:23,345 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:23:23,345 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:23:23,346 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:23:23,643 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:23:23,643 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:23:23,678 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:23:23,678 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:23:23,920 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:23:23,921 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:23:23,921 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:23:23,922 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'When you interact with me, your requests are processed on a server which allows me to understand and respond appropriately.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:23:23,923 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:23:23,924 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:23:23,924 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:23:23,924 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:23:23,924 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:23:25,834 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:53:25 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1597'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-tqwjp'), (b'x-envoy-upstream-service-time', b'1485'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_126f28817fc70b2cd3d81b0162c87b84'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e71cbd6c54dd-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:23:25,834 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:23:25,834 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:23:25,835 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:23:26,642 - voice-business-agent - INFO - User speech received: So my request is going to server.
2024-12-29 15:23:26,645 - voice-business-agent - INFO - User speech received: So my request is going to server.
2024-12-29 15:23:26,646 - voice-business-agent - DEBUG - Validating phone number from text: So my request is going to server.
2024-12-29 15:23:26,642 - voice-business-agent - INFO - User speech received: So my request is going to server.
2024-12-29 15:23:26,646 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:23:26,645 - voice-business-agent - INFO - User speech received: So my request is going to server.
2024-12-29 15:23:26,646 - voice-business-agent - DEBUG - Validating phone number from text: So my request is going to server.
2024-12-29 15:23:26,646 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:23:32,132 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:23:32,132 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:23:32,132 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:23:32,133 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Is there anything specific you'd like to know or any assistance you need regarding this process?", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:23:32,134 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:23:32,134 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:23:32,134 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:23:32,134 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:23:32,135 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:23:32,900 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:53:32 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'447'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-68dql'), (b'x-envoy-upstream-service-time', b'436'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b600a9ae8a21c474dfce483516539085'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e7501c4c54dd-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:23:32,901 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:23:32,901 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:23:32,901 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:23:34,000 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:23:34,002 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:23:34,002 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:23:42,331 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:23:42,331 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:23:42,332 - voice-business-agent - INFO - User speech received:  Yes, that's correct! When you interact with me, your requests are processed on a server which allows me to understand and respond appropriately. Is there anything specific you'd like to know or any assistance you need regarding this process?
2024-12-29 15:23:42,333 - voice-business-agent - DEBUG - Validating phone number from text:  Yes, that's correct! When you interact with me, your requests are processed on a server which allows me to understand and respond appropriately. Is there anything specific you'd like to know or any assistance you need regarding this process?
2024-12-29 15:23:42,333 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:23:42,333 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:23:42,332 - voice-business-agent - INFO - User speech received:  Yes, that's correct! When you interact with me, your requests are processed on a server which allows me to understand and respond appropriately. Is there anything specific you'd like to know or any assistance you need regarding this process?
2024-12-29 15:23:42,333 - voice-business-agent - DEBUG - Validating phone number from text:  Yes, that's correct! When you interact with me, your requests are processed on a server which allows me to understand and respond appropriately. Is there anything specific you'd like to know or any assistance you need regarding this process?
2024-12-29 15:23:42,333 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:23:42,333 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:23:42,365 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:23:42,365 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:23:52,203 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:23:52,203 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:23:52,426 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:23:52,426 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:23:52,438 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can...'}, {'role': 'user', 'content': 'Hello? How are you?'}, {'role': 'assistant', 'content': " I'm good, thank you for asking! How can I assist you today? If you need to connect with an agent, may I have your mobile number, please? Ensure to provide it without any spaces or special characters."}, {'role': 'user', 'content': "No. I don't want to connect. I want to talk to you."}, {'role': 'assistant', 'content': " Of course! I'm here to help. What would you like to talk about or discuss today?"}, {'role': 'user', 'content': 'So my request is going to server.'}, {'role': 'assistant', 'content': " Yes, that's correct! When you interact with me, your requests are processed on a server which allows me to understand and respond appropriately. Is there anything specific you'd like to know or any assistance you need regarding this process?"}, {'role': 'user', 'content': 'Okay.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:23:52,440 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:23:52,440 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:23:52,440 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:23:52,441 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:23:52,441 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:23:52,664 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:23:52,664 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:23:53,046 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:53:53 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'291'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29762'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'476ms'), (b'x-request-id', b'req_0bcaea63643723c7684909938fa5feb9'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e7cefaec5522-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:23:53,046 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:23:53,046 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:23:53,046 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:23:53,446 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'If you have any more questions or need assistance with anything else, feel free to ask.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:23:53,447 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:23:53,447 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:23:53,447 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:23:53,447 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:23:53,447 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:23:53,477 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:23:53,477 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:23:53,477 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:23:54,964 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:53:54 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1219'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-zn7kk'), (b'x-envoy-upstream-service-time', b'1205'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_aa50ff199789bbe34ba34a0b091d8269'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e7d54dec54dd-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:23:54,965 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:23:54,965 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:23:54,965 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:23:55,223 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:23:55,223 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:23:55,260 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:23:55,260 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:23:56,004 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:23:56,005 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:23:56,005 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:23:56,006 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm here to help!", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:23:56,007 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:23:56,008 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:23:56,008 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:23:56,008 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:23:56,008 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:23:56,854 - voice-business-agent - INFO - User speech received: Okay.
2024-12-29 15:23:56,855 - voice-business-agent - INFO - User speech received: Okay.
2024-12-29 15:23:56,855 - voice-business-agent - DEBUG - Validating phone number from text: Okay.
2024-12-29 15:23:56,855 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:23:56,854 - voice-business-agent - INFO - User speech received: Okay.
2024-12-29 15:23:56,855 - voice-business-agent - INFO - User speech received: Okay.
2024-12-29 15:23:56,855 - voice-business-agent - DEBUG - Validating phone number from text: Okay.
2024-12-29 15:23:56,855 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:23:58,382 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:53:58 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1502'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-gd4lp'), (b'x-envoy-upstream-service-time', b'1491'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_5ba5939322f546d76d277a58a1799cf1'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e7e54a5354dd-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:23:58,382 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:23:58,382 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:23:58,383 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:23:58,924 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:23:58,925 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:23:58,926 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:24:01,425 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:24:01,425 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:24:01,426 - voice-business-agent - INFO - User speech received:  If you have any more questions or need assistance with anything else, feel free to ask. I'm here to help!
2024-12-29 15:24:01,426 - voice-business-agent - DEBUG - Validating phone number from text:  If you have any more questions or need assistance with anything else, feel free to ask. I'm here to help!
2024-12-29 15:24:01,426 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:24:01,426 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:24:01,426 - voice-business-agent - INFO - User speech received:  If you have any more questions or need assistance with anything else, feel free to ask. I'm here to help!
2024-12-29 15:24:01,426 - voice-business-agent - DEBUG - Validating phone number from text:  If you have any more questions or need assistance with anything else, feel free to ask. I'm here to help!
2024-12-29 15:24:01,426 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:24:01,426 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:24:01,457 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:24:01,457 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:24:08,758 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:24:08,758 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:24:08,996 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:24:08,996 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:24:09,002 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can...'}, {'role': 'user', 'content': 'Hello? How are you?'}, {'role': 'assistant', 'content': " I'm good, thank you for asking! How can I assist you today? If you need to connect with an agent, may I have your mobile number, please? Ensure to provide it without any spaces or special characters."}, {'role': 'user', 'content': "No. I don't want to connect. I want to talk to you."}, {'role': 'assistant', 'content': " Of course! I'm here to help. What would you like to talk about or discuss today?"}, {'role': 'user', 'content': 'So my request is going to server.'}, {'role': 'assistant', 'content': " Yes, that's correct! When you interact with me, your requests are processed on a server which allows me to understand and respond appropriately. Is there anything specific you'd like to know or any assistance you need regarding this process?"}, {'role': 'user', 'content': 'Okay.'}, {'role': 'assistant', 'content': " If you have any more questions or need assistance with anything else, feel free to ask. I'm here to help!"}, {'role': 'user', 'content': 'I think my code is not working.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:24:09,004 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:24:09,004 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:24:09,004 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:24:09,004 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:24:09,004 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:24:09,229 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:24:09,229 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:24:09,898 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:54:09 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'601'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29726'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'548ms'), (b'x-request-id', b'req_6484cc10ff6fa9c234e845a6864d60ed'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e8368fd35522-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:24:09,899 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:24:09,899 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:24:09,899 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:24:10,297 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I’m here to help! Could you please describe what issue you are encountering with your code?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:24:10,299 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:24:10,300 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:24:10,300 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:24:10,300 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:24:10,300 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:24:10,446 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:24:10,447 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:24:10,447 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:24:11,228 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:54:11 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'605'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-c4rsd'), (b'x-envoy-upstream-service-time', b'593'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_374771025cd06433eecce120739cc84b'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e83e9eb254dd-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:24:11,228 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:24:11,229 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:24:11,229 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:24:11,523 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:24:11,523 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:24:11,554 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:24:11,554 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:24:12,381 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:24:12,381 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:24:12,381 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:24:12,383 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Knowing more details will help me assist you better.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:24:12,384 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:24:12,384 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:24:12,384 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:24:12,384 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:24:12,385 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:24:13,220 - voice-business-agent - INFO - User speech received: I think my code is not working.
2024-12-29 15:24:13,220 - voice-business-agent - INFO - User speech received: I think my code is not working.
2024-12-29 15:24:13,220 - voice-business-agent - INFO - User speech received: I think my code is not working.
2024-12-29 15:24:13,220 - voice-business-agent - DEBUG - Validating phone number from text: I think my code is not working.
2024-12-29 15:24:13,220 - voice-business-agent - INFO - User speech received: I think my code is not working.
2024-12-29 15:24:13,221 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:24:13,220 - voice-business-agent - DEBUG - Validating phone number from text: I think my code is not working.
2024-12-29 15:24:13,221 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:24:13,235 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:54:13 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'546'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-c5np5'), (b'x-envoy-upstream-service-time', b'531'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_e26e725d6a0a99e4a0523a4ea03a3d9d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98e84ba82554dd-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:24:13,236 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:24:13,236 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:24:13,236 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:24:14,031 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:24:14,032 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:24:14,032 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:24:20,276 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:24:20,276 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:24:20,277 - voice-business-agent - INFO - User speech received:  I’m here to help! Could you please describe what issue you are encountering with your code? Knowing more details will help me assist you better.
2024-12-29 15:24:20,278 - voice-business-agent - DEBUG - Validating phone number from text:  I’m here to help! Could you please describe what issue you are encountering with your code? Knowing more details will help me assist you better.
2024-12-29 15:24:20,278 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:24:20,278 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:24:20,277 - voice-business-agent - INFO - User speech received:  I’m here to help! Could you please describe what issue you are encountering with your code? Knowing more details will help me assist you better.
2024-12-29 15:24:20,278 - voice-business-agent - DEBUG - Validating phone number from text:  I’m here to help! Could you please describe what issue you are encountering with your code? Knowing more details will help me assist you better.
2024-12-29 15:24:20,278 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:24:20,278 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:24:20,306 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:24:20,306 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:27:39,508 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:27:39,510 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:27:39,508 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:27:39,510 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:27:39,516 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can...'}, {'role': 'user', 'content': 'Hello? How are you?'}, {'role': 'assistant', 'content': " I'm good, thank you for asking! How can I assist you today? If you need to connect with an agent, may I have your mobile number, please? Ensure to provide it without any spaces or special characters."}, {'role': 'user', 'content': "No. I don't want to connect. I want to talk to you."}, {'role': 'assistant', 'content': " Of course! I'm here to help. What would you like to talk about or discuss today?"}, {'role': 'user', 'content': 'So my request is going to server.'}, {'role': 'assistant', 'content': " Yes, that's correct! When you interact with me, your requests are processed on a server which allows me to understand and respond appropriately. Is there anything specific you'd like to know or any assistance you need regarding this process?"}, {'role': 'user', 'content': 'Okay.'}, {'role': 'assistant', 'content': " If you have any more questions or need assistance with anything else, feel free to ask. I'm here to help!"}, {'role': 'user', 'content': 'I think my code is not working.'}, {'role': 'assistant', 'content': ' I’m here to help! Could you please describe what issue you are encountering with your code? Knowing more details will help me assist you better.'}, {'role': 'user', 'content': 'So'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:27:39,517 - httpcore.connection - DEBUG - close.started
2024-12-29 15:27:39,517 - httpcore.connection - DEBUG - close.complete
2024-12-29 15:27:39,518 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 15:27:39,544 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x130478a90>
2024-12-29 15:27:39,545 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1274d2720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 15:27:39,562 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1305001d0>
2024-12-29 15:27:39,563 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:27:39,563 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:27:39,563 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:27:39,563 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:27:39,563 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:27:39,747 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:27:39,747 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:27:40,152 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:57:40 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'293'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29687'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'626ms'), (b'x-request-id', b'req_c893fc6270d482f16d7604c12774f4a6'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ed5a78da5460-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:27:40,152 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:27:40,153 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:27:40,153 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:27:40,515 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Yes, please go ahead and explain the issue you're facing with your code.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:27:40,516 - httpcore.connection - DEBUG - close.started
2024-12-29 15:27:40,516 - httpcore.connection - DEBUG - close.complete
2024-12-29 15:27:40,516 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 15:27:40,540 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x130516890>
2024-12-29 15:27:40,540 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1274d27b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 15:27:40,559 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x130517010>
2024-12-29 15:27:40,560 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:27:40,560 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:27:40,560 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:27:40,560 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:27:40,560 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:27:40,595 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:27:40,595 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:27:40,595 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:27:41,993 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:57:42 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'649'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-bmzrj'), (b'x-envoy-upstream-service-time', b'628'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_3b70cf165f8d73f139b03e791cef68c6'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ed60b9b31b87-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:27:41,993 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:27:41,993 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:27:41,993 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:27:42,249 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:27:42,249 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:27:42,284 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:27:42,284 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:27:42,966 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:27:42,966 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:27:42,966 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:27:42,967 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm here to help!", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:27:42,967 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:27:42,968 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:27:42,968 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:27:42,968 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:27:42,968 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:27:43,929 - voice-business-agent - INFO - User speech received: So
2024-12-29 15:27:43,929 - voice-business-agent - INFO - User speech received: So
2024-12-29 15:27:43,929 - voice-business-agent - DEBUG - Validating phone number from text: So
2024-12-29 15:27:43,929 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:27:43,929 - voice-business-agent - INFO - User speech received: So
2024-12-29 15:27:43,929 - voice-business-agent - INFO - User speech received: So
2024-12-29 15:27:43,929 - voice-business-agent - DEBUG - Validating phone number from text: So
2024-12-29 15:27:43,929 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:27:44,386 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:57:44 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'609'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-7m49h'), (b'x-envoy-upstream-service-time', b'594'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_02af3c40b0b4386a60e38fa79d196290'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ed6fb9111b87-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:27:44,387 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:27:44,389 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:27:44,389 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:27:44,899 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:27:44,900 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:27:44,900 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:27:46,928 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:27:46,928 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:27:46,929 - voice-business-agent - INFO - User speech received:  Yes, please go ahead and explain the issue you're facing with your code. I'm here to help!
2024-12-29 15:27:46,929 - voice-business-agent - DEBUG - Validating phone number from text:  Yes, please go ahead and explain the issue you're facing with your code. I'm here to help!
2024-12-29 15:27:46,929 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:27:46,929 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:27:46,929 - voice-business-agent - INFO - User speech received:  Yes, please go ahead and explain the issue you're facing with your code. I'm here to help!
2024-12-29 15:27:46,929 - voice-business-agent - DEBUG - Validating phone number from text:  Yes, please go ahead and explain the issue you're facing with your code. I'm here to help!
2024-12-29 15:27:46,929 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:27:46,929 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:27:46,959 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:27:46,959 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:28:50,064 - livekit.agents - INFO - shutting down worker
2024-12-29 15:28:50,065 - livekit.agents - DEBUG - shutting down job task
2024-12-29 15:28:50,065 - livekit.agents - DEBUG - shutting down job task
2024-12-29 15:28:50,065 - livekit.agents - INFO - process exiting
2024-12-29 15:28:50,100 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 15:28:50,100 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 15:28:50,101 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: ClientInitiated
2024-12-29 15:28:50,101 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: ClientInitiated
2024-12-29 15:28:50,102 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 15:28:50,102 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 15:28:51,304 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:28:51,311 - livekit.agents - INFO - starting worker
2024-12-29 15:28:51,318 - livekit.agents - DEV - reloading job
2024-12-29 15:28:51,523 - livekit.agents - INFO - registered worker
2024-12-29 15:28:52,290 - livekit.agents - INFO - initializing job process
2024-12-29 15:28:52,292 - livekit.agents - INFO - job process initialized
2024-12-29 15:28:52,292 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:28:52,290 - livekit.agents - INFO - initializing job process
2024-12-29 15:28:52,292 - livekit.agents - INFO - job process initialized
2024-12-29 15:28:52,292 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:28:52,343 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 15:28:52,412 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2209
2024-12-29 15:28:52,412 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2209
2024-12-29 15:28:52,413 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 15:28:52,413 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 15:28:52,413 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 15:28:52,413 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 15:28:52,414 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 15:28:52,414 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 15:28:52,515 - livekit.agents - INFO - registered worker
2024-12-29 15:28:52,681 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 15:28:52,681 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 15:28:52,681 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 15:28:52,681 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 15:28:52,681 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 15:28:52,681 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 15:28:52,681 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 15:28:52,681 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 15:28:52,719 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 15:28:52,719 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 15:28:52,719 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 15:28:52,719 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 15:28:52,719 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 15:28:52,719 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 15:28:52,719 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 15:28:52,719 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 15:28:52,840 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 15:28:52,840 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 15:28:53,004 - voice-business-agent - INFO - Participant connected: voice_assistant_user_4338
2024-12-29 15:28:53,004 - voice-business-agent - INFO - Participant connected: voice_assistant_user_4338
2024-12-29 15:28:53,055 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 15:28:53,055 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 15:28:53,072 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 15:28:53,072 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 15:28:53,106 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:28:53,107 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 15:28:53,123 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x114de7ad0>
2024-12-29 15:28:53,123 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x115c527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 15:28:53,145 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x114dd10d0>
2024-12-29 15:28:53,145 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:28:53,146 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:28:53,146 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:28:53,146 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:28:53,146 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:28:54,761 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:58:54 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1262'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-vllsw'), (b'x-envoy-upstream-service-time', b'1244'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a7c00c35d7ddb7b51e7bc68dc8e133d0'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=_4IAuBl8nSgk7q8BQrnX4y3e5xi8jO2WauHQA3RAk74-1735466334-1.0.1.1-oX702TYQyXmAt5KpC1tnpaTX4w5SK5KRwmMeJPHeK1pT9O.QOQX0jmN9EkDeDGhtXwC8biVwKzOip5C9hljRAQ; path=/; expires=Sun, 29-Dec-24 10:28:54 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=kyEK.M_mRafrdzvKEpG3n4NMa8XtOdgHXvfe78CJYQU-1735466334785-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ef265ce054d2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:28:54,762 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:28:54,762 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:28:54,762 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:28:54,829 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:28:54,834 - livekit.agents - DEV - Watching /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python
2024-12-29 15:28:55,002 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:28:55,002 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:28:55,039 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:28:55,039 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:28:55,504 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:28:55,504 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:28:55,504 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:28:55,783 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:28:55,809 - livekit.agents - INFO - starting worker
2024-12-29 15:28:56,006 - livekit.agents - INFO - registered worker
2024-12-29 15:28:57,020 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:28:57,020 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 15:28:57,020 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:28:57,021 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 15:28:57,020 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 15:28:57,021 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:28:57,021 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 15:28:57,021 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:28:57,021 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:28:57,021 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:28:57,075 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:28:57,075 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:29:01,597 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:29:01,597 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:29:01,599 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:29:01,599 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:29:01,607 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'How are you?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:29:01,608 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 15:29:01,652 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x114dcbe50>
2024-12-29 15:29:01,652 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x115c52720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 15:29:01,668 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x114d1ea50>
2024-12-29 15:29:01,668 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:29:01,668 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:29:01,668 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:29:01,668 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:29:01,669 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:29:01,837 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:29:01,837 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:29:02,237 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:59:02 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'260'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29919'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'162ms'), (b'x-request-id', b'req_3feff39942d1857b0f957f42c0b2892c'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=1YJtceyqqbfdU15pfzRKLSc1vkJJvPISWc42rrAt5rg-1735466342-1.0.1.1-phQ5vXxeLv.c2jtq.q1COWuhGg8xImKCOXS2Z9NJlprMhuYNeU7LgF6Gs.Jem4GIhVlUsgm3W5A0p9e0HLRVpQ; path=/; expires=Sun, 29-Dec-24 10:29:02 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=m1O2UREYOuLvsSlZR_7.SBVqT_qjPa4XxxGr3kC75ug-1735466342259-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ef5b9e7e1b78-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:29:02,238 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:29:02,238 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:29:02,239 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:29:02,636 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm just a virtual assistant, so I don't experience feelings, but thank you for asking!", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:29:02,637 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:29:02,638 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:29:02,638 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:29:02,638 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:29:02,638 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:29:02,989 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:29:02,989 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:29:02,990 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:29:03,599 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:59:03 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'578'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-gkvpm'), (b'x-envoy-upstream-service-time', b'562'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_06e9211dd1a6fcac9d77d0711302ab66'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ef61b82e54d2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:29:03,601 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:29:03,601 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:29:03,602 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:29:03,855 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:29:03,855 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:29:03,892 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:29:03,892 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:29:05,178 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:29:05,178 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:29:05,178 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:29:05,180 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:29:05,181 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:29:05,181 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:29:05,181 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:29:05,181 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:29:05,182 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:29:05,423 - voice-business-agent - INFO - User speech received: How are you?
2024-12-29 15:29:05,426 - voice-business-agent - INFO - User speech received: How are you?
2024-12-29 15:29:05,426 - voice-business-agent - DEBUG - Validating phone number from text: How are you?
2024-12-29 15:29:05,423 - voice-business-agent - INFO - User speech received: How are you?
2024-12-29 15:29:05,426 - voice-business-agent - INFO - User speech received: How are you?
2024-12-29 15:29:05,427 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:29:05,426 - voice-business-agent - DEBUG - Validating phone number from text: How are you?
2024-12-29 15:29:05,427 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:29:06,575 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:59:06 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1054'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-r86z9'), (b'x-envoy-upstream-service-time', b'1044'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_4d7017c959be5ec920164f428d389741'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ef719d3c54d2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:29:06,578 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:29:06,578 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:29:06,579 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:29:06,964 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:29:06,964 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:29:06,965 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:29:06,966 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'If you need to speak with an agent, could you please provide your mobile number?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:29:06,967 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:29:06,967 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:29:06,967 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:29:06,967 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:29:06,967 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:29:07,855 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:59:07 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'581'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-8mpkt'), (b'x-envoy-upstream-service-time', b'569'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_5aef637f3b4582c46e16ccb873458610'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ef7cbd8c54d2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:29:07,856 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:29:07,856 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:29:07,856 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:29:09,434 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:29:09,435 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:29:09,436 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:29:15,460 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:29:15,460 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:29:15,461 - voice-business-agent - INFO - User speech received:  I'm just a virtual assistant, so I don't experience feelings, but thank you for asking! How can I assist you today? If you need to speak with an agent, could you please provide your mobile number?
2024-12-29 15:29:15,462 - voice-business-agent - DEBUG - Validating phone number from text:  I'm just a virtual assistant, so I don't experience feelings, but thank you for asking! How can I assist you today? If you need to speak with an agent, could you please provide your mobile number?
2024-12-29 15:29:15,461 - voice-business-agent - INFO - User speech received:  I'm just a virtual assistant, so I don't experience feelings, but thank you for asking! How can I assist you today? If you need to speak with an agent, could you please provide your mobile number?
2024-12-29 15:29:15,462 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:29:15,462 - voice-business-agent - DEBUG - Validating phone number from text:  I'm just a virtual assistant, so I don't experience feelings, but thank you for asking! How can I assist you today? If you need to speak with an agent, could you please provide your mobile number?
2024-12-29 15:29:15,462 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:29:15,462 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:29:15,462 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:29:15,496 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:29:15,496 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:29:21,177 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:29:21,177 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:29:21,554 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:29:21,554 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:29:21,557 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'How are you?'}, {'role': 'assistant', 'content': " I'm just a virtual assistant, so I don't experience feelings, but thank you for asking! How can I assist you today? If you need to speak with an agent, could you please provide your mobile number?"}, {'role': 'user', 'content': "No. I don't want to speak with an agent."}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:29:21,558 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:29:21,558 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:29:21,558 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:29:21,558 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:29:21,558 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:29:21,792 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:29:21,792 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:29:22,110 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:59:22 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'233'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29858'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'284ms'), (b'x-request-id', b'req_d3eca6bc892308b9e20ab47fb7424e5b'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98efd7e91f1b78-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:29:22,110 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:29:22,110 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:29:22,110 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:29:22,351 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:29:22,351 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:29:22,351 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:29:22,353 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "That's alright! How else may I assist you today?", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:29:22,354 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:29:22,355 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:29:22,355 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:29:22,355 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:29:22,356 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:29:23,949 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:59:23 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1303'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-69v7p'), (b'x-envoy-upstream-service-time', b'1283'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_2bcd787fdde0b442e665bad45a1c88cd'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98efdce9aa54d2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:29:23,950 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:29:23,950 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:29:23,951 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:29:24,192 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:29:24,192 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:29:24,234 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:29:24,234 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:29:24,689 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:29:24,690 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:29:24,690 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:29:25,777 - voice-business-agent - INFO - User speech received: No. I don't want to speak with an agent.
2024-12-29 15:29:25,779 - voice-business-agent - INFO - User speech received: No. I don't want to speak with an agent.
2024-12-29 15:29:25,780 - voice-business-agent - DEBUG - Validating phone number from text: No. I don't want to speak with an agent.
2024-12-29 15:29:25,781 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:29:25,777 - voice-business-agent - INFO - User speech received: No. I don't want to speak with an agent.
2024-12-29 15:29:25,779 - voice-business-agent - INFO - User speech received: No. I don't want to speak with an agent.
2024-12-29 15:29:25,780 - voice-business-agent - DEBUG - Validating phone number from text: No. I don't want to speak with an agent.
2024-12-29 15:29:25,781 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:29:27,090 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:29:27,090 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:29:27,090 - voice-business-agent - INFO - User speech received:  That's alright! How else may I assist you today?
2024-12-29 15:29:27,090 - voice-business-agent - DEBUG - Validating phone number from text:  That's alright! How else may I assist you today?
2024-12-29 15:29:27,090 - voice-business-agent - INFO - User speech received:  That's alright! How else may I assist you today?
2024-12-29 15:29:27,090 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:29:27,090 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:29:27,090 - voice-business-agent - DEBUG - Validating phone number from text:  That's alright! How else may I assist you today?
2024-12-29 15:29:27,090 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:29:27,090 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:29:27,128 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:29:27,128 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:29:43,315 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:29:43,315 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:29:43,817 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:29:43,817 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:29:43,826 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'How are you?'}, {'role': 'assistant', 'content': " I'm just a virtual assistant, so I don't experience feelings, but thank you for asking! How can I assist you today? If you need to speak with an agent, could you please provide your mobile number?"}, {'role': 'user', 'content': "No. I don't want to speak with an agent."}, {'role': 'assistant', 'content': " That's alright! How else may I assist you today?"}, {'role': 'user', 'content': 'So you have shared'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:29:43,829 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:29:43,830 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:29:43,830 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:29:43,830 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:29:43,831 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:29:44,059 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:29:44,059 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:29:44,412 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:59:44 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'260'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29839'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'322ms'), (b'x-request-id', b'req_eea433e3624676dc354e5e4cf3bc155d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f0632a2c1b78-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:29:44,412 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:29:44,412 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:29:44,412 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:29:44,611 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It looks like there might have been a misunderstanding.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:29:44,612 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:29:44,613 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:29:44,613 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:29:44,613 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:29:44,613 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:29:44,875 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:29:44,875 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:29:44,875 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:29:45,494 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:59:45 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'554'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-vgg9w'), (b'x-envoy-upstream-service-time', b'531'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_e6561cc62ccfb10331b628b8d13f26bb'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f0680f2e54d2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:29:45,498 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:29:45,499 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:29:45,499 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:29:45,780 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:29:45,780 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:29:45,823 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:29:45,823 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:29:46,108 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:29:46,108 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:29:46,110 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:29:46,110 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:29:46,145 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:29:46,145 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:29:46,677 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:29:46,679 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:29:46,679 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:29:48,327 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:29:48,327 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:29:48,328 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:29:48,328 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:29:48,333 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'How are you?'}, {'role': 'assistant', 'content': " I'm just a virtual assistant, so I don't experience feelings, but thank you for asking! How can I assist you today? If you need to speak with an agent, could you please provide your mobile number?"}, {'role': 'user', 'content': "No. I don't want to speak with an agent."}, {'role': 'assistant', 'content': " That's alright! How else may I assist you today?"}, {'role': 'user', 'content': 'So you have shared you are just a program.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:29:48,335 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:29:48,336 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:29:48,336 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:29:48,336 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:29:48,336 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:29:48,565 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:29:48,565 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:29:48,897 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:59:48 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'250'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29833'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'334ms'), (b'x-request-id', b'req_53f8e40d3e37688dd37c5a4c6edd2216'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f07f4bb71b78-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:29:48,898 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:29:48,898 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:29:48,899 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:29:49,041 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Yes, that's correct!", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:29:49,045 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:29:49,045 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:29:49,045 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:29:49,046 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:29:49,046 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:29:49,416 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:29:49,416 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:29:49,416 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:29:49,867 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:59:49 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'496'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-4p4m8'), (b'x-envoy-upstream-service-time', b'469'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_7348f6a33ee8f51640a8bd0efc7748c7'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f083b96c54d2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:29:49,868 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:29:49,868 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:29:49,868 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:29:50,162 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:29:50,162 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:29:50,198 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:29:50,198 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:29:50,455 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:29:50,456 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:29:50,456 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:29:50,457 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm here to help you with any questions or tasks within my capabilities.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:29:50,458 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:29:50,458 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:29:50,458 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:29:50,458 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:29:50,458 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:29:52,352 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:59:52 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1561'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-wl7cj'), (b'x-envoy-upstream-service-time', b'1546'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_16ebce8b01146dc23f859ff2a90cf29e'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f08c9d5f54d2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:29:52,353 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:29:52,353 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:29:52,354 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:29:53,148 - voice-business-agent - INFO - User speech received: So you have shared you are just a program.
2024-12-29 15:29:53,148 - voice-business-agent - INFO - User speech received: So you have shared you are just a program.
2024-12-29 15:29:53,148 - voice-business-agent - DEBUG - Validating phone number from text: So you have shared you are just a program.
2024-12-29 15:29:53,148 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:29:53,148 - voice-business-agent - INFO - User speech received: So you have shared you are just a program.
2024-12-29 15:29:53,148 - voice-business-agent - INFO - User speech received: So you have shared you are just a program.
2024-12-29 15:29:53,148 - voice-business-agent - DEBUG - Validating phone number from text: So you have shared you are just a program.
2024-12-29 15:29:53,148 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:29:53,503 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:29:53,503 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:29:53,503 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:29:53,504 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'How can I assist you further today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:29:53,505 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:29:53,506 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:29:53,506 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:29:53,506 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:29:53,506 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:29:54,343 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 09:59:54 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'543'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-689nm'), (b'x-envoy-upstream-service-time', b'519'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_db69fafedb4500bd45ddee02af783a92'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f09f9d1954d2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:29:54,343 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:29:54,344 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:29:54,344 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:29:55,093 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:29:55,093 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:29:55,093 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:29:59,278 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:29:59,278 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:29:59,279 - voice-business-agent - INFO - User speech received:  Yes, that's correct! I'm here to help you with any questions or tasks within my capabilities. How can I assist you further today?
2024-12-29 15:29:59,279 - voice-business-agent - DEBUG - Validating phone number from text:  Yes, that's correct! I'm here to help you with any questions or tasks within my capabilities. How can I assist you further today?
2024-12-29 15:29:59,279 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:29:59,279 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:29:59,279 - voice-business-agent - INFO - User speech received:  Yes, that's correct! I'm here to help you with any questions or tasks within my capabilities. How can I assist you further today?
2024-12-29 15:29:59,279 - voice-business-agent - DEBUG - Validating phone number from text:  Yes, that's correct! I'm here to help you with any questions or tasks within my capabilities. How can I assist you further today?
2024-12-29 15:29:59,279 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:29:59,279 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:29:59,317 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:29:59,317 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:30:04,365 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:30:04,365 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:30:04,432 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:30:04,432 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:30:04,436 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'How are you?'}, {'role': 'assistant', 'content': " I'm just a virtual assistant, so I don't experience feelings, but thank you for asking! How can I assist you today? If you need to speak with an agent, could you please provide your mobile number?"}, {'role': 'user', 'content': "No. I don't want to speak with an agent."}, {'role': 'assistant', 'content': " That's alright! How else may I assist you today?"}, {'role': 'user', 'content': 'So you have shared you are just a program.'}, {'role': 'assistant', 'content': " Yes, that's correct! I'm here to help you with any questions or tasks within my capabilities. How can I assist you further today?"}, {'role': 'user', 'content': 'So which program you are?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:30:04,437 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:30:04,437 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:30:04,437 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:30:04,437 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:30:04,437 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:30:04,669 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:30:04,669 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:30:05,245 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:00:05 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'501'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29792'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'416ms'), (b'x-request-id', b'req_be0df972416446c540531b8bd7d9edb7'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f0e3eac71b78-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:30:05,246 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:30:05,246 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:30:05,246 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:30:05,951 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I am a virtual assistant programmed to assist users with information and various tasks, such as connecting callers with agents, providing information, and answering queries.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:30:05,951 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:30:05,952 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:30:05,952 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:30:05,952 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:30:05,952 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:30:06,051 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:30:06,051 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:30:06,051 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:30:07,549 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:00:07 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1240'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-kdk4v'), (b'x-envoy-upstream-service-time', b'1218'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_1507df7128ba3f7745e2d5c0904ec487'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f0ed6ef354d2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:30:07,549 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:30:07,549 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:30:07,549 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:30:07,844 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:30:07,844 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:30:07,920 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:30:07,920 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:30:09,453 - voice-business-agent - INFO - User speech received: So which program you are?
2024-12-29 15:30:09,453 - voice-business-agent - INFO - User speech received: So which program you are?
2024-12-29 15:30:09,453 - voice-business-agent - DEBUG - Validating phone number from text: So which program you are?
2024-12-29 15:30:09,453 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:30:09,453 - voice-business-agent - INFO - User speech received: So which program you are?
2024-12-29 15:30:09,453 - voice-business-agent - INFO - User speech received: So which program you are?
2024-12-29 15:30:09,453 - voice-business-agent - DEBUG - Validating phone number from text: So which program you are?
2024-12-29 15:30:09,453 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:30:09,982 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:30:09,982 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:30:09,982 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:30:09,984 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'How can I help you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:30:09,984 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:30:09,985 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:30:09,985 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:30:09,985 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:30:09,986 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:30:10,842 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:00:10 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'541'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-canary-cc6f5d69c-t65qj'), (b'x-envoy-upstream-service-time', b'504'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_886b2fa38835fedf5075cbb75ba6edce'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f106999854d2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:30:10,843 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:30:10,843 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:30:10,844 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:30:11,388 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:30:11,388 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:30:11,388 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:30:19,922 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:30:19,922 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:30:19,923 - voice-business-agent - INFO - User speech received:  I am a virtual assistant programmed to assist users with information and various tasks, such as connecting callers with agents, providing information, and answering queries. How can I help you today?
2024-12-29 15:30:19,923 - voice-business-agent - DEBUG - Validating phone number from text:  I am a virtual assistant programmed to assist users with information and various tasks, such as connecting callers with agents, providing information, and answering queries. How can I help you today?
2024-12-29 15:30:19,923 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:30:19,923 - voice-business-agent - INFO - User speech received:  I am a virtual assistant programmed to assist users with information and various tasks, such as connecting callers with agents, providing information, and answering queries. How can I help you today?
2024-12-29 15:30:19,923 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:30:19,923 - voice-business-agent - DEBUG - Validating phone number from text:  I am a virtual assistant programmed to assist users with information and various tasks, such as connecting callers with agents, providing information, and answering queries. How can I help you today?
2024-12-29 15:30:19,923 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:30:19,923 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:30:19,955 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:30:19,955 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:30:28,469 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:30:28,469 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:30:28,845 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:30:28,845 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:30:28,851 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'How are you?'}, {'role': 'assistant', 'content': " I'm just a virtual assistant, so I don't experience feelings, but thank you for asking! How can I assist you today? If you need to speak with an agent, could you please provide your mobile number?"}, {'role': 'user', 'content': "No. I don't want to speak with an agent."}, {'role': 'assistant', 'content': " That's alright! How else may I assist you today?"}, {'role': 'user', 'content': 'So you have shared you are just a program.'}, {'role': 'assistant', 'content': " Yes, that's correct! I'm here to help you with any questions or tasks within my capabilities. How can I assist you further today?"}, {'role': 'user', 'content': 'So which program you are?'}, {'role': 'assistant', 'content': ' I am a virtual assistant programmed to assist users with information and various tasks, such as connecting callers with agents, providing information, and answering queries. How can I help you today?'}, {'role': 'user', 'content': 'So you are responding from.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:30:28,852 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:30:28,853 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:30:28,853 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:30:28,853 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:30:28,853 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:30:29,085 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:30:29,085 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:30:29,525 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:00:29 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'354'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29733'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'534ms'), (b'x-request-id', b'req_cc3f07ffd40505d7727207ff84f5e1d4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f17c8d251b78-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:30:29,526 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:30:29,526 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:30:29,527 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:30:30,291 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm designed to respond to your queries through this chat interface.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:30:30,293 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:30:30,293 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:30:30,293 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:30:30,294 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:30:30,294 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:30:31,061 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:30:31,062 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:30:31,062 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:30:31,220 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:00:31 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'625'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-tqwjp'), (b'x-envoy-upstream-service-time', b'607'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_4d428a92080569660f5a177f56a6c5b9'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f1858e1f54d2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:30:31,221 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:30:31,221 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:30:31,221 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:30:31,486 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:30:31,486 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:30:31,529 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:30:31,529 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:30:32,510 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:30:32,510 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:30:32,510 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:30:32,512 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm here to provide assistance or information based on your needs.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:30:32,513 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:30:32,514 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:30:32,514 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:30:32,514 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:30:32,514 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:30:33,067 - voice-business-agent - INFO - User speech received: So you are responding from.
2024-12-29 15:30:33,067 - voice-business-agent - INFO - User speech received: So you are responding from.
2024-12-29 15:30:33,067 - voice-business-agent - DEBUG - Validating phone number from text: So you are responding from.
2024-12-29 15:30:33,067 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:30:33,067 - voice-business-agent - INFO - User speech received: So you are responding from.
2024-12-29 15:30:33,067 - voice-business-agent - INFO - User speech received: So you are responding from.
2024-12-29 15:30:33,067 - voice-business-agent - DEBUG - Validating phone number from text: So you are responding from.
2024-12-29 15:30:33,067 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:30:33,517 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:00:33 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'647'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-qxzcq'), (b'x-envoy-upstream-service-time', b'631'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d0734cc453cbddcdb7f36b8e6def8d24'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f193692d54d2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:30:33,519 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:30:33,519 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:30:33,519 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:30:34,435 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:30:34,436 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:30:34,437 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:30:34,439 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'What specific help do you need today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:30:34,440 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:30:34,440 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:30:34,441 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:30:34,441 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:30:34,441 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:30:35,255 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:00:35 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'515'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-vllsw'), (b'x-envoy-upstream-service-time', b'498'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_86deb839b25125780090a1218de0a1e6'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f19f7b2654d2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:30:35,256 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:30:35,258 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:30:35,258 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:30:36,034 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:30:36,034 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:30:36,035 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:30:41,542 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:30:41,543 - voice-business-agent - INFO - User speech received:  I'm designed to respond to your queries through this chat interface. I'm here to provide assistance or information based on your needs. What specific help do you need today?
2024-12-29 15:30:41,542 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:30:41,543 - voice-business-agent - DEBUG - Validating phone number from text:  I'm designed to respond to your queries through this chat interface. I'm here to provide assistance or information based on your needs. What specific help do you need today?
2024-12-29 15:30:41,543 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:30:41,543 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:30:41,543 - voice-business-agent - INFO - User speech received:  I'm designed to respond to your queries through this chat interface. I'm here to provide assistance or information based on your needs. What specific help do you need today?
2024-12-29 15:30:41,543 - voice-business-agent - DEBUG - Validating phone number from text:  I'm designed to respond to your queries through this chat interface. I'm here to provide assistance or information based on your needs. What specific help do you need today?
2024-12-29 15:30:41,543 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:30:41,543 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:30:41,578 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:30:41,578 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:31:40,494 - livekit.agents - INFO - shutting down worker
2024-12-29 15:31:40,495 - livekit.agents - DEBUG - shutting down job task
2024-12-29 15:31:40,495 - livekit.agents - DEBUG - shutting down job task
2024-12-29 15:31:40,496 - livekit.agents - INFO - process exiting
2024-12-29 15:31:40,523 - livekit.agents - INFO - shutting down worker
2024-12-29 15:31:40,541 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 15:31:40,541 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 15:31:40,543 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: ClientInitiated
2024-12-29 15:31:40,543 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: ClientInitiated
2024-12-29 15:31:40,543 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 15:31:40,543 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 15:31:41,787 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:31:41,794 - livekit.agents - INFO - starting worker
2024-12-29 15:31:41,800 - livekit.agents - DEV - reloading job
2024-12-29 15:31:41,820 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:31:41,825 - livekit.agents - INFO - starting worker
2024-12-29 15:31:41,997 - livekit.agents - INFO - registered worker
2024-12-29 15:31:42,055 - livekit.agents - INFO - registered worker
2024-12-29 15:31:42,849 - livekit.agents - INFO - initializing job process
2024-12-29 15:31:42,850 - livekit.agents - INFO - job process initialized
2024-12-29 15:31:42,850 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:31:42,849 - livekit.agents - INFO - initializing job process
2024-12-29 15:31:42,850 - livekit.agents - INFO - job process initialized
2024-12-29 15:31:42,850 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:31:42,906 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 15:31:42,955 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2209
2024-12-29 15:31:42,955 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2209
2024-12-29 15:31:42,956 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 15:31:42,956 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 15:31:42,956 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 15:31:42,956 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 15:31:42,957 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 15:31:42,957 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 15:31:43,098 - livekit.agents - INFO - registered worker
2024-12-29 15:31:43,207 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 15:31:43,207 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 15:31:43,207 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 15:31:43,208 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 15:31:43,207 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 15:31:43,208 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 15:31:43,208 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 15:31:43,208 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 15:31:43,247 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 15:31:43,247 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 15:31:43,247 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 15:31:43,247 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 15:31:43,247 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 15:31:43,247 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 15:31:43,247 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 15:31:43,247 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 15:31:43,366 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 15:31:43,366 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 15:31:43,525 - voice-business-agent - INFO - Participant connected: voice_assistant_user_4338
2024-12-29 15:31:43,525 - voice-business-agent - INFO - Participant connected: voice_assistant_user_4338
2024-12-29 15:31:43,577 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 15:31:43,577 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 15:31:43,632 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 15:31:43,632 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 15:31:43,660 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:31:43,661 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 15:31:43,683 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1220151d0>
2024-12-29 15:31:43,683 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1232527b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 15:31:43,696 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12201c290>
2024-12-29 15:31:43,697 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:31:43,697 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:31:43,697 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:31:43,697 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:31:43,697 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:31:44,852 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:01:44 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'857'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-vffb6'), (b'x-envoy-upstream-service-time', b'836'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f52933cbef730d789b174d6116737bbe'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=RHJKt.0f6yp_UtV7UJ_eSA1C_s0r_YRfv3dRq2FLenc-1735466504-1.0.1.1-30vJ2ttDMMUQx22fGJ3OQ9nnV.KdU34rwpeo.lfOMX0fhuYqVFv9JdEGSvs8e6RILzAKHuIC1oPXaqEtXJKALg; path=/; expires=Sun, 29-Dec-24 10:31:44 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=5FF_daxrY6yBekoJ6.I5n3rig72AjypC_m8MgANJyzw-1735466504875-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f3505e0c54f8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:31:44,854 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:31:44,854 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:31:44,854 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:31:45,102 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:31:45,102 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:31:45,146 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:31:45,146 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:31:45,609 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:31:45,610 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:31:45,610 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:31:47,158 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:31:47,158 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:31:47,159 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 15:31:47,159 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 15:31:47,159 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 15:31:47,159 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:31:47,160 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:31:47,159 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 15:31:47,159 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:31:47,160 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:31:47,202 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:31:47,202 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:31:51,639 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:31:51,639 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:31:51,896 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:31:51,896 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:31:51,903 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So what is the response?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:31:51,904 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 15:31:51,919 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x121f4a210>
2024-12-29 15:31:51,919 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x123252720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 15:31:51,939 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x122000ad0>
2024-12-29 15:31:51,939 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:31:51,939 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:31:51,939 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:31:51,940 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:31:51,940 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:31:52,140 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:31:52,140 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:31:53,058 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:01:53 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'291'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29916'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'168ms'), (b'x-request-id', b'req_ee4f1e36715aabbe099b181ecc180bf6'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=HOQbSNzVgO68WWUBfurMtf_Br6QSulnjlJkj4W1Zp5A-1735466513-1.0.1.1-M.oHA5AcOQ.e3FdVdZNDcexUbg4wnL_WnGwEQS7O7QatiQbsr5WS1VlTcZ8KJ8R2nZuwrwG.eOhl5PRFhybioQ; path=/; expires=Sun, 29-Dec-24 10:31:53 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=KaJCs.Sznw20IOU843K0umEp4KqHLaspeH36dj7P9r8-1735466513074-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f383ce0a8e92-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:31:53,061 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:31:53,061 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:31:53,061 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:31:53,879 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:31:53,879 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:31:53,879 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:31:53,880 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'To connect you with an agent, could you please provide me with your mobile number?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:31:53,881 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:31:53,881 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:31:53,881 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:31:53,881 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:31:53,881 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:31:54,970 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:01:54 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'769'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-bc5lk'), (b'x-envoy-upstream-service-time', b'759'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_87adc9660443e36a5480bb957fa39af1'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f38ffe9054f8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:31:54,971 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:31:54,971 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:31:54,971 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:31:55,243 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:31:55,243 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:31:55,284 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:31:55,284 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:31:56,414 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:31:56,414 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:31:56,415 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:31:56,910 - voice-business-agent - INFO - User speech received: So what is the response?
2024-12-29 15:31:56,910 - voice-business-agent - INFO - User speech received: So what is the response?
2024-12-29 15:31:56,911 - voice-business-agent - DEBUG - Validating phone number from text: So what is the response?
2024-12-29 15:31:56,910 - voice-business-agent - INFO - User speech received: So what is the response?
2024-12-29 15:31:56,911 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:31:56,910 - voice-business-agent - INFO - User speech received: So what is the response?
2024-12-29 15:31:56,911 - voice-business-agent - DEBUG - Validating phone number from text: So what is the response?
2024-12-29 15:31:56,911 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:32:00,276 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:32:00,276 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:32:00,277 - voice-business-agent - INFO - User speech received:  To connect you with an agent, could you please provide me with your mobile number?
2024-12-29 15:32:00,278 - voice-business-agent - DEBUG - Validating phone number from text:  To connect you with an agent, could you please provide me with your mobile number?
2024-12-29 15:32:00,278 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:32:00,277 - voice-business-agent - INFO - User speech received:  To connect you with an agent, could you please provide me with your mobile number?
2024-12-29 15:32:00,278 - voice-business-agent - DEBUG - Validating phone number from text:  To connect you with an agent, could you please provide me with your mobile number?
2024-12-29 15:32:00,278 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:32:00,278 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:32:00,278 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:32:00,322 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:32:00,322 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:32:02,743 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:32:02,743 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:32:03,098 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:32:03,098 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:32:03,101 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So what is the response?'}, {'role': 'assistant', 'content': ' To connect you with an agent, could you please provide me with your mobile number?'}, {'role': 'user', 'content': 'No. I have to talk to you.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:32:03,102 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:32:03,102 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:32:03,102 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:32:03,103 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:32:03,103 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:32:03,341 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:32:03,341 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:32:03,692 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:02:03 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'287'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29887'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'226ms'), (b'x-request-id', b'req_ee31d478a20935097bfdf58034eafc01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f3c99d3d8e92-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:32:03,693 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:32:03,693 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:32:03,694 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:32:04,157 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Of course! Feel free to talk to me or ask any questions you have.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:32:04,158 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:32:04,158 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:32:04,158 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:32:04,159 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:32:04,159 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:32:04,220 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:32:04,220 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:32:04,221 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:32:05,099 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:02:05 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'606'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-q54lp'), (b'x-envoy-upstream-service-time', b'591'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_255e9ef627795907adca71239b7f1c75'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f3d0387254f8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:32:05,100 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:32:05,100 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:32:05,101 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:32:05,384 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:32:05,384 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:32:05,430 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:32:05,430 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:32:06,483 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:32:06,483 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:32:06,483 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:32:06,485 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:32:06,486 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:32:06,486 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:32:06,486 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:32:06,487 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:32:06,487 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:32:06,921 - voice-business-agent - INFO - User speech received: No. I have to talk to you.
2024-12-29 15:32:06,921 - voice-business-agent - INFO - User speech received: No. I have to talk to you.
2024-12-29 15:32:06,922 - voice-business-agent - DEBUG - Validating phone number from text: No. I have to talk to you.
2024-12-29 15:32:06,922 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:32:06,921 - voice-business-agent - INFO - User speech received: No. I have to talk to you.
2024-12-29 15:32:06,921 - voice-business-agent - INFO - User speech received: No. I have to talk to you.
2024-12-29 15:32:06,922 - voice-business-agent - DEBUG - Validating phone number from text: No. I have to talk to you.
2024-12-29 15:32:06,922 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:32:07,400 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:02:07 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'593'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-ltqzq'), (b'x-envoy-upstream-service-time', b'573'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_e4f613e3b54b20cfc280624f17f495a4'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f3debb9454f8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:32:07,400 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:32:07,400 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:32:07,401 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:32:08,211 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:32:08,211 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:32:08,211 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:32:10,926 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:32:10,926 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:32:10,926 - voice-business-agent - INFO - User speech received:  Of course! Feel free to talk to me or ask any questions you have. How can I assist you today?
2024-12-29 15:32:10,927 - voice-business-agent - DEBUG - Validating phone number from text:  Of course! Feel free to talk to me or ask any questions you have. How can I assist you today?
2024-12-29 15:32:10,927 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:32:10,926 - voice-business-agent - INFO - User speech received:  Of course! Feel free to talk to me or ask any questions you have. How can I assist you today?
2024-12-29 15:32:10,927 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:32:10,927 - voice-business-agent - DEBUG - Validating phone number from text:  Of course! Feel free to talk to me or ask any questions you have. How can I assist you today?
2024-12-29 15:32:10,927 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:32:10,927 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:32:10,963 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:32:10,963 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:32:14,385 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:32:14,385 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:32:14,588 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:32:14,588 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:32:14,591 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So what is the response?'}, {'role': 'assistant', 'content': ' To connect you with an agent, could you please provide me with your mobile number?'}, {'role': 'user', 'content': 'No. I have to talk to you.'}, {'role': 'assistant', 'content': ' Of course! Feel free to talk to me or ask any questions you have. How can I assist you today?'}, {'role': 'user', 'content': 'Okay. Wait.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:32:14,592 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:32:14,592 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:32:14,593 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:32:14,593 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:32:14,593 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:32:14,831 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:32:14,831 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:32:15,174 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:02:15 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'279'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29858'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'284ms'), (b'x-request-id', b'req_d1889730247c7b1e183b85214805d774'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f4116d9f8e92-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:32:15,175 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:32:15,175 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:32:15,176 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:32:15,429 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:32:15,429 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:32:15,429 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:32:15,431 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Take your time. I'm here whenever you're ready.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:32:15,432 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:32:15,432 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:32:15,432 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:32:15,433 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:32:15,433 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:32:16,249 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:02:16 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'456'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-2zssc'), (b'x-envoy-upstream-service-time', b'405'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_214579a5d99a79b3cb7f4f179b3129bd'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f416acd854f8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:32:16,250 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:32:16,250 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:32:16,250 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:32:17,876 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:32:17,876 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:32:17,922 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:32:17,922 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:32:18,950 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:32:18,950 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:32:18,950 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:32:19,612 - voice-business-agent - INFO - User speech received: Okay. Wait.
2024-12-29 15:32:19,612 - voice-business-agent - INFO - User speech received: Okay. Wait.
2024-12-29 15:32:19,612 - voice-business-agent - DEBUG - Validating phone number from text: Okay. Wait.
2024-12-29 15:32:19,612 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:32:19,612 - voice-business-agent - INFO - User speech received: Okay. Wait.
2024-12-29 15:32:19,612 - voice-business-agent - INFO - User speech received: Okay. Wait.
2024-12-29 15:32:19,612 - voice-business-agent - DEBUG - Validating phone number from text: Okay. Wait.
2024-12-29 15:32:19,612 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:32:20,645 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:32:20,645 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:32:20,645 - voice-business-agent - INFO - User speech received:  Take your time. I'm here whenever you're ready.
2024-12-29 15:32:20,645 - voice-business-agent - DEBUG - Validating phone number from text:  Take your time. I'm here whenever you're ready.
2024-12-29 15:32:20,645 - voice-business-agent - INFO - User speech received:  Take your time. I'm here whenever you're ready.
2024-12-29 15:32:20,645 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:32:20,645 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:32:20,645 - voice-business-agent - DEBUG - Validating phone number from text:  Take your time. I'm here whenever you're ready.
2024-12-29 15:32:20,645 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:32:20,645 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:32:20,682 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:32:20,682 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:33:16,121 - livekit.agents - INFO - shutting down worker
2024-12-29 15:33:16,122 - livekit.agents - DEBUG - shutting down job task
2024-12-29 15:33:16,122 - livekit.agents - DEBUG - shutting down job task
2024-12-29 15:33:16,122 - livekit.agents - INFO - process exiting
2024-12-29 15:33:16,132 - livekit.agents - INFO - shutting down worker
2024-12-29 15:33:16,161 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 15:33:16,161 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 15:33:16,163 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 15:33:16,163 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 15:33:17,546 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:33:17,548 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:33:17,555 - livekit.agents - INFO - starting worker
2024-12-29 15:33:17,559 - livekit.agents - INFO - starting worker
2024-12-29 15:33:17,565 - livekit.agents - DEV - reloading job
2024-12-29 15:33:17,709 - livekit.agents - INFO - registered worker
2024-12-29 15:33:17,786 - livekit.agents - INFO - registered worker
2024-12-29 15:33:18,500 - livekit.agents - INFO - initializing job process
2024-12-29 15:33:18,500 - livekit.agents - INFO - initializing job process
2024-12-29 15:33:18,501 - livekit.agents - INFO - job process initialized
2024-12-29 15:33:18,501 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:33:18,501 - livekit.agents - INFO - job process initialized
2024-12-29 15:33:18,501 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:33:18,559 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 15:33:18,617 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2209
2024-12-29 15:33:18,617 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2209
2024-12-29 15:33:18,618 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 15:33:18,618 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 15:33:18,618 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 15:33:18,618 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 15:33:18,619 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 15:33:18,619 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 15:33:18,692 - livekit.agents - INFO - registered worker
2024-12-29 15:33:18,888 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 15:33:18,889 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 15:33:18,889 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 15:33:18,889 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 15:33:18,888 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 15:33:18,889 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 15:33:18,889 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 15:33:18,889 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 15:33:18,928 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 15:33:18,928 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 15:33:18,928 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 15:33:18,928 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 15:33:18,928 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 15:33:18,929 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 15:33:18,928 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 15:33:18,929 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 15:33:19,046 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 15:33:19,046 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 15:33:19,314 - voice-business-agent - INFO - Participant connected: voice_assistant_user_4338
2024-12-29 15:33:19,314 - voice-business-agent - INFO - Participant connected: voice_assistant_user_4338
2024-12-29 15:33:19,376 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 15:33:19,376 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 15:33:19,395 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 15:33:19,395 - root - INFO - participant attributes changed: {'lk.agent.state': 'initializing'} {'lk.agent.state': 'initializing'}
2024-12-29 15:33:19,432 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:33:19,433 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 15:33:19,446 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1180c8290>
2024-12-29 15:33:19,446 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x119cda7b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 15:33:19,470 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x118087e50>
2024-12-29 15:33:19,470 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:33:19,471 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:33:19,471 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:33:19,471 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:33:19,471 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:33:20,350 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:03:20 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'530'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-9lk8f'), (b'x-envoy-upstream-service-time', b'514'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b8eca772c3555f3b02d18f54985f8518'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=SPVFdlGLt8sUi0u2ZidC_ifd21me9fPjL01h5sPFmgo-1735466600-1.0.1.1-jTuFaqSwIsA95h7bQPTRWxVcjtYJmQHV.7LtQPFif.rPyE1sNOXz6q5xs73rObXPoE_ftRjyv8bk6srnemg3hw; path=/; expires=Sun, 29-Dec-24 10:33:20 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=ae9NfX0.woQXH6H85pAGNaFXf.fn1TzjuPlp9P4edFg-1735466600368-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f5a6ebd754ea-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:33:20,353 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:33:20,354 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:33:20,354 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:33:20,649 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:33:20,649 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:33:20,689 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:33:20,689 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:33:21,230 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:33:21,231 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:33:21,232 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:33:22,654 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:33:22,654 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:33:22,655 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 15:33:22,656 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 15:33:22,655 - voice-business-agent - INFO - User speech received:  Hello! How can I assist you today?
2024-12-29 15:33:22,656 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:33:22,656 - voice-business-agent - DEBUG - Validating phone number from text:  Hello! How can I assist you today?
2024-12-29 15:33:22,656 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:33:22,656 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:33:22,656 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:33:22,699 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:33:22,699 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:33:28,589 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:33:28,589 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:33:28,939 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:33:28,939 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:33:28,948 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful voice assistant. Your primary task is to connect callers with agents. Ask for their mobile number to proceed with the connection.remove special character or space from mobile number.'}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Take my word and post to the API.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:33:28,950 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 15:33:28,970 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1180d6450>
2024-12-29 15:33:28,971 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x119cda720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 15:33:28,988 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10f8fe890>
2024-12-29 15:33:28,988 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:33:28,989 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:33:28,989 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:33:28,989 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:33:28,990 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:33:29,196 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:33:29,196 - root - INFO - participant attributes changed: {'lk.agent.state': 'thinking'} {'lk.agent.state': 'thinking'}
2024-12-29 15:33:29,557 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:03:29 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'260'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29914'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'172ms'), (b'x-request-id', b'req_5dee777fd26f2aea562733af90277cd1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=R__oY2W50hRjdTIq9fbIqKg63haNHLeP5UfC2iZAH.M-1735466609-1.0.1.1-1HiSrfd.7RVJYyDxEW46sID6X5gn1d3YXvBmG5aKqx2Xh07jRTOPKB_L9k1q974ZM7iqZZAkoDGVSct9suZMsA; path=/; expires=Sun, 29-Dec-24 10:33:29 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=oV3cLmltxcwhBaZEoeWHoB_e7CivWaF7AedAZCgT55E-1735466609579-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f5e26dde548f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:33:29,558 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:33:29,558 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:33:29,559 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:33:29,798 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I can help you with that.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:33:29,800 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:33:29,800 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:33:29,800 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:33:29,801 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:33:29,801 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:33:30,318 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:33:30,319 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:33:30,319 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:33:30,851 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:03:30 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'726'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-r86z9'), (b'x-envoy-upstream-service-time', b'698'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_eb86e71600aeb5a6037680970e28b654'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f5e7789454ea-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:33:30,853 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:33:30,853 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:33:30,853 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:33:31,128 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:33:31,128 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:33:31,167 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:33:31,167 - root - INFO - participant attributes changed: {'lk.agent.state': 'speaking'} {'lk.agent.state': 'speaking'}
2024-12-29 15:33:31,410 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:33:31,412 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:33:31,413 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:33:31,416 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide your mobile number so I can proceed with the connection?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:33:31,418 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:33:31,418 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:33:31,419 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:33:31,419 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:33:31,419 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:33:33,672 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:03:33 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1940'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-gtwbv'), (b'x-envoy-upstream-service-time', b'1909'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_cbbcbe672991130f46aecaf27e468736'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f5f19f0454ea-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:33:33,673 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:33:33,674 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:33:33,674 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:33:34,375 - voice-business-agent - INFO - User speech received: Take my word and post to the API.
2024-12-29 15:33:34,375 - voice-business-agent - INFO - User speech received: Take my word and post to the API.
2024-12-29 15:33:34,375 - voice-business-agent - DEBUG - Validating phone number from text: Take my word and post to the API.
2024-12-29 15:33:34,375 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:33:34,375 - voice-business-agent - INFO - User speech received: Take my word and post to the API.
2024-12-29 15:33:34,375 - voice-business-agent - INFO - User speech received: Take my word and post to the API.
2024-12-29 15:33:34,375 - voice-business-agent - DEBUG - Validating phone number from text: Take my word and post to the API.
2024-12-29 15:33:34,375 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:33:35,325 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:33:35,326 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:33:35,326 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:33:39,242 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:33:39,242 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:33:39,244 - voice-business-agent - INFO - User speech received:  I can help you with that. Could you please provide your mobile number so I can proceed with the connection?
2024-12-29 15:33:39,244 - voice-business-agent - DEBUG - Validating phone number from text:  I can help you with that. Could you please provide your mobile number so I can proceed with the connection?
2024-12-29 15:33:39,244 - voice-business-agent - INFO - User speech received:  I can help you with that. Could you please provide your mobile number so I can proceed with the connection?
2024-12-29 15:33:39,244 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:33:39,244 - voice-business-agent - DEBUG - Validating phone number from text:  I can help you with that. Could you please provide your mobile number so I can proceed with the connection?
2024-12-29 15:33:39,244 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:33:39,244 - voice-business-agent - INFO - No valid phone number found in text
2024-12-29 15:33:39,244 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:33:39,285 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:33:39,285 - root - INFO - participant attributes changed: {'lk.agent.state': 'listening'} {'lk.agent.state': 'listening'}
2024-12-29 15:35:32,860 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:35:32,861 - livekit.agents - DEV - Watching /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python
2024-12-29 15:35:33,708 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:35:33,718 - livekit.agents - INFO - starting worker
2024-12-29 15:35:33,898 - livekit.agents - INFO - registered worker
2024-12-29 15:35:56,290 - livekit.agents - INFO - received job request
2024-12-29 15:35:57,341 - livekit.agents - INFO - initializing job process
2024-12-29 15:35:57,341 - livekit.agents - INFO - initializing job process
2024-12-29 15:35:57,421 - voice-business-agent - INFO - VAD model loaded successfully during prewarm.
2024-12-29 15:35:57,422 - livekit.agents - INFO - job process initialized
2024-12-29 15:35:57,421 - voice-business-agent - INFO - VAD model loaded successfully during prewarm.
2024-12-29 15:35:57,422 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:35:57,422 - livekit.agents - INFO - job process initialized
2024-12-29 15:35:57,423 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2037
2024-12-29 15:35:57,422 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-29 15:35:57,423 - voice-business-agent - INFO - Connecting to room voice_assistant_room_2037
2024-12-29 15:35:57,423 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 15:35:57,424 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 15:35:57,423 - livekit - INFO - livekit_ffi::server:133:livekit_ffi::server - initializing ffi server v0.12.3
2024-12-29 15:35:57,424 - livekit - INFO - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.3
2024-12-29 15:35:57,425 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 15:35:57,425 - livekit - INFO - livekit_api::signal_client::signal_stream:96:livekit_api::signal_client::signal_stream - connecting to wss://dr-batra-evlu20p5.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=0.18.3&access_token=...
2024-12-29 15:35:57,670 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 15:35:57,670 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 15:35:57,670 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 15:35:57,670 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 15:35:57,670 - livekit - DEBUG - rustls::anchors:150:rustls::anchors - add_parsable_certificates processed 160 valid and 0 invalid certs
2024-12-29 15:35:57,670 - livekit - DEBUG - tokio_tungstenite::tls::encryption::rustls:103:tokio_tungstenite::tls::encryption::rustls - Added 160/160 native root certificates (ignored 0)
2024-12-29 15:35:57,670 - livekit - DEBUG - rustls::client::hs:73:rustls::client::hs - No cached session for DnsName("dr-batra-evlu20p5.livekit.cloud")
2024-12-29 15:35:57,670 - livekit - DEBUG - rustls::client::hs:132:rustls::client::hs - Not resuming any session
2024-12-29 15:35:57,722 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 15:35:57,722 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 15:35:57,722 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 15:35:57,722 - livekit - DEBUG - rustls::client::hs:615:rustls::client::hs - Using ciphersuite TLS13_AES_128_GCM_SHA256
2024-12-29 15:35:57,722 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 15:35:57,722 - livekit - DEBUG - rustls::client::tls13:142:rustls::client::tls13 - Not resuming
2024-12-29 15:35:57,722 - livekit - DEBUG - rustls::client::tls13:381:rustls::client::tls13 - TLS1.3 encrypted extensions: []
2024-12-29 15:35:57,722 - livekit - DEBUG - rustls::client::hs:472:rustls::client::hs - ALPN protocol is None
2024-12-29 15:35:57,855 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 15:35:57,855 - livekit - DEBUG - tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
2024-12-29 15:35:58,122 - voice-business-agent - INFO - Participant joined: voice_assistant_user_7575
2024-12-29 15:35:58,122 - voice-business-agent - INFO - Participant joined: voice_assistant_user_7575
2024-12-29 15:35:58,180 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 15:35:58,180 - livekit.agents - DEBUG - http_session(): creating a new httpclient ctx
2024-12-29 15:35:58,256 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Hello! How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:35:58,258 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 15:35:58,322 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x115439d90>
2024-12-29 15:35:58,322 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x122c567b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 15:35:58,336 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1151b9cd0>
2024-12-29 15:35:58,336 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:35:58,337 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:35:58,337 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:35:58,337 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:35:58,337 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:35:59,463 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:05:59 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'815'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-bxj7b'), (b'x-envoy-upstream-service-time', b'791'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_1164a5a5b7c2d8a78cd90f548e7e4abc'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=u8xZPwL5KSvz_qNSFu1fXsXCb0Q5Ys2bI.UD_8naZ_E-1735466759-1.0.1.1-UjvhoyfFXTSTlHakwi02xUQafBUR9DslYoBywB1lIGWfZUlG7y_79Dr80dLHhto0elSXlcIxSJPpm3r6IJ26dw; path=/; expires=Sun, 29-Dec-24 10:35:59 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=gbEFNlFJZ4AE73QeIuCQARGQzvZ1_BwGSrKOS5kAbvY-1735466759482-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f987ca5f91b5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:35:59,465 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:35:59,465 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:35:59,466 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:35:59,718 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:35:59,718 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:36:00,225 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:36:00,226 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:36:00,227 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:36:01,584 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:36:01,584 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:36:01,584 - voice-business-agent - INFO - Agent speech committed:  Hello! How can I assist you today?
2024-12-29 15:36:01,584 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:36:01,584 - voice-business-agent - INFO - Agent speech committed:  Hello! How can I assist you today?
2024-12-29 15:36:01,584 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:36:04,566 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:36:04,566 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:36:05,068 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:36:05,068 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:36:05,084 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:36:05,085 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 15:36:05,099 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123fb6a50>
2024-12-29 15:36:05,099 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x122c56720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 15:36:05,112 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123fa5bd0>
2024-12-29 15:36:05,113 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:36:05,113 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:36:05,113 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:36:05,114 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:36:05,114 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:36:05,770 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:06:05 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'346'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29938'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'124ms'), (b'x-request-id', b'req_857356f89d4f2e0ef81f0820bd3efac9'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=Q8myF4kNyBllShUjWGZwdcsB5ybiW_AeBHzY_zCYDR8-1735466765-1.0.1.1-njTEADY.ISHplv8piypkbQbR1MPW_rPa4X_MCcPdHcNlBS_wxBbO_SnbaE4LMrcaNFrcnvehlB1WimIbT4QDBQ; path=/; expires=Sun, 29-Dec-24 10:36:05 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=._DjE9ZMEh0su52oO299tuPMmp5fQLOGlGRTrQCw0pI-1735466765795-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f9b22b2154a2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:36:05,771 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:36:05,771 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:36:05,771 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:36:06,253 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It seems like your message might have been cut off.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:36:06,256 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:36:06,256 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:36:06,256 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:36:06,256 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:36:06,256 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:36:06,289 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:36:06,289 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:36:06,290 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:36:07,020 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:36:07,020 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:36:07,021 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:36:07,021 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:36:07,637 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:06:07 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'560'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-trljb'), (b'x-envoy-upstream-service-time', b'536'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_100283d14da3b97f06fd722d1b11ea90'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f9b94a0f91b5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:36:07,638 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:36:07,638 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:36:07,638 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:36:08,780 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:36:08,780 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:36:09,111 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:36:09,111 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:36:09,115 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:36:09,116 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:36:09,117 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:36:09,117 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:36:09,118 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:36:09,118 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:36:09,136 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:36:09,136 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:36:09,137 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:36:09,697 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:06:09 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'279'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29930'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'140ms'), (b'x-request-id', b'req_9b002683a78e8395dcb479e5408aff04'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f9cb3a3754a2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:36:09,698 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:36:09,698 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:36:09,699 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:36:10,336 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping with navigation, and more.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:36:10,338 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:36:10,338 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:36:10,338 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:36:10,339 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:36:10,339 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:36:10,468 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:36:10,469 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:36:10,469 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:36:11,287 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:06:11 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'664'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-hs8vm'), (b'x-envoy-upstream-service-time', b'645'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_84fdea4af7d45ca048ef089c0eaf91ad'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f9d2cb1e91b5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:36:11,289 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:36:11,289 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:36:11,290 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:36:11,543 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:36:11,543 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:36:13,127 - voice-business-agent - INFO - User speech committed: So which service provided by you?
2024-12-29 15:36:13,127 - voice-business-agent - INFO - User speech committed: So which service provided by you?
2024-12-29 15:36:13,175 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:36:13,175 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:36:15,315 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:36:15,315 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:36:15,322 - livekit.agents - WARNING - Running <Task finished name='Task-82' coro=<entrypoint.<locals>.handle_user_message() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/ttsagent.py:69> result=None> took too long: 2.19 seconds
2024-12-29 15:36:15,322 - livekit.agents - WARNING - Running <Task finished name='Task-82' coro=<entrypoint.<locals>.handle_user_message() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/ttsagent.py:69> result=None> took too long: 2.19 seconds
2024-12-29 15:36:15,343 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I can assist with providing information, answering questions on a wide range of topics, helping with language translations, generating text based on prompts, offering explanations, and more. If there's something specific you have in mind, feel free to ask!", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:36:15,353 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 15:36:15,358 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:36:15,358 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:36:15,358 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:36:15,363 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'What specific information or assistance do you need today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:36:15,364 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:36:15,364 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:36:15,364 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:36:15,364 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:36:15,364 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:36:15,388 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123fc70d0>
2024-12-29 15:36:15,390 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x122c567b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 15:36:15,407 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123fc4850>
2024-12-29 15:36:15,408 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:36:15,408 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:36:15,408 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:36:15,408 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:36:15,408 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:36:16,687 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:06:16 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'492'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-mg6vw'), (b'x-envoy-upstream-service-time', b'478'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d6065ceb9f7c3e11e9fcf4cb8444d7e8'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f9f24c6991b5-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:36:16,688 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:36:16,688 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:36:16,688 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:36:16,894 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:06:16 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1155'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-gd4lp'), (b'x-envoy-upstream-service-time', b'1141'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_686207a3fc77e8c1f16c62d2cbae8a17'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98f9f27e9b8ae7-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:36:16,895 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:36:16,895 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:36:16,895 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:36:17,496 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:36:17,497 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:36:17,497 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:36:19,344 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:36:19,344 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:36:19,344 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:36:24,899 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:36:24,899 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:36:24,902 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:36:24,902 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:36:24,902 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:36:24,902 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:36:24,903 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:36:24,903 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:36:24,937 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:36:24,937 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:36:24,939 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:36:24,939 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:36:24,939 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:36:24,939 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:38:52,521 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:38:52,521 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:38:52,894 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:38:52,894 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:38:52,897 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:38:52,898 - httpcore.connection - DEBUG - close.started
2024-12-29 15:38:52,899 - httpcore.connection - DEBUG - close.complete
2024-12-29 15:38:52,899 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 15:38:52,921 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123f937d0>
2024-12-29 15:38:52,921 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x122c56720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 15:38:52,939 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123f79410>
2024-12-29 15:38:52,939 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:38:52,940 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:38:52,940 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:38:52,940 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:38:52,941 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:38:53,597 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:08:53 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'326'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29881'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'238ms'), (b'x-request-id', b'req_4604924366d523a95bd50808d5be58be'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98fdcb1cbe54a8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:38:53,598 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:38:53,598 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:38:53,598 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:38:54,124 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Hello! I'm just a program, so I don't have feelings, but I'm here to help you!", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:38:54,125 - httpcore.connection - DEBUG - close.started
2024-12-29 15:38:54,126 - httpcore.connection - DEBUG - close.complete
2024-12-29 15:38:54,126 - httpcore.connection - DEBUG - close.started
2024-12-29 15:38:54,126 - httpcore.connection - DEBUG - close.complete
2024-12-29 15:38:54,126 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 15:38:54,180 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123fb5790>
2024-12-29 15:38:54,180 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x122c567b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 15:38:54,193 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123fa6f90>
2024-12-29 15:38:54,194 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:38:54,194 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:38:54,194 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:38:54,194 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:38:54,194 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:38:54,221 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:38:54,222 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:38:54,222 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:38:55,306 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:08:55 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'792'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-s5cfk'), (b'x-envoy-upstream-service-time', b'777'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_9f5adf6b9c1a59b1005a744589bfba74'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98fdd2ef9c548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:38:55,307 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:38:55,307 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:38:55,307 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:38:55,561 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:38:55,561 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:38:56,287 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:38:56,288 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:38:56,288 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:38:56,290 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'How can I assist you today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:38:56,291 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:38:56,292 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:38:56,292 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:38:56,292 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:38:56,293 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:38:57,118 - voice-business-agent - INFO - User speech committed: Hello. How are you?
2024-12-29 15:38:57,118 - voice-business-agent - INFO - User speech committed: Hello. How are you?
2024-12-29 15:38:57,182 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:38:57,182 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:38:58,994 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:38:58,994 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:38:59,006 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:08:57 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1092'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-6lnzh'), (b'x-envoy-upstream-service-time', b'1076'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_74eaf800096a21994295585e0c59c0b5'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98fde00894548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:38:59,007 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:38:59,007 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:38:59,007 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:38:59,010 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:38:59,013 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:38:59,013 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:38:59,014 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 15:38:59,014 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:38:59,029 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11588a150>
2024-12-29 15:38:59,030 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x122c567b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 15:38:59,043 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11540b950>
2024-12-29 15:38:59,043 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:38:59,043 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:38:59,043 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:38:59,044 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:38:59,044 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:39:00,513 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:09:00 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'681'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-wk64s'), (b'x-envoy-upstream-service-time', b'666'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d4b237e4fe55d974b7789f38da398b27'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98fdf13c8254d1-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:39:00,513 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:39:00,513 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:39:00,513 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:39:02,399 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:39:02,400 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:39:02,400 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:39:02,638 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:39:02,638 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:39:02,638 - voice-business-agent - INFO - Agent speech committed:  Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?
2024-12-29 15:39:02,639 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:39:02,638 - voice-business-agent - INFO - Agent speech committed:  Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?
2024-12-29 15:39:02,639 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:39:02,639 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:39:02,639 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:39:09,016 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:39:09,017 - voice-business-agent - INFO - Agent speech committed:  Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?
2024-12-29 15:39:09,016 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:39:09,017 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:39:09,017 - voice-business-agent - INFO - Agent speech committed:  Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?
2024-12-29 15:39:09,017 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:39:12,330 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:39:12,330 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:39:12,709 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:39:12,709 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:39:12,724 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:39:12,726 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:39:12,727 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:39:12,727 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:39:12,727 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:39:12,727 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:39:13,588 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:09:13 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'358'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29820'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'360ms'), (b'x-request-id', b'req_c9e9d609da71d9bca079b0bbfe0a2d8d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98fe46b8a254a8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:39:13,589 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:39:13,589 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:39:13,589 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:39:13,945 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It sounds like you might be setting up a scenario or a joke.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:39:13,946 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:39:13,946 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:39:13,946 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:39:13,946 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:39:13,946 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:39:14,271 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:39:14,272 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:39:14,273 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:39:18,595 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:09:18 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'741'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-b2bzb'), (b'x-envoy-upstream-service-time', b'556'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b478c7b1a50faa5336e9d8907a94250a'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98fe4e5fd1548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:39:18,596 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:39:18,596 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:39:18,596 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:39:19,107 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:39:19,107 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:39:21,983 - voice-business-agent - INFO - User speech committed: You are in a tent.
2024-12-29 15:39:21,983 - voice-business-agent - INFO - User speech committed: You are in a tent.
2024-12-29 15:39:22,025 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:39:22,025 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:39:24,829 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:39:24,829 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:39:24,833 - livekit.agents - WARNING - Running <Task finished name='Task-175' coro=<entrypoint.<locals>.handle_user_message() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/ttsagent.py:69> result=None> took too long: 2.85 seconds
2024-12-29 15:39:24,833 - livekit.agents - WARNING - Running <Task finished name='Task-175' coro=<entrypoint.<locals>.handle_user_message() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/ttsagent.py:69> result=None> took too long: 2.85 seconds
2024-12-29 15:39:24,840 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:39:24,853 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:39:24,853 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:39:24,853 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:39:24,853 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:39:24,854 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:39:24,854 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:39:24,855 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:39:24,855 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:39:24,859 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide more details or let me know how I can assist you with your tent scenario?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:39:24,860 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:39:24,860 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:39:24,860 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:39:24,861 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:39:24,861 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:39:25,815 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:09:25 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'644'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-f9zgh'), (b'x-envoy-upstream-service-time', b'629'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_87d957cd353cf9027fc3a335e9ad5218'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98fe929f4f548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:39:25,816 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:39:25,816 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:39:25,818 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:39:25,906 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:09:25 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'666'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-lnr85'), (b'x-envoy-upstream-service-time', b'654'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_288ae90baef9bd4a0206d9cbf7e2b6b7'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98fe929c7c54d1-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:39:25,906 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:39:25,906 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:39:25,906 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:39:27,037 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:39:27,037 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:39:27,038 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:39:32,296 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:39:32,296 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:39:32,296 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:39:32,734 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:39:32,735 - voice-business-agent - INFO - Agent speech committed:  It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?
2024-12-29 15:39:32,734 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:39:32,735 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:39:32,735 - voice-business-agent - INFO - Agent speech committed:  It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?
2024-12-29 15:39:32,735 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:39:32,736 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:39:32,736 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:39:48,755 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:39:48,755 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:39:48,757 - voice-business-agent - INFO - Agent speech committed:  That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!
2024-12-29 15:39:48,758 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:39:48,757 - voice-business-agent - INFO - Agent speech committed:  That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!
2024-12-29 15:39:48,758 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:39:58,586 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:39:58,586 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:39:58,964 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:39:58,964 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:39:58,972 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:39:58,974 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:39:58,974 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:39:58,974 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:39:58,975 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:39:58,975 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:39:59,600 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:09:59 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'317'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29702'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'596ms'), (b'x-request-id', b'req_ec600025ccf55d050f72d391bff46475'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ff67cffa54a8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:39:59,600 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:39:59,601 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:39:59,601 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:39:59,907 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I can assist with a wide range of inquiries including:  1.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:39:59,908 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:39:59,908 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:39:59,908 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:39:59,909 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:39:59,909 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:40:01,376 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:40:01,376 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:40:01,376 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:40:02,146 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:10:02 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1904'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-cnzkr'), (b'x-envoy-upstream-service-time', b'1854'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f00e80b4f323d78497b1ac20e0b0613d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ff6d9e90548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:40:02,148 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:40:02,148 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:40:02,149 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:40:02,396 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:40:02,396 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:40:03,996 - voice-business-agent - INFO - User speech committed: What type of service provided by you?
2024-12-29 15:40:03,996 - voice-business-agent - INFO - User speech committed: What type of service provided by you?
2024-12-29 15:40:04,037 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:40:04,037 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:40:05,656 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:40:05,656 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:40:05,666 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I can help with a wide variety of tasks, including:\n\n1. Answering questions on a wide range of topics.\n2. Providing explanations and summaries for complex information.\n3. Assisting with writing, editing, and generating text.\n4. Offering language translation and support.\n5. Providing suggestions and recommendations based on specific needs or interests.\n\nIf you have a specific task or question in mind, feel free to let me know!', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:40:05,669 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:40:05,669 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:40:05,670 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:40:05,671 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:40:05,671 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:40:05,671 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:40:05,672 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:40:05,672 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:40:05,673 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Answering general knowledge questions.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:40:05,674 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:40:05,674 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:40:05,674 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:40:05,675 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:40:05,675 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:40:07,855 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:10:07 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1247'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-xwl68'), (b'x-envoy-upstream-service-time', b'1233'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_dda4b39642a1509fdf1a43925343362d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ff91babc54d1-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:40:07,855 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:40:07,856 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:40:07,856 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:40:09,085 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:10:09 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'848'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-zz96w'), (b'x-envoy-upstream-service-time', b'744'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_4d93633964414d9622d92c6d87f4eb36'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ff91be40548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:40:09,085 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:40:09,085 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:40:09,085 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:40:10,223 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:40:10,223 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:40:10,223 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:40:10,225 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': '2. Providing weather forecasts.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:40:10,226 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:40:10,227 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:40:10,227 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:40:10,227 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:40:10,228 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:40:11,345 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:10:11 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'786'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-d6qcw'), (b'x-envoy-upstream-service-time', b'771'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_233f879568be4ed3e8ebb7f5ff717c44'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ffae1e04548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:40:11,347 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:40:11,348 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:40:11,349 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:40:12,221 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:40:12,222 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:40:12,223 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:40:12,225 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': '3. Offering cooking tips and recipes.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:40:12,226 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:40:12,227 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:40:12,227 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:40:12,228 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:40:12,228 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:40:12,851 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:40:12,852 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:40:12,852 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:40:13,197 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:10:13 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'634'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-9x6dz'), (b'x-envoy-upstream-service-time', b'610'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_09e07ec6efea073acc5055d68353aace'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ffba9fb3548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:40:13,197 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:40:13,197 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:40:13,197 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:40:14,075 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:40:14,076 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:40:14,076 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:40:14,077 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': '4. Giving directions and local business information.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:40:14,077 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:40:14,078 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:40:14,078 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:40:14,078 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:40:14,078 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:40:14,900 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:10:14 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'525'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-x6sqt'), (b'x-envoy-upstream-service-time', b'484'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c98fccd7c119bef131163856ad487ff7'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ffc62fed548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:40:14,900 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:40:14,900 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:40:14,901 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:40:15,894 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:40:15,895 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:40:15,895 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:40:15,896 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': '5. Assisting with scheduling and reminders.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:40:15,898 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:40:15,898 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:40:15,898 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:40:15,898 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:40:15,898 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:40:16,984 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:10:17 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'757'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-txdnl'), (b'x-envoy-upstream-service-time', b'743'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_e25f507c19925a656050af380da87ba3'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ffd19e9b548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:40:16,987 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:40:16,988 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:40:16,988 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:40:17,873 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:40:17,874 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:40:17,874 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:40:17,876 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': '6. Providing summaries of news articles and events.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:40:17,877 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:40:17,877 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:40:17,877 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:40:17,878 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:40:17,878 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:40:18,856 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:10:18 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'599'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-xsqcp'), (b'x-envoy-upstream-service-time', b'590'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f666b71dea453b4eb2fe00155c8cf012'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ffddefb9548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:40:18,859 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:40:18,860 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:40:18,860 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:40:19,706 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:40:19,707 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:40:19,708 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:40:19,709 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': '7. Translating languages.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:40:19,711 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:40:19,711 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:40:19,711 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:40:19,712 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:40:19,712 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:40:20,657 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:10:20 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'661'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-zn7kk'), (b'x-envoy-upstream-service-time', b'644'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_2ed00112877d0e7925a8c4c3cc0ac3da'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98ffe96f0d548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:40:20,661 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:40:20,662 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:40:20,662 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:40:21,390 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:40:21,392 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:40:21,394 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:40:21,395 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': '8. Offering math and science help.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:40:21,396 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:40:21,396 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:40:21,396 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:40:21,397 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:40:21,397 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:40:22,508 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:10:22 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'792'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-wrp9x'), (b'x-envoy-upstream-service-time', b'770'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_834706684d4b074b4b728b5d1d41e16d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f98fff3ecfa548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:40:22,510 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:40:22,513 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:40:22,513 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:40:23,348 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:40:23,349 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:40:23,350 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:40:23,351 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': '9. Recommending movies, books, and music.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:40:23,352 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:40:23,353 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:40:23,353 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:40:23,354 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:40:23,354 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:40:25,559 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:10:25 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1910'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-5hc9b'), (b'x-envoy-upstream-service-time', b'1876'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_6a7716ff05bc56a018c1cc691c940422'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9900002cd6548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:40:25,560 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:40:25,560 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:40:25,560 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:40:26,575 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:40:26,575 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:40:26,575 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:40:26,577 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Feel free to ask about these services or any other information you might need help with!', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:40:26,578 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:40:26,578 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:40:26,578 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:40:26,578 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:40:26,578 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:40:28,714 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:10:28 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1816'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-krnps'), (b'x-envoy-upstream-service-time', b'1798'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_3d26fd0339fcfcd205aed637133d363b'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f990014593c548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:40:28,715 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:40:28,715 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:40:28,716 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:40:30,458 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:40:30,461 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:40:30,462 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:40:36,662 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:40:36,662 - voice-business-agent - INFO - Agent speech committed:  I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!
2024-12-29 15:40:36,662 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:40:36,663 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:40:36,662 - voice-business-agent - INFO - Agent speech committed:  I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!
2024-12-29 15:40:36,663 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:40:36,663 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:40:36,663 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:41:03,620 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:41:03,620 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:41:03,622 - voice-business-agent - INFO - Agent speech committed:  I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!
2024-12-29 15:41:03,622 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:41:03,622 - voice-business-agent - INFO - Agent speech committed:  I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!
2024-12-29 15:41:03,622 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:41:08,677 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:41:08,677 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:41:08,709 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:41:08,709 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:41:08,718 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:41:08,720 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:41:08,721 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:41:08,721 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:41:08,721 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:41:08,721 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:41:09,436 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:11:09 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'391'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29459'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'1.082s'), (b'x-request-id', b'req_5166da3584e6356762b2b3c2a8a106ca'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f99011bb8ff54a8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:41:09,438 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:41:09,438 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:41:09,439 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:41:09,842 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I don't have a personal name, but you can call me Assistant.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:41:09,844 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:41:09,844 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:41:09,844 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:41:09,845 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:41:09,845 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:41:10,806 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:11:10 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'609'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-2zssc'), (b'x-envoy-upstream-service-time', b'587'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_b47f6c55379cb8dd7f8ca1e226ef34cd'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f990122bfd5548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:41:10,809 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:41:10,809 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:41:10,810 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:41:11,062 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:41:11,063 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:41:11,064 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:41:11,088 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:41:11,088 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:41:11,633 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:41:11,634 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:41:11,634 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:41:11,636 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'How can I assist you further today?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:41:11,637 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:41:11,638 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:41:11,638 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:41:11,638 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:41:11,639 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:41:12,746 - voice-business-agent - INFO - User speech committed: Okay. What is your name?
2024-12-29 15:41:12,746 - voice-business-agent - INFO - User speech committed: Okay. What is your name?
2024-12-29 15:41:12,789 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:41:12,789 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:41:14,171 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:41:14,171 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:41:14,182 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:11:13 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1089'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-2vv89'), (b'x-envoy-upstream-service-time', b'1076'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_2e7958e2437e894b2d7feb425dd1ee03'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f99012def8c548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:41:14,183 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:41:14,183 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:41:14,183 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:41:14,185 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:41:14,186 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:41:14,186 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:41:14,187 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:41:14,187 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:41:14,188 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:41:14,188 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:41:14,189 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:41:14,189 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:41:15,108 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:11:15 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'594'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-xchrs'), (b'x-envoy-upstream-service-time', b'567'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_e377b867148178ccaa073753df43f3b6'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f99013debaa54d1-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:41:15,109 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:41:15,109 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:41:15,109 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:41:16,687 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:41:16,687 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:41:16,687 - voice-business-agent - INFO - Agent speech committed:  I don't have a personal name, but you can call me Assistant. How can I assist you further today?
2024-12-29 15:41:16,688 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:41:16,687 - voice-business-agent - INFO - Agent speech committed:  I don't have a personal name, but you can call me Assistant. How can I assist you further today?
2024-12-29 15:41:16,688 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:41:16,688 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:41:16,688 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:41:16,693 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:41:16,693 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:41:16,693 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:41:24,677 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:41:24,677 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:41:24,678 - voice-business-agent - INFO - Agent speech committed:  I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!
2024-12-29 15:41:24,678 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:41:24,678 - voice-business-agent - INFO - Agent speech committed:  I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!
2024-12-29 15:41:24,678 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:42:48,732 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:42:48,732 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:42:49,111 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:42:49,111 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:42:49,119 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}, {'role': 'assistant', 'content': " I don't have a personal name, but you can call me Assistant. How can I assist you further today?"}, {'role': 'assistant', 'content': " I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!"}, {'role': 'user', 'content': 'Oh, what is weather in Delhi?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:42:49,120 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:42:49,120 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:42:49,120 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:42:49,120 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:42:49,120 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:42:49,716 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:12:49 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'276'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29392'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'1.216s'), (b'x-request-id', b'req_b39abc4f6ba66fa5276ab10417004ce3'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f99038f3e7554a8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:42:49,716 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:42:49,717 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:42:49,717 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:42:50,293 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:42:50,295 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:42:50,296 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:42:50,296 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:42:50,296 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:42:50,297 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:42:51,460 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:12:51 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'808'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-2zssc'), (b'x-envoy-upstream-service-time', b'798'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f3f5262d85550dbb8f0324995b1fbedc'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f99039689fe548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:42:51,462 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:42:51,462 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:42:51,463 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:42:51,734 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:42:51,734 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:42:51,766 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:42:51,766 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:42:51,767 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:42:52,556 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:42:52,557 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:42:52,557 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:42:52,559 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:42:52,560 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:42:52,561 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:42:52,561 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:42:52,561 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:42:52,561 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:42:53,342 - voice-business-agent - INFO - User speech committed: Oh, what is weather in Delhi?
2024-12-29 15:42:53,342 - voice-business-agent - INFO - User speech committed: Oh, what is weather in Delhi?
2024-12-29 15:42:53,374 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:42:53,374 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:42:55,665 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:42:55,665 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:42:55,671 - livekit.agents - WARNING - Running <Task finished name='Task-314' coro=<entrypoint.<locals>.handle_user_message() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/ttsagent.py:69> result=None> took too long: 2.33 seconds
2024-12-29 15:42:55,671 - livekit.agents - WARNING - Running <Task finished name='Task-314' coro=<entrypoint.<locals>.handle_user_message() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/ttsagent.py:69> result=None> took too long: 2.33 seconds
2024-12-29 15:42:55,676 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:12:54 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1167'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-b8bdd86cf-4xlqn'), (b'x-envoy-upstream-service-time', b'1094'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_cbce04e5af3b45cf213690f2db153a8f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9903a4bd9c548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:42:55,677 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:42:55,677 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:42:55,677 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:42:55,679 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:42:55,686 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:42:55,688 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:42:55,688 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:42:55,689 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:42:55,689 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:42:56,929 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:12:56 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'914'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-9bmwj'), (b'x-envoy-upstream-service-time', b'896'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_4f6f081c69ec759a8d552bb059d2213b'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9903b84a2254d1-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:42:56,930 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:42:56,930 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:42:56,931 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:42:57,255 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:42:57,256 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:42:57,257 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:42:57,258 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'These sources provide current conditions, forecasts, and other weather-related information.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:42:57,259 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:42:57,259 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:42:57,259 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:42:57,260 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:42:57,260 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:42:58,824 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:12:58 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1279'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-sb74z'), (b'x-envoy-upstream-service-time', b'1262'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d96a97e1c299fff57b0e9bca114d781d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9903c21809548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:42:58,824 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:42:58,825 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:42:58,825 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:43:00,050 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:43:00,051 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:43:00,051 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:43:02,435 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:43:02,435 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:43:02,435 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:43:18,181 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:43:18,182 - voice-business-agent - INFO - Agent speech committed:  I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information.
2024-12-29 15:43:18,182 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:43:18,181 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:43:18,182 - voice-business-agent - INFO - Agent speech committed:  I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information.
2024-12-29 15:43:18,182 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:43:18,182 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:43:18,182 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:43:37,325 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:43:37,325 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:43:37,326 - voice-business-agent - INFO - Agent speech committed:  I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!
2024-12-29 15:43:37,327 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:43:37,326 - voice-business-agent - INFO - Agent speech committed:  I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!
2024-12-29 15:43:37,327 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:43:43,535 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:43:43,535 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:43:43,830 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:43:43,830 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:43:43,841 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}, {'role': 'assistant', 'content': " I don't have a personal name, but you can call me Assistant. How can I assist you further today?"}, {'role': 'assistant', 'content': " I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!"}, {'role': 'user', 'content': 'Oh, what is weather in Delhi?'}, {'role': 'assistant', 'content': " I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information."}, {'role': 'assistant', 'content': " I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!"}, {'role': 'user', 'content': 'What is the capital of India?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:43:43,842 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:43:43,842 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:43:43,842 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:43:43,842 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:43:43,842 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:43:44,904 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:13:44 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'381'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29198'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'1.604s'), (b'x-request-id', b'req_95524abfda7f691da2be6b1b65007b6e'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9904e53b7e54a8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:43:44,905 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:43:44,905 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:43:44,905 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:43:44,908 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:43:44,908 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:43:44,908 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:43:44,911 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'The capital of India is New Delhi.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:43:44,912 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:43:44,913 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:43:44,913 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:43:44,914 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:43:44,914 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:43:46,517 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:13:46 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1305'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-8wfvr'), (b'x-envoy-upstream-service-time', b'1293'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_602a7d19d9b4fd933510b7f0e1c2c799'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9904ebe9bf548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:43:46,518 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:43:46,518 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:43:46,519 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:43:46,791 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:43:46,791 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:43:47,256 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:43:47,257 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:43:47,257 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:43:48,464 - voice-business-agent - INFO - User speech committed: What is the capital of India?
2024-12-29 15:43:48,464 - voice-business-agent - INFO - User speech committed: What is the capital of India?
2024-12-29 15:43:48,511 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:43:48,511 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:43:50,076 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 47
2024-12-29 15:43:50,076 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 47
2024-12-29 15:43:50,084 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'The capital of India is New Delhi.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:43:50,087 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:43:50,088 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:43:50,088 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:43:50,089 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:43:50,089 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:43:50,092 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:43:50,092 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:43:50,092 - voice-business-agent - INFO - Agent speech committed:  The capital of India is New Delhi.
2024-12-29 15:43:50,092 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:43:50,092 - voice-business-agent - INFO - Agent speech committed:  The capital of India is New Delhi.
2024-12-29 15:43:50,092 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:43:51,197 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:13:51 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'812'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-9pkfb'), (b'x-envoy-upstream-service-time', b'798'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_82e2312f91181bc3cc104228313c1dea'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f99050c4d84548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:43:51,198 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:43:51,198 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:43:51,199 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:43:51,443 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:43:51,443 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:43:51,952 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:43:51,952 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:43:51,953 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:43:53,546 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:43:53,546 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:43:53,546 - voice-business-agent - INFO - Agent speech committed:  The capital of India is New Delhi.
2024-12-29 15:43:53,546 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:43:53,546 - voice-business-agent - INFO - Agent speech committed:  The capital of India is New Delhi.
2024-12-29 15:43:53,546 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:43:56,018 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:43:56,018 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:43:56,395 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:43:56,395 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:43:56,413 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}, {'role': 'assistant', 'content': " I don't have a personal name, but you can call me Assistant. How can I assist you further today?"}, {'role': 'assistant', 'content': " I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!"}, {'role': 'user', 'content': 'Oh, what is weather in Delhi?'}, {'role': 'assistant', 'content': " I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information."}, {'role': 'assistant', 'content': " I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!"}, {'role': 'user', 'content': 'What is the capital of India?'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'user', 'content': 'Okay.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:43:56,415 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:43:56,415 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:43:56,415 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:43:56,416 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:43:56,416 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:43:57,076 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:13:57 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'355'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29176'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'1.648s'), (b'x-request-id', b'req_aff875d43bc4cbd320a40613b738428f'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f990533da8454a8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:43:57,077 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:43:57,078 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:43:57,078 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:43:57,631 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'If you have any more questions or need further assistance, feel free to ask.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:43:57,632 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:43:57,633 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:43:57,633 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:43:57,633 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:43:57,633 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:43:57,666 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:43:57,666 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:43:57,667 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:43:58,526 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:13:58 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'575'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-zz96w'), (b'x-envoy-upstream-service-time', b'549'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_342dabfcdadcd6947aa7def7d275789d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f99053b6a71548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:43:58,526 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:43:58,526 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:43:58,526 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:43:58,807 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:43:58,807 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:43:59,617 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:43:59,617 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:43:59,617 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:43:59,618 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm here to help!", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:43:59,619 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:43:59,619 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:43:59,619 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:43:59,620 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:43:59,620 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:44:00,428 - voice-business-agent - INFO - User speech committed: Okay.
2024-12-29 15:44:00,428 - voice-business-agent - INFO - User speech committed: Okay.
2024-12-29 15:44:00,461 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:44:00,461 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:44:01,540 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:44:01,540 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:44:01,551 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:14:01 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1229'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-85fffc8577-59pcc'), (b'x-envoy-upstream-service-time', b'1193'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_135e554328db295f4842cf9945277f9d'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f990547db24548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:44:01,551 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:44:01,551 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:44:01,551 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:44:01,553 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'If you have any more questions or need further assistance, feel free to ask!', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:44:01,556 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:44:01,557 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:44:01,557 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:44:01,558 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:44:01,558 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:44:01,733 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:44:01,733 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:44:01,733 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:44:04,078 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:44:04,078 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:44:04,079 - voice-business-agent - INFO - Agent speech committed:  If you have any more questions or need further assistance, feel free to ask. I'm here to help!
2024-12-29 15:44:04,079 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:44:04,079 - voice-business-agent - INFO - Agent speech committed:  If you have any more questions or need further assistance, feel free to ask. I'm here to help!
2024-12-29 15:44:04,079 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:44:17,157 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:44:17,157 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:44:17,159 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 15:44:17,159 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:44:17,159 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:44:17,159 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:44:17,159 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:44:26,226 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:44:26,226 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:44:26,604 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:44:26,604 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:44:26,614 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}, {'role': 'assistant', 'content': " I don't have a personal name, but you can call me Assistant. How can I assist you further today?"}, {'role': 'assistant', 'content': " I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!"}, {'role': 'user', 'content': 'Oh, what is weather in Delhi?'}, {'role': 'assistant', 'content': " I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information."}, {'role': 'assistant', 'content': " I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!"}, {'role': 'user', 'content': 'What is the capital of India?'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'user', 'content': 'Okay.'}, {'role': 'assistant', 'content': " If you have any more questions or need further assistance, feel free to ask. I'm here to help!"}, {'role': 'user', 'content': 'Model GPT4 turbo.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:44:26,615 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:44:26,616 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:44:26,616 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:44:26,617 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:44:26,617 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:44:27,260 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:14:27 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'327'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29146'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'1.708s'), (b'x-request-id', b'req_461d46352863b17bc0d5c0aaa6c67736'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9905f09e9254a8-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:44:27,261 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:44:27,261 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:44:27,261 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:44:27,731 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'As of my last update, OpenAI had released GPT-4, a more advanced version of its language models.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:44:27,732 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:44:27,732 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:44:27,732 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:44:27,733 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:44:27,733 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:44:27,905 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:44:27,905 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:44:27,908 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 15:44:27,908 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:44:27,908 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:44:27,908 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:44:27,908 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:44:28,732 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:44:28,732 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:44:28,815 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:14:28 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'792'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-sn46x'), (b'x-envoy-upstream-service-time', b'774'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_03af72789c46371e60fee581a591bfb9'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9905f78c32548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:44:28,815 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:44:28,815 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:44:28,815 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:44:29,075 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:44:29,075 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:44:29,085 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}, {'role': 'assistant', 'content': " I don't have a personal name, but you can call me Assistant. How can I assist you further today?"}, {'role': 'assistant', 'content': " I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!"}, {'role': 'user', 'content': 'Oh, what is weather in Delhi?'}, {'role': 'assistant', 'content': " I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information."}, {'role': 'assistant', 'content': " I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!"}, {'role': 'user', 'content': 'What is the capital of India?'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'user', 'content': 'Okay.'}, {'role': 'assistant', 'content': " If you have any more questions or need further assistance, feel free to ask. I'm here to help!"}, {'role': 'user', 'content': 'Model GPT4 turbo. TTS'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:44:29,086 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 15:44:29,105 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1279012d0>
2024-12-29 15:44:29,106 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x122c56720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 15:44:29,120 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x127903150>
2024-12-29 15:44:29,120 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:44:29,121 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:44:29,121 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:44:29,121 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:44:29,121 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:44:29,910 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:14:29 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'447'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29145'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'1.71s'), (b'x-request-id', b'req_eae7c1e66e0bd3cf33ef9b8399e074af'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9906003b1b54a2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:44:29,912 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:44:29,912 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:44:29,913 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:44:30,329 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'As of my last update, GPT-4 is a powerful language model developed by OpenAI.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:44:30,330 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 15:44:30,342 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123fc5510>
2024-12-29 15:44:30,342 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x122c567b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 15:44:30,358 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x123fc5710>
2024-12-29 15:44:30,358 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:44:30,359 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:44:30,359 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:44:30,359 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:44:30,359 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:44:30,586 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:44:30,586 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:44:30,586 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:44:31,234 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:14:31 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'562'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-x7gdm'), (b'x-envoy-upstream-service-time', b'547'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c6cb85ce1724e327be0f43501aad51b9'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f990607f82c91ce-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:44:31,235 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:44:31,235 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:44:31,235 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:44:31,485 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:44:31,485 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:44:32,185 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:44:32,185 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:44:32,185 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:44:32,529 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:44:32,529 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:44:32,530 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:44:32,531 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:44:32,530 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:44:32,531 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:44:32,543 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}, {'role': 'assistant', 'content': " I don't have a personal name, but you can call me Assistant. How can I assist you further today?"}, {'role': 'assistant', 'content': " I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!"}, {'role': 'user', 'content': 'Oh, what is weather in Delhi?'}, {'role': 'assistant', 'content': " I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information."}, {'role': 'assistant', 'content': " I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!"}, {'role': 'user', 'content': 'What is the capital of India?'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'user', 'content': 'Okay.'}, {'role': 'assistant', 'content': " If you have any more questions or need further assistance, feel free to ask. I'm here to help!"}, {'role': 'user', 'content': 'Model GPT4 turbo. TTS I'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:44:32,545 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:44:32,547 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:44:32,548 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:44:32,548 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:44:32,549 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:44:32,549 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:44:32,549 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:44:32,686 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:44:32,686 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:44:32,686 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:44:33,338 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:14:33 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'465'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29145'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'1.71s'), (b'x-request-id', b'req_458bed84099c7f611c41832a7f54c279'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f990615add354a2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:44:33,338 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:44:33,338 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:44:33,338 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:44:33,566 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "It seems like you're referring to a model from OpenAI.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:44:33,567 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:44:33,567 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:44:33,568 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:44:33,568 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:44:33,568 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:44:34,682 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:14:34 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'803'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6689858b9b-fstk7'), (b'x-envoy-upstream-service-time', b'790'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_dfe1309a3046e1b66ee0cac9d650d446'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f99061c0fc6548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:44:34,682 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:44:34,682 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:44:34,683 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:44:34,936 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:44:34,936 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:44:35,638 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:44:35,638 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:44:35,639 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:44:35,903 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:44:35,903 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:44:35,903 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:44:35,904 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'GPT-4 is one of the versions of the Generative Pre-trained Transformer models developed by OpenAI.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:44:35,905 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:44:35,905 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:44:35,905 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:44:35,906 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:44:35,906 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:44:36,558 - voice-business-agent - INFO - User speech committed: Model GPT4 turbo. TTS I
2024-12-29 15:44:36,558 - voice-business-agent - INFO - User speech committed: Model GPT4 turbo. TTS I
2024-12-29 15:44:36,590 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:44:36,590 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:44:39,077 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:44:39,077 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:44:39,079 - livekit.agents - WARNING - Running <Task finished name='Task-474' coro=<entrypoint.<locals>.handle_user_message() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/ttsagent.py:69> result=None> took too long: 2.52 seconds
2024-12-29 15:44:39,079 - livekit.agents - WARNING - Running <Task finished name='Task-474' coro=<entrypoint.<locals>.handle_user_message() done, defined at /Users/ravindra/Downloads/voice-pipeline-agent-python 2/voice-pipeline-agent-python/ttsagent.py:69> result=None> took too long: 2.52 seconds
2024-12-29 15:44:39,082 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:14:37 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1065'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d46678889-bcs88'), (b'x-envoy-upstream-service-time', b'1049'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a8c01d85b09ece4434dbdf53344a4985'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f99062a9ac9548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:44:39,082 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:44:39,082 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:44:39,082 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:44:39,084 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "It seems like you're referencing GPT-4 Turbo and text-to-speech (TTS) functionality. GPT-4 Turbo is a variant of the GPT-4 language model, designed to be faster and more cost-efficient. Currently, I'm just a text-based assistant and don't have built-in TTS capabilities. If you need text-to-speech, there are various services and software available that can convert text into spoken language, like those offered by Google, Microsoft, or other specialized tools. If you have more questions about these technologies or need help finding resources, let me know!", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:44:39,087 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:44:39,088 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:44:39,088 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:44:39,089 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:44:39,089 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:44:39,101 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:44:39,101 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:44:39,102 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:44:39,102 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'These models are designed for a variety of tasks like text generation, translation, summarization, and more, using advanced deep learning techniques.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:44:39,103 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:44:39,104 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:44:39,104 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:44:39,104 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:44:39,104 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:44:40,016 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:14:40 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'606'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-8mpkt'), (b'x-envoy-upstream-service-time', b'593'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f441f3a100af13be3e054cd6abcca5fd'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f99063e9d66548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:44:40,016 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:44:40,016 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:44:40,016 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:44:40,565 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:14:40 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1171'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-sjc95'), (b'x-envoy-upstream-service-time', b'1150'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f4967d5495ad1817b4da6e07a626f806'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f99063e898d91ce-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:44:40,566 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:44:40,567 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:44:40,567 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:44:41,852 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:44:41,853 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:44:41,853 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:44:41,855 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'As of my last update, there isn\'t a specific model publicly known as "GPT-4 Turbo," so it might be helpful to check the latest from OpenAI\'s official communications for any new releases or updates.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:44:41,855 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:44:41,856 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:44:41,856 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:44:41,856 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:44:41,856 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:44:43,099 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:14:43 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'915'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-sh8ww'), (b'x-envoy-upstream-service-time', b'895'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_8710e5653f3bb9eb2e2d7fcb44d90276'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f99064fce56548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:44:43,099 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:44:43,099 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:44:43,099 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:44:44,324 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:44:44,324 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:44:44,327 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:44:44,327 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:44:44,327 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:44:44,327 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:44:44,328 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:44:44,328 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:44:44,328 - livekit.agents.pipeline - ERROR - Error in _capture_task
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/agent_playout.py", line 148, in _capture_task
    await self._audio_source.capture_frame(frame)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/audio_source.py", line 152, in capture_frame
    raise Exception(cb.capture_audio_frame.error)
Exception: an RtcError occured: InvalidState - failed to capture frame
2024-12-29 15:44:44,328 - livekit.agents.pipeline - ERROR - Error in _capture_task
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/agent_playout.py", line 148, in _capture_task
    await self._audio_source.capture_frame(frame)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/audio_source.py", line 152, in capture_frame
    raise Exception(cb.capture_audio_frame.error)
Exception: an RtcError occured: InvalidState - failed to capture frame
2024-12-29 15:44:44,334 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:44:44,334 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:44:44,334 - voice-business-agent - INFO - Agent speech committed:  It seems like you're referencing GPT-4 Turbo and text-to-speech (TTS) functionality. GPT-4 Turbo is a variant of the GPT-4 language model, designed to be faster and more cost-efficient. Currently, I'm just a text-based assistant and don't have built-in TTS capabilities. If you need text-to-speech, there are various services and software available that can convert text into spoken language, like those offered by Google, Microsoft, or other specialized tools. If you have more questions about these technologies or need help finding resources, let me know!
2024-12-29 15:44:44,335 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:44:44,334 - voice-business-agent - INFO - Agent speech committed:  It seems like you're referencing GPT-4 Turbo and text-to-speech (TTS) functionality. GPT-4 Turbo is a variant of the GPT-4 language model, designed to be faster and more cost-efficient. Currently, I'm just a text-based assistant and don't have built-in TTS capabilities. If you need text-to-speech, there are various services and software available that can convert text into spoken language, like those offered by Google, Microsoft, or other specialized tools. If you have more questions about these technologies or need help finding resources, let me know!
2024-12-29 15:44:44,335 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:44:46,085 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:44:46,086 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:44:46,086 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:44:50,997 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:44:50,998 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:44:50,998 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:44:55,565 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:44:55,565 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:44:55,943 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:44:55,943 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:44:55,958 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}, {'role': 'assistant', 'content': " I don't have a personal name, but you can call me Assistant. How can I assist you further today?"}, {'role': 'assistant', 'content': " I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!"}, {'role': 'user', 'content': 'Oh, what is weather in Delhi?'}, {'role': 'assistant', 'content': " I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information."}, {'role': 'assistant', 'content': " I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!"}, {'role': 'user', 'content': 'What is the capital of India?'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'user', 'content': 'Okay.'}, {'role': 'assistant', 'content': " If you have any more questions or need further assistance, feel free to ask. I'm here to help!"}, {'role': 'user', 'content': 'Model GPT4 turbo. TTS I'}, {'role': 'assistant', 'content': " It seems like you're referring to a model from OpenAI. GPT-4 is one of the versions of the Generative..."}, {'role': 'assistant', 'content': " It seems like you're referencing GPT-4 Turbo and text-to-speech (TTS) functionality. GPT-4 Turbo is a variant of the GPT-4 language model, designed to be faster and more cost-efficient. Currently, I'm just a text-based assistant and don't have built-in TTS capabilities. If you need text-to-speech, there are various services and software available that can convert text into spoken language, like those offered by Google, Microsoft, or other specialized tools. If you have more questions about these technologies or need help finding resources, let me know!"}, {'role': 'user', 'content': 'I cannot for the cry.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:44:55,960 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:44:55,960 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:44:55,960 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:44:55,960 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:44:55,960 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:44:57,083 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:14:57 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'795'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'28971'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'2.058s'), (b'x-request-id', b'req_586f2f68e62f862aa874e24348aec049'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9906a7fd1554a2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:44:57,084 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:44:57,084 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:44:57,085 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:44:57,547 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "It sounds like you might be expressing something emotional or facing an issue, but I'm not entirely sure about the context of your statement.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:44:57,548 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:44:57,548 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:44:57,549 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:44:57,549 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:44:57,549 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:44:58,062 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:44:58,062 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:44:58,062 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:44:58,760 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:14:58 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'912'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-tcgjm'), (b'x-envoy-upstream-service-time', b'885'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_842be9adfcc2f0d3846fded8cf5a134c'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9906b1ef6c548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:44:58,761 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:44:58,761 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:44:58,762 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:44:59,011 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:44:59,011 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:45:00,571 - voice-business-agent - INFO - User speech committed: I cannot for the cry.
2024-12-29 15:45:00,571 - voice-business-agent - INFO - User speech committed: I cannot for the cry.
2024-12-29 15:45:00,605 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:45:00,605 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:45:02,363 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:45:02,363 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:45:02,372 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "I'm sorry to hear that you're feeling this way. If you're experiencing intense emotions and feel like crying but can't, it might be helpful to take some deep breaths, find a quiet space, or write down what you're feeling. Sometimes talking to someone you trust or a mental health professional can provide support. If you'd like to share more, I'm here to listen and help if I can.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:45:02,374 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:45:02,374 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:02,375 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:45:02,375 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:45:02,376 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:45:02,376 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:45:02,376 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:45:02,376 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:45:02,379 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Could you please clarify a bit more about what you need help with or what you're referring to?", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:45:02,379 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:45:02,380 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:45:02,380 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:45:02,380 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:45:02,380 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:45:02,565 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:45:02,565 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:45:02,567 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:02,567 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:02,568 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:45:02,568 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:45:02,597 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:45:02,597 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:45:02,598 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 15:45:02,598 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:02,598 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:02,598 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:02,598 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:45:03,324 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:45:03,324 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:45:03,603 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:15:03 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'884'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-tgqrt'), (b'x-envoy-upstream-service-time', b'822'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_47b3ffca6c739ba19f8553bac67bfffe'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9906d01a5a548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:45:03,603 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:45:03,604 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:45:03,604 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:45:03,640 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:45:03,640 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:45:03,652 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}, {'role': 'assistant', 'content': " I don't have a personal name, but you can call me Assistant. How can I assist you further today?"}, {'role': 'assistant', 'content': " I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!"}, {'role': 'user', 'content': 'Oh, what is weather in Delhi?'}, {'role': 'assistant', 'content': " I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information."}, {'role': 'assistant', 'content': " I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!"}, {'role': 'user', 'content': 'What is the capital of India?'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'user', 'content': 'Okay.'}, {'role': 'assistant', 'content': " If you have any more questions or need further assistance, feel free to ask. I'm here to help!"}, {'role': 'user', 'content': 'Model GPT4 turbo. TTS I'}, {'role': 'assistant', 'content': " It seems like you're referring to a model from OpenAI. GPT-4 is one of the versions of the Generative..."}, {'role': 'assistant', 'content': " It seems like you're referencing GPT-4 Turbo and text-to-speech (TTS) functionality. GPT-4 Turbo is a variant of the GPT-4 language model, designed to be faster and more cost-efficient. Currently, I'm just a text-based assistant and don't have built-in TTS capabilities. If you need text-to-speech, there are various services and software available that can convert text into spoken language, like those offered by Google, Microsoft, or other specialized tools. If you have more questions about these technologies or need help finding resources, let me know!"}, {'role': 'user', 'content': 'I cannot for the cry.'}, {'role': 'assistant', 'content': ' It sounds like you might be expressing...'}, {'role': 'user', 'content': 'Please stop.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:45:03,653 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:45:03,654 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:45:03,654 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:45:03,654 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:45:03,654 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:45:04,359 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:15:04 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'381'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'28955'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'2.09s'), (b'x-request-id', b'req_e366e19f13f9c84d34c0c5597eb519e9'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9906d80ea754a2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:45:04,359 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:45:04,360 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:45:04,360 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:45:04,637 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:45:04,637 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:04,637 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:45:04,638 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Understood! If you need help with anything else, just let me know.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:45:04,639 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=10.0 socket_options=None
2024-12-29 15:45:04,657 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x127975410>
2024-12-29 15:45:04,657 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x122c567b0> server_hostname='api.openai.com' timeout=10.0
2024-12-29 15:45:04,668 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12797b8d0>
2024-12-29 15:45:04,668 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:45:04,668 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:45:04,668 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:45:04,668 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:45:04,668 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:45:05,028 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:45:05,029 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:05,029 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:45:06,861 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:15:06 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1829'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-966fb9c65-9tqs6'), (b'x-envoy-upstream-service-time', b'1810'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_c4285e9d855539523f20c5ff38394fb5'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9906de585e91dc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:45:06,862 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:45:06,862 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:45:06,862 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:45:07,147 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:45:07,147 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:45:08,009 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:45:08,009 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:08,009 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:45:08,670 - voice-business-agent - INFO - User speech committed: Please stop.
2024-12-29 15:45:08,670 - voice-business-agent - INFO - User speech committed: Please stop.
2024-12-29 15:45:08,698 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:45:08,698 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:45:09,601 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:45:09,601 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:45:09,609 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I apologize if my response was not helpful. Let me know how I can assist you differently.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:45:09,610 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:45:09,611 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:45:09,611 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:45:09,611 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:45:09,611 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:45:11,138 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:11,138 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:11,138 - voice-business-agent - INFO - Agent speech committed:  Understood! If you need help with anything else, just let me know.
2024-12-29 15:45:11,138 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:45:11,138 - voice-business-agent - INFO - Agent speech committed:  Understood! If you need help with anything else, just let me know.
2024-12-29 15:45:11,138 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:45:11,192 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:15:11 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1244'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6c54968c78-lngfb'), (b'x-envoy-upstream-service-time', b'1231'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_f605aa83d897a2a6c77a62ad9bf18506'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9906fd4a65548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:45:11,192 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:45:11,192 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:45:11,192 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:45:11,487 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:45:11,487 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:45:15,470 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:45:15,471 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:15,471 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:45:19,096 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:19,096 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:19,098 - voice-business-agent - INFO - Agent speech committed:  I apologize if my response was not helpful. Let me know how I can assist you differently.
2024-12-29 15:45:19,098 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:45:19,098 - voice-business-agent - INFO - Agent speech committed:  I apologize if my response was not helpful. Let me know how I can assist you differently.
2024-12-29 15:45:19,098 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:45:29,472 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:45:29,472 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:45:31,637 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:45:31,637 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:45:32,014 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:45:32,014 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:45:32,030 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}, {'role': 'assistant', 'content': " I don't have a personal name, but you can call me Assistant. How can I assist you further today?"}, {'role': 'assistant', 'content': " I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!"}, {'role': 'user', 'content': 'Oh, what is weather in Delhi?'}, {'role': 'assistant', 'content': " I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information."}, {'role': 'assistant', 'content': " I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!"}, {'role': 'user', 'content': 'What is the capital of India?'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'user', 'content': 'Okay.'}, {'role': 'assistant', 'content': " If you have any more questions or need further assistance, feel free to ask. I'm here to help!"}, {'role': 'user', 'content': 'Model GPT4 turbo. TTS I'}, {'role': 'assistant', 'content': " It seems like you're referring to a model from OpenAI. GPT-4 is one of the versions of the Generative..."}, {'role': 'assistant', 'content': " It seems like you're referencing GPT-4 Turbo and text-to-speech (TTS) functionality. GPT-4 Turbo is a variant of the GPT-4 language model, designed to be faster and more cost-efficient. Currently, I'm just a text-based assistant and don't have built-in TTS capabilities. If you need text-to-speech, there are various services and software available that can convert text into spoken language, like those offered by Google, Microsoft, or other specialized tools. If you have more questions about these technologies or need help finding resources, let me know!"}, {'role': 'user', 'content': 'I cannot for the cry.'}, {'role': 'assistant', 'content': ' It sounds like you might be expressing...'}, {'role': 'user', 'content': 'Please stop.'}, {'role': 'assistant', 'content': ' Understood! If you need help with anything else, just let me know.'}, {'role': 'assistant', 'content': ' I apologize if my response was not helpful. Let me know how I can assist you differently.'}, {'role': 'user', 'content': 'Hello? Which service provided by you?'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:45:32,032 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:45:32,032 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:45:32,033 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:45:32,033 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:45:32,033 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:45:32,663 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:15:32 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'316'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'28904'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'2.192s'), (b'x-request-id', b'req_7a9b11f7dda68f0033feeae5f1aff821'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9907896a2454a2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:45:32,663 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:45:32,664 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:45:32,664 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:45:32,967 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'I can assist with a variety of tasks, including:  1.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:45:32,968 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:45:32,968 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:45:32,968 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:45:32,969 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:45:32,969 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:45:33,853 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:15:33 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'535'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-cjfq2'), (b'x-envoy-upstream-service-time', b'516'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d443fca415e0cbfa8e8ee161ca52be6f'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f99078f4911548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:45:33,854 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:45:33,855 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:45:33,855 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:45:34,147 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:45:34,147 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:45:34,722 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:45:34,722 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:34,722 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:45:34,723 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': '**Answering Questions**: I can provide information on a wide range of topics from science to history, and everything in between.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:45:34,724 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:45:34,724 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:45:34,725 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:45:34,725 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:45:34,725 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:45:35,363 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:45:35,364 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:35,364 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:45:35,648 - voice-business-agent - INFO - User speech committed: Hello? Which service provided by you?
2024-12-29 15:45:35,648 - voice-business-agent - INFO - User speech committed: Hello? Which service provided by you?
2024-12-29 15:45:35,679 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:45:35,679 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:45:37,022 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:45:37,022 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:45:37,026 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:15:35 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'906'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-g7prm'), (b'x-envoy-upstream-service-time', b'895'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_a93669c4cc09f50d7f4f41bdec540b65'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f99079a3f0e548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:45:37,026 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:45:37,026 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:45:37,027 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:45:37,027 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "Hello! I'm here to provide information, answer questions across a wide range of topics, assist with learning, and help solve problems. If you have a specific question or need help with something, feel free to ask!", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:45:37,030 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:45:37,032 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:45:37,032 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:45:37,033 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:45:37,033 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:45:37,483 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:45:37,484 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:37,484 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:45:37,485 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "2. **Providing Recommendations**: Whether it's books, movies, or recipes, I can offer suggestions based on your interests.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:45:37,485 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:45:37,486 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:45:37,486 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:45:37,486 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:45:37,486 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:45:38,432 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:15:38 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'643'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-859f9cd9c6-qh6lh'), (b'x-envoy-upstream-service-time', b'631'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_cb8e31f45b7eb26fc21319e97e44b3be'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9907ab7dff548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:45:38,434 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:45:38,435 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:45:38,435 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:45:38,810 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:15:38 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1465'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-s5cfk'), (b'x-envoy-upstream-service-time', b'1448'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_87bb97fcea755b8fe3c07d23bdc0f6b3'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9907a8a9ce91dc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:45:38,810 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:45:38,810 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:45:38,811 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:45:40,693 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:45:40,694 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:40,694 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:45:40,695 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': '3. **Weather Updates**: I can provide general information on how to find current weather conditions and forecasts.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:45:40,695 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:45:40,695 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:45:40,696 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:45:40,696 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:45:40,696 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:45:41,585 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:15:41 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'558'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7df576d8b7-kzxfk'), (b'x-envoy-upstream-service-time', b'545'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_0aa43af7af2eab4175a09a43ab9e7444'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9907bf8802548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:45:41,586 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:45:41,586 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:45:41,586 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:45:42,429 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:45:42,430 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:42,430 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:45:43,046 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:45:43,047 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:43,047 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:45:43,047 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': '4. **Translation Services**: I can help translate phrases or small amounts of text into various languages.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:45:43,048 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:45:43,048 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:45:43,048 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:45:43,048 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:45:43,048 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:45:44,029 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:15:44 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'616'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-x5x8s'), (b'x-envoy-upstream-service-time', b'598'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_04e1db5a0e7e1ca8aacb609807f49303'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9907ce4ae5548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:45:44,030 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:45:44,030 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:45:44,031 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:45:44,805 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:45:44,805 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:45:44,811 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:44,811 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:44,812 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:45:44,812 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:45:44,812 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:45:44,812 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:45:44,813 - livekit.agents.pipeline - ERROR - Error in _capture_task
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/agent_playout.py", line 148, in _capture_task
    await self._audio_source.capture_frame(frame)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/audio_source.py", line 152, in capture_frame
    raise Exception(cb.capture_audio_frame.error)
Exception: an RtcError occured: InvalidState - failed to capture frame
2024-12-29 15:45:44,813 - livekit.agents.pipeline - ERROR - Error in _capture_task
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/agents/pipeline/agent_playout.py", line 148, in _capture_task
    await self._audio_source.capture_frame(frame)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/livekit/rtc/audio_source.py", line 152, in capture_frame
    raise Exception(cb.capture_audio_frame.error)
Exception: an RtcError occured: InvalidState - failed to capture frame
2024-12-29 15:45:44,816 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:44,816 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:44,816 - voice-business-agent - INFO - Agent speech committed:  Hello! I'm here to provide information, answer questions across a wide range of topics, assist with learning, and help solve problems. If you have a specific question or need help with something, feel free to ask!
2024-12-29 15:45:44,816 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:45:44,816 - voice-business-agent - INFO - Agent speech committed:  Hello! I'm here to provide information, answer questions across a wide range of topics, assist with learning, and help solve problems. If you have a specific question or need help with something, feel free to ask!
2024-12-29 15:45:44,816 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:45:45,570 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:45:45,570 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:45,570 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:45:45,626 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:45:45,626 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:45:46,127 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:45:46,127 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:45:46,144 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}, {'role': 'assistant', 'content': " I don't have a personal name, but you can call me Assistant. How can I assist you further today?"}, {'role': 'assistant', 'content': " I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!"}, {'role': 'user', 'content': 'Oh, what is weather in Delhi?'}, {'role': 'assistant', 'content': " I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information."}, {'role': 'assistant', 'content': " I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!"}, {'role': 'user', 'content': 'What is the capital of India?'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'user', 'content': 'Okay.'}, {'role': 'assistant', 'content': " If you have any more questions or need further assistance, feel free to ask. I'm here to help!"}, {'role': 'user', 'content': 'Model GPT4 turbo. TTS I'}, {'role': 'assistant', 'content': " It seems like you're referring to a model from OpenAI. GPT-4 is one of the versions of the Generative..."}, {'role': 'assistant', 'content': " It seems like you're referencing GPT-4 Turbo and text-to-speech (TTS) functionality. GPT-4 Turbo is a variant of the GPT-4 language model, designed to be faster and more cost-efficient. Currently, I'm just a text-based assistant and don't have built-in TTS capabilities. If you need text-to-speech, there are various services and software available that can convert text into spoken language, like those offered by Google, Microsoft, or other specialized tools. If you have more questions about these technologies or need help finding resources, let me know!"}, {'role': 'user', 'content': 'I cannot for the cry.'}, {'role': 'assistant', 'content': ' It sounds like you might be expressing...'}, {'role': 'user', 'content': 'Please stop.'}, {'role': 'assistant', 'content': ' Understood! If you need help with anything else, just let me know.'}, {'role': 'assistant', 'content': ' I apologize if my response was not helpful. Let me know how I can assist you differently.'}, {'role': 'user', 'content': 'Hello? Which service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a variety of tasks, including:  1. **Answering Questions**: I can provide information on a wide range of topics...'}, {'role': 'assistant', 'content': " Hello! I'm here to provide information, answer questions across a wide range of topics, assist with learning, and help solve problems. If you have a specific question or need help with something, feel free to ask!"}, {'role': 'user', 'content': 'And so when I did'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:45:46,146 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:45:46,146 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:45:46,146 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:45:46,147 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:45:46,147 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:45:47,321 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:15:47 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'653'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'28810'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'2.38s'), (b'x-request-id', b'req_1742b70fa5932db0b14418f87fe4cf86'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9907e1a9d054a2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:45:47,322 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:45:47,323 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:45:47,323 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:45:47,612 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It seems like your message might have been cut off.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:45:47,614 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:45:47,614 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:45:47,614 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:45:47,615 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:45:47,615 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:45:47,983 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:45:47,983 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:47,983 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:45:48,777 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:45:48,777 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:45:48,778 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:48,778 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:49,211 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:15:49 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1300'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-86c664c4fb-56bt2'), (b'x-envoy-upstream-service-time', b'1278'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_0685022162aa55de625eef2a17a9bdf7'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9907eacacd548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:45:49,212 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:45:49,213 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:45:49,213 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:45:49,279 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:45:49,279 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:45:49,471 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:45:49,471 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:45:49,486 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}, {'role': 'assistant', 'content': " I don't have a personal name, but you can call me Assistant. How can I assist you further today?"}, {'role': 'assistant', 'content': " I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!"}, {'role': 'user', 'content': 'Oh, what is weather in Delhi?'}, {'role': 'assistant', 'content': " I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information."}, {'role': 'assistant', 'content': " I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!"}, {'role': 'user', 'content': 'What is the capital of India?'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'user', 'content': 'Okay.'}, {'role': 'assistant', 'content': " If you have any more questions or need further assistance, feel free to ask. I'm here to help!"}, {'role': 'user', 'content': 'Model GPT4 turbo. TTS I'}, {'role': 'assistant', 'content': " It seems like you're referring to a model from OpenAI. GPT-4 is one of the versions of the Generative..."}, {'role': 'assistant', 'content': " It seems like you're referencing GPT-4 Turbo and text-to-speech (TTS) functionality. GPT-4 Turbo is a variant of the GPT-4 language model, designed to be faster and more cost-efficient. Currently, I'm just a text-based assistant and don't have built-in TTS capabilities. If you need text-to-speech, there are various services and software available that can convert text into spoken language, like those offered by Google, Microsoft, or other specialized tools. If you have more questions about these technologies or need help finding resources, let me know!"}, {'role': 'user', 'content': 'I cannot for the cry.'}, {'role': 'assistant', 'content': ' It sounds like you might be expressing...'}, {'role': 'user', 'content': 'Please stop.'}, {'role': 'assistant', 'content': ' Understood! If you need help with anything else, just let me know.'}, {'role': 'assistant', 'content': ' I apologize if my response was not helpful. Let me know how I can assist you differently.'}, {'role': 'user', 'content': 'Hello? Which service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a variety of tasks, including:  1. **Answering Questions**: I can provide information on a wide range of topics...'}, {'role': 'assistant', 'content': " Hello! I'm here to provide information, answer questions across a wide range of topics, assist with learning, and help solve problems. If you have a specific question or need help with something, feel free to ask!"}, {'role': 'user', 'content': 'And so when I did Uh-huh.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:45:49,487 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:45:49,487 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:45:49,488 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:45:49,488 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:45:49,488 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:45:49,989 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:45:49,990 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:49,990 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:45:50,284 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:15:50 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'399'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'28808'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'2.384s'), (b'x-request-id', b'req_f0828a2307f6cdeba6ee3a63b4ed17aa'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9907f68ce854a2-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:45:50,285 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:45:50,286 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:45:50,286 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:45:50,306 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:45:50,306 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:45:50,307 - httpcore.http11 - DEBUG - receive_response_body.failed exception=CancelledError()
2024-12-29 15:45:50,307 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:50,307 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:50,307 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:50,308 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:45:50,627 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:45:50,627 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:45:51,004 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:45:51,004 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:45:51,022 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}, {'role': 'assistant', 'content': " I don't have a personal name, but you can call me Assistant. How can I assist you further today?"}, {'role': 'assistant', 'content': " I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!"}, {'role': 'user', 'content': 'Oh, what is weather in Delhi?'}, {'role': 'assistant', 'content': " I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information."}, {'role': 'assistant', 'content': " I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!"}, {'role': 'user', 'content': 'What is the capital of India?'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'user', 'content': 'Okay.'}, {'role': 'assistant', 'content': " If you have any more questions or need further assistance, feel free to ask. I'm here to help!"}, {'role': 'user', 'content': 'Model GPT4 turbo. TTS I'}, {'role': 'assistant', 'content': " It seems like you're referring to a model from OpenAI. GPT-4 is one of the versions of the Generative..."}, {'role': 'assistant', 'content': " It seems like you're referencing GPT-4 Turbo and text-to-speech (TTS) functionality. GPT-4 Turbo is a variant of the GPT-4 language model, designed to be faster and more cost-efficient. Currently, I'm just a text-based assistant and don't have built-in TTS capabilities. If you need text-to-speech, there are various services and software available that can convert text into spoken language, like those offered by Google, Microsoft, or other specialized tools. If you have more questions about these technologies or need help finding resources, let me know!"}, {'role': 'user', 'content': 'I cannot for the cry.'}, {'role': 'assistant', 'content': ' It sounds like you might be expressing...'}, {'role': 'user', 'content': 'Please stop.'}, {'role': 'assistant', 'content': ' Understood! If you need help with anything else, just let me know.'}, {'role': 'assistant', 'content': ' I apologize if my response was not helpful. Let me know how I can assist you differently.'}, {'role': 'user', 'content': 'Hello? Which service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a variety of tasks, including:  1. **Answering Questions**: I can provide information on a wide range of topics...'}, {'role': 'assistant', 'content': " Hello! I'm here to provide information, answer questions across a wide range of topics, assist with learning, and help solve problems. If you have a specific question or need help with something, feel free to ask!"}, {'role': 'user', 'content': 'And so when I did Uh-huh. Wait.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:45:51,023 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 15:45:51,047 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1279a6110>
2024-12-29 15:45:51,047 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x122c56720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 15:45:51,067 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1279a7810>
2024-12-29 15:45:51,068 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:45:51,068 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:45:51,068 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:45:51,068 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:45:51,068 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:45:51,740 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:15:51 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'360'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'28398'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'3.203s'), (b'x-request-id', b'req_e3265230642a9bfc22e4b73c7014373f'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9908006a0d550d-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:45:51,741 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:45:51,741 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:45:51,741 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:45:52,079 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It sounds like you might have more to say or a specific question in mind.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:45:52,081 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:45:52,081 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:45:52,081 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:45:52,082 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:45:52,082 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:45:52,340 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:45:52,341 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:52,341 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:45:53,526 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:15:53 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1145'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68b97664cf-9gbvs'), (b'x-envoy-upstream-service-time', b'1123'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_297a8cf39ece6c3c65fc5a5b851df794'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f990806bffb548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:45:53,527 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:45:53,528 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:45:53,528 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:45:53,789 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:45:53,789 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:45:54,086 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:45:54,086 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:45:54,088 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:54,088 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:45:55,001 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:45:55,002 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:45:55,002 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:46:00,365 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:46:00,365 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:46:00,384 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}, {'role': 'assistant', 'content': " I don't have a personal name, but you can call me Assistant. How can I assist you further today?"}, {'role': 'assistant', 'content': " I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!"}, {'role': 'user', 'content': 'Oh, what is weather in Delhi?'}, {'role': 'assistant', 'content': " I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information."}, {'role': 'assistant', 'content': " I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!"}, {'role': 'user', 'content': 'What is the capital of India?'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'user', 'content': 'Okay.'}, {'role': 'assistant', 'content': " If you have any more questions or need further assistance, feel free to ask. I'm here to help!"}, {'role': 'user', 'content': 'Model GPT4 turbo. TTS I'}, {'role': 'assistant', 'content': " It seems like you're referring to a model from OpenAI. GPT-4 is one of the versions of the Generative..."}, {'role': 'assistant', 'content': " It seems like you're referencing GPT-4 Turbo and text-to-speech (TTS) functionality. GPT-4 Turbo is a variant of the GPT-4 language model, designed to be faster and more cost-efficient. Currently, I'm just a text-based assistant and don't have built-in TTS capabilities. If you need text-to-speech, there are various services and software available that can convert text into spoken language, like those offered by Google, Microsoft, or other specialized tools. If you have more questions about these technologies or need help finding resources, let me know!"}, {'role': 'user', 'content': 'I cannot for the cry.'}, {'role': 'assistant', 'content': ' It sounds like you might be expressing...'}, {'role': 'user', 'content': 'Please stop.'}, {'role': 'assistant', 'content': ' Understood! If you need help with anything else, just let me know.'}, {'role': 'assistant', 'content': ' I apologize if my response was not helpful. Let me know how I can assist you differently.'}, {'role': 'user', 'content': 'Hello? Which service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a variety of tasks, including:  1. **Answering Questions**: I can provide information on a wide range of topics...'}, {'role': 'assistant', 'content': " Hello! I'm here to provide information, answer questions across a wide range of topics, assist with learning, and help solve problems. If you have a specific question or need help with something, feel free to ask!"}, {'role': 'user', 'content': 'And so when I did Uh-huh. Wait.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:46:00,385 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:46:00,386 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:46:00,386 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:46:00,386 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:46:00,386 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:46:01,135 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:16:01 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'432'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'28806'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'2.388s'), (b'x-request-id', b'req_3fd691cf4e5ef7e2aa32dfc45dfb5706'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f99083a9efe550d-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:46:01,136 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:46:01,136 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:46:01,136 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:46:01,443 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It sounds like you might have more to say or a specific question in mind.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:46:01,444 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:46:01,445 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:46:01,445 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:46:01,445 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:46:01,445 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:46:01,691 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:46:01,694 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:46:01,695 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:46:02,175 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:46:02,175 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:46:02,175 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:46:02,175 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:46:02,752 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:16:02 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'1000'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6646c6d4d-fbhhr'), (b'x-envoy-upstream-service-time', b'989'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_9dec9c3eac8edc08265f8e2cb893cecf'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9908413d3a548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:46:02,752 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:46:02,753 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:46:02,753 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:46:03,122 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:46:03,122 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:46:03,848 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:46:03,849 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:46:03,849 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:46:04,195 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:46:04,195 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:46:04,210 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}, {'role': 'assistant', 'content': " I don't have a personal name, but you can call me Assistant. How can I assist you further today?"}, {'role': 'assistant', 'content': " I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!"}, {'role': 'user', 'content': 'Oh, what is weather in Delhi?'}, {'role': 'assistant', 'content': " I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information."}, {'role': 'assistant', 'content': " I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!"}, {'role': 'user', 'content': 'What is the capital of India?'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'user', 'content': 'Okay.'}, {'role': 'assistant', 'content': " If you have any more questions or need further assistance, feel free to ask. I'm here to help!"}, {'role': 'user', 'content': 'Model GPT4 turbo. TTS I'}, {'role': 'assistant', 'content': " It seems like you're referring to a model from OpenAI. GPT-4 is one of the versions of the Generative..."}, {'role': 'assistant', 'content': " It seems like you're referencing GPT-4 Turbo and text-to-speech (TTS) functionality. GPT-4 Turbo is a variant of the GPT-4 language model, designed to be faster and more cost-efficient. Currently, I'm just a text-based assistant and don't have built-in TTS capabilities. If you need text-to-speech, there are various services and software available that can convert text into spoken language, like those offered by Google, Microsoft, or other specialized tools. If you have more questions about these technologies or need help finding resources, let me know!"}, {'role': 'user', 'content': 'I cannot for the cry.'}, {'role': 'assistant', 'content': ' It sounds like you might be expressing...'}, {'role': 'user', 'content': 'Please stop.'}, {'role': 'assistant', 'content': ' Understood! If you need help with anything else, just let me know.'}, {'role': 'assistant', 'content': ' I apologize if my response was not helpful. Let me know how I can assist you differently.'}, {'role': 'user', 'content': 'Hello? Which service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a variety of tasks, including:  1. **Answering Questions**: I can provide information on a wide range of topics...'}, {'role': 'assistant', 'content': " Hello! I'm here to provide information, answer questions across a wide range of topics, assist with learning, and help solve problems. If you have a specific question or need help with something, feel free to ask!"}, {'role': 'user', 'content': 'And so when I did Uh-huh. Wait. A pandra'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:46:04,211 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:46:04,212 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:46:04,212 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:46:04,212 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:46:04,212 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:46:04,240 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:46:04,240 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:46:04,241 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:46:04,241 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:46:04,241 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:46:04,241 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:46:04,255 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}, {'role': 'assistant', 'content': " I don't have a personal name, but you can call me Assistant. How can I assist you further today?"}, {'role': 'assistant', 'content': " I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!"}, {'role': 'user', 'content': 'Oh, what is weather in Delhi?'}, {'role': 'assistant', 'content': " I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information."}, {'role': 'assistant', 'content': " I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!"}, {'role': 'user', 'content': 'What is the capital of India?'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'user', 'content': 'Okay.'}, {'role': 'assistant', 'content': " If you have any more questions or need further assistance, feel free to ask. I'm here to help!"}, {'role': 'user', 'content': 'Model GPT4 turbo. TTS I'}, {'role': 'assistant', 'content': " It seems like you're referring to a model from OpenAI. GPT-4 is one of the versions of the Generative..."}, {'role': 'assistant', 'content': " It seems like you're referencing GPT-4 Turbo and text-to-speech (TTS) functionality. GPT-4 Turbo is a variant of the GPT-4 language model, designed to be faster and more cost-efficient. Currently, I'm just a text-based assistant and don't have built-in TTS capabilities. If you need text-to-speech, there are various services and software available that can convert text into spoken language, like those offered by Google, Microsoft, or other specialized tools. If you have more questions about these technologies or need help finding resources, let me know!"}, {'role': 'user', 'content': 'I cannot for the cry.'}, {'role': 'assistant', 'content': ' It sounds like you might be expressing...'}, {'role': 'user', 'content': 'Please stop.'}, {'role': 'assistant', 'content': ' Understood! If you need help with anything else, just let me know.'}, {'role': 'assistant', 'content': ' I apologize if my response was not helpful. Let me know how I can assist you differently.'}, {'role': 'user', 'content': 'Hello? Which service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a variety of tasks, including:  1. **Answering Questions**: I can provide information on a wide range of topics...'}, {'role': 'assistant', 'content': " Hello! I'm here to provide information, answer questions across a wide range of topics, assist with learning, and help solve problems. If you have a specific question or need help with something, feel free to ask!"}, {'role': 'user', 'content': 'And so when I did Uh-huh. Wait. A pandra Pitalis'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:46:04,257 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 15:46:04,257 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:46:04,257 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 15:46:04,257 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:46:04,257 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:46:04,258 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:46:04,269 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x127967dd0>
2024-12-29 15:46:04,269 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x122c56720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 15:46:04,282 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12798ad90>
2024-12-29 15:46:04,284 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:46:04,284 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:46:04,284 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:46:04,284 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:46:04,285 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:46:04,836 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:46:04,836 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:46:04,837 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2024-12-29 15:46:04,837 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:46:04,837 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:46:04,837 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:46:04,838 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:46:08,216 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:46:08,216 - livekit.agents.pipeline - DEBUG - received user transcript
2024-12-29 15:46:08,544 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:46:08,544 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:46:08,571 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}, {'role': 'assistant', 'content': " I don't have a personal name, but you can call me Assistant. How can I assist you further today?"}, {'role': 'assistant', 'content': " I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!"}, {'role': 'user', 'content': 'Oh, what is weather in Delhi?'}, {'role': 'assistant', 'content': " I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information."}, {'role': 'assistant', 'content': " I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!"}, {'role': 'user', 'content': 'What is the capital of India?'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'user', 'content': 'Okay.'}, {'role': 'assistant', 'content': " If you have any more questions or need further assistance, feel free to ask. I'm here to help!"}, {'role': 'user', 'content': 'Model GPT4 turbo. TTS I'}, {'role': 'assistant', 'content': " It seems like you're referring to a model from OpenAI. GPT-4 is one of the versions of the Generative..."}, {'role': 'assistant', 'content': " It seems like you're referencing GPT-4 Turbo and text-to-speech (TTS) functionality. GPT-4 Turbo is a variant of the GPT-4 language model, designed to be faster and more cost-efficient. Currently, I'm just a text-based assistant and don't have built-in TTS capabilities. If you need text-to-speech, there are various services and software available that can convert text into spoken language, like those offered by Google, Microsoft, or other specialized tools. If you have more questions about these technologies or need help finding resources, let me know!"}, {'role': 'user', 'content': 'I cannot for the cry.'}, {'role': 'assistant', 'content': ' It sounds like you might be expressing...'}, {'role': 'user', 'content': 'Please stop.'}, {'role': 'assistant', 'content': ' Understood! If you need help with anything else, just let me know.'}, {'role': 'assistant', 'content': ' I apologize if my response was not helpful. Let me know how I can assist you differently.'}, {'role': 'user', 'content': 'Hello? Which service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a variety of tasks, including:  1. **Answering Questions**: I can provide information on a wide range of topics...'}, {'role': 'assistant', 'content': " Hello! I'm here to provide information, answer questions across a wide range of topics, assist with learning, and help solve problems. If you have a specific question or need help with something, feel free to ask!"}, {'role': 'user', 'content': 'And so when I did Uh-huh. Wait. A pandra Pitalis response here.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:46:08,572 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
2024-12-29 15:46:08,596 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x127991190>
2024-12-29 15:46:08,596 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x122c56720> server_hostname='api.openai.com' timeout=15.0
2024-12-29 15:46:08,611 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x127990f10>
2024-12-29 15:46:08,611 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:46:08,611 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:46:08,611 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:46:08,612 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:46:08,612 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:46:09,394 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:16:09 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'439'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'28612'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'2.774s'), (b'x-request-id', b'req_7e088455acbd759195d65d41ff6c5690'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f99086e0a9054ba-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:46:09,396 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:46:09,396 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:46:09,396 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:46:09,671 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It sounds like you might be in the middle of a thought or question.', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:46:09,672 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:46:09,672 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:46:09,672 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:46:09,672 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:46:09,672 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:46:09,997 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:46:09,998 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:46:09,998 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:46:10,435 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:46:10,435 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:46:10,435 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:46:10,435 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:46:10,810 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:16:10 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'799'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-g69z7'), (b'x-envoy-upstream-service-time', b'786'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_697b4a31746586fec85fa9537c5bdb52'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f990874a85f548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:46:10,811 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:46:10,811 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:46:10,811 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:46:11,967 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:46:11,967 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:46:11,968 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:46:17,706 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:46:17,706 - livekit.agents.pipeline - DEBUG - validated agent reply
2024-12-29 15:46:17,734 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are a helpful voice assistant. Your primary task is to answer callers' queries. Ask for their query and provide relevant responses."}, {'role': 'assistant', 'content': ' Hello! How can I assist you today?'}, {'role': 'user', 'content': 'So which service provided by you?'}, {'role': 'assistant', 'content': ' I can help with a variety of queries such as providing information, answering general knowledge questions, giving weather updates, setting reminders, helping...'}, {'role': 'assistant', 'content': ' I...'}, {'role': 'user', 'content': 'Hello. How are you?'}, {'role': 'assistant', 'content': " Hello! I'm just a program, so I don't have feelings, but I'm here to help you! How can I assist you today?"}, {'role': 'assistant', 'content': " Hello! I'm here and ready to help you with any questions or tasks you have. How can I assist you today?"}, {'role': 'user', 'content': 'You are in a tent.'}, {'role': 'assistant', 'content': ' It sounds like you might be setting up a scenario or a joke. Could you please provide more details or let me know how I can assist you with your tent scenario?'}, {'role': 'assistant', 'content': " That sounds like an adventure! Being in a tent can mean you're out camping or enjoying nature. Is there something specific you'd like to know or discuss about being in a tent, like camping tips, safety advice, or gear recommendations? Let me know how I can help!"}, {'role': 'user', 'content': 'What type of service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a wide range of inquiries including:  1. Answering general knowledge questions. 2. Providing weather forecasts. 3. Offering cooking tips and recipes. 4. Giving directions and local business information. 5. Assisting with scheduling and reminders. 6. Providing summaries of news articles and events. 7. Translating languages. 8. Offering math and science help. 9. Recommending movies, books, and music. Feel free to ask about these services or any other information you might need help with!'}, {'role': 'assistant', 'content': ' I can help with a wide variety of tasks, including:  1. Answering questions on a wide range of topics. 2. Providing explanations and summaries for complex information. 3. Assisting with writing, editing, and generating text. 4. Offering language translation and support. 5. Providing suggestions and recommendations based on specific needs or interests. If you have a specific task or question in mind, feel free to let me know!'}, {'role': 'user', 'content': 'Okay. What is your name?'}, {'role': 'assistant', 'content': " I don't have a personal name, but you can call me Assistant. How can I assist you further today?"}, {'role': 'assistant', 'content': " I am an AI language model created by OpenAI, and you can call me Assistant. I'm here to help with any questions or tasks you have!"}, {'role': 'user', 'content': 'Oh, what is weather in Delhi?'}, {'role': 'assistant', 'content': " I'm sorry for any confusion, but I don't have real-time capabilities to check current weather conditions. To get the most accurate and up-to-date weather information for Delhi or any other location, I recommend checking a reliable weather website like the Weather Channel, BBC Weather, or using a weather app on your smartphone. These sources provide current conditions, forecasts, and other weather-related information."}, {'role': 'assistant', 'content': " I currently don't have real-time capabilities to check the weather. However, you can easily find the current weather in Delhi by using a weather app, visiting a weather website, or asking a device with internet access. If you need general information about Delhi's climate or weather patterns, feel free to ask!"}, {'role': 'user', 'content': 'What is the capital of India?'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'assistant', 'content': ' The capital of India is New Delhi.'}, {'role': 'user', 'content': 'Okay.'}, {'role': 'assistant', 'content': " If you have any more questions or need further assistance, feel free to ask. I'm here to help!"}, {'role': 'user', 'content': 'Model GPT4 turbo. TTS I'}, {'role': 'assistant', 'content': " It seems like you're referring to a model from OpenAI. GPT-4 is one of the versions of the Generative..."}, {'role': 'assistant', 'content': " It seems like you're referencing GPT-4 Turbo and text-to-speech (TTS) functionality. GPT-4 Turbo is a variant of the GPT-4 language model, designed to be faster and more cost-efficient. Currently, I'm just a text-based assistant and don't have built-in TTS capabilities. If you need text-to-speech, there are various services and software available that can convert text into spoken language, like those offered by Google, Microsoft, or other specialized tools. If you have more questions about these technologies or need help finding resources, let me know!"}, {'role': 'user', 'content': 'I cannot for the cry.'}, {'role': 'assistant', 'content': ' It sounds like you might be expressing...'}, {'role': 'user', 'content': 'Please stop.'}, {'role': 'assistant', 'content': ' Understood! If you need help with anything else, just let me know.'}, {'role': 'assistant', 'content': ' I apologize if my response was not helpful. Let me know how I can assist you differently.'}, {'role': 'user', 'content': 'Hello? Which service provided by you?'}, {'role': 'assistant', 'content': ' I can assist with a variety of tasks, including:  1. **Answering Questions**: I can provide information on a wide range of topics...'}, {'role': 'assistant', 'content': " Hello! I'm here to provide information, answer questions across a wide range of topics, assist with learning, and help solve problems. If you have a specific question or need help with something, feel free to ask!"}, {'role': 'user', 'content': 'And so when I did Uh-huh. Wait. A pandra Pitalis response here.'}], 'model': 'gpt-4-turbo', 'n': 1, 'stream': True, 'stream_options': {'include_usage': True}, 'temperature': None}}
2024-12-29 15:46:17,736 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:46:17,736 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:46:17,736 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:46:17,737 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:46:17,737 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:46:18,385 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:16:18 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'346'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'28798'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'2.404s'), (b'x-request-id', b'req_3582c960e6767062b843c1c3a6f6eec4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9908a7090554ba-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:46:18,386 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-12-29 15:46:18,386 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2024-12-29 15:46:18,386 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:46:18,792 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': "It sounds like you might be referring to something specific, but I'm not quite sure what you mean.", 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:46:18,793 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:46:18,794 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:46:18,794 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:46:18,794 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:46:18,794 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:46:19,040 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:46:19,041 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:46:19,043 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:46:20,212 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:16:20 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'597'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-68478d78f5-tqwjp'), (b'x-envoy-upstream-service-time', b'577'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_da3c89189bf2d8316022faa6277245b3'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9908adae3f548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:46:20,212 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:46:20,212 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:46:20,212 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:46:20,531 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:46:20,531 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:46:22,148 - voice-business-agent - INFO - User speech committed: And so when I did Uh-huh. Wait. A pandra Pitalis response here.
2024-12-29 15:46:22,148 - voice-business-agent - INFO - User speech committed: And so when I did Uh-huh. Wait. A pandra Pitalis response here.
2024-12-29 15:46:22,181 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:46:22,181 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fonada.app.n8n.cloud:443
2024-12-29 15:46:23,803 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:46:23,803 - urllib3.connectionpool - DEBUG - https://fonada.app.n8n.cloud:443 "POST /webhook/ba54b728-8f66-4ae6-9a28-9a06ea5f159b HTTP/1.1" 200 None
2024-12-29 15:46:23,815 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:46:23,815 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:46:23,818 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:46:23,819 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'It seems like your message is a bit unclear, but if you have a specific question or topic related to "Pitalis" or something else, feel free to provide more details. I\'m here to help with whatever information or assistance you might need!', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:46:23,822 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:46:23,823 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:46:23,823 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:46:23,823 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:46:23,824 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:46:23,827 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'json_data': {'input': 'Could you please provide more details or clarify your question so I can assist you better?', 'model': 'tts-1', 'voice': 'alloy', 'response_format': 'pcm', 'speed': 1.0}}
2024-12-29 15:46:23,828 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-29 15:46:23,829 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-29 15:46:23,829 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-29 15:46:23,829 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-29 15:46:23,829 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-29 15:46:24,898 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:16:24 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'744'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-67d4454577-4tr57'), (b'x-envoy-upstream-service-time', b'730'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_bb0d2e6fdbd496a47d1e5b45e95fdecc'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9908cd1c9b91dc-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:46:24,899 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:46:24,899 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:46:24,899 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:46:25,143 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 29 Dec 2024 10:16:25 GMT'), (b'Content-Type', b'audio/pcm'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'shivtel-communications-pvt-ltd'), (b'openai-processing-ms', b'953'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5f98989b75-jxgqw'), (b'x-envoy-upstream-service-time', b'931'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_bdd745f15706cd53125f8428a11ce150'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f9908cd19af548a-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-12-29 15:46:25,144 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
2024-12-29 15:46:25,144 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/audio/speech "200 OK"
2024-12-29 15:46:25,144 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-29 15:46:25,998 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:46:25,998 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:46:25,999 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:46:28,203 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-29 15:46:28,203 - httpcore.http11 - DEBUG - response_closed.started
2024-12-29 15:46:28,203 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-29 15:46:32,113 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:46:32,113 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:46:32,114 - voice-business-agent - INFO - Agent speech committed:  It sounds like you might be referring to something specific, but I'm not quite sure what you mean. Could you please provide more details or clarify your question so I can assist you better?
2024-12-29 15:46:32,114 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:46:32,114 - voice-business-agent - INFO - Agent speech committed:  It sounds like you might be referring to something specific, but I'm not quite sure what you mean. Could you please provide more details or clarify your question so I can assist you better?
2024-12-29 15:46:32,114 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:46:32,115 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:46:32,115 - livekit.agents.pipeline - DEBUG - speech playout started
2024-12-29 15:46:42,056 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:46:42,056 - livekit.agents.pipeline - DEBUG - agent interrupted
2024-12-29 15:46:42,059 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:46:42,059 - livekit.agents.pipeline - DEBUG - speech playout finished
2024-12-29 15:46:42,060 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:46:42,060 - livekit.agents.pipeline - DEBUG - committed agent speech
2024-12-29 15:47:10,637 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 15:47:10,639 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 15:47:10,639 - livekit.agents - DEBUG - shutting down job task
2024-12-29 15:47:10,637 - livekit - DEBUG - tungstenite::protocol:666:tungstenite::protocol - Received close frame: Some(CloseFrame { code: Normal, reason: "" })
2024-12-29 15:47:10,640 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 15:47:10,641 - livekit.agents - INFO - process exiting
2024-12-29 15:47:10,639 - livekit - DEBUG - tungstenite::protocol:683:tungstenite::protocol - Replying to close with Frame { header: FrameHeader { is_final: true, rsv1: false, rsv2: false, rsv3: false, opcode: Control(Close), mask: None }, payload: [3, 232] }
2024-12-29 15:47:10,639 - livekit.agents - DEBUG - shutting down job task
2024-12-29 15:47:10,640 - livekit - WARNING - livekit::rtc_engine:430:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2024-12-29 15:47:10,642 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 15:47:10,643 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 15:47:10,642 - livekit.agents - DEBUG - http_session(): closing the httpclient ctx
2024-12-29 15:47:10,643 - livekit - INFO - livekit::room:1129:livekit::room - disconnected from room with reason: RoomClosed
2024-12-29 15:47:10,804 - livekit.agents - WARNING - failed to connect to livekit, retrying in 0s: worker connection closed unexpectedly
2024-12-29 15:47:10,971 - livekit.agents - INFO - registered worker
